<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>小程序面试题</title>
      <link href="/2023/03/01/xiao-cheng-xu-mian-shi-ti/"/>
      <url>/2023/03/01/xiao-cheng-xu-mian-shi-ti/</url>
      
        <content type="html"><![CDATA[<h3 id="小程序面试题"><a href="#小程序面试题" class="headerlink" title="小程序面试题"></a>小程序面试题</h3><h4 id="1-简单描述下微信小程序的相关文件类型"><a href="#1-简单描述下微信小程序的相关文件类型" class="headerlink" title="1.简单描述下微信小程序的相关文件类型?"></a>1.简单描述下微信小程序的相关文件类型?</h4><p>微信小程序项目结构主要有四个文件类型：</p><p>WXML：是框架设计的一套标签语言，结合基础组件、事件系统，可以构建出页面的结构</p><p>WXSS：是一套样式语言，用于描述WXML的组件样式</p><p>js：逻辑处理</p><p>json：小程序设置，如页面注册，页面标题及tabBar主要文件</p><p>app.json ：配置文件入口，整个小程序的全局配置。必须要有这个文件，否则项目无法运行</p><p>app.js：可以在这个文件中监听处理小程序的生命周期函数。必须要有这个文件，否则项目无法运行</p><h4 id="2-小程序的双向绑定和vue哪里不一样"><a href="#2-小程序的双向绑定和vue哪里不一样" class="headerlink" title="2.小程序的双向绑定和vue哪里不一样?"></a>2.小程序的双向绑定和vue哪里不一样?</h4><p>小程序直接 this.data 的属性是不可以同步到视图的，必须调用：</p><pre><code>this.setData(&#123;    // 这里设置&#125;)</code></pre><h4 id="3-小程序页面间有哪些传递数据的方法"><a href="#3-小程序页面间有哪些传递数据的方法" class="headerlink" title="3.小程序页面间有哪些传递数据的方法?"></a>3.小程序页面间有哪些传递数据的方法?</h4><p><strong>使用全局变量实现数据传递</strong><br> 在 app.js 文件中定义全局变量 globalData， 将需要存储的信息存放在里面</p><pre class=" language-js"><code class="language-js"><span class="token comment" spellcheck="true">// app.js</span><span class="token function">App</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>     <span class="token comment" spellcheck="true">// 全局变量</span>  globalData<span class="token punctuation">:</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    userInfo<span class="token punctuation">:</span> <span class="token keyword">null</span>  <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">)</span>复制代码</code></pre><p>使用的时候，直接使用 getApp() 拿到存储的信息</p><h4 id="4-小程序的生命周期"><a href="#4-小程序的生命周期" class="headerlink" title="4.小程序的生命周期"></a>4.小程序的生命周期</h4><p>应用的生命周期：</p><p>onLaunch：小程序初始化完成时触发，全局只触发一次</p><p>onShow：小程序启动，或者从后台进入前台显示时触发</p><p>onHide：小程序从前台进入后台时触发</p><p>onError：小程序发生脚本错误时触发</p><p>onPageNotFound：小程序要打开的页面不存在时触发</p><p>页面的生命周期：</p><p>onLoad： 页面加载时触发。一个页面只会调用一次，可以在这个钩子里发送请求获取数据</p><p>onShow：页面显示&#x2F;切入前台时触发</p><p>onReady： 页面<strong>初次渲染完成</strong>时触发。一个页面只会调用一次，代表页面已经准备妥当，可以和视图层进行交互</p><p>onHide： 页面隐藏&#x2F;切入后台时触发。如 navigateTo 或底部 tab 切换到其他页面，小程序切入后台等</p><p>onUnload： 页面卸载时触发。如 redirectTo 或 navigateBack 到其他页面时</p><h4 id="5-小程序的优劣势"><a href="#5-小程序的优劣势" class="headerlink" title="5.小程序的优劣势"></a>5.小程序的优劣势</h4><p>优势：1.即用即走，不用安装；2.开发成本低</p><p>劣势：1.入口相对传统 App 要深很多 2.限制较多,页面大小不能超过2M。</p><h4 id="6-如何实现下拉刷新"><a href="#6-如何实现下拉刷新" class="headerlink" title="6.如何实现下拉刷新"></a>6.如何实现下拉刷新</h4><p>首先在全局 config 中的 window 配置 enablePullDownRefresh<br> 在 Page 中定义 onPullDownRefresh 钩子函数,到达下拉刷新条件后，该钩子函数执行，发起请求方法<br> 请求返回后，调用 wx.stopPullDownRefresh 停止下拉刷新</p><h4 id="7、bindtap和catchtap的区别是什么"><a href="#7、bindtap和catchtap的区别是什么" class="headerlink" title="7、bindtap和catchtap的区别是什么?"></a>7、bindtap和catchtap的区别是什么?</h4><p><strong>相同点</strong>：首先他们都是作为点击事件函数，就是点击时触发。在这个作用上他们是一样的，可以不做区分<br><strong>不同点</strong>：他们的不同点主要是bindtap是不会阻止冒泡事件的，catchtap是阻止冒泡的</p><h4 id="8、简述下-wx-navigateTo-wx-redirectTo-wx-switchTab-wx-navigateBack-wx-reLaunch-的区别"><a href="#8、简述下-wx-navigateTo-wx-redirectTo-wx-switchTab-wx-navigateBack-wx-reLaunch-的区别" class="headerlink" title="8、简述下 wx.navigateTo(), wx.redirectTo(), wx.switchTab(), wx.navigateBack(), wx.reLaunch()的区别?"></a>8、简述下 wx.navigateTo(), wx.redirectTo(), wx.switchTab(), wx.navigateBack(), wx.reLaunch()的区别?</h4><p>wx.navigateTo()：保留当前页面，跳转到应用内的某个页面。但是不能跳到 tabbar 页面</p><p> wx.redirectTo()：关闭当前页面，跳转到新的页面（类似重定向）。但是不允许跳转到 tabbar 页面<br> wx.switchTab()：跳转到 tabBar 页面，并关闭其他所有非 tabBar 页面<br> wx.navigateBack():关闭当前页面，返回上一页面或多级页面。可通过 getCurrentPages() 获取当前的页面栈，决定需要返回几层<br> wx.reLaunch()：关闭所有页面，打开到应用内的某个页面</p><h4 id="9、登录流程？"><a href="#9、登录流程？" class="headerlink" title="9、登录流程？"></a>9、<strong>登录流程？</strong></h4><p>登录流程是调wx.login获取code传给后台服务器获取微信用户唯一标识openid及本次登录的会话密钥（session_key）等）。拿到开发者服务器传回来的会话密钥（session_key）之后，前端要保存wx.setStorageSync(‘sessionKey’, ‘value’)</p><p>持久登录状态：session信息存放在cookie中以请求头的方式带回给服务端，放到request.js里的wx.request的header里</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>前端主题切换方案详解</title>
      <link href="/2023/03/01/qian-duan-zhu-ti-qie-huan/"/>
      <url>/2023/03/01/qian-duan-zhu-ti-qie-huan/</url>
      
        <content type="html"><![CDATA[<h3 id="前端主题切换方案详解"><a href="#前端主题切换方案详解" class="headerlink" title="前端主题切换方案详解"></a>前端主题切换方案详解</h3><h4 id="1-link标签动态引入"><a href="#1-link标签动态引入" class="headerlink" title="1.link标签动态引入"></a>1.link标签动态引入</h4><p>其做法就是提前准备好几套CSS主题样式文件，在需要的时候，创建link标签动态加载到head标签中，或者是动态改变link标签的href属性。</p><pre><code>&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt;&lt;head&gt;    &lt;meta charset=&quot;UTF-8&quot;&gt;    &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot;&gt;    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;    &lt;title&gt;Document&lt;/title&gt;    &lt;style&gt;        * &#123;            margin: 0;            padding: 0;        &#125;        body &#123;            transition: background 1s;            background: #000;        &#125;        button &#123;            position: fixed;            top: 50%;            left: 50%;            transition: color 1s;            transform: translate(-50%, -50%);            padding: 20px;            border: none;            background: #fff;            font-size: 25px;            color: #000;        &#125;    &lt;/style&gt;&lt;/head&gt;&lt;body&gt;    &lt;button&gt;点击切换&lt;/button&gt;    &lt;script&gt;        document.querySelectorAll(&quot;button&quot;)[0].addEventListener(&quot;click&quot;, () =&gt; &#123;            var doc = document            var link = doc.createElement(&quot;link&quot;)            link.setAttribute(&#39;rel&#39;, &#39;stylesheet&#39;)            link.setAttribute(&quot;href&quot;, &#39;./theme-pink.css&#39;);            var heads = doc.getElementsByTagName(&quot;head&quot;);            console.log(heads);            if (heads.length) &#123;                heads[0].appendChild(link);            &#125; else &#123;                doc.documentElement.appendChild(link);            &#125;        &#125;)    &lt;/script&gt;&lt;/body&gt;&lt;/html&gt;</code></pre><p>优点：实现了按需加载，提高了首屏的加载性能</p><p>缺点：1.动态加载样式文件，会导致样式切换不流畅</p><p>2.可能会存在样式优先级的问题</p><p>3.后续对样式的修改或者新增主题比较麻烦</p><h4 id="2-提前引入所有主题样式，做类名切换"><a href="#2-提前引入所有主题样式，做类名切换" class="headerlink" title="2.提前引入所有主题样式，做类名切换"></a>2.提前引入所有主题样式，做类名切换</h4><p>这种方案与第一种比较类似，为了解决反复加载样式文件问题提前将样式全部引入，在需要切换主题的时候将指定的根元素类名更换，相当于直接做了样式覆盖，在该类名下的各个样式就统一地更换了。</p><pre><code>&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt;&lt;head&gt;    &lt;meta charset=&quot;UTF-8&quot;&gt;    &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot;&gt;    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;    &lt;title&gt;Document&lt;/title&gt;    &lt;style&gt;        body.day .box &#123;color: #f90;background: #fff;&#125;        body.dark .box &#123;color: #eee;background: #333;&#125;        .box &#123;width: 100px;height: 100px;border: 1px solid #000;&#125;    &lt;/style&gt;&lt;/head&gt;&lt;body&gt;    &lt;div class=&quot;box&quot;&gt;&lt;p&gt;hello&lt;/p&gt;&lt;/div&gt;    &lt;p&gt;  选择样式：&lt;button onclick=&quot;change(&#39;day&#39;)&quot;&gt;day&lt;/button&gt;&lt;button onclick=&quot;change(&#39;dark&#39;)&quot;&gt;dark&lt;/button&gt;&lt;/p&gt;&lt;/body&gt;&lt;script&gt;    function change(theme)&#123;document.body.className = theme;&#125;&lt;/script&gt;&lt;/html&gt;</code></pre><p>优点：不用重新加载样式文件，在样式切换时不会有卡顿</p><p>缺点：1.会降低首屏加载的效率（会加载更多的样式）</p><ol start="2"><li>可能会存在样式优先级的问题</li><li>后续对样式的修改或者新增主题比较麻烦</li></ol><h4 id="3-CSS变量-类名切换"><a href="#3-CSS变量-类名切换" class="headerlink" title="3.CSS变量+类名切换"></a>3.CSS变量+类名切换</h4><pre><code>&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt;  &lt;head&gt;    &lt;meta charset=&quot;UTF-8&quot; /&gt;    &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot; /&gt;    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot; /&gt;    &lt;title&gt;Document&lt;/title&gt;    &lt;style&gt;      * &#123;        margin: 0;        padding: 0;      &#125;      :root &#123;        --bg: #000;        --fontSize: 25px;      &#125;      .pink-theme &#123;        --bg: hotpink;      &#125;      body &#123;        transition: background 1s;        background: var(--bg);      &#125;      button &#123;        position: fixed;        top: 50%;        left: 50%;        transition: color 1s;        transform: translate(-50%, -50%);        padding: 20px;        border: none;        background: #fff;        font-size: var(--fontSize);        color: var(--bg);      &#125;    &lt;/style&gt;  &lt;/head&gt;  &lt;body&gt;    &lt;button&gt;点击切换&lt;/button&gt;    &lt;script&gt;      document.querySelector(&quot;button&quot;).addEventListener(&quot;click&quot;, () =&gt; &#123;        if (document.body.classList.contains(&quot;pink-theme&quot;)) &#123;          document.body.classList.remove(&quot;pink-theme&quot;);        &#125; else &#123;          document.body.classList.add(&quot;pink-theme&quot;);        &#125;      &#125;);    &lt;/script&gt;  &lt;/body&gt;&lt;/html&gt;</code></pre><p>优点：1.不用重新加载样式文件，在样式切换时不会有卡顿</p><p>2.在需要切换主题的地方利用var()绑定变量即可，不存在优先级问题</p><p>3.新增或修改主题方便灵活，仅需新增或修改CSS变量即可，在var()绑定样式变量的地方就会自动更换</p><p>缺点：会降低首屏加载的效率（会加载更多的样式）</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>JavaScript基础面试题</title>
      <link href="/2022/10/08/javascript-ji-chu-mian-shi-ti/"/>
      <url>/2022/10/08/javascript-ji-chu-mian-shi-ti/</url>
      
        <content type="html"><![CDATA[<h3 id="JavaScript基础面试题"><a href="#JavaScript基础面试题" class="headerlink" title="JavaScript基础面试题"></a>JavaScript基础面试题</h3><h4 id="1-描述一下document-load和document-ready"><a href="#1-描述一下document-load和document-ready" class="headerlink" title="1.描述一下document.load和document.ready"></a>1.描述一下document.load和document.ready</h4><p>一般来说页面加载完成有两种事件</p><p>1.load是当页面所有资源全部加载完成之后（DOM文档树、CSS、JS、图片）执行的一个函数</p><pre><code>$(document).load(function)&#123;    .....code....&#125;</code></pre><p>2.$(document).ready()是当DOM文档树加载完成之后执行的一个函数，所以比load较快执行</p><pre><code>//document ready$(document).ready(function()&#123;    ...code...&#125;)//document ready 简写$(function()&#123;    ...code...&#125;)</code></pre><h4 id="2-x3D-x3D-和-x3D-x3D-x3D-的区别"><a href="#2-x3D-x3D-和-x3D-x3D-x3D-的区别" class="headerlink" title="2.&#x3D;&#x3D;和&#x3D;&#x3D;&#x3D;的区别"></a>2.&#x3D;&#x3D;和&#x3D;&#x3D;&#x3D;的区别</h4><p>①对于string、number等基础类型，&#x3D;&#x3D;和&#x3D;&#x3D;&#x3D;是有区别的</p><p>不同类型间比较，&#x3D;&#x3D;会转化为同一类型后比较值是否相等，&#x3D;&#x3D;&#x3D;如果类型不同，其结果就是不等</p><p>同类型比较，直接比较值是否相等</p><p>②对于Array、Object等高级类型，&#x3D;&#x3D;和&#x3D;&#x3D;&#x3D;是没有区别的</p><p>比较指针所指向地址</p><p>③基础类型和高级类型</p><p>&#x3D;&#x3D;会将高级类型转化为基础类型，进行值比较</p><p>&#x3D;&#x3D;&#x3D;因为类型不同结果为false</p><h4 id="3-js在new做了什么"><a href="#3-js在new做了什么" class="headerlink" title="3.js在new做了什么"></a>3.js在new做了什么</h4><p>1.创建一个空对象</p><p>2.改变原型，让对象的原型指向构造函数的prototype属性</p><p>3.让函数的this指向这个对象，执行构造函数的代码</p><p>4.判断函数的返回值，如果是值类型，返回创建的对象。如果是引用类型，返回引用类型的对象</p><h4 id="4-什么是事件循环机制"><a href="#4-什么是事件循环机制" class="headerlink" title="4.什么是事件循环机制"></a>4.什么是事件循环机制</h4><p>js是一门单线程的语言，它将代码分为同步代码和异步代码。在执行代码的过程中，如果遇到同步代码，就把同步代码放入到函数调用栈中去执行，如果遇到异步代码，就将它放入到event table里面，等待特定事件完成后，再来将相关的回调函数放入到任务队列中去。</p><p>任务队列有宏任务和微任务两种队列，宏任务包括script、setTimeout、setInterval、setImmediate，微任务包括promise.then，process.nextTick，mutationObserver。</p><p>整体执行流程就是将调用栈的同步代码执行完后，查看微任务队列里面是否有微任务，如果有的话则拿出来执行，在这个过程中产生的微任务也需要在后面执行，待微任务队列清空后，再从宏任务队列中拿出一个宏任务来执行，以此循环。</p><h4 id="5-前端性能优化"><a href="#5-前端性能优化" class="headerlink" title="5.前端性能优化"></a>5.前端性能优化</h4><p>减少http请求数，设置http缓存，使用cdn，压缩前端代码，样式置于页面顶部header中，脚本至于页面底部，减少DOM操作，资源按需加载，服务端开启gzip</p><h4 id="6-函数柯里化"><a href="#6-函数柯里化" class="headerlink" title="6.函数柯里化"></a>6.函数柯里化</h4><p>函数柯里化将使用多个参数的函数转化为一系列使用一个参数的函数，他返回一个新的函数，用新函数来处理剩余的参数，是一个典型的闭包使用，他的作用主要用来参数复用，提前确认和延迟计算</p><h4 id="7-localStorage能不能大量使用"><a href="#7-localStorage能不能大量使用" class="headerlink" title="7.localStorage能不能大量使用"></a>7.localStorage能不能大量使用</h4><p>localStorage不建议大量使用，会影响性能</p><h4 id="8-JS-windows对象详解"><a href="#8-JS-windows对象详解" class="headerlink" title="8.JS windows对象详解"></a>8.JS windows对象详解</h4><p>window 是客户端浏览器对象模型的基类，window 对象是客户端 JavaScript 的全局对象。一个 window 对象实际上就是一个独立的窗口，对于框架页面来说，浏览器窗口每个框架都包含一个 window 对象。</p><h5 id="全局作用域"><a href="#全局作用域" class="headerlink" title="全局作用域"></a><strong>全局作用域</strong></h5><p>在客户端浏览器中，window 对象是访问 BOM 的接口，如引用 document 对象的 document 属性，引用自身的 window 和 self 属性等。同时 window 也为客户端 JavaScript 提供全局作用域。</p><p>示例</p><p>由于 window 是全局对象，因此所有的全局变量都被解析为该对象的属性。</p><pre><code>var a = &quot;window.a&quot;;  //全局变量    function f () &#123;  //全局函数    console.log(a);&#125;console.log(window.a);  //返回字符串“window.a”复制代码</code></pre><p>window.f(); &#x2F;&#x2F;返回字符串“window.a”</p><p>使用 delete 运算符可以删除属性，但是不能删除变量。</p><h5 id="访问客户端对象"><a href="#访问客户端对象" class="headerlink" title="访问客户端对象"></a>访问客户端对象</h5><p>使用 window 对象可以访问客户端其他对象，这种关系构成浏览器对象模型，window 对象代表根节点，浏览器对象关系的关系如图所示，每个对象说明如下。</p><p>window：客户端 JavaScript 顶层对象。每当 或 标签出现时，window 对象就会被自动创建。</p><p>navigator：包含客户端有关浏览器信息。</p><p>screen：包含客户端屏幕的信息。</p><p>history：包含浏览器窗口访问过的 URL 信息。</p><p>location：包含当前网页文档的 URL 信息。</p><p>document：包含整个 HTML 文档，可被用来访问文档内容及其所有页面元素</p><h5 id="使用系统对话框"><a href="#使用系统对话框" class="headerlink" title="使用系统对话框"></a>使用系统对话框</h5><p>window 对象定义了 3 个人机交互的方法，主要方便对 JavaScript 代码进行调试。</p><p>alert()：确定提示框。由浏览器向用户弹出提示性信息。该方法包含一个可选的提示信息参数。如果没有指定参数，则弹出一个空的对话框。</p><p>confirm()：选择提示框。。由浏览器向用户弹出提示性信息，弹出的对话框中包含两个按钮，分别表示“确定”和“取消”按钮。如果点击“确定”按钮，则该方法将返回 true；单击“取消”按钮，则返回 false。confirm() 方法也包含一个可选的提示信息参数，如果没有指定参数，则弹出一个空的对话框。</p><p>prompt()：输入提示框。可以接收用户输入的信息，并返回输入的信息。prompt() 方法也包含一个可选的提示信息参数，如果没有指定参数，则弹出一个没有提示信息的输入文本对话框。</p><p>示例1<br>下面示例演示了如何综合调用这 3 个方法来设计一个人机交互的对话。</p><pre><code>var user = prompt(&quot;请输入您的用户名&quot;);if (!! user) &#123;  //把输入的信息转换为布尔值var ok = confirm (&quot;您输入的用户名为：\n&quot; + user + &quot;\n 请确认。&quot;);  //输入信息确认    if (ok) &#123;        alert (&quot;欢迎您：\n&quot; + user);    &#125; else &#123;  //重新输入信息        user = prompt (&quot;请重新输入您的用户名：&quot;);        alert (&quot;欢迎您：\n&quot; + user);    &#125;&#125;else &#123;  //提示输入信息    user = prompt (&quot;请输入您的用户名：&quot;);&#125;复制代码</code></pre><p>使用 window 对象的 open() 方法可以打开一个新窗口。用法如下：</p><pre><code>window.open (URL, name, features, replace)复制代码</code></pre><p>参数列表如下：</p><p>URL：可选字符串，声明在新窗口中显示网页文档的 URL。如果省略，或者为空，则新窗口就不会显示任何文档。</p><p>name：可选字符串，声明新窗口的名称。这个名称可以用作标记 &lt; a &gt; 和 &lt; form &gt; 的 target 目标值。如果该参数指定了一个已经存在的窗口，那么 open() 方法就不再创建一个新窗口，而只是返回对指定窗口的引用，在这种情况下，features 参数将被忽略。</p><p>features：可选字符串，声明了新窗口要显示的标准浏览器的特征，具体说明如下表所示。如果省略该参数，新窗口将具有所有标准特征。</p><p>replace：可选的布尔值。规定了装载到窗口的 URL 是在窗口的浏览历史中创建一个新条目，还是替换浏览历史中的当前条目。</p><p>新创建的 window 对象拥有一个 opener 属性，引用打开它的原始对象。opener 只在弹出窗口的最外层 window 对象（top）中定义，而且指向调用 window.open() 方法的窗口或框架。</p><p>示例</p><p>下面示例演示了打开的窗口与原窗口之间的关系。</p><pre><code>win = window.open();  //打开新的空白窗口win.document.write (&quot;&lt;h1&gt;这是新打开的窗口&lt;/h1&gt;&quot;);  //在新窗口中输出提示信息win.focus ();  //让原窗口获取焦点win.opener.document.write (&quot;&lt;h1&gt;这是原来窗口&lt;/h1&gt;&quot;);  //在原窗口中输出提示信息console.log(win.opener == window);  //检测window.opener属性值</code></pre><p>使用 window 的 close() 方法可以关闭一个窗口。例如，关闭一个新创建的 win 窗口可以使用下面的方法实现。</p><pre><code>win.close;复制代码</code></pre><p>如果在打开窗口内部关闭自身窗口，则应该使用下面的方法。</p><pre><code>window.close;复制代码</code></pre><h3 id="9-JavaScript中的钩子是什么？"><a href="#9-JavaScript中的钩子是什么？" class="headerlink" title="9.JavaScript中的钩子是什么？"></a>9.JavaScript中的钩子是什么？</h3><p><strong>hook是一种特殊的消息处理机制，它可以监视系统或者进程中的各种事件信息，截获发往目标窗口的消息进行处理。</strong>它是一个回调函数，且系统消息触发时被系统调用，而不是用户自己触发，钩子函数一般是在某个框架里面的叫法，是这个框架在生命周期的某个阶段触发的回调函数。</p><h3 id="10-instanceof的手写实现"><a href="#10-instanceof的手写实现" class="headerlink" title="10.instanceof的手写实现"></a>10.instanceof的手写实现</h3><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">myInstanceof</span><span class="token punctuation">(</span>left<span class="token punctuation">,</span> right<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>  <span class="token keyword">let</span> proto <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">getPrototypeOf</span><span class="token punctuation">(</span>left<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">// 获得原型左边的原型 </span>  <span class="token keyword">let</span> prototype <span class="token operator">=</span> right<span class="token punctuation">.</span>prototype<span class="token punctuation">;</span>   <span class="token comment" spellcheck="true">// 获得右边的原型</span>  <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>proto<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 3、原型链的尽头是null 直到最后没有找到的话 说明左右不是一条‘路’的</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>proto <span class="token operator">===</span> prototype<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 1、如果左右两个原型一样的话 说明右边的构造函数的prototype 在左边实例对象的原型链上</span>    proto <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">getPrototypeOf</span><span class="token punctuation">(</span>proto<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 2、如果没有比对成功那么继续往上找左边的原型</span>  <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span></code></pre><h3 id="11-数组转为字符串"><a href="#11-数组转为字符串" class="headerlink" title="11.数组转为字符串"></a>11.数组转为字符串</h3><p>有两种方法，分别是toString() 和join方法</p><pre class=" language-javascript"><code class="language-javascript"><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// '1,2,3,4'</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">//'1234'</span></code></pre><h3 id="12-字符串转为数组"><a href="#12-字符串转为数组" class="headerlink" title="12.字符串转为数组"></a>12.字符串转为数组</h3><p>有两种方式，分别是拓展运算符和Array.from</p><pre><code>let str = [...&#39;hello&#39;]let str1 = Array.from(&#39;hello&#39;)</code></pre>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>JavaScript数据结构与算法</title>
      <link href="/2022/10/08/javascript-shu-ju-jie-gou-yu-suan-fa/"/>
      <url>/2022/10/08/javascript-shu-ju-jie-gou-yu-suan-fa/</url>
      
        <content type="html"><![CDATA[<h1 id="JavaScript数据结构与算法"><a href="#JavaScript数据结构与算法" class="headerlink" title="JavaScript数据结构与算法"></a>JavaScript数据结构与算法</h1><h2 id="JavaScript实现栈结构（Stack）"><a href="#JavaScript实现栈结构（Stack）" class="headerlink" title="JavaScript实现栈结构（Stack）"></a>JavaScript实现栈结构（Stack）</h2><h3 id="一、前言"><a href="#一、前言" class="headerlink" title="一、前言"></a>一、前言</h3><h4 id="1-1-什么是数据结构？"><a href="#1-1-什么是数据结构？" class="headerlink" title="1.1.什么是数据结构？"></a>1.1.什么是数据结构？</h4><p>数据结构就是在计算机中，存储和组织数据的方式。</p><p>例如：图书管理，怎样摆放图书才能既能放很多书，也方便取？</p><p>主要需要考虑两个问题：</p><ul><li>操作一：新书怎么插入？</li><li>操作二：怎么找到某本指定的书？</li></ul><p><strong>常见的数据结构：</strong></p><ul><li><strong>数组</strong>（Aarray）</li><li><strong>栈</strong>（Stack）</li><li><strong>链表</strong>（Linked List）</li><li><strong>图</strong>（Graph）</li><li><strong>散列表</strong>（Hash）</li><li><strong>队列</strong>（Queue）</li><li><strong>树</strong>（Tree）</li><li><strong>堆</strong>（Heap）</li></ul><p><strong>注意</strong>：数据结构与算法与语言无关，常见的编程语言都有<strong>直接或间接</strong>的使用上述常见的数据结构。</p><h4 id="1-2-什么是算法？"><a href="#1-2-什么是算法？" class="headerlink" title="1.2.什么是算法？"></a>1.2.什么是算法？</h4><p>算法（Algorithm）的定义</p><ul><li>一个有限指令集，每条指令的描述不依赖于语言；</li><li>接收一些输入（有些情况下不需要输入）；</li><li>产生输入；</li><li>一定在有限步骤之后终止；</li></ul><p>算法通俗理解：解决问题的办法&#x2F;步骤逻辑。数据结构的实现，离不开算法。</p><h3 id="二、栈结构（Stack）"><a href="#二、栈结构（Stack）" class="headerlink" title="二、栈结构（Stack）"></a>二、栈结构（Stack）</h3><h4 id="2-1-简介"><a href="#2-1-简介" class="headerlink" title="2.1.简介"></a>2.1.简介</h4><p>数组是一个线性结构，并且可以在数组的<strong>任意位置</strong>插入和删除元素。而<strong>栈和队列</strong>就是比较常见的<strong>受限的线性结构</strong>。如下图所示：</p><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%A0%88/1.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%A0%88/1.png" alt="image-20200226131817102"></a></p><p>image-20200226131817102</p><p>栈的特点为<strong>先进后出，后进先出</strong>（LIFO：last in first out）。</p><p><strong>程序中的栈结构：</strong></p><ul><li><strong>函数调用栈</strong>：A（B（C（D（））））：即A函数中调用B，B调用C，C调用D；在A执行的过程中会将A压入栈，随后B执行时B也被压入栈，函数C和D执行时也会被压入栈。所以当前栈的顺序为：A-&gt;B-&gt;C-&gt;D（栈顶）；函数D执行完之后，会弹出栈被释放，弹出栈的顺序为D-&gt;C-&gt;B-&gt;A;</li><li><strong>递归</strong>：为什么没有停止条件的递归会造成栈溢出？比如函数A为递归函数，不断地调用自己（因为函数还没有执行完，不会把函数弹出栈），不停地把相同的函数A压入栈，最后造成<strong>栈溢出</strong>（Stack Overfloat）</li></ul><p>3.练习：题目：有6个元素6，5，4，3，2，1按顺序进栈，问下列哪一个不是合法的出栈顺序？</p><ul><li>A：5 4 3 6 1 2 （√）</li><li>B：4 5 3 2 1 6 （√）</li><li>C：3 4 6 5 2 1 （×）</li><li>D：2 3 4 1 5 6 （√）</li></ul><p>题目所说的按顺序进栈指的不是一次性全部进栈，而是有进有出，进栈顺序为6 -&gt; 5 -&gt; 4 -&gt; 3 -&gt; 2 -&gt; 1。</p><p>解析：</p><ul><li>A答案：65进栈，5出栈，4进栈出栈，3进栈出栈，6出栈，21进栈，1出栈，2出栈（整体入栈顺序符合654321）;</li><li>B答案：654进栈，4出栈，5出栈，3进栈出栈，2进栈出栈，1进栈出栈，6出栈（整体的入栈顺序符合654321）;</li><li>C答案：6543进栈，3出栈，4出栈，之后应该5出栈而不是6，所以错误；</li><li>D答案：65432进栈，2出栈，3出栈，4出栈，1进栈出栈，5出栈，6出栈。符合入栈顺序；</li></ul><p><strong>栈常见的操作：</strong></p><ul><li>push（element）：添加一个新元素到栈顶位置；</li><li>pop（）：移除栈顶的元素，同时返回被移除的元素；</li><li>peek（）：返回栈顶的元素，不对栈做任何修改（该方法不会移除栈顶的元素，仅仅返回它）；</li><li>isEmpty（）：如果栈里没有任何元素就返回true，否则返回false；</li><li>size（）：返回栈里的元素个数。这个方法和数组的length属性类似；</li><li>toString（）：将栈结构的内容以字符串的形式返回。</li></ul><h4 id="2-2-封装栈类"><a href="#2-2-封装栈类" class="headerlink" title="2.2.封装栈类"></a>2.2.封装栈类</h4><p><strong>代码实现：</strong></p><pre class=" language-javascript"><code class="language-javascript">    <span class="token comment" spellcheck="true">// 封装栈类</span>    <span class="token keyword">function</span> <span class="token function">Stack</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>      <span class="token comment" spellcheck="true">// 栈中的属性</span>      <span class="token keyword">this</span><span class="token punctuation">.</span>items <span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span>      <span class="token comment" spellcheck="true">// 栈的相关操作</span>      <span class="token comment" spellcheck="true">// 1.push():将元素压入栈</span>      <span class="token comment" spellcheck="true">//方式一(不推荐)：给对象添加方法，其他对象不能复用</span>      <span class="token comment" spellcheck="true">// this.push = () => &amp;#123;</span>      <span class="token comment" spellcheck="true">// &amp;#125;</span>            <span class="token comment" spellcheck="true">//方式二(推荐)：给Stack类添加方法，能够多对象复用</span>      Stack<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>push <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>element<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>      <span class="token comment" spellcheck="true">// 利用数组item的push方法实现Stack类的pop方法</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>items<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>element<span class="token punctuation">)</span>      <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>      <span class="token comment" spellcheck="true">// 2.pop():从栈中取出元素</span>      Stack<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>pop <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>      <span class="token comment" spellcheck="true">// 利用数组item的pop方法实现Stack类的pop方法</span>        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>items<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>      <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>      <span class="token comment" spellcheck="true">// 3.peek():查看一下栈顶元素</span>      Stack<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>peek <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>items<span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>items<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span>      <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>      <span class="token comment" spellcheck="true">// 4.isEmpty():判断栈是否为空</span>      Stack<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>isEmpty <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>      <span class="token comment" spellcheck="true">// 两个小时的教训啊不是this.length(不是Stack对象的length，Stack类没有length属性啊)，而是Stack类中定义的数组items才有length属性呀</span>        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>items<span class="token punctuation">.</span>length <span class="token operator">==</span> <span class="token number">0</span>       <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>      <span class="token comment" spellcheck="true">// 5.size():获取栈中元素的个数</span>      Stack<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>size <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>items<span class="token punctuation">.</span>length      <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>      <span class="token comment" spellcheck="true">// 6.toString():以字符串形式输出栈内数据</span>      Stack<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>toString <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//希望输出的形式：20 10 12 8 7</span>        <span class="token keyword">let</span> resultString <span class="token operator">=</span> <span class="token string">''</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token keyword">of</span> <span class="token keyword">this</span><span class="token punctuation">.</span>items<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>          resultString <span class="token operator">+</span><span class="token operator">=</span> i <span class="token operator">+</span> <span class="token string">' '</span>        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> resultString      <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span></code></pre><p><strong>测试代码：</strong></p><pre class=" language-javascript"><code class="language-javascript"> <span class="token comment" spellcheck="true">// 栈的使用</span>    <span class="token keyword">let</span>  s <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Stack</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    s<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span>    s<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>    s<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span>    s<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token number">77</span><span class="token punctuation">)</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token comment" spellcheck="true">//65</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//68</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//69</span>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">peek</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//71</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//72</span>       console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//74</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//75</span></code></pre><p><strong>测试结果：</strong></p><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%A0%88/2.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%A0%88/2.png" alt="image-20200305205050816"></a></p><p>image-20200305205050816</p><p><strong>栈结构的简单应用：</strong></p><p>利用栈结构的特点封装十进至转换为二进至的函数：</p><pre class=" language-javascript"><code class="language-javascript">    <span class="token comment" spellcheck="true">//简单应用：</span>    <span class="token comment" spellcheck="true">//封装函数：将十进制转成二进制(十转二的运算最后倒叙取余的特点符合栈'先进后出')</span>    <span class="token keyword">let</span> dec2bin <span class="token operator">=</span> decNumber <span class="token operator">=</span><span class="token operator">></span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>      <span class="token comment" spellcheck="true">//1.定义一个栈对象，保存余数</span>      <span class="token keyword">var</span>  stack <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Stack</span><span class="token punctuation">(</span><span class="token punctuation">)</span>      <span class="token comment" spellcheck="true">// 2.循环操作</span>      <span class="token keyword">while</span><span class="token punctuation">(</span>decNumber <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// 2.1.获取余数并放入栈中</span>        stack<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>decNumber <span class="token operator">%</span> <span class="token number">2</span><span class="token punctuation">)</span>        <span class="token comment" spellcheck="true">// 2.2.获取整除后的结果作为下一次运算的数字(floor:向下取整)</span>        decNumber <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>decNumber <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span>      <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// 3.从栈中取出0和1</span>      <span class="token keyword">let</span>  binaryString <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>      <span class="token keyword">let</span> a <span class="token operator">=</span> stack<span class="token punctuation">.</span>items<span class="token punctuation">.</span>length     <span class="token keyword">while</span><span class="token punctuation">(</span>stack<span class="token punctuation">.</span>items<span class="token punctuation">.</span>length <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        binaryString <span class="token operator">+</span><span class="token operator">=</span> stack<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>      <span class="token keyword">return</span> binaryString<span class="token punctuation">;</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//测试代码</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">dec2bin</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//103</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">dec2bin</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//104</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">dec2bin</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//105</span></code></pre><p><strong>测试结果：</strong></p><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%A0%88/3.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%A0%88/3.png" alt="image-20200305205547226"></a></p><h2 id="JavaScript实现队列结构（Queue）"><a href="#JavaScript实现队列结构（Queue）" class="headerlink" title="JavaScript实现队列结构（Queue）"></a>JavaScript实现队列结构（Queue）</h2><h3 id="一、队列简介"><a href="#一、队列简介" class="headerlink" title="一、队列简介"></a>一、队列简介</h3><p>队列是是一种受限的线性表，特点为<strong>先进先出</strong>（<strong>FIFO</strong>：first in first out）。</p><ul><li>受限之处在于它只允许在表的<strong>前端</strong>（front）进行删除操作；</li><li>在表的<strong>后端</strong>（rear）进行插入操作；</li></ul><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E9%98%9F%E5%88%97/1.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E9%98%9F%E5%88%97/1.png" alt="image-20200226171659886"></a></p><p>相当于排队买票，先来的先买票，后来的后买票。</p><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E9%98%9F%E5%88%97/2.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E9%98%9F%E5%88%97/2.png" alt="image-20200226171449228"></a></p><p><strong>队列的应用：</strong></p><ul><li>打印队列：计算机打印多个文件的时候，需要排队打印；</li><li>线程队列：当开启多线程时，当新开启的线程所需的资源不足时就先放入线程队列，等待CPU处理；</li></ul><p><strong>队列类的实现：</strong></p><p>队列的实现和栈一样，有两种方案：</p><ul><li>基于数组实现；</li><li>基于链表实现；</li></ul><p><strong>队列的常见操作：</strong></p><ul><li>enqueue（element）：向队列尾部添加一个（或多个）新的项；</li><li>dequeue（）：移除队列的第一（即排在队列最前面的）项，并返回被移除的元素；</li><li>front（）：返回队列中的第一个元素——最先被添加，也将是最先被移除的元素。队列不做任何变动（不移除元素，只返回元素信息与Stack类的peek方法非常类似）；</li><li>isEmpty（）：如果队列中不包含任何元素，返回true，否则返回false；</li><li>size（）：返回队列包含的元素个数，与数组的length属性类似；</li><li>toString（）：将队列中的内容，转成字符串形式；</li></ul><h3 id="二、封装队列类"><a href="#二、封装队列类" class="headerlink" title="二、封装队列类"></a>二、封装队列类</h3><h4 id="2-1-代码实现"><a href="#2-1-代码实现" class="headerlink" title="2.1.代码实现"></a>2.1.代码实现</h4><pre class=" language-javascript"><code class="language-javascript">    <span class="token comment" spellcheck="true">// 基于数组封装队列类</span>    <span class="token keyword">function</span> <span class="token function">Queue</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// 属性</span>      <span class="token keyword">this</span><span class="token punctuation">.</span>items <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>          <span class="token comment" spellcheck="true">// 方法</span>    <span class="token comment" spellcheck="true">// 1.enqueue():将元素加入到队列中</span>    Queue<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>enqueue <span class="token operator">=</span> element <span class="token operator">=</span><span class="token operator">></span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>      <span class="token keyword">this</span><span class="token punctuation">.</span>items<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>element<span class="token punctuation">)</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// 2.dequeue():从队列中删除前端元素</span>    Queue<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>dequeue <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>items<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// 3.front():查看前端的元素</span>    Queue<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>front <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>items<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// 4.isEmpty:查看队列是否为空</span>    Queue<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>isEmpty <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>items<span class="token punctuation">.</span>length <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// 5.size():查看队列中元素的个数</span>    Queue<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>size <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>items<span class="token punctuation">.</span>length    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// 6.toString():将队列中元素以字符串形式输出</span>    Queue<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>toString <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>      <span class="token keyword">let</span> resultString <span class="token operator">=</span> <span class="token string">''</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token keyword">of</span> <span class="token keyword">this</span><span class="token punctuation">.</span>items<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>          resultString <span class="token operator">+</span><span class="token operator">=</span> i <span class="token operator">+</span> <span class="token string">' '</span>        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> resultString      <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span></code></pre><p><strong>测试代码：</strong></p><pre class=" language-cpp"><code class="language-cpp">     <span class="token comment" spellcheck="true">// 创建队列</span>    let queue <span class="token operator">=</span> <span class="token keyword">new</span>  <span class="token function">Queue</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token comment" spellcheck="true">// 将元素加入到队列中</span>    queue<span class="token punctuation">.</span><span class="token function">enqueue</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span>    queue<span class="token punctuation">.</span><span class="token function">enqueue</span><span class="token punctuation">(</span><span class="token string">'b'</span><span class="token punctuation">)</span>    queue<span class="token punctuation">.</span><span class="token function">enqueue</span><span class="token punctuation">(</span><span class="token string">'c'</span><span class="token punctuation">)</span>    queue<span class="token punctuation">.</span><span class="token function">enqueue</span><span class="token punctuation">(</span><span class="token string">'d'</span><span class="token punctuation">)</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>queue<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//58</span>    <span class="token comment" spellcheck="true">// 从队列中删除元素</span>    queue<span class="token punctuation">.</span><span class="token function">dequeue</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>queue<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//62</span>    queue<span class="token punctuation">.</span><span class="token function">dequeue</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>queue<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//64</span>    <span class="token comment" spellcheck="true">//front</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>queue<span class="token punctuation">.</span><span class="token function">front</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//67</span>        <span class="token comment" spellcheck="true">// 验证其他方法</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>queue<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//70</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>queue<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//71</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>queue<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//72</span></code></pre><p><strong>测试结果：</strong></p><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E9%98%9F%E5%88%97/3.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E9%98%9F%E5%88%97/3.png" alt="image-20200305211334015"></a></p><p>image-20200305211334015</p><h4 id="2-2-队列的应用"><a href="#2-2-队列的应用" class="headerlink" title="2.2.队列的应用"></a>2.2.队列的应用</h4><p>使用队列实现小游戏：击鼓传花，传入一组数据和设定的数字num，循环遍历数组内元素，遍历到的元素为指定数字num时将该元素删除，直至数组剩下一个元素。</p><p><strong>代码实现：</strong></p><pre class=" language-javascript"><code class="language-javascript">    <span class="token comment" spellcheck="true">// 队列应用：面试题：击鼓传花</span>    <span class="token keyword">let</span> passGame <span class="token operator">=</span> <span class="token punctuation">(</span>nameList<span class="token punctuation">,</span> num<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>      <span class="token comment" spellcheck="true">//1.创建队列结构</span>      <span class="token keyword">let</span> queue <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Queue</span><span class="token punctuation">(</span><span class="token punctuation">)</span>      <span class="token comment" spellcheck="true">//2.将所有人依次加入队列</span>      <span class="token comment" spellcheck="true">// 这是ES6的for循环写法，i相当于nameList[i]</span>      <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token keyword">of</span> nameList<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        queue<span class="token punctuation">.</span><span class="token function">enqueue</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>      <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">// 3.开始数数</span>     <span class="token keyword">while</span><span class="token punctuation">(</span>queue<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">></span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//队列中只剩1个人就停止数数</span>      <span class="token comment" spellcheck="true">// 不是num的时候，重新加入队列末尾</span>      <span class="token comment" spellcheck="true">// 是num的时候，将其从队列中删除</span>      <span class="token comment" spellcheck="true">// 3.1.num数字之前的人重新放入队列的末尾(把队列前面删除的加到队列最后)</span>      <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span> num<span class="token number">-1</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        queue<span class="token punctuation">.</span><span class="token function">enqueue</span><span class="token punctuation">(</span>queue<span class="token punctuation">.</span><span class="token function">dequeue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>      <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>      <span class="token comment" spellcheck="true">// 3.2.num对应这个人，直接从队列中删除</span>      <span class="token comment" spellcheck="true">/*        思路是这样的，由于队列没有像数组一样的下标值不能直接取到某一元素，所以采用，把num前面的num-1个元素先删除后添加到队列末尾，这样第num个元素就排到了队列的最前面，可以直接使用dequeue方法进行删除      */</span>      queue<span class="token punctuation">.</span><span class="token function">dequeue</span><span class="token punctuation">(</span><span class="token punctuation">)</span>     <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>      <span class="token comment" spellcheck="true">//4.获取剩下的那个人</span>      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>queue<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//104</span>      <span class="token keyword">let</span> endName <span class="token operator">=</span> queue<span class="token punctuation">.</span><span class="token function">front</span><span class="token punctuation">(</span><span class="token punctuation">)</span>      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'最终剩下的人：'</span> <span class="token operator">+</span> endName<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment" spellcheck="true">//106</span>            <span class="token keyword">return</span> nameList<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>endName<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//5.测试击鼓传花</span>    <span class="token keyword">let</span> names <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'lily'</span><span class="token punctuation">,</span> <span class="token string">'lucy'</span><span class="token punctuation">,</span> <span class="token string">'Tom'</span><span class="token punctuation">,</span> <span class="token string">'Lilei'</span><span class="token punctuation">,</span> <span class="token string">'Tony'</span><span class="token punctuation">]</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">passGame</span><span class="token punctuation">(</span>names<span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//113</span></code></pre><p><strong>测试结果：</strong></p><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E9%98%9F%E5%88%97/4.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E9%98%9F%E5%88%97/4.png" alt="image-20200305212021550"></a></p><p>image-20200305212021550</p><h3 id="三、优先队列"><a href="#三、优先队列" class="headerlink" title="三、优先队列"></a>三、优先队列</h3><p>优先级队列主要考虑的问题为：</p><ul><li>每个元素不再只是一个数据，还包含数据的优先级；</li><li>在添加数据过程中，根据优先级放入到正确位置；</li></ul><h4 id="3-1-优先级队列的实现"><a href="#3-1-优先级队列的实现" class="headerlink" title="3.1.优先级队列的实现"></a>3.1.优先级队列的实现</h4><p><strong>代码实现：</strong></p><pre class=" language-javascript"><code class="language-javascript">    <span class="token comment" spellcheck="true">// 封装优先级队列</span>    <span class="token keyword">function</span> <span class="token function">PriorityQueue</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>      <span class="token comment" spellcheck="true">//内部类：在类里面再封装一个类;表示带优先级的数据</span>      <span class="token keyword">function</span> <span class="token function">QueueElement</span><span class="token punctuation">(</span>element<span class="token punctuation">,</span> priority<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>element <span class="token operator">=</span> element<span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>priority <span class="token operator">=</span> priority<span class="token punctuation">;</span>      <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>       <span class="token comment" spellcheck="true">// 封装属性</span>      <span class="token keyword">this</span><span class="token punctuation">.</span>items <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>      <span class="token comment" spellcheck="true">// 1.实现按照优先级插入方法</span>      PriorityQueue<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>enqueue <span class="token operator">=</span> <span class="token punctuation">(</span>element<span class="token punctuation">,</span> priority<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// 1.1.创建QueueElement对象</span>        <span class="token keyword">let</span> queueElement <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">QueueElement</span><span class="token punctuation">(</span>element<span class="token punctuation">,</span> priority<span class="token punctuation">)</span>        <span class="token comment" spellcheck="true">// 1.2.判断队列是否为空</span>        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>items<span class="token punctuation">.</span>length <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>          <span class="token keyword">this</span><span class="token punctuation">.</span>items<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>queueElement<span class="token punctuation">)</span>        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">else</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>          <span class="token comment" spellcheck="true">// 定义一个变量记录是否成功添加了新元素</span>          <span class="token keyword">let</span> added <span class="token operator">=</span> <span class="token boolean">false</span>          <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token keyword">of</span> <span class="token keyword">this</span><span class="token punctuation">.</span>items<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">// 让新插入的元素与原有元素进行优先级比较(priority越小，优先级越大)</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>queueElement<span class="token punctuation">.</span>priority <span class="token operator">&lt;</span> i<span class="token punctuation">.</span>priority<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>              <span class="token keyword">this</span><span class="token punctuation">.</span>items<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> queueElement<span class="token punctuation">)</span>              added <span class="token operator">=</span> <span class="token boolean">true</span>              <span class="token comment" spellcheck="true">// 新元素已经找到插入位置了可以使用break停止循环</span>              <span class="token keyword">break</span>            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>          <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>          <span class="token comment" spellcheck="true">// 新元素没有成功插入，就把它放在队列的最前面</span>          <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>added<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>items<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>queueElement<span class="token punctuation">)</span>          <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>      <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>      <span class="token comment" spellcheck="true">// 2.dequeue():从队列中删除前端元素</span>      PriorityQueue<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>dequeue <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>items<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span>      <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>      <span class="token comment" spellcheck="true">// 3.front():查看前端的元素</span>      PriorityQueue<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>front <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>items<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>      <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>      <span class="token comment" spellcheck="true">// 4.isEmpty():查看队列是否为空</span>      PriorityQueue<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>isEmpty <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>items<span class="token punctuation">.</span>length <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">;</span>      <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>      <span class="token comment" spellcheck="true">// 5.size():查看队列中元素的个数</span>      PriorityQueue<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>size <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>items<span class="token punctuation">.</span>length      <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>      <span class="token comment" spellcheck="true">// 6.toString():以字符串形式输出队列中的元素</span>      PriorityQueue<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>toString <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token keyword">let</span> resultString <span class="token operator">=</span> <span class="token string">''</span>          <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token keyword">of</span> <span class="token keyword">this</span><span class="token punctuation">.</span>items<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>            resultString <span class="token operator">+</span><span class="token operator">=</span> i<span class="token punctuation">.</span>element <span class="token operator">+</span> <span class="token string">'-'</span> <span class="token operator">+</span> i<span class="token punctuation">.</span>priority <span class="token operator">+</span> <span class="token string">' '</span>          <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>          <span class="token keyword">return</span> resultString        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span></code></pre><p><strong>测试代码：</strong></p><pre class=" language-javascript"><code class="language-javascript">    <span class="token comment" spellcheck="true">// 测试代码</span>    <span class="token keyword">let</span> pq <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PriorityQueue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    pq<span class="token punctuation">.</span><span class="token function">enqueue</span><span class="token punctuation">(</span><span class="token string">'Tom'</span><span class="token punctuation">,</span><span class="token number">111</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    pq<span class="token punctuation">.</span><span class="token function">enqueue</span><span class="token punctuation">(</span><span class="token string">'Hellen'</span><span class="token punctuation">,</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    pq<span class="token punctuation">.</span><span class="token function">enqueue</span><span class="token punctuation">(</span><span class="token string">'Mary'</span><span class="token punctuation">,</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    pq<span class="token punctuation">.</span><span class="token function">enqueue</span><span class="token punctuation">(</span><span class="token string">'Gogo'</span><span class="token punctuation">,</span><span class="token number">27</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// 打印修改过后的优先队列对象</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>pq<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p><strong>测试结果：</strong></p><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E9%98%9F%E5%88%97/5.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E9%98%9F%E5%88%97/5.png" alt="image-20200226223314535"></a></p><p>image-20200226223314535</p><h4 id="3-2-注意点"><a href="#3-2-注意点" class="headerlink" title="3.2.注意点"></a>3.2.注意点</h4><p><strong>关于数组方法splice用法</strong>：</p><ul><li>splice（1，0，’Tom’）：表示在索引为1的元素前面插入元素’Tom‘（也可以理解为从索引为1的元素开始删除，删除0个元素，再在索引为1的元素前面添加元素’Tom’）；</li><li>splice（1，1，’Tom’）：表示从索引为1的元素开始删除（包括索引为1的元素），共删除1个元素，并添加元素’Tom’。即把索引为1的元素替换为元素’Tom’。</li></ul><p><strong>数组的push方法在数组、栈和队列中的形式：</strong></p><ul><li><strong>数组</strong>：在数组[0，1，2]中，pop(3)，结果为[0，1，2，3]；</li><li><strong>栈</strong>：执行pop(0)，pop(1)，pop(2)，pop(3)，从栈底到栈顶的元素分别为：0，1，2，3；如果看成数组，可写为[0，1，2，3]，但是索引为3的元素3其实是栈顶元素；所以说栈的push方法是向栈顶添加元素（但在数组的视角下为向数组尾部添加元素）；</li><li><strong>队列</strong>：enqueue方法可以由数组的push方法实现，与数组相同，相当于在数组尾部添加元素。</li></ul><p>可以这样想：栈结构是头朝下（索引值由下往上增大）的数组结构。</p><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E9%98%9F%E5%88%97/6.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E9%98%9F%E5%88%97/6.png" alt="image-20200226231025462"></a></p><h2 id="JavaScript实现单向链表"><a href="#JavaScript实现单向链表" class="headerlink" title="JavaScript实现单向链表"></a>JavaScript实现单向链表</h2><h3 id="一、单向链表简介"><a href="#一、单向链表简介" class="headerlink" title="一、单向链表简介"></a>一、单向链表简介</h3><p>链表和数组一样，可以用于<strong>存储一系列的元素</strong>，但是链表和数组的<strong>实现机制完全不同</strong>。链表的每个元素由一个存储<strong>元素本身的节点</strong>和一个<strong>指向下一个元素的引用</strong>（有的语言称为指针或连接）组成。类似于火车头，一节车厢载着乘客（数据），通过节点连接另一节车厢。</p><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%8D%95%E5%90%91%E9%93%BE%E8%A1%A8/1.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%8D%95%E5%90%91%E9%93%BE%E8%A1%A8/1.png" alt="image-20200227110656733"></a></p><p>image-20200227110656733</p><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%8D%95%E5%90%91%E9%93%BE%E8%A1%A8/2.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%8D%95%E5%90%91%E9%93%BE%E8%A1%A8/2.png" alt="image-20200227110626750"></a></p><p>image-20200227110626750</p><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%8D%95%E5%90%91%E9%93%BE%E8%A1%A8/3.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%8D%95%E5%90%91%E9%93%BE%E8%A1%A8/3.png" alt="image-20200226233942344"></a></p><p>image-20200226233942344</p><ul><li>head属性指向链表的第一个节点；</li><li>链表中的最后一个节点指向null；</li><li>当链表中一个节点也没有的时候，head直接指向null；</li></ul><p><strong>数组存在的缺点：</strong></p><ul><li>数组的创建通常需要申请一段<strong>连续的内存空间</strong>（一整块内存），并且大小是固定的。所以当原数组<strong>不能满足容量需求</strong>时，需要<strong>扩容</strong>（一般情况下是申请一个更大的数组，比如2倍，然后将原数组中的元素复制过去）。</li><li>在数组的开头或中间位置插入数据的成本很高，需要进行大量元素的位移。</li></ul><p><strong>链表的优势：</strong></p><ul><li>链表中的元素在内存中<strong>不必是连续的空间</strong>，可以充分利用计算机的内存，实现灵活的<strong>内存动态管理</strong>。</li><li>链表不必在创建时就<strong>确定大小</strong>，并且大小可以<strong>无限地延伸</strong>下去。</li><li>链表在<strong>插入和删除</strong>数据时，<strong>时间复杂度</strong>可以达到O(1)，相对数组效率高很多。</li></ul><p><strong>链表的缺点：</strong></p><ul><li>链表访问任何一个位置的元素时，都需要<strong>从头开始访问</strong>（无法跳过第一个元素访问任何一个元素）。</li><li>无法通过下标值直接访问元素，需要从头开始一个个访问，直到找到对应的元素。</li><li>虽然可以轻松地到达<strong>下一个节点</strong>，但是回到<strong>前一个节点</strong>是很难的。</li></ul><p><strong>链表中的常见操作：</strong></p><ul><li>append（element）：向链表尾部添加一个新的项；</li><li>insert（position，element）：向链表的特定位置插入一个新的项；</li><li>get（position）：获取对应位置的元素；</li><li>indexOf（element）：返回元素在链表中的索引。如果链表中没有该元素就返回-1；</li><li>update（position，element）：修改某个位置的元素；</li><li>removeAt（position）：从链表的特定位置移除一项；</li><li>remove（element）：从链表中移除一项；</li><li>isEmpty（）：如果链表中不包含任何元素，返回trun，如果链表长度大于0则返回false；</li><li>size（）：返回链表包含的元素个数，与数组的length属性类似；</li><li>toString（）：由于链表项使用了Node类，就需要重写继承自JavaScript对象默认的toString方法，让其只输出元素的值；</li></ul><p>首先需要弄清楚：下文中的position指的是两个节点之间，并且与index的关系如下图所示：</p><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%8D%95%E5%90%91%E9%93%BE%E8%A1%A8/4.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%8D%95%E5%90%91%E9%93%BE%E8%A1%A8/4.png" alt="image-20200306101534508"></a></p><p>image-20200306101534508</p><p>position的值一般表示position所指位置的下一个节点。当position的值与index的值相等时，比如position &#x3D; index &#x3D; 1，那么它们都表示Node2。</p><h3 id="二、封装单向链表类"><a href="#二、封装单向链表类" class="headerlink" title="二、封装单向链表类"></a>二、封装单向链表类</h3><h4 id="2-0-创建单向链表类"><a href="#2-0-创建单向链表类" class="headerlink" title="2.0.创建单向链表类"></a>2.0.创建单向链表类</h4><p>先创建单向链表类Linklist，并添加基本属性，再实现单向链表的常用方法：</p><pre class=" language-kotlin"><code class="language-kotlin">    <span class="token comment" spellcheck="true">// 封装单向链表类</span>    function <span class="token function">LinkList</span><span class="token punctuation">(</span><span class="token punctuation">)</span>&amp;#<span class="token number">123</span><span class="token punctuation">;</span>      <span class="token comment" spellcheck="true">// 封装一个内部类：节点类</span>      function <span class="token function">Node</span><span class="token punctuation">(</span><span class="token keyword">data</span><span class="token punctuation">)</span>&amp;#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>data <span class="token operator">=</span> <span class="token keyword">data</span><span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>next <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>      &amp;#<span class="token number">125</span><span class="token punctuation">;</span>      <span class="token comment" spellcheck="true">// 属性</span>      <span class="token comment" spellcheck="true">// 属性head指向链表的第一个节点</span>      <span class="token keyword">this</span><span class="token punctuation">.</span>head <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>      <span class="token keyword">this</span><span class="token punctuation">.</span>length <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>      &amp;#<span class="token number">125</span><span class="token punctuation">;</span></code></pre><h4 id="2-1-append-element"><a href="#2-1-append-element" class="headerlink" title="2.1.append(element)"></a>2.1.append(element)</h4><p><strong>代码实现：</strong></p><pre class=" language-kotlin"><code class="language-kotlin">      <span class="token comment" spellcheck="true">// 一.实现append方法</span>      LinkList<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>append <span class="token operator">=</span> <span class="token keyword">data</span> <span class="token operator">=</span><span class="token operator">></span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//1.创建新节点</span>        let newNode <span class="token operator">=</span> new <span class="token function">Node</span><span class="token punctuation">(</span><span class="token keyword">data</span><span class="token punctuation">)</span>        <span class="token comment" spellcheck="true">//2.添加新节点</span>        <span class="token comment" spellcheck="true">//情况1：只有一个节点时候</span>        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>length <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>&amp;#<span class="token number">123</span><span class="token punctuation">;</span>          <span class="token keyword">this</span><span class="token punctuation">.</span>head <span class="token operator">=</span> newNode        <span class="token comment" spellcheck="true">//情况2：节点数大于1，在链表的最后添加新节点  </span>        &amp;#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">else</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>                        <span class="token comment" spellcheck="true">//让变量current指向第一个节点</span>          let current <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>head          <span class="token comment" spellcheck="true">//当current.next(下一个节点不为空)不为空时，一直循环，直到current指向最后一个节点</span>          <span class="token keyword">while</span> <span class="token punctuation">(</span>current<span class="token punctuation">.</span>next<span class="token punctuation">)</span>&amp;#<span class="token number">123</span><span class="token punctuation">;</span>            current <span class="token operator">=</span> current<span class="token punctuation">.</span>next          &amp;#<span class="token number">125</span><span class="token punctuation">;</span>          <span class="token comment" spellcheck="true">// 最后节点的next指向新的节点</span>          current<span class="token punctuation">.</span>next <span class="token operator">=</span> newNode        &amp;#<span class="token number">125</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//3.添加完新结点之后length+1</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>length <span class="token operator">+=</span> <span class="token number">1</span>      &amp;#<span class="token number">125</span><span class="token punctuation">;</span></code></pre><p><strong>过程详解：</strong></p><ul><li>首先让current指向第一个节点：</li></ul><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%8D%95%E5%90%91%E9%93%BE%E8%A1%A8/5.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%8D%95%E5%90%91%E9%93%BE%E8%A1%A8/5.png" alt="image-20200227145315369"></a></p><p>image-20200227145315369</p><ul><li>通过while循环使current指向最后一个节点，最后通过current.next &#x3D; newNode，让最后一个节点指向新节点newNode：</li></ul><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%8D%95%E5%90%91%E9%93%BE%E8%A1%A8/6.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%8D%95%E5%90%91%E9%93%BE%E8%A1%A8/6.png" alt="image-20200227145453380"></a></p><p>image-20200227145453380</p><p><strong>测试代码：</strong></p><pre class=" language-php"><code class="language-php">    <span class="token comment" spellcheck="true">//测试代码</span>    <span class="token comment" spellcheck="true">//1.创建LinkList</span>    let list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LinkList</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token comment" spellcheck="true">//2.测试append方法</span>    list<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'aaa'</span><span class="token punctuation">)</span>    list<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'bbb'</span><span class="token punctuation">)</span>    list<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'ccc'</span><span class="token punctuation">)</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span><span class="token punctuation">;</span>  </code></pre><p><strong>测试结果：</strong></p><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%8D%95%E5%90%91%E9%93%BE%E8%A1%A8/7.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%8D%95%E5%90%91%E9%93%BE%E8%A1%A8/7.png" alt="image-20200305234828061"></a></p><p>image-20200305234828061</p><h4 id="2-2-toString"><a href="#2-2-toString" class="headerlink" title="2.2.toString()"></a>2.2.toString()</h4><p><strong>代码实现：</strong></p><pre class=" language-javascript"><code class="language-javascript">      <span class="token comment" spellcheck="true">// 实现toString方法</span>      LinkList<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>toString <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// 1.定义变量</span>        <span class="token keyword">let</span> current <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>head        <span class="token keyword">let</span> listString <span class="token operator">=</span> <span class="token string">""</span>        <span class="token comment" spellcheck="true">// 2.循环获取一个个的节点</span>        <span class="token keyword">while</span><span class="token punctuation">(</span>current<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>           listString <span class="token operator">+</span><span class="token operator">=</span> current<span class="token punctuation">.</span>data <span class="token operator">+</span> <span class="token string">" "</span>          current <span class="token operator">=</span> current<span class="token punctuation">.</span>next<span class="token comment" spellcheck="true">//千万不要忘了拼接完一个节点数据之后，让current指向下一个节点</span>        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>        <span class="token keyword">return</span>  listString      <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span></code></pre><p><strong>测试代码：</strong></p><pre class=" language-php"><code class="language-php">    <span class="token comment" spellcheck="true">//测试代码</span>    <span class="token comment" spellcheck="true">//1.创建LinkList</span>    let list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LinkList</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token comment" spellcheck="true">//2.插入数据</span>    list<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'aaa'</span><span class="token punctuation">)</span>    list<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'bbb'</span><span class="token punctuation">)</span>    list<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'ccc'</span><span class="token punctuation">)</span>        <span class="token comment" spellcheck="true">//3.测试toString方法</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>list<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p><strong>测试结果：</strong></p><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%8D%95%E5%90%91%E9%93%BE%E8%A1%A8/8.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%8D%95%E5%90%91%E9%93%BE%E8%A1%A8/8.png" alt="image-20200305235437934"></a></p><p>image-20200305235437934</p><h4 id="2-3-insert-position-element"><a href="#2-3-insert-position-element" class="headerlink" title="2.3.insert(position,element)"></a>2.3.insert(position,element)</h4><p><strong>代码实现：</strong></p><pre class=" language-kotlin"><code class="language-kotlin">      <span class="token comment" spellcheck="true">// 实现insert方法</span>      LinkList<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>insert <span class="token operator">=</span> <span class="token punctuation">(</span>position<span class="token punctuation">,</span> <span class="token keyword">data</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>      <span class="token comment" spellcheck="true">//理解positon的含义：position=0表示新界点插入后要成为第1个节点，position=2表示新界点插入后要成为第3个节点</span>        <span class="token comment" spellcheck="true">//1.对position进行越界判断:要求传入的position不能是负数且不能超过LinkList的length</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>position <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">||</span> position <span class="token operator">></span> <span class="token keyword">this</span><span class="token punctuation">.</span>length<span class="token punctuation">)</span>&amp;#<span class="token number">123</span><span class="token punctuation">;</span>          <span class="token keyword">return</span> <span class="token boolean">false</span>        &amp;#<span class="token number">125</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//2.根据data创建newNode</span>        let newNode <span class="token operator">=</span> new <span class="token function">Node</span><span class="token punctuation">(</span><span class="token keyword">data</span><span class="token punctuation">)</span>        <span class="token comment" spellcheck="true">//3.插入新节点</span>        <span class="token comment" spellcheck="true">//情况1：插入位置position=0</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>position <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>&amp;#<span class="token number">123</span><span class="token punctuation">;</span>          <span class="token comment" spellcheck="true">// 让新节点指向第一个节点</span>          newNode<span class="token punctuation">.</span>next <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>head          <span class="token comment" spellcheck="true">// 让head指向新节点</span>          <span class="token keyword">this</span><span class="token punctuation">.</span>head <span class="token operator">=</span> newNode        <span class="token comment" spellcheck="true">//情况2：插入位置position>0(该情况包含position=length)</span>        &amp;#<span class="token number">125</span><span class="token punctuation">;</span> <span class="token keyword">else</span>&amp;#<span class="token number">123</span><span class="token punctuation">;</span>          let index <span class="token operator">=</span> <span class="token number">0</span>          let previous <span class="token operator">=</span> <span class="token keyword">null</span>          let current <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>head          <span class="token comment" spellcheck="true">//步骤1：通过while循环使变量current指向position位置的后一个节点(注意while循环的写法)</span>          <span class="token keyword">while</span><span class="token punctuation">(</span>index<span class="token operator">++</span> <span class="token operator">&lt;</span> position<span class="token punctuation">)</span>&amp;#<span class="token number">123</span><span class="token punctuation">;</span>          <span class="token comment" spellcheck="true">//步骤2：在current指向下一个节点之前，让previous指向current当前指向的节点</span>            previous <span class="token operator">=</span> current            current <span class="token operator">=</span> current<span class="token punctuation">.</span>next          &amp;#<span class="token number">125</span><span class="token punctuation">;</span>          <span class="token comment" spellcheck="true">// 步骤3：通过变量current(此时current已经指向position位置的后一个节点)，使newNode指向position位置的后一个节点</span>          newNode<span class="token punctuation">.</span>next <span class="token operator">=</span> current          <span class="token comment" spellcheck="true">//步骤4：通过变量previous，使position位置的前一个节点指向newNode</span>          previous<span class="token punctuation">.</span>next <span class="token operator">=</span> newNode          <span class="token comment" spellcheck="true">/*            启示：            1.我们无法直接操作链表中的节点，但是可以通过变量指向这些节点，以此间接地操作节点(替身使者)；            比如current指向节点3，想要节点3指向节点4只需要：current.next = 4即可。            2.两个节点间是双向的，想要节点2的前一个节点为节点1，可以通过：1.next=2，来实现；          */</span>        &amp;#<span class="token number">125</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//4.新节点插入后要length+1</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>length <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token boolean">true</span>      &amp;#<span class="token number">125</span><span class="token punctuation">;</span></code></pre><p><strong>过程详解：</strong></p><p>inset方法实现的过程：根据插入节点位置的不同可分为多种情况：</p><ul><li><strong>情况1：position &#x3D; 0</strong>：</li></ul><p>通过： newNode.next &#x3D; this.head，建立连接1；</p><p>通过： this.head &#x3D; newNode，建立连接2；（不能先建立连接2，否则this.head不再指向Node1）</p><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%8D%95%E5%90%91%E9%93%BE%E8%A1%A8/9.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%8D%95%E5%90%91%E9%93%BE%E8%A1%A8/9.png" alt="image-20200306103312580"></a></p><p>image-20200306103312580</p><ul><li><strong>情况2：position &gt; 0</strong>：</li></ul><p>首先定义两个变量previous和curent分别指向需要插入位置pos &#x3D; X的前一个节点和后一个节点；</p><p>然后，通过：newNode.next &#x3D; current，改变指向3；</p><p>最后，通过：previous.next &#x3D; newNode，改变指向4；</p><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%8D%95%E5%90%91%E9%93%BE%E8%A1%A8/10.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%8D%95%E5%90%91%E9%93%BE%E8%A1%A8/10.png" alt="image-20200306103541674"></a></p><p>image-20200306103541674</p><ul><li><strong>情况2的特殊情形：position &#x3D; length</strong>：</li></ul><p>情况2也包含了pos &#x3D; length的情况，该情况下current和newNode.next都指向null；建立连接3和连接4的方式与情况2相同。</p><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%8D%95%E5%90%91%E9%93%BE%E8%A1%A8/11.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%8D%95%E5%90%91%E9%93%BE%E8%A1%A8/11.png" alt="image-20200306103646576"></a></p><p>image-20200306103646576</p><p><strong>测试代码：</strong></p><pre class=" language-php"><code class="language-php">    <span class="token comment" spellcheck="true">//测试代码</span>    <span class="token comment" spellcheck="true">//1.创建LinkList</span>    let list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LinkList</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token comment" spellcheck="true">//2.插入数据</span>    list<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'aaa'</span><span class="token punctuation">)</span>    list<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'bbb'</span><span class="token punctuation">)</span>    list<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'ccc'</span><span class="token punctuation">)</span>        <span class="token comment" spellcheck="true">//3.测试insert方法</span>    list<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">'在链表最前面插入节点'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    list<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">'在链表中第二个节点后插入节点'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    list<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token string">'在链表最后插入节点'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">alert</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span><span class="token punctuation">;</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p><strong>测试结果：</strong></p><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%8D%95%E5%90%91%E9%93%BE%E8%A1%A8/12.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%8D%95%E5%90%91%E9%93%BE%E8%A1%A8/12.png" alt="image-20200305235710063"></a></p><p>image-20200305235710063</p><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%8D%95%E5%90%91%E9%93%BE%E8%A1%A8/13.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%8D%95%E5%90%91%E9%93%BE%E8%A1%A8/13.png" alt="image-20200305235756962"></a></p><p>image-20200305235756962</p><h4 id="2-4-get-position"><a href="#2-4-get-position" class="headerlink" title="2.4.get(position)"></a>2.4.get(position)</h4><p><strong>代码实现：</strong></p><pre class=" language-kotlin"><code class="language-kotlin">      <span class="token comment" spellcheck="true">//实现get方法</span>      LinkList<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>get <span class="token operator">=</span> <span class="token punctuation">(</span>position<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//1.越界判断</span>        <span class="token comment" spellcheck="true">// 当position = length时，取到的是null所以0 =&lt; position &lt; length</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>position <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">||</span> position <span class="token operator">>=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>length<span class="token punctuation">)</span>&amp;#<span class="token number">123</span><span class="token punctuation">;</span>          <span class="token keyword">return</span> <span class="token keyword">null</span>        &amp;#<span class="token number">125</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//2.获取指定的positon位置的后一个节点的data</span>        <span class="token comment" spellcheck="true">//同样使用一个变量间接操作节点</span>        let current <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>head        let index <span class="token operator">=</span> <span class="token number">0</span>        <span class="token keyword">while</span><span class="token punctuation">(</span>index<span class="token operator">++</span> <span class="token operator">&lt;</span> position<span class="token punctuation">)</span>&amp;#<span class="token number">123</span><span class="token punctuation">;</span>          current <span class="token operator">=</span> current<span class="token punctuation">.</span>next        &amp;#<span class="token number">125</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> current<span class="token punctuation">.</span>data      &amp;#<span class="token number">125</span><span class="token punctuation">;</span></code></pre><p><strong>过程详解：</strong></p><p>get方法的实现过程：以获取position &#x3D; 2为例，如下图所示：</p><ul><li>首先使current指向第一个节点，此时index&#x3D;0；</li></ul><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%8D%95%E5%90%91%E9%93%BE%E8%A1%A8/14.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%8D%95%E5%90%91%E9%93%BE%E8%A1%A8/14.png" alt="image-20200227164308939"></a></p><p>image-20200227164308939</p><ul><li>通过while循环使current循环指向下一个节点，注意循环终止的条件index++ &lt; position，即当index&#x3D;position时停止循环，此时循环了1次，current指向第二个节点(Node2)，最后通过current.data返回Node2节点的数据；</li></ul><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%8D%95%E5%90%91%E9%93%BE%E8%A1%A8/15.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%8D%95%E5%90%91%E9%93%BE%E8%A1%A8/15.png" alt="image-20200227164351066"></a></p><p>image-20200227164351066</p><p><strong>测试代码：</strong></p><pre class=" language-php"><code class="language-php">    <span class="token comment" spellcheck="true">//测试代码</span>    <span class="token comment" spellcheck="true">//1.创建LinkList</span>    let list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LinkList</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token comment" spellcheck="true">//2.插入数据</span>    list<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'aaa'</span><span class="token punctuation">)</span>    list<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'bbb'</span><span class="token punctuation">)</span>    list<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'ccc'</span><span class="token punctuation">)</span>    <span class="token comment" spellcheck="true">//3.测试get方法</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>list<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>list<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p><strong>测试结果：</strong></p><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%8D%95%E5%90%91%E9%93%BE%E8%A1%A8/16.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%8D%95%E5%90%91%E9%93%BE%E8%A1%A8/16.png" alt="image-20200306000211073"></a></p><p>image-20200306000211073</p><h4 id="2-5-indexOf-element"><a href="#2-5-indexOf-element" class="headerlink" title="2.5.indexOf(element)"></a>2.5.indexOf(element)</h4><p><strong>代码实现：</strong></p><pre class=" language-kotlin"><code class="language-kotlin">      <span class="token comment" spellcheck="true">//实现indexOf方法</span>      LinkList<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>indexOf <span class="token operator">=</span> <span class="token keyword">data</span> <span class="token operator">=</span><span class="token operator">></span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//1.定义变量</span>        let current <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>head        let index <span class="token operator">=</span> <span class="token number">0</span>        <span class="token comment" spellcheck="true">//2.开始查找:只要current不指向null就一直循环</span>        <span class="token keyword">while</span><span class="token punctuation">(</span>current<span class="token punctuation">)</span>&amp;#<span class="token number">123</span><span class="token punctuation">;</span>          <span class="token keyword">if</span><span class="token punctuation">(</span>current<span class="token punctuation">.</span>data <span class="token operator">==</span> <span class="token keyword">data</span><span class="token punctuation">)</span>&amp;#<span class="token number">123</span><span class="token punctuation">;</span>            <span class="token keyword">return</span> index          &amp;#<span class="token number">125</span><span class="token punctuation">;</span>          current <span class="token operator">=</span> current<span class="token punctuation">.</span>next          index <span class="token operator">+=</span> <span class="token number">1</span>        &amp;#<span class="token number">125</span><span class="token punctuation">;</span>         <span class="token comment" spellcheck="true">//3.遍历完链表没有找到，返回-1</span>        <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span>      &amp;#<span class="token number">125</span><span class="token punctuation">;</span></code></pre><p><strong>过程详解：</strong></p><p>indexOf方法的实现过程：</p><ul><li>使用变量current记录当前指向的节点，使用变量index记录当前节点的索引值（注意index &#x3D; node数-1）：</li></ul><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%8D%95%E5%90%91%E9%93%BE%E8%A1%A8/17.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%8D%95%E5%90%91%E9%93%BE%E8%A1%A8/17.png" alt="image-20200227155230599"></a></p><p>image-20200227155230599</p><p><strong>测试代码：</strong></p><pre class=" language-php"><code class="language-php">    <span class="token comment" spellcheck="true">//测试代码</span>    <span class="token comment" spellcheck="true">//1.创建LinkList</span>    let list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LinkList</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token comment" spellcheck="true">//2.插入数据</span>    list<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'aaa'</span><span class="token punctuation">)</span>    list<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'bbb'</span><span class="token punctuation">)</span>    list<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'ccc'</span><span class="token punctuation">)</span>        <span class="token comment" spellcheck="true">//3.测试indexOf方法</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>list<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">'aaa'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>list<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">'ccc'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p><strong>测试结果：</strong></p><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%8D%95%E5%90%91%E9%93%BE%E8%A1%A8/18.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%8D%95%E5%90%91%E9%93%BE%E8%A1%A8/18.png" alt="image-20200306000424189"></a></p><p>image-20200306000424189</p><h4 id="2-6-update-position-element"><a href="#2-6-update-position-element" class="headerlink" title="2.6.update(position,element)"></a>2.6.update(position,element)</h4><p><strong>代码实现：</strong></p><pre class=" language-sql"><code class="language-sql">      <span class="token comment" spellcheck="true">//实现update方法</span>      LinkList<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token keyword">update</span> <span class="token operator">=</span> <span class="token punctuation">(</span>position<span class="token punctuation">,</span> newData<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token operator">&amp;</span><span class="token comment" spellcheck="true">#123;</span>        <span class="token comment" spellcheck="true">//1.越界判断</span>        <span class="token comment" spellcheck="true">//因为被修改的节点不能为null，所以position不能等于length</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>position <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">||</span> position <span class="token operator">>=</span> this<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token operator">&amp;</span><span class="token comment" spellcheck="true">#123;</span>          <span class="token keyword">return</span> <span class="token boolean">false</span>        <span class="token operator">&amp;</span><span class="token comment" spellcheck="true">#125;</span>        <span class="token comment" spellcheck="true">//2.查找正确的节点</span>        let <span class="token keyword">current</span> <span class="token operator">=</span> this<span class="token punctuation">.</span>head        let <span class="token keyword">index</span> <span class="token operator">=</span> <span class="token number">0</span>        <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token keyword">index</span><span class="token operator">+</span><span class="token operator">+</span> <span class="token operator">&lt;</span> position<span class="token punctuation">)</span><span class="token operator">&amp;</span><span class="token comment" spellcheck="true">#123;</span>          <span class="token keyword">current</span> <span class="token operator">=</span> <span class="token keyword">current</span><span class="token punctuation">.</span><span class="token keyword">next</span>        <span class="token operator">&amp;</span><span class="token comment" spellcheck="true">#125;</span>        <span class="token comment" spellcheck="true">//3.将position位置的后一个节点的data修改成newData</span>        <span class="token keyword">current</span><span class="token punctuation">.</span><span class="token keyword">data</span> <span class="token operator">=</span> newData        <span class="token comment" spellcheck="true">//返回true表示修改成功</span>        <span class="token keyword">return</span> <span class="token boolean">true</span>      <span class="token operator">&amp;</span><span class="token comment" spellcheck="true">#125;</span></code></pre><p><strong>测试代码：</strong></p><pre class=" language-php"><code class="language-php">    <span class="token comment" spellcheck="true">//测试代码</span>    <span class="token comment" spellcheck="true">//1.创建LinkList</span>    let list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LinkList</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token comment" spellcheck="true">//2.插入数据</span>    list<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'aaa'</span><span class="token punctuation">)</span>    list<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'bbb'</span><span class="token punctuation">)</span>    list<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'ccc'</span><span class="token punctuation">)</span>        <span class="token comment" spellcheck="true">//3.测试update方法</span>    list<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">'修改第一个节点'</span><span class="token punctuation">)</span>    list<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'修改第二个节点'</span><span class="token punctuation">)</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span><span class="token punctuation">;</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>list<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">'能修改么'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p><strong>测试结果：</strong></p><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%8D%95%E5%90%91%E9%93%BE%E8%A1%A8/19.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%8D%95%E5%90%91%E9%93%BE%E8%A1%A8/19.png" alt="image-20200306000700656"></a></p><p>image-20200306000700656</p><h4 id="2-7-removeAt-position"><a href="#2-7-removeAt-position" class="headerlink" title="2.7.removeAt(position)"></a>2.7.removeAt(position)</h4><p><strong>代码实现：</strong></p><pre class=" language-kotlin"><code class="language-kotlin">      <span class="token comment" spellcheck="true">//实现removeAt方法</span>      LinkList<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>removeAt <span class="token operator">=</span> position <span class="token operator">=</span><span class="token operator">></span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//1.越界判断</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>position <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">||</span> position <span class="token operator">>=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>length<span class="token punctuation">)</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//position不能为length</span>          <span class="token keyword">return</span> <span class="token keyword">null</span>        &amp;#<span class="token number">125</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//2.删除元素</span>        <span class="token comment" spellcheck="true">//情况1：position = 0时(删除第一个节点)</span>        let current <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>head        <span class="token keyword">if</span> <span class="token punctuation">(</span>position <span class="token operator">==</span><span class="token number">0</span> <span class="token punctuation">)</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//情况2：position > 0时</span>          <span class="token keyword">this</span><span class="token punctuation">.</span>head <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>head<span class="token punctuation">.</span>next        &amp;#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">else</span>&amp;#<span class="token number">123</span><span class="token punctuation">;</span>          let index <span class="token operator">=</span> <span class="token number">0</span>          let previous <span class="token operator">=</span> <span class="token keyword">null</span>          <span class="token keyword">while</span> <span class="token punctuation">(</span>index<span class="token operator">++</span> <span class="token operator">&lt;</span> position<span class="token punctuation">)</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>            previous <span class="token operator">=</span> current            current <span class="token operator">=</span> current<span class="token punctuation">.</span>next          &amp;#<span class="token number">125</span><span class="token punctuation">;</span>          <span class="token comment" spellcheck="true">//循环结束后，current指向position后一个节点，previous指向current前一个节点</span>          <span class="token comment" spellcheck="true">//再使前一个节点的next指向current的next即可</span>          previous<span class="token punctuation">.</span>next <span class="token operator">=</span> current<span class="token punctuation">.</span>next        &amp;#<span class="token number">125</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//3，length-1</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>length <span class="token operator">-=</span> <span class="token number">1</span>        <span class="token comment" spellcheck="true">//返回被删除节点的data，为此current定义在最上面</span>        <span class="token keyword">return</span> current<span class="token punctuation">.</span>data      &amp;#<span class="token number">125</span><span class="token punctuation">;</span></code></pre><p><strong>过程详解：</strong></p><p>removeAt方法的实现过程：删除节点时存在多种情况：</p><ul><li><strong>情况1：position &#x3D; 0</strong>，即移除第一个节点（Node1）。</li></ul><p>通过：this.head &#x3D; this.head.next，改变指向1即可；</p><p>虽然Node1的next仍指向Node2，但是没有引用指向Node1，则Node1会被垃圾回收器自动回收，所以不用处理Node1指向Node2的引用next。</p><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%8D%95%E5%90%91%E9%93%BE%E8%A1%A8/20.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%8D%95%E5%90%91%E9%93%BE%E8%A1%A8/20.png" alt="image-20200306110518877"></a></p><p>image-20200306110518877</p><ul><li><strong>情况2：positon &gt; 0</strong>，比如pos &#x3D; 2即移除第三个节点（Node3）。</li></ul><p><strong>注意：</strong>position &#x3D; length时position后一个节点为null不能删除，因此position !&#x3D; length；</p><p>首先，定义两个变量previous和curent分别指向需要删除位置pos &#x3D; x的前一个节点和后一个节点；</p><p>然后，通过：previous.next &#x3D; current.next，改变指向1即可；</p><p>随后，没有引用指向Node3，Node3就会被自动回收，至此成功删除Node3 。</p><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%8D%95%E5%90%91%E9%93%BE%E8%A1%A8/21.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%8D%95%E5%90%91%E9%93%BE%E8%A1%A8/21.png" alt="image-20200306104624457"></a></p><p>image-20200306104624457</p><p><strong>测试代码：</strong></p><pre class=" language-php"><code class="language-php">    <span class="token comment" spellcheck="true">//测试代码</span>    <span class="token comment" spellcheck="true">//1.创建LinkList</span>    let list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LinkList</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token comment" spellcheck="true">//2.插入数据</span>    list<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'aaa'</span><span class="token punctuation">)</span>    list<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'bbb'</span><span class="token punctuation">)</span>    list<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'ccc'</span><span class="token punctuation">)</span>    <span class="token comment" spellcheck="true">//3.测试removeAt方法</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>list<span class="token punctuation">.</span><span class="token function">removeAt</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>list<span class="token punctuation">.</span><span class="token function">removeAt</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p><strong>测试结果：</strong></p><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%8D%95%E5%90%91%E9%93%BE%E8%A1%A8/22.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%8D%95%E5%90%91%E9%93%BE%E8%A1%A8/22.png" alt="image-20200306000839608"></a></p><p>image-20200306000839608</p><h4 id="2-8-其他方法"><a href="#2-8-其他方法" class="headerlink" title="2.8.其他方法"></a>2.8.其他方法</h4><p>其他方法包括：<strong>remove(element)、isEmpty()、size()</strong></p><p><strong>代码实现：</strong></p><pre class=" language-kotlin"><code class="language-kotlin"><span class="token comment" spellcheck="true">/*-------------其他方法的实现--------------*/</span>      <span class="token comment" spellcheck="true">//一.实现remove方法</span>      LinkList<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>remove <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">data</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//1.获取data在列表中的位置</span>        let position <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token keyword">data</span><span class="token punctuation">)</span>        <span class="token comment" spellcheck="true">//2.根据位置信息，删除结点</span>        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">removeAt</span><span class="token punctuation">(</span>position<span class="token punctuation">)</span>      &amp;#<span class="token number">125</span><span class="token punctuation">;</span>      <span class="token comment" spellcheck="true">//二.实现isEmpty方法</span>      LinkList<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>isEmpty <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>length <span class="token operator">==</span> <span class="token number">0</span>      &amp;#<span class="token number">125</span><span class="token punctuation">;</span>      <span class="token comment" spellcheck="true">//三.实现size方法</span>      LinkList<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>size <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>length      &amp;#<span class="token number">125</span><span class="token punctuation">;</span></code></pre><p><strong>测试代码：</strong></p><pre class=" language-php"><code class="language-php">    <span class="token comment" spellcheck="true">//测试代码</span>    <span class="token comment" spellcheck="true">//1.创建LinkList</span>    let list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LinkList</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token comment" spellcheck="true">//2.插入数据</span>    list<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'aaa'</span><span class="token punctuation">)</span>    list<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'bbb'</span><span class="token punctuation">)</span>    list<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'ccc'</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">/*---------------其他方法测试----------------*/</span>      <span class="token comment" spellcheck="true">//remove方法</span>      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>list<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token string">'aaa'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment" spellcheck="true">//isEmpty方法</span>      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>list<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment" spellcheck="true">//size方法</span>      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>list<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p><strong>测试结果：</strong></p><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%8D%95%E5%90%91%E9%93%BE%E8%A1%A8/23.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%8D%95%E5%90%91%E9%93%BE%E8%A1%A8/23.png" alt="image-20200306001247346"></a></p><p>image-20200306001247346</p><h4 id="2-9-完整实现"><a href="#2-9-完整实现" class="headerlink" title="2.9.完整实现"></a>2.9.完整实现</h4><pre class=" language-kotlin"><code class="language-kotlin">    <span class="token comment" spellcheck="true">// 封装链表类</span>    function <span class="token function">LinkList</span><span class="token punctuation">(</span><span class="token punctuation">)</span>&amp;#<span class="token number">123</span><span class="token punctuation">;</span>      <span class="token comment" spellcheck="true">// 封装一个内部类：节点类</span>      function <span class="token function">Node</span><span class="token punctuation">(</span><span class="token keyword">data</span><span class="token punctuation">)</span>&amp;#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>data <span class="token operator">=</span> <span class="token keyword">data</span><span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>next <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>      &amp;#<span class="token number">125</span><span class="token punctuation">;</span>      <span class="token comment" spellcheck="true">// 属性</span>      <span class="token comment" spellcheck="true">// 属性head指向链表的第一个节点</span>      <span class="token keyword">this</span><span class="token punctuation">.</span>head <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>      <span class="token keyword">this</span><span class="token punctuation">.</span>length <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>      <span class="token comment" spellcheck="true">// 一.实现append方法</span>      LinkList<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>append <span class="token operator">=</span> <span class="token keyword">data</span> <span class="token operator">=</span><span class="token operator">></span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//1.创建新节点</span>        let newNode <span class="token operator">=</span> new <span class="token function">Node</span><span class="token punctuation">(</span><span class="token keyword">data</span><span class="token punctuation">)</span>        <span class="token comment" spellcheck="true">//2.添加新节点</span>        <span class="token comment" spellcheck="true">//情况1：只有一个节点时候</span>        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>length <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>&amp;#<span class="token number">123</span><span class="token punctuation">;</span>          <span class="token keyword">this</span><span class="token punctuation">.</span>head <span class="token operator">=</span> newNode        <span class="token comment" spellcheck="true">//情况2：节点数大于1，在链表的最后添加新节点  </span>        &amp;#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">else</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>                        <span class="token comment" spellcheck="true">//让变量current指向第一个节点</span>          let current <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>head          <span class="token comment" spellcheck="true">//当current.next(下一个节点不为空)不为空时，一直循环，直到current指向最后一个节点</span>          <span class="token keyword">while</span> <span class="token punctuation">(</span>current<span class="token punctuation">.</span>next<span class="token punctuation">)</span>&amp;#<span class="token number">123</span><span class="token punctuation">;</span>            current <span class="token operator">=</span> current<span class="token punctuation">.</span>next          &amp;#<span class="token number">125</span><span class="token punctuation">;</span>          <span class="token comment" spellcheck="true">// 最后节点的next指向新的节点</span>          current<span class="token punctuation">.</span>next <span class="token operator">=</span> newNode        &amp;#<span class="token number">125</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//3.添加完新结点之后length+1</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>length <span class="token operator">+=</span> <span class="token number">1</span>      &amp;#<span class="token number">125</span><span class="token punctuation">;</span>      <span class="token comment" spellcheck="true">// 二.实现toString方法</span>      LinkList<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>toString <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// 1.定义变量</span>        let current <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>head        let listString <span class="token operator">=</span> <span class="token string">""</span>        <span class="token comment" spellcheck="true">// 2.循环获取一个个的节点</span>        <span class="token keyword">while</span><span class="token punctuation">(</span>current<span class="token punctuation">)</span>&amp;#<span class="token number">123</span><span class="token punctuation">;</span>           listString <span class="token operator">+=</span> current<span class="token punctuation">.</span>data <span class="token operator">+</span> <span class="token string">" "</span>          current <span class="token operator">=</span> current<span class="token punctuation">.</span>next<span class="token comment" spellcheck="true">//千万不要忘了拼接完一个节点数据之后，让current指向下一个节点</span>        &amp;#<span class="token number">125</span><span class="token punctuation">;</span>        <span class="token keyword">return</span>  listString      &amp;#<span class="token number">125</span><span class="token punctuation">;</span>      <span class="token comment" spellcheck="true">// 三.实现insert方法</span>      LinkList<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>insert <span class="token operator">=</span> <span class="token punctuation">(</span>position<span class="token punctuation">,</span> <span class="token keyword">data</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>      <span class="token comment" spellcheck="true">//理解positon的含义：position=0表示新界点插入后要成为第1个节点，position=2表示新界点插入后要成为第3个节点</span>        <span class="token comment" spellcheck="true">//1.对position进行越界判断:要求传入的position不能是负数且不能超过LinkList的length</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>position <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">||</span> position <span class="token operator">></span> <span class="token keyword">this</span><span class="token punctuation">.</span>length<span class="token punctuation">)</span>&amp;#<span class="token number">123</span><span class="token punctuation">;</span>          <span class="token keyword">return</span> <span class="token boolean">false</span>        &amp;#<span class="token number">125</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//2.根据data创建newNode</span>        let newNode <span class="token operator">=</span> new <span class="token function">Node</span><span class="token punctuation">(</span><span class="token keyword">data</span><span class="token punctuation">)</span>        <span class="token comment" spellcheck="true">//3.插入新节点</span>        <span class="token comment" spellcheck="true">//情况1：插入位置position=0</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>position <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>&amp;#<span class="token number">123</span><span class="token punctuation">;</span>          <span class="token comment" spellcheck="true">// 让新节点指向第一个节点</span>          newNode<span class="token punctuation">.</span>next <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>head          <span class="token comment" spellcheck="true">// 让head指向新节点</span>          <span class="token keyword">this</span><span class="token punctuation">.</span>head <span class="token operator">=</span> newNode        <span class="token comment" spellcheck="true">//情况2：插入位置position>0(该情况包含position=length)</span>        &amp;#<span class="token number">125</span><span class="token punctuation">;</span> <span class="token keyword">else</span>&amp;#<span class="token number">123</span><span class="token punctuation">;</span>          let index <span class="token operator">=</span> <span class="token number">0</span>          let previous <span class="token operator">=</span> <span class="token keyword">null</span>          let current <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>head          <span class="token comment" spellcheck="true">//步骤1：通过while循环使变量current指向position位置的后一个节点(注意while循环的写法)</span>          <span class="token keyword">while</span><span class="token punctuation">(</span>index<span class="token operator">++</span> <span class="token operator">&lt;</span> position<span class="token punctuation">)</span>&amp;#<span class="token number">123</span><span class="token punctuation">;</span>          <span class="token comment" spellcheck="true">//步骤2：在current指向下一个节点之前，让previous指向current当前指向的节点</span>            previous <span class="token operator">=</span> current            current <span class="token operator">=</span> current<span class="token punctuation">.</span>next          &amp;#<span class="token number">125</span><span class="token punctuation">;</span>          <span class="token comment" spellcheck="true">// 步骤3：通过变量current(此时current已经指向position位置的后一个节点)，使newNode指向position位置的后一个节点</span>          newNode<span class="token punctuation">.</span>next <span class="token operator">=</span> current          <span class="token comment" spellcheck="true">//步骤4：通过变量previous，使position位置的前一个节点指向newNode</span>          previous<span class="token punctuation">.</span>next <span class="token operator">=</span> newNode                  <span class="token comment" spellcheck="true">//我们无法直接操作链表中的节点，但是可以通过变量指向这些节点，以此间接地操作节点；</span>        &amp;#<span class="token number">125</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//4.新节点插入后要length+1</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>length <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token boolean">true</span>      &amp;#<span class="token number">125</span><span class="token punctuation">;</span>      <span class="token comment" spellcheck="true">//四.实现get方法</span>      LinkList<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>get <span class="token operator">=</span> <span class="token punctuation">(</span>position<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//1.越界判断</span>        <span class="token comment" spellcheck="true">// 当position = length时，取到的是null所以0 =&lt; position &lt; length</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>position <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">||</span> position <span class="token operator">>=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>length<span class="token punctuation">)</span>&amp;#<span class="token number">123</span><span class="token punctuation">;</span>          <span class="token keyword">return</span> <span class="token keyword">null</span>        &amp;#<span class="token number">125</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//2.获取指定的positon位置的后一个节点的data</span>        <span class="token comment" spellcheck="true">//同样使用一个变量间接操作节点</span>        let current <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>head        let index <span class="token operator">=</span> <span class="token number">0</span>        <span class="token keyword">while</span><span class="token punctuation">(</span>index<span class="token operator">++</span> <span class="token operator">&lt;</span> position<span class="token punctuation">)</span>&amp;#<span class="token number">123</span><span class="token punctuation">;</span>          current <span class="token operator">=</span> current<span class="token punctuation">.</span>next        &amp;#<span class="token number">125</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> current<span class="token punctuation">.</span>data      &amp;#<span class="token number">125</span><span class="token punctuation">;</span>      <span class="token comment" spellcheck="true">//五.实现indexOf方法</span>      LinkList<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>indexOf <span class="token operator">=</span> <span class="token keyword">data</span> <span class="token operator">=</span><span class="token operator">></span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//1.定义变量</span>        let current <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>head        let index <span class="token operator">=</span> <span class="token number">0</span>        <span class="token comment" spellcheck="true">//2.开始查找:只要current不指向null就一直循环</span>        <span class="token keyword">while</span><span class="token punctuation">(</span>current<span class="token punctuation">)</span>&amp;#<span class="token number">123</span><span class="token punctuation">;</span>          <span class="token keyword">if</span><span class="token punctuation">(</span>current<span class="token punctuation">.</span>data <span class="token operator">==</span> <span class="token keyword">data</span><span class="token punctuation">)</span>&amp;#<span class="token number">123</span><span class="token punctuation">;</span>            <span class="token keyword">return</span> index          &amp;#<span class="token number">125</span><span class="token punctuation">;</span>          current <span class="token operator">=</span> current<span class="token punctuation">.</span>next          index <span class="token operator">+=</span> <span class="token number">1</span>        &amp;#<span class="token number">125</span><span class="token punctuation">;</span>         <span class="token comment" spellcheck="true">//3.遍历完链表没有找到，返回-1</span>        <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span>      &amp;#<span class="token number">125</span><span class="token punctuation">;</span>      <span class="token comment" spellcheck="true">//六.实现update方法</span>      LinkList<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>update <span class="token operator">=</span> <span class="token punctuation">(</span>position<span class="token punctuation">,</span> newData<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//1.越界判断</span>        <span class="token comment" spellcheck="true">//因为被修改的节点不能为null，所以position不能等于length</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>position <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">||</span> position <span class="token operator">>=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>length<span class="token punctuation">)</span>&amp;#<span class="token number">123</span><span class="token punctuation">;</span>          <span class="token keyword">return</span> <span class="token boolean">false</span>        &amp;#<span class="token number">125</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//2.查找正确的节点</span>        let current <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>head        let index <span class="token operator">=</span> <span class="token number">0</span>        <span class="token keyword">while</span><span class="token punctuation">(</span>index<span class="token operator">++</span> <span class="token operator">&lt;</span> position<span class="token punctuation">)</span>&amp;#<span class="token number">123</span><span class="token punctuation">;</span>          current <span class="token operator">=</span> current<span class="token punctuation">.</span>next        &amp;#<span class="token number">125</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//3.将position位置的后一个节点的data修改成newData</span>        current<span class="token punctuation">.</span>data <span class="token operator">=</span> newData        <span class="token comment" spellcheck="true">//返回true表示修改成功</span>        <span class="token keyword">return</span> <span class="token boolean">true</span>      &amp;#<span class="token number">125</span><span class="token punctuation">;</span>      <span class="token comment" spellcheck="true">//七.实现removeAt方法</span>      LinkList<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>removeAt <span class="token operator">=</span> position <span class="token operator">=</span><span class="token operator">></span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//1.越界判断</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>position <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">||</span> position <span class="token operator">>=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>length<span class="token punctuation">)</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>          <span class="token keyword">return</span> <span class="token keyword">null</span>        &amp;#<span class="token number">125</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//2.删除元素</span>        <span class="token comment" spellcheck="true">//情况1：position = 0时(删除第一个节点)</span>        let current <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>head        <span class="token keyword">if</span> <span class="token punctuation">(</span>position <span class="token operator">==</span><span class="token number">0</span> <span class="token punctuation">)</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//情况2：position > 0时</span>          <span class="token keyword">this</span><span class="token punctuation">.</span>head <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>head<span class="token punctuation">.</span>next        &amp;#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">else</span>&amp;#<span class="token number">123</span><span class="token punctuation">;</span>          let index <span class="token operator">=</span> <span class="token number">0</span>          let previous <span class="token operator">=</span> <span class="token keyword">null</span>          <span class="token keyword">while</span> <span class="token punctuation">(</span>index<span class="token operator">++</span> <span class="token operator">&lt;</span> position<span class="token punctuation">)</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>            previous <span class="token operator">=</span> current            current <span class="token operator">=</span> current<span class="token punctuation">.</span>next          &amp;#<span class="token number">125</span><span class="token punctuation">;</span>          <span class="token comment" spellcheck="true">//循环结束后，current指向position后一个节点，previous指向current前一个节点</span>          <span class="token comment" spellcheck="true">//再使前一个节点的next指向current的next即可</span>          previous<span class="token punctuation">.</span>next <span class="token operator">=</span> current<span class="token punctuation">.</span>next        &amp;#<span class="token number">125</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//3，length-1</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>length <span class="token operator">-=</span> <span class="token number">1</span>        <span class="token comment" spellcheck="true">//返回被删除节点的data，为此current定义在最上面</span>        <span class="token keyword">return</span> current<span class="token punctuation">.</span>data      &amp;#<span class="token number">125</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">/*-------------其他方法的实现--------------*/</span>      <span class="token comment" spellcheck="true">//八.实现remove方法</span>      LinkList<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>remove <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">data</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//1.获取data在列表中的位置</span>        let position <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token keyword">data</span><span class="token punctuation">)</span>        <span class="token comment" spellcheck="true">//2.根据位置信息，删除结点</span>        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">removeAt</span><span class="token punctuation">(</span>position<span class="token punctuation">)</span>      &amp;#<span class="token number">125</span><span class="token punctuation">;</span>      <span class="token comment" spellcheck="true">//九.实现isEmpty方法</span>      LinkList<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>isEmpty <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>length <span class="token operator">==</span> <span class="token number">0</span>      &amp;#<span class="token number">125</span><span class="token punctuation">;</span>      <span class="token comment" spellcheck="true">//十.实现size方法</span>      LinkList<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>size <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>length      &amp;#<span class="token number">125</span><span class="token punctuation">;</span>    &amp;#<span class="token number">125</span><span class="token punctuation">;</span></code></pre><h2 id="JavaScript实现双向链表"><a href="#JavaScript实现双向链表" class="headerlink" title="JavaScript实现双向链表"></a>JavaScript实现双向链表</h2><h3 id="一、双向链表简介"><a href="#一、双向链表简介" class="headerlink" title="一、双向链表简介"></a>一、双向链表简介</h3><p><strong>双向链表</strong>：既可以<strong>从头遍历到尾</strong>，又可以<strong>从尾遍历到头</strong>。也就是说链表连接的过程是<strong>双向</strong>的，它的实现原理是：一个节点既有<strong>向前连接的引用</strong>，也有一个<strong>向后连接的引用</strong>。</p><p><strong>双向链表的缺点：</strong></p><ul><li>每次在<strong>插入或删除</strong>某个节点时，都需要处理四个引用，而不是两个，实现起来会困难些；</li><li>相对于单向链表，所占<strong>内存空间更大</strong>一些；</li><li>但是，相对于双向链表的便利性而言，这些缺点微不足道。</li></ul><p><strong>双向链表的结构：</strong></p><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%8F%8C%E5%90%91%E9%93%BE%E8%A1%A8/1.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%8F%8C%E5%90%91%E9%93%BE%E8%A1%A8/1.png" alt="image-20200227204728456"></a></p><p>image-20200227204728456</p><ul><li>双向链表不仅有<strong>head</strong>指针指向第一个节点，而且有<strong>tail</strong>指针指向最后一个节点；</li><li>每一个节点由三部分组成：<strong>item</strong>储存数据、<strong>prev</strong>指向前一个节点、<strong>next</strong>指向后一个节点；</li><li>双向链表的第一个节点的prev指向<strong>null</strong>；</li><li>双向链表的最后一个节点的next指向<strong>null</strong>；</li></ul><p><strong>双向链表常见的操作（方法）：</strong></p><ul><li>append（element）：向链表尾部添加一个新的项；</li><li>inset（position，element）：向链表的特定位置插入一个新的项；</li><li>get（element）：获取对应位置的元素；</li><li>indexOf（element）：返回元素在链表中的索引，如果链表中没有元素就返回-1；</li><li>update（position，element）：修改某个位置的元素；</li><li>removeAt（position）：从链表的特定位置移除一项；</li><li>isEmpty（）：如果链表中不包含任何元素，返回trun，如果链表长度大于0则返回false；</li><li>size（）：返回链表包含的元素个数，与数组的length属性类似；</li><li>toString（）：由于链表项使用了Node类，就需要重写继承自JavaScript对象默认的toString方法，让其只输出元素的值；</li><li>forwardString（）：返回正向遍历节点字符串形式；</li><li>backwordString（）：返回反向遍历的节点的字符串形式；</li></ul><h3 id="二、封装双向链表类"><a href="#二、封装双向链表类" class="headerlink" title="二、封装双向链表类"></a>二、封装双向链表类</h3><h4 id="2-0-创建双向链表类"><a href="#2-0-创建双向链表类" class="headerlink" title="2.0.创建双向链表类"></a>2.0.创建双向链表类</h4><p>先创建双向链表类DoubleLinklist，并添加基本属性，再实现双向链表的常用方法：</p><pre class=" language-kotlin"><code class="language-kotlin">   <span class="token comment" spellcheck="true">//封装双向链表类</span>    function <span class="token function">DoubleLinklist</span><span class="token punctuation">(</span><span class="token punctuation">)</span>&amp;#<span class="token number">123</span><span class="token punctuation">;</span>      <span class="token comment" spellcheck="true">//封装内部类：节点类</span>      function <span class="token function">Node</span><span class="token punctuation">(</span><span class="token keyword">data</span><span class="token punctuation">)</span>&amp;#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>data <span class="token operator">=</span> <span class="token keyword">data</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>prev <span class="token operator">=</span> <span class="token keyword">null</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>next <span class="token operator">=</span> <span class="token keyword">null</span>      &amp;#<span class="token number">125</span><span class="token punctuation">;</span>      <span class="token comment" spellcheck="true">//属性</span>      <span class="token keyword">this</span><span class="token punctuation">.</span>head <span class="token operator">=</span> <span class="token keyword">null</span>      <span class="token keyword">this</span><span class="token punctuation">.</span>tail <span class="token operator">==</span><span class="token keyword">null</span>      <span class="token keyword">this</span><span class="token punctuation">.</span>length <span class="token operator">=</span> <span class="token number">0</span>      &amp;#<span class="token number">125</span><span class="token punctuation">;</span></code></pre><h4 id="2-1-append-element-1"><a href="#2-1-append-element-1" class="headerlink" title="2.1.append(element)"></a>2.1.append(element)</h4><p><strong>代码实现：</strong></p><pre class=" language-kotlin"><code class="language-kotlin">      <span class="token comment" spellcheck="true">//append方法</span>      DoubleLinklist<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>append <span class="token operator">=</span> <span class="token keyword">data</span> <span class="token operator">=</span><span class="token operator">></span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//1.根据data创建新节点</span>        let newNode <span class="token operator">=</span> new <span class="token function">Node</span><span class="token punctuation">(</span><span class="token keyword">data</span><span class="token punctuation">)</span>        <span class="token comment" spellcheck="true">//2.添加节点</span>        <span class="token comment" spellcheck="true">//情况1：添加的是第一个节点</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>length <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>          <span class="token keyword">this</span><span class="token punctuation">.</span>tail <span class="token operator">=</span> newNode          <span class="token keyword">this</span><span class="token punctuation">.</span>head <span class="token operator">=</span> newNode         <span class="token comment" spellcheck="true">//情况2：添加的不是第一个节点</span>        &amp;#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">else</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>          newNode<span class="token punctuation">.</span>prev <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>tail          <span class="token keyword">this</span><span class="token punctuation">.</span>tail<span class="token punctuation">.</span>next <span class="token operator">=</span> newNode          <span class="token keyword">this</span><span class="token punctuation">.</span>tail <span class="token operator">=</span> newNode        &amp;#<span class="token number">125</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//3.length+1</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>length <span class="token operator">+=</span> <span class="token number">1</span>      &amp;#<span class="token number">125</span><span class="token punctuation">;</span></code></pre><p><strong>过程详解：</strong></p><p>添加节点时分为多种情况：</p><ul><li>情况1：添加的是第一个节点：只需要让head和tail都指向新节点即可；</li></ul><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%8F%8C%E5%90%91%E9%93%BE%E8%A1%A8/2.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%8F%8C%E5%90%91%E9%93%BE%E8%A1%A8/2.png" alt="image-20200228094847845"></a></p><p>image-20200228094847845</p><ul><li><p>情况2：添加的不是第一个节点，如下图所示：只需要改变相关引用的指向即可。</p><ul><li>通过：newNode.prev &#x3D; this.tail：建立指向1；</li><li>通过：this.tail.next &#x3D; newNode：建立指向2；</li><li>通过：this.tail &#x3D; newNode：建立指向3</li></ul><p>要注意改变变量指向的顺序，最后修改tail指向，这样未修改前tail始终指向原链表的最后一个节点。</p></li></ul><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%8F%8C%E5%90%91%E9%93%BE%E8%A1%A8/3.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%8F%8C%E5%90%91%E9%93%BE%E8%A1%A8/3.png" alt="image-20200228095048677"></a></p><p>image-20200228095048677</p><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%8F%8C%E5%90%91%E9%93%BE%E8%A1%A8/4.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%8F%8C%E5%90%91%E9%93%BE%E8%A1%A8/4.png" alt="image-20200228095135301"></a></p><p>image-20200228095135301</p><p><strong>测试代码：</strong></p><pre class=" language-go"><code class="language-go">   <span class="token comment" spellcheck="true">//测试代码</span>   <span class="token comment" spellcheck="true">//1.创建双向链表</span>   let list <span class="token operator">=</span> <span class="token builtin">new</span> <span class="token function">DoubleLinklist</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token comment" spellcheck="true">//2.测试append方法</span>    list<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'aaa'</span><span class="token punctuation">)</span>    list<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'bbb'</span><span class="token punctuation">)</span>    list<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'ccc'</span><span class="token punctuation">)</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p><strong>测试结果：</strong></p><ul><li>next方向：</li></ul><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%8F%8C%E5%90%91%E9%93%BE%E8%A1%A8/5.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%8F%8C%E5%90%91%E9%93%BE%E8%A1%A8/5.png" alt="image-20200305223911713"></a></p><p>image-20200305223911713</p><ul><li>prev方向：</li></ul><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%8F%8C%E5%90%91%E9%93%BE%E8%A1%A8/6.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%8F%8C%E5%90%91%E9%93%BE%E8%A1%A8/6.png" alt="image-20200305224004626"></a></p><p>image-20200305224004626</p><h4 id="2-2-toString-汇总"><a href="#2-2-toString-汇总" class="headerlink" title="2.2.toString()汇总"></a>2.2.toString()汇总</h4><p><strong>代码实现：</strong></p><pre class=" language-javascript"><code class="language-javascript">      <span class="token comment" spellcheck="true">//将链表转变为字符串形式</span>      <span class="token comment" spellcheck="true">//一.toString方法</span>      DoubleLinklist<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>toString <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">backwardString</span><span class="token punctuation">(</span><span class="token punctuation">)</span>      <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>      <span class="token comment" spellcheck="true">//二.forwardString方法</span>      DoubleLinklist<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>forwardString <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//1.定义变量</span>        <span class="token keyword">let</span> current <span class="token operator">=</span><span class="token keyword">this</span><span class="token punctuation">.</span>tail        <span class="token keyword">let</span> resultString <span class="token operator">=</span> <span class="token string">""</span>        <span class="token comment" spellcheck="true">//2.依次向前遍历，获取每一个节点</span>        <span class="token keyword">while</span> <span class="token punctuation">(</span>current<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>          resultString <span class="token operator">+</span><span class="token operator">=</span> current<span class="token punctuation">.</span>data <span class="token operator">+</span> <span class="token string">"--"</span>          current <span class="token operator">=</span> current<span class="token punctuation">.</span>prev         <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> resultString      <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>      <span class="token comment" spellcheck="true">//三.backwardString方法</span>      DoubleLinklist<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>backwardString <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//1.定义变量</span>        <span class="token keyword">let</span> current <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>head        <span class="token keyword">let</span> resultString <span class="token operator">=</span> <span class="token string">""</span>        <span class="token comment" spellcheck="true">//2.依次向后遍历，获取每一个节点</span>        <span class="token keyword">while</span> <span class="token punctuation">(</span>current<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>          resultString <span class="token operator">+</span><span class="token operator">=</span> current<span class="token punctuation">.</span>data <span class="token operator">+</span> <span class="token string">"--"</span>          current <span class="token operator">=</span> current<span class="token punctuation">.</span>next        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> resultString      <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span></code></pre><p><strong>过程详解：</strong></p><p>三种获取字符串的方法：<strong>toString（）</strong>、<strong>forwardString（）</strong>、<strong>backwardString（）</strong>实现原理相似，仅以backWardString方法为例：</p><ul><li>定义current变量记录当前指向的节点。首先让current指向第一个节点，然后通过 current &#x3D; current.next 依次向后遍历。在while循环中以(current)作为条件遍历链表，只要current ！&#x3D; null就一直遍历，由此可获取链表所有节点的数据。</li></ul><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%8F%8C%E5%90%91%E9%93%BE%E8%A1%A8/7.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%8F%8C%E5%90%91%E9%93%BE%E8%A1%A8/7.png" alt="image-20200228100030713"></a></p><p>image-20200228100030713</p><p><strong>测试代码：</strong></p><pre class=" language-javascript"><code class="language-javascript">    <span class="token comment" spellcheck="true">//测试代码</span>    <span class="token comment" spellcheck="true">//1.创建双向链表</span>    <span class="token keyword">let</span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DoubleLinklist</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token comment" spellcheck="true">//2.测试字符串方法   </span>    list<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'aaa'</span><span class="token punctuation">)</span>    list<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'bbb'</span><span class="token punctuation">)</span>    list<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'ccc'</span><span class="token punctuation">)</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>list<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>list<span class="token punctuation">.</span><span class="token function">forwardString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>list<span class="token punctuation">.</span><span class="token function">backwardString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p><strong>测试结果：</strong></p><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%8F%8C%E5%90%91%E9%93%BE%E8%A1%A8/8.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%8F%8C%E5%90%91%E9%93%BE%E8%A1%A8/8.png" alt="image-20200305225437424"></a></p><p>image-20200305225437424</p><h4 id="2-3-insert-position-element-1"><a href="#2-3-insert-position-element-1" class="headerlink" title="2.3.insert(position,element)"></a>2.3.insert(position,element)</h4><p><strong>代码实现：</strong></p><pre class=" language-kotlin"><code class="language-kotlin">      <span class="token comment" spellcheck="true">//insert方法</span>      DoubleLinklist<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>insert <span class="token operator">=</span> <span class="token punctuation">(</span>position<span class="token punctuation">,</span> <span class="token keyword">data</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//1.越界判断</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>position <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">||</span> position <span class="token operator">></span> <span class="token keyword">this</span><span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">false</span>        <span class="token comment" spellcheck="true">//2.根据data创建新的节点</span>        let newNode <span class="token operator">=</span> new <span class="token function">Node</span><span class="token punctuation">(</span><span class="token keyword">data</span><span class="token punctuation">)</span>        <span class="token comment" spellcheck="true">//3.插入新节点</span>        <span class="token comment" spellcheck="true">//原链表为空</span>          <span class="token comment" spellcheck="true">//情况1：插入的newNode是第一个节点</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>length <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>          <span class="token keyword">this</span><span class="token punctuation">.</span>head <span class="token operator">=</span> newNode          <span class="token keyword">this</span><span class="token punctuation">.</span>tail <span class="token operator">=</span> newNode        <span class="token comment" spellcheck="true">//原链表不为空</span>        &amp;#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">else</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>          <span class="token comment" spellcheck="true">//情况2：position == 0</span>          <span class="token keyword">if</span> <span class="token punctuation">(</span>position <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>head<span class="token punctuation">.</span>prev <span class="token operator">=</span> newNode            newNode<span class="token punctuation">.</span>next <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>head            <span class="token keyword">this</span><span class="token punctuation">.</span>head <span class="token operator">=</span> newNode          <span class="token comment" spellcheck="true">//情况3：position == this.length </span>          &amp;#<span class="token number">125</span><span class="token punctuation">;</span> <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>position <span class="token operator">==</span> <span class="token keyword">this</span><span class="token punctuation">.</span>length<span class="token punctuation">)</span>&amp;#<span class="token number">123</span><span class="token punctuation">;</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>tail<span class="token punctuation">.</span>next <span class="token operator">=</span> newNode            newNode<span class="token punctuation">.</span>prev <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>tail            <span class="token keyword">this</span><span class="token punctuation">.</span>tail <span class="token operator">=</span> newNode            <span class="token comment" spellcheck="true">//情况4：0 &lt; position &lt; this.length</span>          &amp;#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">else</span>&amp;#<span class="token number">123</span><span class="token punctuation">;</span>            let current <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>head            let index <span class="token operator">=</span> <span class="token number">0</span>            <span class="token keyword">while</span><span class="token punctuation">(</span>index<span class="token operator">++</span> <span class="token operator">&lt;</span> position<span class="token punctuation">)</span>&amp;#<span class="token number">123</span><span class="token punctuation">;</span>              current <span class="token operator">=</span> current<span class="token punctuation">.</span>next            &amp;#<span class="token number">125</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">//修改pos位置前后节点变量的指向</span>            newNode<span class="token punctuation">.</span>next <span class="token operator">=</span> current            newNode<span class="token punctuation">.</span>prev <span class="token operator">=</span> current<span class="token punctuation">.</span>prev            current<span class="token punctuation">.</span>prev<span class="token punctuation">.</span>next <span class="token operator">=</span> newNode            current<span class="token punctuation">.</span>prev <span class="token operator">=</span> newNode          &amp;#<span class="token number">125</span><span class="token punctuation">;</span>        &amp;#<span class="token number">125</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//4.length+1</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>length <span class="token operator">+=</span> <span class="token number">1</span>        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token comment" spellcheck="true">//返回true表示插入成功</span>      &amp;#<span class="token number">125</span><span class="token punctuation">;</span></code></pre><p><strong>过程详解：</strong></p><p>插入节点可分为多种情况：</p><p><strong>当原链表为空时</strong>：</p><ul><li>情况1：插入的新节点是链表的第一个节点；只需要让head和tail都指向newNode即可。</li></ul><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%8F%8C%E5%90%91%E9%93%BE%E8%A1%A8/9.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%8F%8C%E5%90%91%E9%93%BE%E8%A1%A8/9.png" alt="image-20200228102437899"></a></p><p>image-20200228102437899</p><p><strong>当原链表不为空时</strong>：</p><ul><li>情况2：当position &#x3D;&#x3D; 0，即在链表的首部添加节点：如下图所示：</li></ul><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%8F%8C%E5%90%91%E9%93%BE%E8%A1%A8/10.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%8F%8C%E5%90%91%E9%93%BE%E8%A1%A8/10.png" alt="image-20200228103942238"></a></p><p>image-20200228103942238</p><p>首先，通过：this.head.prev &#x3D; newNode，改变指向1；</p><p>然后，通过：newNode.next &#x3D; this.head，改变指向2；</p><p>最后，通过：this.head &#x3D; newNode，改变指向3；</p><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%8F%8C%E5%90%91%E9%93%BE%E8%A1%A8/11.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%8F%8C%E5%90%91%E9%93%BE%E8%A1%A8/11.png" alt="image-20200228110014565"></a></p><p>image-20200228110014565</p><ul><li>情况3：position &#x3D;&#x3D; this.length，即在链表的尾部添加节点，如下图所示：</li></ul><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%8F%8C%E5%90%91%E9%93%BE%E8%A1%A8/12.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%8F%8C%E5%90%91%E9%93%BE%E8%A1%A8/12.png" alt="image-20200228105207102"></a></p><p>image-20200228105207102</p><p>首先，通过：this.tail.next &#x3D; newNode，改变指向1；（注意这里使用this.tail指向原链表最后一个节点，而不是this.head。因为当length&gt;1时，this.head !&#x3D; this.tail。）</p><p>然后，通过：newNode.prev &#x3D; this.tail，改变指向2；</p><p>最后，通过：this.tail &#x3D; newNode，改变指向3；</p><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%8F%8C%E5%90%91%E9%93%BE%E8%A1%A8/13.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%8F%8C%E5%90%91%E9%93%BE%E8%A1%A8/13.png" alt="image-20200228110745214"></a></p><p>image-20200228110745214</p><ul><li>情况4：0 &lt; position &lt; this.length，即在链表的中间插入新节点，假设在position &#x3D; 1的位置插入，如下图所示：</li></ul><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%8F%8C%E5%90%91%E9%93%BE%E8%A1%A8/14.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%8F%8C%E5%90%91%E9%93%BE%E8%A1%A8/14.png" alt="image-20200228112941682"></a></p><p>image-20200228112941682</p><p>首先，需要定义变量current按照之前的思路，通过while循环找到position位置的后一个节点，循环结束后index &#x3D; position</p><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%8F%8C%E5%90%91%E9%93%BE%E8%A1%A8/15.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%8F%8C%E5%90%91%E9%93%BE%E8%A1%A8/15.png" alt="image-20200228113257650"></a></p><p>image-20200228113257650</p><p>如下图所示：当position &#x3D; 1时，current就指向了Node2。这样操作current就等同于间接地操作Node2，还可以通过current.prev间接获取Node1。得到了newNode的前一个节点和后一个节点就可以通过改变它们的prev和next变量的指向来插入newNode了。</p><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%8F%8C%E5%90%91%E9%93%BE%E8%A1%A8/16.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%8F%8C%E5%90%91%E9%93%BE%E8%A1%A8/16.png" alt="image-20200228120701923"></a></p><p>image-20200228120701923</p><p>通过：newNode.next &#x3D; current，改变指向1；</p><p>通过：newNode.prev &#x3D; current.prev，改变指向2；</p><p>通过：current.prev.next &#x3D; newNode，改变指向3；</p><blockquote><p>注意必须最后才修改current.prev的指向，不然就无法通过current.prev获取需要操作的Node1了。</p></blockquote><p>通过：current.prev &#x3D; current，改变指向4；</p><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%8F%8C%E5%90%91%E9%93%BE%E8%A1%A8/17.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%8F%8C%E5%90%91%E9%93%BE%E8%A1%A8/17.png" alt="image-20200228124931441"></a></p><p>image-20200228124931441</p><p><strong>测试代码：</strong></p><pre class=" language-javascript"><code class="language-javascript">    <span class="token comment" spellcheck="true">//测试代码</span>    <span class="token comment" spellcheck="true">//1.创建双向链表</span>    <span class="token keyword">let</span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DoubleLinklist</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token comment" spellcheck="true">//2.测试insert方法</span>    list<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">'插入链表的第一个元素'</span><span class="token punctuation">)</span>    list<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">'在链表首部插入元素'</span><span class="token punctuation">)</span>    list<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'在链表中间插入元素'</span><span class="token punctuation">)</span>    list<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">'在链表尾部插入元素'</span><span class="token punctuation">)</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">alert</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span></code></pre><p><strong>测试结果：</strong></p><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%8F%8C%E5%90%91%E9%93%BE%E8%A1%A8/18.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%8F%8C%E5%90%91%E9%93%BE%E8%A1%A8/18.png" alt="image-20200228130649724"></a></p><p>image-20200228130649724</p><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%8F%8C%E5%90%91%E9%93%BE%E8%A1%A8/19.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%8F%8C%E5%90%91%E9%93%BE%E8%A1%A8/19.png" alt="image-20200228130748735"></a></p><p>image-20200228130748735</p><h4 id="2-4-get-position-1"><a href="#2-4-get-position-1" class="headerlink" title="2.4.get(position)"></a>2.4.get(position)</h4><p><strong>代码实现：</strong></p><pre class=" language-kotlin"><code class="language-kotlin">      <span class="token comment" spellcheck="true">//get方法</span>      DoubleLinklist<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>get <span class="token operator">=</span> position <span class="token operator">=</span><span class="token operator">></span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//1.越界判断</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>position <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">||</span> position <span class="token operator">>=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>length<span class="token punctuation">)</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//获取元素时position不能等于length</span>          <span class="token keyword">return</span> <span class="token keyword">null</span>        &amp;#<span class="token number">125</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//2.获取元素</span>        let current <span class="token operator">=</span> <span class="token keyword">null</span>        let index <span class="token operator">=</span> <span class="token number">0</span>        <span class="token comment" spellcheck="true">//this.length / 2 > position:从头开始遍历</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>length <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">></span> position<span class="token punctuation">)</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>          current <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>head          <span class="token keyword">while</span><span class="token punctuation">(</span>index<span class="token operator">++</span> <span class="token operator">&lt;</span> position<span class="token punctuation">)</span>&amp;#<span class="token number">123</span><span class="token punctuation">;</span>          current <span class="token operator">=</span> current<span class="token punctuation">.</span>next        &amp;#<span class="token number">125</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//this.length / 2 =&lt; position:从尾开始遍历</span>        &amp;#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">else</span>&amp;#<span class="token number">123</span><span class="token punctuation">;</span>          current <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>tail          index <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span>          <span class="token keyword">while</span><span class="token punctuation">(</span>index<span class="token operator">--</span> <span class="token operator">></span> position<span class="token punctuation">)</span>&amp;#<span class="token number">123</span><span class="token punctuation">;</span>          current <span class="token operator">=</span> current<span class="token punctuation">.</span>prev        &amp;#<span class="token number">125</span><span class="token punctuation">;</span>        &amp;#<span class="token number">125</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> current<span class="token punctuation">.</span>data      &amp;#<span class="token number">125</span><span class="token punctuation">;</span></code></pre><p><strong>过程详解：</strong></p><p>定义两个变量current和index，按照之前的思路通过while循环遍历分别获取当前节点和对应的索引值index，直到找到需要获取的position位置后的一个节点，此时index &#x3D; pos &#x3D;x，然后return current.data即可。</p><p>如果链表的节点数量很多时，这种查找方式效率不高，改进方法为：</p><blockquote><p>一定要通过this.length来获取链表的节点数否则就会报错。</p></blockquote><ul><li>当this.length &#x2F; 2 &gt; position：从头（head）开始遍历；</li><li>当this.length &#x2F; 2 &lt; position：从尾（tail）开始遍历；</li></ul><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%8F%8C%E5%90%91%E9%93%BE%E8%A1%A8/20.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%8F%8C%E5%90%91%E9%93%BE%E8%A1%A8/20.png" alt="image-20200228144005347"></a></p><p>image-20200228144005347</p><p><strong>测试代码：</strong></p><pre class=" language-go"><code class="language-go">    <span class="token comment" spellcheck="true">//测试代码</span>    <span class="token comment" spellcheck="true">//1.创建双向链表</span>    let list <span class="token operator">=</span> <span class="token builtin">new</span> <span class="token function">DoubleLinklist</span><span class="token punctuation">(</span><span class="token punctuation">)</span>          <span class="token comment" spellcheck="true">//2.测试get方法</span>    list<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span>    list<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'b'</span><span class="token punctuation">)</span>    list<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'b1'</span><span class="token punctuation">)</span>    list<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'b2'</span><span class="token punctuation">)</span>    list<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'b3'</span><span class="token punctuation">)</span>    list<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'b4'</span><span class="token punctuation">)</span>    list<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'b5'</span><span class="token punctuation">)</span>    list<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'b6'</span><span class="token punctuation">)</span>    list<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'b7'</span><span class="token punctuation">)</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>list<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>list<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p><strong>测试结果：</strong></p><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%8F%8C%E5%90%91%E9%93%BE%E8%A1%A8/21.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%8F%8C%E5%90%91%E9%93%BE%E8%A1%A8/21.png" alt="image-20200228145413524"></a></p><p>image-20200228145413524</p><h4 id="2-5-indexOf-element-1"><a href="#2-5-indexOf-element-1" class="headerlink" title="2.5.indexOf(element)"></a>2.5.indexOf(element)</h4><p><strong>代码实现：</strong></p><pre class=" language-kotlin"><code class="language-kotlin">      <span class="token comment" spellcheck="true">//indexOf方法</span>      DoubleLinklist<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>indexOf <span class="token operator">=</span> <span class="token keyword">data</span> <span class="token operator">=</span><span class="token operator">></span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//1.定义变量</span>        let current <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>head        let index <span class="token operator">=</span> <span class="token number">0</span>        <span class="token comment" spellcheck="true">//2.遍历链表，查找与data相同的节点</span>        <span class="token keyword">while</span><span class="token punctuation">(</span>current<span class="token punctuation">)</span>&amp;#<span class="token number">123</span><span class="token punctuation">;</span>          <span class="token keyword">if</span> <span class="token punctuation">(</span>current<span class="token punctuation">.</span>data <span class="token operator">==</span> <span class="token keyword">data</span><span class="token punctuation">)</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>            <span class="token keyword">return</span> index          &amp;#<span class="token number">125</span><span class="token punctuation">;</span>          current <span class="token operator">=</span> current<span class="token punctuation">.</span>next          index <span class="token operator">+=</span> <span class="token number">1</span>        &amp;#<span class="token number">125</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span>      &amp;#<span class="token number">125</span><span class="token punctuation">;</span> </code></pre><p><strong>过程详解：</strong></p><p>以（current）作为条件，通过while循环遍历链表中的所有节点（停止条件为current &#x3D; null）。在遍历每个节点时将current指向的当前节点的data和传入的data进行比较即可。</p><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%8F%8C%E5%90%91%E9%93%BE%E8%A1%A8/22.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%8F%8C%E5%90%91%E9%93%BE%E8%A1%A8/22.png" alt="image-20200228150427485"></a></p><p>image-20200228150427485</p><p><strong>测试代码：</strong></p><pre class=" language-go"><code class="language-go">    <span class="token comment" spellcheck="true">//测试代码</span>    <span class="token comment" spellcheck="true">//1.创建双向链表</span>    let list <span class="token operator">=</span> <span class="token builtin">new</span> <span class="token function">DoubleLinklist</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token comment" spellcheck="true">//2.测试indexOf方法</span>    list<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span>    list<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'b'</span><span class="token punctuation">)</span>    list<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'c'</span><span class="token punctuation">)</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>list<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>list<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">'c'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p><strong>测试结果：</strong></p><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%8F%8C%E5%90%91%E9%93%BE%E8%A1%A8/23.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%8F%8C%E5%90%91%E9%93%BE%E8%A1%A8/23.png" alt="image-20200228150612681"></a></p><p>image-20200228150612681</p><h4 id="2-7-update-position-element"><a href="#2-7-update-position-element" class="headerlink" title="2.7.update(position,element)"></a>2.7.update(position,element)</h4><p><strong>代码实现：</strong></p><pre class=" language-kotlin"><code class="language-kotlin">     <span class="token comment" spellcheck="true">//update方法</span>      DoubleLinklist<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>update <span class="token operator">=</span> <span class="token punctuation">(</span>position<span class="token punctuation">,</span> newData<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//1.越界判断</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>position <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">||</span> position <span class="token operator">>=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>length<span class="token punctuation">)</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>          <span class="token keyword">return</span> <span class="token boolean">false</span>        &amp;#<span class="token number">125</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//2.寻找正确的节点</span>        let current <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>head        let index <span class="token operator">=</span> <span class="token number">0</span>        <span class="token comment" spellcheck="true">//this.length / 2 > position:从头开始遍历</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>length <span class="token operator">/</span> <span class="token number">2</span> <span class="token operator">></span> position<span class="token punctuation">)</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>          <span class="token keyword">while</span><span class="token punctuation">(</span>index<span class="token operator">++</span> <span class="token operator">&lt;</span> position<span class="token punctuation">)</span>&amp;#<span class="token number">123</span><span class="token punctuation">;</span>          current <span class="token operator">=</span> current<span class="token punctuation">.</span>next        &amp;#<span class="token number">125</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//this.length / 2 =&lt; position:从尾开始遍历</span>        &amp;#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">else</span>&amp;#<span class="token number">123</span><span class="token punctuation">;</span>          current <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>tail          index <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span>          <span class="token keyword">while</span> <span class="token punctuation">(</span>index <span class="token operator">--</span> <span class="token operator">></span> position<span class="token punctuation">)</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>            current <span class="token operator">=</span> current<span class="token punctuation">.</span>prev          &amp;#<span class="token number">125</span><span class="token punctuation">;</span>        &amp;#<span class="token number">125</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//3.修改找到节点的data</span>        current<span class="token punctuation">.</span>data <span class="token operator">=</span> newData        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token comment" spellcheck="true">//表示成功修改</span>      &amp;#<span class="token number">125</span><span class="token punctuation">;</span></code></pre><p><strong>过程详解：</strong></p><p>以（index++ &lt; position）为条件，通过while循环遍历链表中的节点（停止条件为index &#x3D; position）。循环结束后，current指向需要修改的节点。</p><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%8F%8C%E5%90%91%E9%93%BE%E8%A1%A8/24.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%8F%8C%E5%90%91%E9%93%BE%E8%A1%A8/24.png" alt="image-20200228152136284"></a></p><p>image-20200228152136284</p><p><strong>测试代码：</strong></p><pre class=" language-javascript"><code class="language-javascript">    <span class="token comment" spellcheck="true">//测试代码</span>    <span class="token comment" spellcheck="true">//1.创建双向链表</span>    <span class="token keyword">let</span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DoubleLinklist</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token comment" spellcheck="true">//2.测试update方法</span>    list<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span>    list<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'b'</span><span class="token punctuation">)</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>list<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'c'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p><strong>测试结果：</strong></p><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%8F%8C%E5%90%91%E9%93%BE%E8%A1%A8/25.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%8F%8C%E5%90%91%E9%93%BE%E8%A1%A8/25.png" alt="image-20200228151340638"></a></p><p>image-20200228151340638</p><h4 id="2-8-removeAt-position"><a href="#2-8-removeAt-position" class="headerlink" title="2.8.removeAt(position)"></a>2.8.removeAt(position)</h4><p><strong>代码实现：</strong></p><pre class=" language-kotlin"><code class="language-kotlin">     <span class="token comment" spellcheck="true">//removeAt方法</span>      DoubleLinklist<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>removeAt <span class="token operator">=</span> position <span class="token operator">=</span><span class="token operator">></span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//1.越界判断</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>position <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">||</span> position <span class="token operator">>=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>length<span class="token punctuation">)</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>          <span class="token keyword">return</span> <span class="token keyword">null</span>        &amp;#<span class="token number">125</span><span class="token punctuation">;</span>                <span class="token comment" spellcheck="true">//2.删除节点</span>        <span class="token comment" spellcheck="true">//当链表中length == 1</span>        <span class="token comment" spellcheck="true">//情况1：链表只有一个节点</span>        let current <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>head<span class="token comment" spellcheck="true">//定义在最上面方便以下各种情况返回current.data</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>length <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>          <span class="token keyword">this</span><span class="token punctuation">.</span>head <span class="token operator">=</span> <span class="token keyword">null</span>          <span class="token keyword">this</span><span class="token punctuation">.</span>tail <span class="token operator">=</span> <span class="token keyword">null</span>        <span class="token comment" spellcheck="true">//当链表中length > 1</span>        &amp;#<span class="token number">125</span><span class="token punctuation">;</span> <span class="token keyword">else</span>&amp;#<span class="token number">123</span><span class="token punctuation">;</span>          <span class="token comment" spellcheck="true">//情况2：删除第一个节点</span>          <span class="token keyword">if</span> <span class="token punctuation">(</span>position <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>head<span class="token punctuation">.</span>next<span class="token punctuation">.</span>prev <span class="token operator">=</span> <span class="token keyword">null</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>head <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>head<span class="token punctuation">.</span>next          <span class="token comment" spellcheck="true">//情况3：删除最后一个节点</span>          &amp;#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>position <span class="token operator">==</span> <span class="token keyword">this</span><span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span>&amp;#<span class="token number">123</span><span class="token punctuation">;</span>            current <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>tail<span class="token comment" spellcheck="true">//该情况下返回被删除的最后一个节点</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>tail<span class="token punctuation">.</span>prev<span class="token punctuation">.</span>next <span class="token operator">=</span> <span class="token keyword">null</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>tail <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>tail<span class="token punctuation">.</span>prev          &amp;#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">else</span>&amp;#<span class="token number">123</span><span class="token punctuation">;</span>          <span class="token comment" spellcheck="true">//情况4：删除链表中间的节点</span>            let index <span class="token operator">=</span> <span class="token number">0</span>            <span class="token keyword">while</span><span class="token punctuation">(</span>index<span class="token operator">++</span> <span class="token operator">&lt;</span> position<span class="token punctuation">)</span>&amp;#<span class="token number">123</span><span class="token punctuation">;</span>              current <span class="token operator">=</span> current<span class="token punctuation">.</span>next            &amp;#<span class="token number">125</span><span class="token punctuation">;</span>            current<span class="token punctuation">.</span>next<span class="token punctuation">.</span>prev <span class="token operator">=</span> current<span class="token punctuation">.</span>prev            current<span class="token punctuation">.</span>prev<span class="token punctuation">.</span>next <span class="token operator">=</span> current<span class="token punctuation">.</span>next          &amp;#<span class="token number">125</span><span class="token punctuation">;</span>        &amp;#<span class="token number">125</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//3.length -= 1</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>length <span class="token operator">-=</span> <span class="token number">1</span>        <span class="token keyword">return</span> current<span class="token punctuation">.</span>data<span class="token comment" spellcheck="true">//返回被删除节点的数据</span>      &amp;#<span class="token number">125</span><span class="token punctuation">;</span></code></pre><p><strong>过程详解：</strong></p><p>删除节点时有多种情况：</p><p><strong>当链表的length &#x3D; 1时</strong>：</p><ul><li>情况1：删除链表中的所有节点：只需要让链表的head和tail指向null即可。</li></ul><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%8F%8C%E5%90%91%E9%93%BE%E8%A1%A8/26.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%8F%8C%E5%90%91%E9%93%BE%E8%A1%A8/26.png" alt="image-20200228153331976"></a></p><p>image-20200228153331976</p><p><strong>当链表的length &gt; 1时</strong>：</p><ul><li><p>情况2：删除链表中的第一个节点：</p><p>通过：this.head.next.prev &#x3D; null，改变指向1；</p><p>通过：this.head &#x3D; this.head.next，改变指向2；</p><p>虽然Node1有引用指向其它节点，但是没有引用指向Node1，那么Node1会被自动回收。</p></li></ul><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%8F%8C%E5%90%91%E9%93%BE%E8%A1%A8/27.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%8F%8C%E5%90%91%E9%93%BE%E8%A1%A8/27.png" alt="image-20200228162347115"></a></p><p>image-20200228162347115</p><ul><li><p>情况3：删除链表中的最后一个节点：</p><p>通过：this.tail.prev.next &#x3D; null，修改指向1；</p><p>通过：this.tail &#x3D; this.tail.prev，修改指向2；</p></li></ul><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%8F%8C%E5%90%91%E9%93%BE%E8%A1%A8/28.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%8F%8C%E5%90%91%E9%93%BE%E8%A1%A8/28.png" alt="image-20200228161946691"></a></p><p>image-20200228161946691</p><ul><li>情况4：删除链表中间的节点：</li></ul><p>通过while循环找到需要删除的节点，比如position &#x3D; x，那么需要删除的节点就是Node(x+1)，如下图所示：</p><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%8F%8C%E5%90%91%E9%93%BE%E8%A1%A8/29.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%8F%8C%E5%90%91%E9%93%BE%E8%A1%A8/29.png" alt="image-20200228161648125"></a></p><p>image-20200228161648125</p><p>通过：current.next.prev &#x3D; current.prev，修改指向1；</p><p>通过：current.prev.next &#x3D; current.next，修改指向2；</p><p>这样就没有引用指向Node(x+1)了（current虽指向Node(x+1)，但current时临时变量，该方法执行完就会被销毁），随后Node(x+1)就会被自动删除。</p><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%8F%8C%E5%90%91%E9%93%BE%E8%A1%A8/30.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%8F%8C%E5%90%91%E9%93%BE%E8%A1%A8/30.png" alt="image-20200228162415044"></a></p><p>image-20200228162415044</p><p><strong>测试代码：</strong></p><pre class=" language-go"><code class="language-go">    <span class="token comment" spellcheck="true">//测试代码</span>    <span class="token comment" spellcheck="true">//1.创建双向链表</span>    let list <span class="token operator">=</span> <span class="token builtin">new</span> <span class="token function">DoubleLinklist</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token comment" spellcheck="true">//2.测试removeAt方法</span>    list<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span>    list<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'b'</span><span class="token punctuation">)</span>    list<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'c'</span><span class="token punctuation">)</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>list<span class="token punctuation">.</span><span class="token function">removeAt</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p><strong>测试结果：</strong></p><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%8F%8C%E5%90%91%E9%93%BE%E8%A1%A8/31.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%8F%8C%E5%90%91%E9%93%BE%E8%A1%A8/31.png" alt="image-20200228163935060"></a></p><p>image-20200228163935060</p><h4 id="2-9-其他方法"><a href="#2-9-其他方法" class="headerlink" title="2.9.其他方法"></a>2.9.其他方法</h4><p>其他方法包括：<strong>remove(element)、isEmpty()、size()、getHead()、getTail()</strong></p><p><strong>代码实现：</strong></p><pre class=" language-kotlin"><code class="language-kotlin">  <span class="token comment" spellcheck="true">/*--------------------其他方法-------------------*/</span>  <span class="token comment" spellcheck="true">//八.remove方法</span>  DoubleLinklist<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>remove <span class="token operator">=</span> <span class="token keyword">data</span> <span class="token operator">=</span><span class="token operator">></span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//1.根据data获取下标值</span>    let index <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token keyword">data</span><span class="token punctuation">)</span>        <span class="token comment" spellcheck="true">//2.根据index删除对应位置的节点</span>    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">removeAt</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span>  &amp;#<span class="token number">125</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">//九.isEmpty方法</span>  DoubleLinklist<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>isEmpty <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>length <span class="token operator">==</span> <span class="token number">0</span>  &amp;#<span class="token number">125</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">//十.size方法</span>  DoubleLinklist<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>size <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>length  &amp;#<span class="token number">125</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">//十一.getHead方法：获取链表的第一个元素</span>  DoubleLinklist<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>getHead <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>head<span class="token punctuation">.</span>data  &amp;#<span class="token number">125</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">//十二.getTail方法：获取链表的最后一个元素</span>  DoubleLinklist<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>getTail <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>tail<span class="token punctuation">.</span>data  &amp;#<span class="token number">125</span><span class="token punctuation">;</span></code></pre><p><strong>测试代码：</strong></p><pre class=" language-javascript"><code class="language-javascript">    <span class="token comment" spellcheck="true">//测试代码</span>    <span class="token comment" spellcheck="true">//1.创建双向链表</span>    <span class="token keyword">let</span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DoubleLinklist</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">/*------------其他方法的测试--------------*/</span>    list<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span>    list<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'b'</span><span class="token punctuation">)</span>    list<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'c'</span><span class="token punctuation">)</span>    list<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'d'</span><span class="token punctuation">)</span>    <span class="token comment" spellcheck="true">//remove方法</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>list<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//isEmpty方法</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>list<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//size方法</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>list<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//getHead方法</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>list<span class="token punctuation">.</span><span class="token function">getHead</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//getTead方法</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>list<span class="token punctuation">.</span><span class="token function">getTail</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p><strong>测试结果：</strong></p><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%8F%8C%E5%90%91%E9%93%BE%E8%A1%A8/32.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%8F%8C%E5%90%91%E9%93%BE%E8%A1%A8/32.png" alt="image-20200228165845014"></a></p><p>image-20200228165845014</p><h4 id="2-10-完整实现"><a href="#2-10-完整实现" class="headerlink" title="2.10.完整实现"></a>2.10.完整实现</h4><pre class=" language-kotlin"><code class="language-kotlin"><span class="token comment" spellcheck="true">//封装双向链表</span>function <span class="token function">DoubleLinklist</span><span class="token punctuation">(</span><span class="token punctuation">)</span>&amp;#<span class="token number">123</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">//封装内部类：节点类</span>  function <span class="token function">Node</span><span class="token punctuation">(</span><span class="token keyword">data</span><span class="token punctuation">)</span>&amp;#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>data <span class="token operator">=</span> <span class="token keyword">data</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>prev <span class="token operator">=</span> <span class="token keyword">null</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>next <span class="token operator">=</span> <span class="token keyword">null</span>  &amp;#<span class="token number">125</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">//属性</span>  <span class="token keyword">this</span><span class="token punctuation">.</span>head <span class="token operator">=</span> <span class="token keyword">null</span>  <span class="token keyword">this</span><span class="token punctuation">.</span>tail <span class="token operator">==</span><span class="token keyword">null</span>  <span class="token keyword">this</span><span class="token punctuation">.</span>length <span class="token operator">=</span> <span class="token number">0</span>  <span class="token comment" spellcheck="true">//常见的操作：方法</span>  <span class="token comment" spellcheck="true">//一.append方法</span>  DoubleLinklist<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>append <span class="token operator">=</span> <span class="token keyword">data</span> <span class="token operator">=</span><span class="token operator">></span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//1.根据data创建新节点</span>    let newNode <span class="token operator">=</span> new <span class="token function">Node</span><span class="token punctuation">(</span><span class="token keyword">data</span><span class="token punctuation">)</span>    <span class="token comment" spellcheck="true">//2.添加节点</span>    <span class="token comment" spellcheck="true">//情况1：添加的是第一个节点</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>length <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>      <span class="token keyword">this</span><span class="token punctuation">.</span>tail <span class="token operator">=</span> newNode      <span class="token keyword">this</span><span class="token punctuation">.</span>head <span class="token operator">=</span> newNode     <span class="token comment" spellcheck="true">//情况2：添加的不是第一个节点</span>    &amp;#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">else</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>      newNode<span class="token punctuation">.</span>prev <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>tail      <span class="token keyword">this</span><span class="token punctuation">.</span>tail<span class="token punctuation">.</span>next <span class="token operator">=</span> newNode      <span class="token keyword">this</span><span class="token punctuation">.</span>tail <span class="token operator">=</span> newNode    &amp;#<span class="token number">125</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//3.length+1</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>length <span class="token operator">+=</span> <span class="token number">1</span>  &amp;#<span class="token number">125</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">//二.将链表转变为字符串形式</span>  <span class="token comment" spellcheck="true">//2.1.toString方法</span>  DoubleLinklist<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>toString <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">backwardString</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  &amp;#<span class="token number">125</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">//2.2.forwardString方法</span>  DoubleLinklist<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>forwardString <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//1.定义变量</span>    let current <span class="token operator">=</span><span class="token keyword">this</span><span class="token punctuation">.</span>tail    let resultString <span class="token operator">=</span> <span class="token string">""</span>    <span class="token comment" spellcheck="true">//2.依次向前遍历，获取每一个节点</span>    <span class="token keyword">while</span> <span class="token punctuation">(</span>current<span class="token punctuation">)</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>      resultString <span class="token operator">+=</span> current<span class="token punctuation">.</span>data <span class="token operator">+</span> <span class="token string">"--"</span>      current <span class="token operator">=</span> current<span class="token punctuation">.</span>prev     &amp;#<span class="token number">125</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> resultString  &amp;#<span class="token number">125</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">//2.3.backwardString方法</span>  DoubleLinklist<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>backwardString <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//1.定义变量</span>    let current <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>head    let resultString <span class="token operator">=</span> <span class="token string">""</span>    <span class="token comment" spellcheck="true">//2.依次向后遍历，获取每一个节点</span>    <span class="token keyword">while</span> <span class="token punctuation">(</span>current<span class="token punctuation">)</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>      resultString <span class="token operator">+=</span> current<span class="token punctuation">.</span>data <span class="token operator">+</span> <span class="token string">"--"</span>      current <span class="token operator">=</span> current<span class="token punctuation">.</span>next    &amp;#<span class="token number">125</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> resultString  &amp;#<span class="token number">125</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">//三.insert方法</span>  DoubleLinklist<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>insert <span class="token operator">=</span> <span class="token punctuation">(</span>position<span class="token punctuation">,</span> <span class="token keyword">data</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//1.越界判断</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>position <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">||</span> position <span class="token operator">></span> <span class="token keyword">this</span><span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">false</span>    <span class="token comment" spellcheck="true">//2.根据data创建新的节点</span>    let newNode <span class="token operator">=</span> new <span class="token function">Node</span><span class="token punctuation">(</span><span class="token keyword">data</span><span class="token punctuation">)</span>    <span class="token comment" spellcheck="true">//3.插入新节点</span>    <span class="token comment" spellcheck="true">//原链表为空</span>      <span class="token comment" spellcheck="true">//情况1：插入的newNode是第一个节点</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>length <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>      <span class="token keyword">this</span><span class="token punctuation">.</span>head <span class="token operator">=</span> newNode      <span class="token keyword">this</span><span class="token punctuation">.</span>tail <span class="token operator">=</span> newNode    <span class="token comment" spellcheck="true">//原链表不为空</span>    &amp;#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">else</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>      <span class="token comment" spellcheck="true">//情况2：position == 0</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span>position <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>head<span class="token punctuation">.</span>prev <span class="token operator">=</span> newNode        newNode<span class="token punctuation">.</span>next <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>head        <span class="token keyword">this</span><span class="token punctuation">.</span>head <span class="token operator">=</span> newNode      <span class="token comment" spellcheck="true">//情况3：position == this.length </span>      &amp;#<span class="token number">125</span><span class="token punctuation">;</span> <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>position <span class="token operator">==</span> <span class="token keyword">this</span><span class="token punctuation">.</span>length<span class="token punctuation">)</span>&amp;#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>tail<span class="token punctuation">.</span>next <span class="token operator">=</span> newNode        newNode<span class="token punctuation">.</span>prev <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>tail        <span class="token keyword">this</span><span class="token punctuation">.</span>tail <span class="token operator">=</span> newNode        <span class="token comment" spellcheck="true">//情况4：0 &lt; position &lt; this.length</span>      &amp;#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">else</span>&amp;#<span class="token number">123</span><span class="token punctuation">;</span>        let current <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>head        let index <span class="token operator">=</span> <span class="token number">0</span>        <span class="token keyword">while</span><span class="token punctuation">(</span>index<span class="token operator">++</span> <span class="token operator">&lt;</span> position<span class="token punctuation">)</span>&amp;#<span class="token number">123</span><span class="token punctuation">;</span>          current <span class="token operator">=</span> current<span class="token punctuation">.</span>next        &amp;#<span class="token number">125</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//修改pos位置前后节点变量的指向</span>        newNode<span class="token punctuation">.</span>next <span class="token operator">=</span> current        newNode<span class="token punctuation">.</span>prev <span class="token operator">=</span> current<span class="token punctuation">.</span>prev        current<span class="token punctuation">.</span>prev<span class="token punctuation">.</span>next <span class="token operator">=</span> newNode        current<span class="token punctuation">.</span>prev <span class="token operator">=</span> newNode      &amp;#<span class="token number">125</span><span class="token punctuation">;</span>    &amp;#<span class="token number">125</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//4.length+1</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>length <span class="token operator">+=</span> <span class="token number">1</span>    <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token comment" spellcheck="true">//返回true表示插入成功</span>  &amp;#<span class="token number">125</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">//四.get方法</span>  DoubleLinklist<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>get <span class="token operator">=</span> position <span class="token operator">=</span><span class="token operator">></span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//1.越界判断</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>position <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">||</span> position <span class="token operator">>=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>length<span class="token punctuation">)</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//获取元素时position不能等于length</span>      <span class="token keyword">return</span> <span class="token keyword">null</span>    &amp;#<span class="token number">125</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//2.获取元素</span>    let current <span class="token operator">=</span> <span class="token keyword">null</span>    let index <span class="token operator">=</span> <span class="token number">0</span>    <span class="token comment" spellcheck="true">//this.length / 2 > position:从头开始遍历</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>length <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">></span> position<span class="token punctuation">)</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>      current <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>head      <span class="token keyword">while</span><span class="token punctuation">(</span>index<span class="token operator">++</span> <span class="token operator">&lt;</span> position<span class="token punctuation">)</span>&amp;#<span class="token number">123</span><span class="token punctuation">;</span>      current <span class="token operator">=</span> current<span class="token punctuation">.</span>next    &amp;#<span class="token number">125</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//this.length / 2 =&lt; position:从尾开始遍历</span>    &amp;#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">else</span>&amp;#<span class="token number">123</span><span class="token punctuation">;</span>      current <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>tail      index <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span>      <span class="token keyword">while</span><span class="token punctuation">(</span>index<span class="token operator">--</span> <span class="token operator">></span> position<span class="token punctuation">)</span>&amp;#<span class="token number">123</span><span class="token punctuation">;</span>      current <span class="token operator">=</span> current<span class="token punctuation">.</span>prev    &amp;#<span class="token number">125</span><span class="token punctuation">;</span>    &amp;#<span class="token number">125</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> current<span class="token punctuation">.</span>data  &amp;#<span class="token number">125</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">//五.indexOf方法</span>  DoubleLinklist<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>indexOf <span class="token operator">=</span> <span class="token keyword">data</span> <span class="token operator">=</span><span class="token operator">></span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//1.定义变量</span>    let current <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>head    let index <span class="token operator">=</span> <span class="token number">0</span>    <span class="token comment" spellcheck="true">//2.遍历链表，查找与data相同的节点</span>    <span class="token keyword">while</span><span class="token punctuation">(</span>current<span class="token punctuation">)</span>&amp;#<span class="token number">123</span><span class="token punctuation">;</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span>current<span class="token punctuation">.</span>data <span class="token operator">==</span> <span class="token keyword">data</span><span class="token punctuation">)</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> index      &amp;#<span class="token number">125</span><span class="token punctuation">;</span>      current <span class="token operator">=</span> current<span class="token punctuation">.</span>next      index <span class="token operator">+=</span> <span class="token number">1</span>    &amp;#<span class="token number">125</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span>  &amp;#<span class="token number">125</span><span class="token punctuation">;</span>   <span class="token comment" spellcheck="true">//六.update方法</span>  DoubleLinklist<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>update <span class="token operator">=</span> <span class="token punctuation">(</span>position<span class="token punctuation">,</span> newData<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//1.越界判断</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>position <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">||</span> position <span class="token operator">>=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>length<span class="token punctuation">)</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>      <span class="token keyword">return</span> <span class="token boolean">false</span>    &amp;#<span class="token number">125</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//2.寻找正确的节点</span>    let current <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>head    let index <span class="token operator">=</span> <span class="token number">0</span>    <span class="token comment" spellcheck="true">//this.length / 2 > position:从头开始遍历</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>length <span class="token operator">/</span> <span class="token number">2</span> <span class="token operator">></span> position<span class="token punctuation">)</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>      <span class="token keyword">while</span><span class="token punctuation">(</span>index<span class="token operator">++</span> <span class="token operator">&lt;</span> position<span class="token punctuation">)</span>&amp;#<span class="token number">123</span><span class="token punctuation">;</span>      current <span class="token operator">=</span> current<span class="token punctuation">.</span>next    &amp;#<span class="token number">125</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//this.length / 2 =&lt; position:从尾开始遍历</span>    &amp;#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">else</span>&amp;#<span class="token number">123</span><span class="token punctuation">;</span>      current <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>tail      index <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span>      <span class="token keyword">while</span> <span class="token punctuation">(</span>index <span class="token operator">--</span> <span class="token operator">></span> position<span class="token punctuation">)</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>        current <span class="token operator">=</span> current<span class="token punctuation">.</span>prev      &amp;#<span class="token number">125</span><span class="token punctuation">;</span>    &amp;#<span class="token number">125</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//3.修改找到节点的data</span>    current<span class="token punctuation">.</span>data <span class="token operator">=</span> newData    <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token comment" spellcheck="true">//表示成功修改</span>  &amp;#<span class="token number">125</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">//七.removeAt方法</span>  DoubleLinklist<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>removeAt <span class="token operator">=</span> position <span class="token operator">=</span><span class="token operator">></span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//1.越界判断</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>position <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">||</span> position <span class="token operator">>=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>length<span class="token punctuation">)</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>      <span class="token keyword">return</span> <span class="token keyword">null</span>    &amp;#<span class="token number">125</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//2.删除节点</span>    <span class="token comment" spellcheck="true">//当链表中length == 1</span>    <span class="token comment" spellcheck="true">//情况1：链表只有一个节点</span>    let current <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>head<span class="token comment" spellcheck="true">//定义在最上面方便以下各种情况返回current.data</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>length <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>      <span class="token keyword">this</span><span class="token punctuation">.</span>head <span class="token operator">=</span> <span class="token keyword">null</span>      <span class="token keyword">this</span><span class="token punctuation">.</span>tail <span class="token operator">=</span> <span class="token keyword">null</span>    <span class="token comment" spellcheck="true">//当链表中length > 1</span>    &amp;#<span class="token number">125</span><span class="token punctuation">;</span> <span class="token keyword">else</span>&amp;#<span class="token number">123</span><span class="token punctuation">;</span>      <span class="token comment" spellcheck="true">//情况2：删除第一个节点</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span>position <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>head<span class="token punctuation">.</span>next<span class="token punctuation">.</span>prev <span class="token operator">=</span> <span class="token keyword">null</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>head <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>head<span class="token punctuation">.</span>next      <span class="token comment" spellcheck="true">//情况3：删除最后一个节点</span>      &amp;#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>position <span class="token operator">==</span> <span class="token keyword">this</span><span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span>&amp;#<span class="token number">123</span><span class="token punctuation">;</span>        current <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>tail<span class="token comment" spellcheck="true">//该情况下返回被删除的最后一个节点</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>tail<span class="token punctuation">.</span>prev<span class="token punctuation">.</span>next <span class="token operator">=</span> <span class="token keyword">null</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>tail <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>tail<span class="token punctuation">.</span>prev      &amp;#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">else</span>&amp;#<span class="token number">123</span><span class="token punctuation">;</span>      <span class="token comment" spellcheck="true">//情况4：删除链表中间的节点</span>        let index <span class="token operator">=</span> <span class="token number">0</span>        <span class="token keyword">while</span><span class="token punctuation">(</span>index<span class="token operator">++</span> <span class="token operator">&lt;</span> position<span class="token punctuation">)</span>&amp;#<span class="token number">123</span><span class="token punctuation">;</span>          current <span class="token operator">=</span> current<span class="token punctuation">.</span>next        &amp;#<span class="token number">125</span><span class="token punctuation">;</span>        current<span class="token punctuation">.</span>next<span class="token punctuation">.</span>prev <span class="token operator">=</span> current<span class="token punctuation">.</span>prev        current<span class="token punctuation">.</span>prev<span class="token punctuation">.</span>next <span class="token operator">=</span> current<span class="token punctuation">.</span>next      &amp;#<span class="token number">125</span><span class="token punctuation">;</span>    &amp;#<span class="token number">125</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//3.length -= 1</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>length <span class="token operator">-=</span> <span class="token number">1</span>    <span class="token keyword">return</span> current<span class="token punctuation">.</span>data<span class="token comment" spellcheck="true">//返回被删除节点的数据</span>  &amp;#<span class="token number">125</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">/*--------------------其他方法-------------------*/</span>  <span class="token comment" spellcheck="true">//八.remove方法</span>  DoubleLinklist<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>remove <span class="token operator">=</span> <span class="token keyword">data</span> <span class="token operator">=</span><span class="token operator">></span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//1.根据data获取下标值</span>    let index <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token keyword">data</span><span class="token punctuation">)</span>        <span class="token comment" spellcheck="true">//2.根据index删除对应位置的节点</span>    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">removeAt</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span>  &amp;#<span class="token number">125</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">//九.isEmpty方法</span>  DoubleLinklist<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>isEmpty <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>length <span class="token operator">==</span> <span class="token number">0</span>  &amp;#<span class="token number">125</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">//十.size方法</span>  DoubleLinklist<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>size <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>length  &amp;#<span class="token number">125</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">//十一.getHead方法：获取链表的第一个元素</span>  DoubleLinklist<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>getHead <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>head<span class="token punctuation">.</span>data  &amp;#<span class="token number">125</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">//十二.getTail方法：获取链表的最后一个元素</span>  DoubleLinklist<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>getTail <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>tail<span class="token punctuation">.</span>data  &amp;#<span class="token number">125</span><span class="token punctuation">;</span>&amp;#<span class="token number">125</span><span class="token punctuation">;</span></code></pre><h3 id="三、链表结构总结"><a href="#三、链表结构总结" class="headerlink" title="三、链表结构总结"></a>三、链表结构总结</h3><p>单向链表有head和next两个属性，双向链表有head、tail、next、prev四个属性。处理好它们的指向，相当于将它们正确地连接在一起，这样就组成了一条链，这就是简单链表的实现。</p><p>在实际开发中链表使用得非常多，比如Java中的<strong>LinkList</strong>就是双向链表。</p><h4 id="3-1-注意点"><a href="#3-1-注意点" class="headerlink" title="3.1.注意点"></a>3.1.注意点</h4><ul><li>在链表中current &#x3D; current.next 可以从左往右看，看成是current –&gt; current.next，即current指向current的下一个节点。</li><li>删除节点的原理：只要没有引用指向该对象，无论该对象是否有引用指向其他对象，该对象都会被回收（删除）。</li><li>参数中凡是有position的都要进行越界判断。</li></ul><h4 id="3-2-链表的增删改查"><a href="#3-2-链表的增删改查" class="headerlink" title="3.2.链表的增删改查"></a>3.2.链表的增删改查</h4><p>以双向链表为例：<strong>链表的增删改查无非就是获取链表中相应的节点改变其中的prev和next两个变量的指向</strong>。</p><ul><li><strong>情况一</strong>：只需要<strong>head</strong>和<strong>tail</strong>两个变量就可以获取需要操作的变量（这里指的是能够轻松获取，当然你想通过head.next.next…或tail.prev.prev…来获取想要的节点也可以），在这种情况下链表的长度length：<strong>0 &lt;&#x3D; length &lt;&#x3D;2</strong>。</li><li><strong>情况二</strong>：不能靠tail和head来获取到需要操作的变量时，可采用while循环遍历的方式，找到需要操作的节点：</li></ul><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%8F%8C%E5%90%91%E9%93%BE%E8%A1%A8/33.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%8F%8C%E5%90%91%E9%93%BE%E8%A1%A8/33.png" alt="image-20200228113257650"></a></p><p>image-20200228113257650</p><p>在这种情况下，如果我们想要在链表的position &#x3D; x的位置插入新节点，那么可以通过current获取position的后一个节点Node(x+1)，通过current.prev获取position位置的前一个节点Node(x)；之后修改Node(x+1)和Node(x)中的prev和next两个变量的指向即可在pos&#x3D;x 的位置插入新节点。</p><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%8F%8C%E5%90%91%E9%93%BE%E8%A1%A8/34.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%8F%8C%E5%90%91%E9%93%BE%E8%A1%A8/34.png" alt="image-20200228133450822"></a></p><p>image-20200228133450822</p><h4 id="3-3-修改链表引用指向"><a href="#3-3-修改链表引用指向" class="headerlink" title="3.3.修改链表引用指向"></a>3.3.修改链表引用指向</h4><p><strong>应先修改newNode引用的指向，再修改其他引用</strong></p><ul><li>情况1：通过head和tail引用就能获取需要操作的节点时，最后更改head或tail变量的指向（因为它们分别指向链表的第一个和最后一个节点，获取其他节点时可能需要用到它们）。</li><li>情况2：使用current获取到需要操作的节点时，最后更改curren.next或current.prev的指向。因为current.next和current.prev表示的是Node(x+2)和Node(x)这两个节点，如下图所示，一旦变更它们的指向就无法获取Node(x)或Node(x+2)了，</li></ul><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%8F%8C%E5%90%91%E9%93%BE%E8%A1%A8/35.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%8F%8C%E5%90%91%E9%93%BE%E8%A1%A8/35.png" alt="image-20200228133725909"></a></p><p>image-20200228133725909</p><h4 id="3-4-遍历链表"><a href="#3-4-遍历链表" class="headerlink" title="3.4.遍历链表"></a>3.4.遍历链表</h4><p><strong>积累两种遍历思路</strong></p><ul><li>获取指定的position &#x3D; x 位置的后一个节点和索引值：</li></ul><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%8F%8C%E5%90%91%E9%93%BE%E8%A1%A8/36.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%8F%8C%E5%90%91%E9%93%BE%E8%A1%A8/36.png" alt="image-20200228144005347"></a></p><p>image-20200228144005347</p><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%8F%8C%E5%90%91%E9%93%BE%E8%A1%A8/37.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%8F%8C%E5%90%91%E9%93%BE%E8%A1%A8/37.png" alt="image-20200228113257650"></a></p><p>image-20200228113257650</p><p>循环结束后index &#x3D; position &#x3D; x，变量current就指向了Node(x+1)，变量index的值为Node(x+1)的索引值x。</p><ul><li>遍历链表中的所有节点：</li></ul><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%8F%8C%E5%90%91%E9%93%BE%E8%A1%A8/38.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%8F%8C%E5%90%91%E9%93%BE%E8%A1%A8/38.png" alt="image-20200228132334514"></a></p><p>image-20200228132334514</p><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%8F%8C%E5%90%91%E9%93%BE%E8%A1%A8/39.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%8F%8C%E5%90%91%E9%93%BE%E8%A1%A8/39.png" alt="image-20200228145930043"></a></p><p>image-20200228145930043</p><p>当current.next &#x3D; null时停止循环，此时current指向链表的最后一个节点。</p><h2 id="JavaScript实现集合与字典"><a href="#JavaScript实现集合与字典" class="headerlink" title="JavaScript实现集合与字典"></a>JavaScript实现集合与字典</h2><h3 id="一、集合结构"><a href="#一、集合结构" class="headerlink" title="一、集合结构"></a>一、集合结构</h3><h4 id="1-1-简介"><a href="#1-1-简介" class="headerlink" title="1.1.简介"></a>1.1.简介</h4><p>集合比较常见的实现方式是<strong>哈希表</strong>，这里使用JavaScript的Object类进行封装。</p><p>集合通常是由一组<strong>无序的</strong>、<strong>不能重复</strong>的元素构成。</p><ul><li>数学中常指的集合中的元素是可以重复的，但是计算机中集合的元素不能重复。</li></ul><p><strong>集合是特殊的数组：</strong></p><ul><li>特殊之处在于里面的元素<strong>没有顺序</strong>，<strong>也不能重复</strong>。</li><li>没有顺序意味着<strong>不能通过下标值进行访问</strong>，不能重复意味着<strong>相同的对象</strong>在集合中只会<strong>存在一份</strong>。</li></ul><p><strong>实现集合类</strong>：</p><ul><li>在ES6中的<strong>Set</strong>类就是一个集合类，这里我们重新封装一个Set类，了解集合的底层实现。</li><li>JavaScript中的<strong>Object</strong>类中的<strong>key</strong>就是一个集合，可以使用它来封装集合类Set。</li></ul><p><strong>集合常见的操作</strong>：</p><ul><li><code>add（value）</code>：向集合添加一个新的项；</li><li><code>remove（value）</code>：从集合中移除一个值；</li><li><code>has（value）</code>：如果值在集合中，返回<code>true</code>，否则返回<code>false</code>；</li><li><code>clear（）</code>：移除集合中的所有项；</li><li><code>size（）</code>：返回集合所包含元素的数量，与数组的<code>length</code>属性相似；</li><li><code>values（）</code>：返回一个包含集合中所有值的数组；</li></ul><p>还有其他的方法，用的不多这里不做封装；</p><h4 id="1-2-代码实现"><a href="#1-2-代码实现" class="headerlink" title="1.2.代码实现"></a>1.2.代码实现</h4><pre class=" language-javascript"><code class="language-javascript">    <span class="token comment" spellcheck="true">//封装集合类</span>    <span class="token keyword">function</span> <span class="token function">Set</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>      <span class="token comment" spellcheck="true">//属性</span>      <span class="token keyword">this</span><span class="token punctuation">.</span>items <span class="token operator">=</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>      <span class="token comment" spellcheck="true">//方法</span>      <span class="token comment" spellcheck="true">//一.has方法</span>      Set<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>has <span class="token operator">=</span> value <span class="token operator">=</span><span class="token operator">></span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>items<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span>      <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>      <span class="token comment" spellcheck="true">//二.add方法</span>      Set<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>add <span class="token operator">=</span> value <span class="token operator">=</span><span class="token operator">></span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//判断集合中是否已经包含该元素</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>          <span class="token keyword">return</span> <span class="token boolean">false</span>        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//将元素添加到集合中</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>items<span class="token punctuation">[</span>value<span class="token punctuation">]</span> <span class="token operator">=</span> value<span class="token comment" spellcheck="true">//表示该属性键和值都为value</span>        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token comment" spellcheck="true">//表示添加成功</span>      <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>      <span class="token comment" spellcheck="true">//三.remove方法</span>      Set<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>remove <span class="token operator">=</span> <span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//1.判断集合中是否包含该元素</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>          <span class="token keyword">return</span> <span class="token boolean">false</span>        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//2.将元素从属性中删除</span>        <span class="token keyword">delete</span> <span class="token keyword">this</span><span class="token punctuation">.</span>items<span class="token punctuation">[</span>value<span class="token punctuation">]</span>        <span class="token keyword">return</span> <span class="token boolean">true</span>      <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>      <span class="token comment" spellcheck="true">//四.clear方法</span>      Set<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>clear <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//原来的对象没有引用指向，会被自动回收</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>items <span class="token operator">=</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>      <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>      <span class="token comment" spellcheck="true">//五.size方法</span>      Set<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>size <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>items<span class="token punctuation">)</span><span class="token punctuation">.</span>length      <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>      <span class="token comment" spellcheck="true">//获取集合中所有的值</span>      <span class="token comment" spellcheck="true">//六.values方法</span>      Set<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>values <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>items<span class="token punctuation">)</span>      <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span></code></pre><p><strong>测试代码：</strong></p><pre class=" language-csharp"><code class="language-csharp">    <span class="token comment" spellcheck="true">//测试集合类</span>    <span class="token comment" spellcheck="true">//1.创建Set类对象</span>    <span class="token keyword">let</span> <span class="token keyword">set</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token comment" spellcheck="true">//添加元素</span>    <span class="token comment" spellcheck="true">//2.测试add方法</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">set</span><span class="token punctuation">.</span><span class="token keyword">add</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//67</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">set</span><span class="token punctuation">.</span><span class="token keyword">add</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//68</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">set</span><span class="token punctuation">.</span><span class="token keyword">add</span><span class="token punctuation">(</span><span class="token string">'b'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//69</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">set</span><span class="token punctuation">.</span><span class="token keyword">add</span><span class="token punctuation">(</span><span class="token string">'c'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//70</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">set</span><span class="token punctuation">.</span><span class="token keyword">add</span><span class="token punctuation">(</span><span class="token string">'d'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//71</span>    <span class="token comment" spellcheck="true">//3.测试values方法</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">set</span><span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//74</span>    <span class="token comment" spellcheck="true">//删除元素</span>    <span class="token comment" spellcheck="true">//4.测试remove方法</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">set</span><span class="token punctuation">.</span><span class="token keyword">remove</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//78</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">set</span><span class="token punctuation">.</span><span class="token keyword">remove</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//79</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">set</span><span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//80</span>    <span class="token comment" spellcheck="true">//5.测试has方法</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">set</span><span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span><span class="token string">'b'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//83</span>    <span class="token comment" spellcheck="true">//6.测试size方法和clear方法</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">set</span><span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//86</span>    <span class="token keyword">set</span><span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token comment" spellcheck="true">// 由于clear方法的实现原理为指向另外一个空对象，所以不影响原来的对象</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">set</span><span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//89</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">set</span><span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//90</span></code></pre><p><strong>测试结果：</strong></p><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E9%9B%86%E5%90%88%E5%92%8C%E5%AD%97%E5%85%B8/1.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E9%9B%86%E5%90%88%E5%92%8C%E5%AD%97%E5%85%B8/1.png" alt="image-20200228183431635"></a></p><p>image-20200228183431635</p><h4 id="1-3-集合间的操作"><a href="#1-3-集合间的操作" class="headerlink" title="1.3.集合间的操作"></a>1.3.集合间的操作</h4><p><strong>集合间操作：</strong></p><ul><li><strong>并集</strong>：对于给定的两个集合，返回一个包含两个集合中所有元素的新集合；</li><li><strong>交集</strong>：对于给定的两个集合，返回一个包含两个集合中共有元素的新集合；</li><li><strong>差集</strong>：对于给定的两个集合，返回一个包含所有存在于第一个集合且不存在于第二个集合的元素的新集合；</li><li><strong>子集</strong>：验证一个给定集合是否是另一个集合的子集；</li></ul><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E9%9B%86%E5%90%88%E5%92%8C%E5%AD%97%E5%85%B8/2.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E9%9B%86%E5%90%88%E5%92%8C%E5%AD%97%E5%85%B8/2.png" alt="image-20200228210239984"></a></p><p>image-20200228210239984</p><p><strong>并集的实现：</strong></p><p>实现思路：创建集合C代表集合A和集合B的并集，先将集合<code>A</code>中的所有元素添加到集合<code>C</code>中，再遍历集合<code>B</code>，如果是集合<code>C</code>所没有的元素就把它添加到集合<code>C</code>中。</p><pre class=" language-javascript"><code class="language-javascript"> Set<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>union <span class="token operator">=</span> otherSet <span class="token operator">=</span><span class="token operator">></span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>      <span class="token comment" spellcheck="true">// this:集合对象A</span>      <span class="token comment" spellcheck="true">// otherSet:集合对象B</span>      <span class="token comment" spellcheck="true">//1.创建一个新的集合</span>      <span class="token keyword">let</span> unionSet <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">)</span>      <span class="token comment" spellcheck="true">//2.将A集合中的所有元素添加到新集合中</span>      <span class="token keyword">let</span> values <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span><span class="token punctuation">)</span>      <span class="token comment" spellcheck="true">// for(let i of values)&amp;#123;</span>      <span class="token comment" spellcheck="true">//   unionSet.add(i)</span>      <span class="token comment" spellcheck="true">// &amp;#125;</span>      <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>i <span class="token operator">&lt;</span> values<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        unionSet<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>values<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>      <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>      <span class="token comment" spellcheck="true">//3.取出B集合中的元素,判断是否需要加到新集合中</span>      values <span class="token operator">=</span> otherSet<span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span><span class="token punctuation">)</span>      <span class="token comment" spellcheck="true">// for(let i of values)&amp;#123;</span>      <span class="token comment" spellcheck="true">//   //由于集合的add方法已经对重复的元素进行了判断,所以这里可以直接添加</span>      <span class="token comment" spellcheck="true">//   unionSet.add(i)</span>      <span class="token comment" spellcheck="true">// &amp;#125;</span>      <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>i <span class="token operator">&lt;</span> values<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        unionSet<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>values<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>      <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>      <span class="token keyword">return</span> unionSet    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span></code></pre><p><strong>交集的实现：</strong></p><p>实现思路：遍历集合A，当取得的元素也存在于集合B时，就把该元素添加到另一个集合C中。</p><pre class=" language-javascript"><code class="language-javascript"> Set<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>intersection <span class="token operator">=</span> otherSet <span class="token operator">=</span><span class="token operator">></span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>      <span class="token comment" spellcheck="true">// this:集合A</span>      <span class="token comment" spellcheck="true">// otherSet:集合B</span>      <span class="token comment" spellcheck="true">//1.创建新的集合</span>      <span class="token keyword">let</span> intersectionSet <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">)</span>            <span class="token comment" spellcheck="true">//2.从A中取出一个元素，判断是否同时存在于集合B中，是则放入新集合中</span>      <span class="token keyword">let</span> values <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span><span class="token punctuation">)</span>      <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span><span class="token number">0</span> <span class="token punctuation">;</span> i <span class="token operator">&lt;</span> values<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token keyword">let</span> item <span class="token operator">=</span> values<span class="token punctuation">[</span>i<span class="token punctuation">]</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>otherSet<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>          intersectionSet<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span>        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>      <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>      <span class="token keyword">return</span> intersectionSet    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span></code></pre><p><strong>差集的实现：</strong></p><p>实现思路：遍历集合A，当取得的元素不存在于集合B时，就把该元素添加到另一个集合C中。</p><pre class=" language-javascript"><code class="language-javascript">Set<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>diffrence <span class="token operator">=</span> otherSet <span class="token operator">=</span><span class="token operator">></span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//this:集合A</span>        <span class="token comment" spellcheck="true">//otherSet:集合B</span>        <span class="token comment" spellcheck="true">//1.创建新的集合</span>        <span class="token keyword">var</span> diffrenceSet <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token comment" spellcheck="true">//2.取出A集合中的每一个元素，判断是否同时存在于B中，不存在则添加到新集合中</span>        <span class="token keyword">var</span> values <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>i <span class="token operator">&lt;</span> values<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>          <span class="token keyword">var</span> item <span class="token operator">=</span> values<span class="token punctuation">[</span>i<span class="token punctuation">]</span>          <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>otherSet<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>            diffrenceSet<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span>          <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> diffrenceSet      <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span></code></pre><p><strong>子集的实现：</strong></p><p>实现思路：遍历集合A，当取得的元素中有一个不存在于集合B时，就说明集合A不是集合B的子集，返回false。</p><pre class=" language-javascript"><code class="language-javascript"> Set<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>subset <span class="token operator">=</span> otherSet <span class="token operator">=</span><span class="token operator">></span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//this:集合A</span>        <span class="token comment" spellcheck="true">//otherSet：集合B</span>        <span class="token comment" spellcheck="true">//遍历集合A中的所有元素，如果发现，集合A中的元素，在集合B中不存在，那么放回false，如果遍历完整个集合A没有返回false，就返回true</span>        <span class="token keyword">let</span> values <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> values<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>          <span class="token keyword">let</span> item <span class="token operator">=</span> values<span class="token punctuation">[</span>i<span class="token punctuation">]</span>          <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>otherSet<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>            <span class="token keyword">return</span> <span class="token boolean">false</span>          <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token boolean">true</span>      <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span></code></pre><h3 id="二、字典结构"><a href="#二、字典结构" class="headerlink" title="二、字典结构"></a>二、字典结构</h3><h4 id="2-1-简介-1"><a href="#2-1-简介-1" class="headerlink" title="2.1.简介"></a>2.1.简介</h4><p><strong>字典的特点</strong>：</p><ul><li>字典存储的是键值对，主要特点是一一对应；</li><li>比如保存一个人的信息：数组形式：[19，‘Tom’，1.65]，可通过下标值取出信息；字典形式：{“age”：19，”name”：”Tom”，”height”：165}，可以通过key取出value。</li><li>此外，在字典中<strong>key</strong>是<strong>不能重复</strong>且<strong>无序</strong>的，而<strong>Value</strong>可以<strong>重复</strong>。</li></ul><p><strong>字典和映射的关系</strong>：</p><ul><li>有些编程语言中称这种<strong>映射关系</strong>为<strong>字典</strong>，如Swift中的Dictonary，Python中的dict；</li><li>有些编程语言中称这种<strong>映射关系</strong>为<strong>Map</strong>，比如Java中的HashMap&amp;TreeMap等；</li></ul><p><strong>字典类常见的操作</strong>：</p><ul><li>set(key,value)：向字典中添加新元素。</li><li>remove(key)：通过使用键值来从字典中移除键值对应的数据值。</li><li>has(key)：如果某个键值存在于这个字典中，则返回<code>true</code>，反之则返回<code>false</code>。</li><li>get(key)：通过键值查找特定的数值并返回。</li><li>clear()：将这个字典中的所有元素全部删除。</li><li>size()：返回字典所包含元素的数量。与数组的<code>length</code>属性类似。</li><li>keys()：将字典所包含的所有键名以数组形式返回。</li><li>values()：将字典所包含的所有数值以数组形式返回。</li></ul><h4 id="2-2-封装字典"><a href="#2-2-封装字典" class="headerlink" title="2.2.封装字典"></a>2.2.封装字典</h4><p>字典类可以基于JavaScript中的对象结构来实现，比较简单，这里直接实现字典类中的常用方法。</p><pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">//封装字典类</span><span class="token keyword">function</span> <span class="token function">Dictionary</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">//字典属性</span>  <span class="token keyword">this</span><span class="token punctuation">.</span>items <span class="token operator">=</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">//字典操作方法</span>  <span class="token comment" spellcheck="true">//一.在字典中添加键值对</span>  Dictionary<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token keyword">set</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>items<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> value  <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">//二.判断字典中是否有某个key</span>  Dictionary<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>has <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>items<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span>  <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">//三.从字典中移除元素</span>  Dictionary<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>remove <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//1.判断字典中是否有这个key</span>    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">false</span>    <span class="token comment" spellcheck="true">//2.从字典中删除key</span>    <span class="token keyword">delete</span> <span class="token keyword">this</span><span class="token punctuation">.</span>items<span class="token punctuation">[</span>key<span class="token punctuation">]</span>    <span class="token keyword">return</span> <span class="token boolean">true</span>  <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">//四.根据key获取value</span>  Dictionary<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token keyword">get</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token keyword">this</span><span class="token punctuation">.</span>items<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token punctuation">:</span> undefined  <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">//五.获取所有keys</span>  Dictionary<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>keys <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>items<span class="token punctuation">)</span>  <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">//六.size方法</span>  Dictionary<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>keys <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length  <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">//七.clear方法</span>  Dictionary<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>clear <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>items <span class="token operator">=</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>  <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span></code></pre><h2 id="JavaScript实现树结构（一）"><a href="#JavaScript实现树结构（一）" class="headerlink" title="JavaScript实现树结构（一）"></a>JavaScript实现树结构（一）</h2><h3 id="一、树结构简介"><a href="#一、树结构简介" class="headerlink" title="一、树结构简介"></a>一、树结构简介</h3><h4 id="1-1-简单了解树结构"><a href="#1-1-简单了解树结构" class="headerlink" title="1.1.简单了解树结构"></a>1.1.简单了解树结构</h4><p><strong>什么是树？</strong></p><p>真实的树：</p><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%A0%91%E4%B8%80/1.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%A0%91%E4%B8%80/1.png" alt="image-20200229205530929"></a></p><p>image-20200229205530929</p><p><strong>树的特点：</strong></p><ul><li>树一般都有一个<strong>根</strong>，连接着根的是<strong>树干</strong>；</li><li>树干会发生分叉，形成许多<strong>树枝</strong>，树枝会继续分化成更小的<strong>树枝</strong>；</li><li>树枝的最后是<strong>叶子</strong>；</li></ul><p>现实生活中很多结构都是树的抽象，模拟的树结构相当于旋转<code>180°</code>的树。</p><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%A0%91%E4%B8%80/2.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%A0%91%E4%B8%80/2.png" alt="image-20200229205630945"></a></p><p>image-20200229205630945</p><p><strong>树结构对比于数组&#x2F;链表&#x2F;哈希表有哪些优势呢：</strong></p><p><strong>数组：</strong></p><ul><li>优点：可以通过<strong>下标值访问</strong>，效率高；</li><li>缺点：查找数据时需要先对数据进行<strong>排序</strong>，生成<strong>有序数组</strong>，才能提高查找效率；并且在插入和删除元素时，需要大量的<strong>位移操作</strong>；</li></ul><p><strong>链表：</strong></p><ul><li>优点：数据的插入和删除操作效率都很高；</li><li>缺点：<strong>查找</strong>效率低，需要从头开始依次查找，直到找到目标数据为止；当需要在链表中间位置插入或删除数据时，插入或删除的效率都不高。</li></ul><p><strong>哈希表：</strong></p><ul><li>优点：哈希表的插入&#x2F;查询&#x2F;删除效率都非常高；</li><li>缺点：<strong>空间利用率不高</strong>，底层使用的数组中很多单元没有被利用；并且哈希表中的元素是<strong>无序</strong>的，不能按照固定顺序遍历哈希表中的元素；而且不能快速找出哈希表中<strong>最大值或最小值</strong>这些特殊值。</li></ul><p><strong>树结构：</strong></p><p>优点：树结构综合了上述三种结构的优点，同时也弥补了它们存在的缺点（虽然效率不一定都比它们高），比如树结构中数据都是有序的，查找效率高；空间利用率高；并且可以快速获取最大值和最小值等。</p><p>总的来说：<strong>每种数据结构都有自己特定的应用场景</strong></p><p><strong>树结构：</strong></p><ul><li><strong>树（Tree）</strong>:由 n（n ≥ 0）个节点构成的<strong>有限集合</strong>。当 n &#x3D; 0 时，称为<strong>空树</strong>。</li></ul><p>对于任一棵非空树（n &gt; 0），它具备以下性质：</p><ul><li>数中有一个称为<strong>根（Root）</strong>的特殊节点，用 **r **表示；</li><li>其余节点可分为 m（m &gt; 0）个互不相交的有限集合 T1，T2，…，Tm，其中每个集合本身又是一棵树，称为原来树的<strong>子树（SubTree）</strong>。</li></ul><p><strong>树的常用术语：</strong></p><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%A0%91%E4%B8%80/3.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%A0%91%E4%B8%80/3.png" alt="image-20200229221126468"></a></p><p>image-20200229221126468</p><ul><li><strong>节点的度（Degree）</strong>：节点的<strong>子树个数</strong>，比如节点B的度为2；</li><li><strong>树的度</strong>：树的所有节点中<strong>最大的度数</strong>，如上图树的度为2；</li><li><strong>叶节点（Leaf）</strong>：<strong>度为0的节点</strong>（也称为叶子节点），如上图的H，I等；</li><li><strong>父节点（Parent）</strong>：度不为0的节点称为父节点，如上图节点B是节点D和E的父节点；</li><li><strong>子节点（Child）</strong>：若B是D的父节点，那么D就是B的子节点；</li><li><strong>兄弟节点（Sibling）</strong>：具有同一父节点的各节点彼此是兄弟节点，比如上图的B和C，D和E互为兄弟节点；</li><li><strong>路径和路径长度</strong>：路径指的是一个节点到另一节点的通道，路径所包含边的个数称为路径长度，比如A-&gt;H的路径长度为3；</li><li><strong>节点的层次（Level）</strong>：规定<strong>根节点在1层</strong>，其他任一节点的层数是其父节点的<strong>层数加1</strong>。如B和C节点的层次为2；</li><li><strong>树的深度（Depth）</strong>：树种所有节点中的<strong>最大层次</strong>是这棵树的深度，如上图树的深度为4；</li></ul><h4 id="1-2-树结构的表示方式"><a href="#1-2-树结构的表示方式" class="headerlink" title="1.2.树结构的表示方式"></a>1.2.树结构的表示方式</h4><ul><li><strong>最普通的表示方法</strong>：</li></ul><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%A0%91%E4%B8%80/4.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%A0%91%E4%B8%80/4.png" alt="image-20200229230417613"></a></p><p>image-20200229230417613</p><p>如图，树结构的组成方式类似于链表，都是由一个个节点连接构成。不过，根据每个父节点子节点数量的不同，每一个父节点需要的引用数量也不同。比如节点A需要3个引用，分别指向子节点B，C，D；B节点需要2个引用，分别指向子节点E和F；K节点由于没有子节点，所以不需要引用。</p><p>这种方法缺点在于我们无法确定某一结点的引用数。</p><ul><li><strong>儿子-兄弟表示法</strong>：</li></ul><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%A0%91%E4%B8%80/5.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%A0%91%E4%B8%80/5.png" alt="image-20200229232805477"></a></p><p>image-20200229232805477</p><p>这种表示方法可以完整地记录每个节点的数据，比如：</p><pre class=" language-kotlin"><code class="language-kotlin"><span class="token comment" spellcheck="true">//节点A</span>Node&amp;#<span class="token number">123</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">//存储数据</span>  <span class="token keyword">this</span><span class="token punctuation">.</span>data <span class="token operator">=</span> <span class="token keyword">data</span>  <span class="token comment" spellcheck="true">//统一只记录左边的子节点</span>  <span class="token keyword">this</span><span class="token punctuation">.</span>leftChild <span class="token operator">=</span> B  <span class="token comment" spellcheck="true">//统一只记录右边的第一个兄弟节点</span>  <span class="token keyword">this</span><span class="token punctuation">.</span>rightSibling <span class="token operator">=</span> <span class="token keyword">null</span>&amp;#<span class="token number">125</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//节点B</span>Node&amp;#<span class="token number">123</span><span class="token punctuation">;</span>  <span class="token keyword">this</span><span class="token punctuation">.</span>data <span class="token operator">=</span> <span class="token keyword">data</span>  <span class="token keyword">this</span><span class="token punctuation">.</span>leftChild <span class="token operator">=</span> E  <span class="token keyword">this</span><span class="token punctuation">.</span>rightSibling <span class="token operator">=</span> C&amp;#<span class="token number">125</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//节点F</span>Node&amp;#<span class="token number">123</span><span class="token punctuation">;</span>  <span class="token keyword">this</span><span class="token punctuation">.</span>data <span class="token operator">=</span> <span class="token keyword">data</span>  <span class="token keyword">this</span><span class="token punctuation">.</span>leftChild <span class="token operator">=</span> <span class="token keyword">null</span>  <span class="token keyword">this</span><span class="token punctuation">.</span>rightSibling <span class="token operator">=</span> <span class="token keyword">null</span>&amp;#<span class="token number">125</span><span class="token punctuation">;</span></code></pre><p>这种表示法的优点在于每一个节点中引用的数量都是确定的。</p><ul><li><strong>儿子-兄弟表示法旋转</strong></li></ul><p>以下为儿子-兄弟表示法组成的树结构：</p><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%A0%91%E4%B8%80/6.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%A0%91%E4%B8%80/6.png" alt="image-20200229234549049"></a></p><p>image-20200229234549049</p><p>将其顺时针旋转45°之后：</p><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%A0%91%E4%B8%80/7.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%A0%91%E4%B8%80/7.png" alt="image-20200229235549522"></a></p><p>image-20200229235549522</p><p>这样就成为了一棵<strong>二叉树</strong>，由此我们可以得出结论：<strong>任何树都可以通过二叉树进行模拟</strong>。但是这样父节点不是变了吗？其实，父节点的设置只是为了方便指向子节点，在代码实现中谁是父节点并没有关系，只要能正确找到对应节点即可。</p><h3 id="二、二叉树"><a href="#二、二叉树" class="headerlink" title="二、二叉树"></a>二、二叉树</h3><h4 id="2-1-二叉树简介"><a href="#2-1-二叉树简介" class="headerlink" title="2.1.二叉树简介"></a>2.1.二叉树简介</h4><p><strong>二叉树的概念</strong>：如果树中的每一个节点最多只能由<strong>两个子节点</strong>，这样的树就称为<strong>二叉树</strong>；</p><p>二叉树十分重要，不仅仅是因为简单，更是因为几乎所有的树都可以表示成二叉树形式。</p><p><strong>二叉树的组成</strong>：</p><ul><li>二叉树可以为空，也就是没有节点；</li><li>若二叉树不为空，则它由根节点和称为其左子树TL和右子树TR的两个不相交的二叉树组成；</li></ul><p><strong>二叉树的五种形态</strong>：</p><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%A0%91%E4%B8%80/8.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%A0%91%E4%B8%80/8.png" alt="image-20200301001718079"></a></p><p>image-20200301001718079</p><p>上图分别表示：空的二叉树、只有一个节点的二叉树、只有左子树TL的二叉树、只有右子树TR的二叉树和有左右两个子树的二叉树。</p><p><strong>二叉树的特性</strong>：</p><ul><li>一个二叉树的第 i 层的最大节点树为：2(i-1)，i &gt;&#x3D; 1；</li><li>深度为k的二叉树的最大节点总数为：2k - 1 ，k &gt;&#x3D; 1；</li><li>对任何非空二叉树，若 n0 表示叶子节点的个数，n2表示度为2的非叶子节点个数，那么两者满足关系：n0 &#x3D; n2 + 1；如下图所示：H，E，I，J，G为叶子节点，总数为5；A，B，C，F为度为2的非叶子节点，总数为4；满足n0 &#x3D; n2 + 1的规律。</li></ul><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%A0%91%E4%B8%80/9.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%A0%91%E4%B8%80/9.png" alt="image-20200301092140211"></a></p><p>image-20200301092140211</p><h4 id="2-2-特殊的二叉树"><a href="#2-2-特殊的二叉树" class="headerlink" title="2.2.特殊的二叉树"></a>2.2.特殊的二叉树</h4><p><strong>完美二叉树</strong></p><p>完美二叉树（Perfect Binary Tree）也成为满二叉树（Full Binary Tree），在二叉树中，除了最下一层的叶子节点外，每层节点都有2个子节点，这就构成了完美二叉树。</p><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%A0%91%E4%B8%80/10.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%A0%91%E4%B8%80/10.png" alt="image-20200301093237681"></a></p><p>image-20200301093237681</p><p><strong>完全二叉树</strong></p><pre><code>完全二叉树的定义：深度为k，有n个结点的二叉树当且仅当其每一个结点都与深度为k的满二叉树中编号从1至n的结点一一对应时，称为完全二叉树。</code></pre><p>完全二叉树（Complete Binary Tree）:</p><ul><li>除了二叉树最后一层外，其他各层的节点数都达到了最大值；</li><li>并且，最后一层的叶子节点从左向右是连续存在，只缺失右侧若干叶子节点；</li><li>完美二叉树是特殊的完全二叉树；</li></ul><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%A0%91%E4%B8%80/11.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%A0%91%E4%B8%80/11.png" alt="image-20200301093659373"></a></p><p>image-20200301093659373</p><p>在上图中，由于H缺失了右子节点，所以它不是完全二叉树。</p><h4 id="2-3-二叉树的数据存储"><a href="#2-3-二叉树的数据存储" class="headerlink" title="2.3.二叉树的数据存储"></a>2.3.二叉树的数据存储</h4><p>常见的二叉树存储方式为<strong>数组</strong>和<strong>链表</strong>：</p><p><strong>使用数组：</strong></p><ul><li><strong>完全二叉树</strong>：按从上到下，从左到右的方式存储数据。</li></ul><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%A0%91%E4%B8%80/12.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%A0%91%E4%B8%80/12.png" alt="image-20200301094919588"></a></p><p>image-20200301094919588</p><table><thead><tr><th>节点</th><th>A</th><th>B</th><th>C</th><th>D</th><th>E</th><th>F</th><th>G</th><th>H</th></tr></thead><tbody><tr><td><strong>序号</strong></td><td><strong>1</strong></td><td><strong>2</strong></td><td><strong>3</strong></td><td><strong>4</strong></td><td><strong>5</strong></td><td><strong>6</strong></td><td><strong>7</strong></td><td><strong>8</strong></td></tr></tbody></table><p>使用数组存储时，取数据的时候也十分方便：左子节点的序号等于父节点序号 * 2，右子节点的序号等于父节点序号 * 2 + 1 。</p><ul><li><strong>非完全二叉树</strong>：非完全二叉树需要转换成完全二叉树才能按照上面的方案存储，这样会浪费很大的存储空间。</li></ul><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%A0%91%E4%B8%80/13.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%A0%91%E4%B8%80/13.png" alt="image-20200301100043636"></a></p><p>image-20200301100043636</p><table><thead><tr><th>节点</th><th>A</th><th>B</th><th>C</th><th>^</th><th>^</th><th>F</th><th>^</th><th>^</th><th>^</th><th>^</th><th>^</th><th>^</th><th>M</th></tr></thead><tbody><tr><td><strong>序号</strong></td><td><strong>1</strong></td><td><strong>2</strong></td><td><strong>3</strong></td><td><strong>4</strong></td><td><strong>5</strong></td><td><strong>6</strong></td><td><strong>7</strong></td><td><strong>8</strong></td><td><strong>9</strong></td><td><strong>10</strong></td><td><strong>11</strong></td><td><strong>12</strong></td><td><strong>13</strong></td></tr></tbody></table><p><strong>使用链表</strong></p><p>二叉树最常见的存储方式为<strong>链表</strong>：每一个节点封装成一个Node，Node中包含存储的数据、左节点的引用和右节点的引用。</p><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%A0%91%E4%B8%80/14.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%A0%91%E4%B8%80/14.png" alt="image-20200301100616105"></a></p><p>image-20200301100616105</p><h3 id="三、二叉搜索树"><a href="#三、二叉搜索树" class="headerlink" title="三、二叉搜索树"></a>三、二叉搜索树</h3><h4 id="3-1-认识二叉搜索树"><a href="#3-1-认识二叉搜索树" class="headerlink" title="3.1.认识二叉搜索树"></a>3.1.认识二叉搜索树</h4><p><strong>二叉搜索树</strong>（<strong>BST</strong>，Binary Search Tree），也称为<strong>二叉排序树</strong>和<strong>二叉查找树</strong>。</p><p>二叉搜索树是一棵二叉树，可以为空；</p><p>如果不为空，则满足以下<strong>性质</strong>：</p><ul><li>条件1：非空左子树的<strong>所有</strong>键值<strong>小于</strong>其根节点的键值。比如三中节点6的所有非空左子树的键值都小于6；</li><li>条件2：非空右子树的<strong>所有</strong>键值<strong>大于</strong>其根节点的键值；比如三中节点6的所有非空右子树的键值都大于6；</li><li>条件3：左、右子树本身也都是二叉搜索树；</li></ul><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%A0%91%E4%B8%80/15.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%A0%91%E4%B8%80/15.png" alt="image-20200301103139916"></a></p><p>image-20200301103139916</p><p>如上图所示，树二和树三符合3个条件属于二叉树，树一不满足条件3所以不是二叉树。</p><p><strong>总结：</strong>二叉搜索树的特点主要是<strong>较小的值</strong>总是保存在<strong>左节点</strong>上，相对<strong>较大的值</strong>总是保存在<strong>右节点</strong>上。这种特点使得二叉搜索树的查询效率非常高，这也就是二叉搜索树中”搜索”的来源。</p><h4 id="3-2-二叉搜索树应用举例"><a href="#3-2-二叉搜索树应用举例" class="headerlink" title="3.2.二叉搜索树应用举例"></a>3.2.二叉搜索树应用举例</h4><p>下面是一个二叉搜索树：</p><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%A0%91%E4%B8%80/16.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%A0%91%E4%B8%80/16.png" alt="image-20200301111718686"></a></p><p>image-20200301111718686</p><p>若想在其中查找数据10，只需要查找4次，查找效率非常高。</p><ul><li>第1次：将10与根节点9进行比较，由于10 &gt; 9，所以10下一步与根节点9的右子节点13比较；</li><li>第2次：由于10 &lt; 13，所以10下一步与父节点13的左子节点11比较；</li><li>第3次：由于10 &lt; 11，所以10下一步与父节点11的左子节点10比较；</li><li>第4次：由于10 &#x3D; 10，最终查找到数据10 。</li></ul><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%A0%91%E4%B8%80/17.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%A0%91%E4%B8%80/17.png" alt="image-20200301111751041"></a></p><p>image-20200301111751041</p><p>同样是15个数据，在排序好的数组中查询数据10，需要查询10次：</p><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%A0%91%E4%B8%80/18.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%A0%91%E4%B8%80/18.png" alt="image-20200301115348138"></a></p><p>image-20200301115348138</p><p>其实：如果是排序好的数组，可以通过二分查找：第一次找9，第二次找13，第三次找15…。我们发现如果把每次二分的数据拿出来以树的形式表示的话就是<strong>二叉搜索树</strong>。这就是数组二分法查找效率之所以高的原因。</p><h2 id="JavaScript实现树结构（二）"><a href="#JavaScript实现树结构（二）" class="headerlink" title="JavaScript实现树结构（二）"></a>JavaScript实现树结构（二）</h2><h3 id="一、二叉搜索树的封装"><a href="#一、二叉搜索树的封装" class="headerlink" title="一、二叉搜索树的封装"></a>一、二叉搜索树的封装</h3><p><strong>二叉树搜索树的基本属性</strong>：</p><p>如图所示：二叉搜索树有四个最基本的属性：指向节点的<strong>根</strong>（root），节点中的<strong>键</strong>（key）、<strong>左指针</strong>（right）、<strong>右指针</strong>（right）。</p><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%A0%91%E4%BA%8C/1.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%A0%91%E4%BA%8C/1.png" alt="image-20200301162706755"></a></p><p>image-20200301162706755</p><p>所以，二叉搜索树中除了定义root属性外，还应定义一个节点内部类，里面包含每个节点中的left、right和key三个属性：</p><pre class=" language-javascript"><code class="language-javascript">    <span class="token comment" spellcheck="true">//封装二叉搜索树</span>    <span class="token keyword">function</span> <span class="token function">BinarySearchTree</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>      <span class="token comment" spellcheck="true">//节点内部类</span>      <span class="token keyword">function</span> <span class="token function">Node</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>key <span class="token operator">=</span> key        <span class="token keyword">this</span><span class="token punctuation">.</span>left <span class="token operator">=</span> <span class="token keyword">null</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>right <span class="token operator">=</span> <span class="token keyword">null</span>      <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>      <span class="token comment" spellcheck="true">//属性</span>      <span class="token keyword">this</span><span class="token punctuation">.</span>root <span class="token operator">=</span> <span class="token keyword">null</span>  <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span></code></pre><p><strong>二叉搜索树的常见操作：</strong></p><ul><li>insert（key）：向树中插入一个新的键；</li><li>search（key）：在树中查找一个键，如果节点存在，则返回true；如果不存在，则返回false；</li><li>inOrderTraverse：通过中序遍历方式遍历所有节点；</li><li>preOrderTraverse：通过先序遍历方式遍历所有节点；</li><li>postOrderTraverse：通过后序遍历方式遍历所有节点；</li><li>min：返回树中最小的值&#x2F;键；</li><li>max：返回树中最大的值&#x2F;键；</li><li>remove（key）：从树中移除某个键；</li></ul><h4 id="1-插入数据"><a href="#1-插入数据" class="headerlink" title="1.插入数据"></a>1.插入数据</h4><p><strong>实现思路：</strong></p><ul><li>首先根据传入的key创建节点对象；</li><li>然后判断根节点是否存在，不存在时通过：this.root &#x3D; newNode，直接把新节点作为二叉搜索树的根节点。</li><li>若存在根节点则重新定义一个内部方法insertNode（）用于查找插入点。</li></ul><pre class=" language-JavaScript"><code class="language-JavaScript">     //insert方法:对外向用户暴露的方法      BinarySearchTree.prototype.insert = function(key)&#123;        //1.根据key创建节点        let newNode = new Node(key)                  //2.判断根节点是否存在        if (this.root == null) &#123;          this.root = newNode          //根节点存在时        &#125;else &#123;          this.insertNode(this.root, newNode)        &#125;      &#125;</code></pre><p><strong>内部方法insertNode（）的实现思路</strong>:</p><p>根据比较传入的两个节点，一直查找新节点适合插入的位置，直到成功插入新节点为止。</p><p>当newNode.key &lt; node.key向左查找:</p><ul><li>情况1：当node无左子节点时，直接插入：</li><li>情况2：当node有左子节点时，递归调用insertNode(),直到遇到无左子节点成功插入newNode后，不再符合该情况，也就不再调用insertNode()，递归停止。</li></ul><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%A0%91%E4%BA%8C/2.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%A0%91%E4%BA%8C/2.png" alt="image-20200301191640632"></a></p><p>image-20200301191640632</p><p>当newNode.key &gt;&#x3D; node.key向右查找，与向左查找类似：</p><ul><li>情况1：当node无右子节点时，直接插入：</li><li>情况2：当node有右子节点时，依然递归调用insertNode(),直到遇到传入insertNode方法的node无右子节点成功插入newNode为止：</li></ul><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%A0%91%E4%BA%8C/3.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%A0%91%E4%BA%8C/3.png" alt="image-20200301191507181"></a></p><p>image-20200301191507181</p><p><strong>insertNode()代码实现：</strong></p><pre class=" language-javascript"><code class="language-javascript">      <span class="token comment" spellcheck="true">//内部使用的insertNode方法:用于比较节点从左边插入还是右边插入</span>      BinarySearchTree<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>insertNode <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>node<span class="token punctuation">,</span> newNode<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//当newNode.key &lt; node.key向左查找</span><span class="token comment" spellcheck="true">/*----------------------分支1:向左查找--------------------------*/</span>              <span class="token keyword">if</span><span class="token punctuation">(</span>newNode<span class="token punctuation">.</span>key <span class="token operator">&lt;</span> node<span class="token punctuation">.</span>key<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>          <span class="token comment" spellcheck="true">//情况1：node无左子节点，直接插入</span><span class="token comment" spellcheck="true">/*----------------------分支1.1--------------------------*/</span>          <span class="token keyword">if</span> <span class="token punctuation">(</span>node<span class="token punctuation">.</span>left <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>            node<span class="token punctuation">.</span>left <span class="token operator">=</span> newNode          <span class="token comment" spellcheck="true">//情况2：node有左子节点，递归调用insertNode(),直到遇到无左子节点成功插入newNode后，不再符合该情况，也就不再调用insertNode()，递归停止。</span><span class="token comment" spellcheck="true">/*----------------------分支1.2--------------------------*/</span>          <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">else</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">insertNode</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>left<span class="token punctuation">,</span> newNode<span class="token punctuation">)</span>          <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//当newNode.key >= node.key向右查找</span><span class="token comment" spellcheck="true">/*-----------------------分支2:向右查找--------------------------*/</span>                <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">else</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>          <span class="token comment" spellcheck="true">//情况1：node无右子节点，直接插入</span><span class="token comment" spellcheck="true">/*-----------------------分支2.1--------------------------*/</span>           <span class="token keyword">if</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>right <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>            node<span class="token punctuation">.</span>right <span class="token operator">==</span> newNode          <span class="token comment" spellcheck="true">//情况2：node有右子节点，依然递归调用insertNode(),直到遇到无右子节点成功插入newNode为止</span><span class="token comment" spellcheck="true">/*-----------------------分支2.2--------------------------*/</span>           <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">else</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">insertNode</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>right<span class="token punctuation">,</span> newNode<span class="token punctuation">)</span>          <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>      <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span></code></pre><p><strong>过程详解：</strong></p><p>为了更好理解以下列二叉搜索树为例：</p><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%A0%91%E4%BA%8C/4.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%A0%91%E4%BA%8C/4.png" alt="image-20200301193104003"></a></p><p>image-20200301193104003</p><p>想要上述的二叉搜索树（蓝色）中插入数据10：</p><ul><li>先把key &#x3D; 10 传入insert方法，由于存在根节点 9，所以直接调用insetNode方法，传入的参数：node &#x3D; 9，newNode &#x3D; 10；</li><li>由于10 &gt; 9，进入分支2，向右查找适合插入的位置；</li><li>由于根节点 9 的右子节点存在且为 13 ，所以进入分支2.2，递归调用insertNode方法，传入的参数：node &#x3D; 13，newNode &#x3D; 10；</li><li>由于 10 &lt; 13 ，进入分支1，向左查找适合插入的位置；</li><li>由于父节点 13 的左子节点存在且为11，所以进入分支1.2，递归调用insertNode方法，传入的参数：node &#x3D; 11，newNode &#x3D; 10；</li><li>由于 10 &lt; 11，进入分支1，向左查找适合插入的位置；</li><li>由于父节点 11 的左子节点不存在，所以进入分支1.1，成功插入节点 10 。由于不符合分支1.2的条件所以不会继续调用insertNode方法，递归停止。</li></ul><p><strong>测试代码：</strong></p><pre class=" language-avrasm"><code class="language-avrasm">    //测试代码    //1.创建BinarySearchTree    let bst = new BinarySearchTree()    //2.插入数据    bst.insert(11);    bst.insert(7);    bst.insert(15);    bst.insert(5);    bst.insert(9);    console.log(bst);</code></pre><p>应得到下图所示的二叉搜索树：</p><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%A0%91%E4%BA%8C/5.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%A0%91%E4%BA%8C/5.png" alt="image-20200302002708576"></a></p><p>image-20200302002708576</p><p><strong>测试结果</strong></p><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%A0%91%E4%BA%8C/6.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%A0%91%E4%BA%8C/6.png" alt="image-20200302002409735"></a></p><p>image-20200302002409735</p><h4 id="2-遍历数据"><a href="#2-遍历数据" class="headerlink" title="2.遍历数据"></a>2.遍历数据</h4><p>这里所说的树的遍历不仅仅针对二叉搜索树，而是适用于所有的二叉树。由于树结构不是线性结构，所以遍历方式有多种选择，常见的三种二叉树遍历方式为：</p><ul><li>先序遍历；</li><li>中序遍历；</li><li>后序遍历；</li></ul><p>还有层序遍历，使用较少。</p><h5 id="2-1-先序遍历"><a href="#2-1-先序遍历" class="headerlink" title="2.1.先序遍历"></a>2.1.先序遍历</h5><p>先序遍历的过程为：</p><ul><li>首先，遍历根节点；</li><li>然后，遍历其左子树；</li><li>最后，遍历其右子树；</li></ul><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%A0%91%E4%BA%8C/7.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%A0%91%E4%BA%8C/7.png" alt="image-20200301213506159"></a></p><p>image-20200301213506159</p><p>如上图所示，二叉树的节点遍历顺序为：A -&gt; B -&gt; D -&gt; H -&gt; I -&gt; E -&gt; C -&gt; F -&gt; G。</p><p><strong>代码实现：</strong></p><pre class=" language-javascript"><code class="language-javascript">      <span class="token comment" spellcheck="true">//先序遍历</span>      <span class="token comment" spellcheck="true">//掺入一个handler函数方便之后对得到的key进行处理</span>      BinarySearchTree<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>preOrderTraversal <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>handler<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">preOrderTraversalNode</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>root<span class="token punctuation">,</span> handler<span class="token punctuation">)</span>      <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>      <span class="token comment" spellcheck="true">//封装内部方法，对某个节点进行遍历</span>      BinarySearchTree<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>preOrderTraversalNode <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>node<span class="token punctuation">,</span>handler<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>node <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>          <span class="token comment" spellcheck="true">//1.处理经过的节点</span>          <span class="token function">handler</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>key<span class="token punctuation">)</span><span class="token comment" spellcheck="true">/*----------------------递归1----------------------------*/</span>          <span class="token comment" spellcheck="true">//2.遍历左子树中的节点</span>          <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">preOrderTraversalNode</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>left<span class="token punctuation">,</span> handler<span class="token punctuation">)</span><span class="token comment" spellcheck="true">/*----------------------递归2----------------------------*/</span>          <span class="token comment" spellcheck="true">//3.遍历右子树中的节点</span>          <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">preOrderTraversalNode</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>right<span class="token punctuation">,</span> handler<span class="token punctuation">)</span>        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>      <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span></code></pre><p><strong>过程详解：</strong></p><p>以遍历以下二叉搜索树为例：</p><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%A0%91%E4%BA%8C/8.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%A0%91%E4%BA%8C/8.png" alt="image-20200301221450001"></a></p><p>image-20200301221450001</p><p>首先调用preOrderTraversal方法，在方法里再调用preOrderTraversalNode方法用于遍历二叉搜索树。在preOrderTraversalNode方法中，递归1负责遍历左子节点，递归2负责遍历右子节点。先执行递归1，执行过程如下图所示：</p><blockquote><p><strong>记：preOrderTraversalNode() 为 A()</strong></p></blockquote><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%A0%91%E4%BA%8C/9.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%A0%91%E4%BA%8C/9.png" alt="image-20200302000248291"></a></p><p>image-20200302000248291</p><p>可以看到一共递归调用了4次方法A，分别传入11、7、5、3，最后遇到null不满足 node !&#x3D; null 条件结束递归1；注意此时只是执行完最开始的递归1，并没有执行递归2，并且递归1执行到null停止后要一层层地往上返回，按顺序将调用的函数压出函数调用栈。</p><p>关于函数调用栈：之前的四次递归共把4个函数压入了函数调用栈，现在递归执行完了一层层地把函数压出栈。</p><p>值得注意的是：每一层函数都只是执行完了递归1，当返回到该层函数时，比如A（3）要继续执行递归2遍历二叉搜索树中的右子节点；</p><p>在执行递归2的过程中会不断调用方法A，并依次执行递归1和递归2，以此类推直到遇到null不满足 node !&#x3D; null 条件为止，才停止递归并一层层返回，如此循环。同理A（5）层、A（7）层、A（11）层都要经历上述循环，直到将二叉搜索树中的节点全部遍历完为止。</p><p>具体过程如下图所示：</p><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%A0%91%E4%BA%8C/10.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%A0%91%E4%BA%8C/10.png" alt="image-20200302000007414"></a></p><p>image-20200302000007414</p><p><strong>测试代码：</strong></p><pre class=" language-javascript"><code class="language-javascript">    <span class="token comment" spellcheck="true">//测试代码</span>    <span class="token comment" spellcheck="true">//1.创建BinarySearchTree</span>    <span class="token keyword">let</span> bst <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BinarySearchTree</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token comment" spellcheck="true">//2.插入数据</span>    bst<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    bst<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    bst<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">15</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    bst<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    bst<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    bst<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    bst<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    bst<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    bst<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">13</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    bst<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    bst<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">14</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    bst<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    bst<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    bst<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">25</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    bst<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//3.测试遍历</span>    <span class="token keyword">let</span> resultString <span class="token operator">=</span> <span class="token string">""</span>    <span class="token comment" spellcheck="true">//掺入处理节点值的处理函数</span>    bst<span class="token punctuation">.</span><span class="token function">preOrderTraversal</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>      resultString <span class="token operator">+</span><span class="token operator">=</span> key <span class="token operator">+</span> <span class="token string">"->"</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">)</span>    <span class="token function">alert</span><span class="token punctuation">(</span>resultString<span class="token punctuation">)</span></code></pre><p>应输出这样的顺序：11 -&gt; 7 -&gt; 5 -&gt; 3 -&gt; 6 -&gt; 9 -&gt; 8 -&gt; 10 -&gt; 15 -&gt; 13 -&gt;12 -&gt; 14 -&gt; 20 -&gt; 18 -&gt; 25 。</p><p><strong>测试结果：</strong></p><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%A0%91%E4%BA%8C/11.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%A0%91%E4%BA%8C/11.png" alt="image-20200302003244874"></a></p><p>image-20200302003244874</p><h5 id="2-2-中序遍历"><a href="#2-2-中序遍历" class="headerlink" title="2.2.中序遍历"></a>2.2.中序遍历</h5><p>实现思路：与先序遍历原理相同，只不过是遍历的顺序不一样了。</p><ul><li>首先，遍历其左子树；</li><li>然后，遍历根（父）节点；</li><li>最后，遍历其右子树；</li></ul><p><strong>代码实现：</strong></p><pre class=" language-//2.中序遍历"><code class="language-//2.中序遍历">      //中序遍历      BinarySearchTree.prototype.midOrderTraversal = function(handler)&#123;        this.midOrderTraversalNode(this.root, handler)      &#125;      BinarySearchTree.prototype.midOrderTraversalNode = function(node, handler)&#123;        if (node != null) &#123;          //1.遍历左子树中的节点          this.midOrderTraversalNode(node.left, handler)                    //2.处理节点          handler(node.key)          //3.遍历右子树中的节点          this.midOrderTraversalNode(node.right, handler)        &#125;      &#125;</code></pre><p><strong>过程详解：</strong></p><p>遍历的顺序应如下图所示：</p><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%A0%91%E4%BA%8C/12.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%A0%91%E4%BA%8C/12.png" alt="image-20200302112920295"></a></p><p>image-20200302112920295</p><p>首先调用midOrderTraversal方法，在方法里再调用midOrderTraversalNode方法用于遍历二叉搜索树。先使用递归1遍历左子树中的节点；然后，处理父节点；最后，遍历右子树中的节点。</p><p><strong>测试代码：</strong></p><pre class=" language-javascript"><code class="language-javascript">  <span class="token comment" spellcheck="true">//测试代码</span>    <span class="token comment" spellcheck="true">//1.创建BinarySearchTree</span>    <span class="token keyword">let</span> bst <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BinarySearchTree</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token comment" spellcheck="true">//2.插入数据</span>    bst<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    bst<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    bst<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">15</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    bst<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    bst<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    bst<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    bst<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    bst<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    bst<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">13</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    bst<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    bst<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">14</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    bst<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    bst<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    bst<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">25</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    bst<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//3.测试中序遍历</span>    <span class="token keyword">let</span> resultString2 <span class="token operator">=</span><span class="token string">""</span>    bst<span class="token punctuation">.</span><span class="token function">midOrderTraversal</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>      resultString2 <span class="token operator">+</span><span class="token operator">=</span> key <span class="token operator">+</span> <span class="token string">"->"</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">)</span>    <span class="token function">alert</span><span class="token punctuation">(</span>resultString2<span class="token punctuation">)</span></code></pre><p>输出节点的顺序应为：3 -&gt; 5 -&gt; 6 -&gt; 7 -&gt; 8 -&gt; 9 -&gt; 10 -&gt; 11 -&gt; 12 -&gt; 13 -&gt; 14 -&gt; 15 -&gt; 18 -&gt; 20 -&gt; 25 。</p><p><strong>测试结果：</strong></p><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%A0%91%E4%BA%8C/13.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%A0%91%E4%BA%8C/13.png" alt="image-20200302112326786"></a></p><p>image-20200302112326786</p><h5 id="2-3-后续遍历"><a href="#2-3-后续遍历" class="headerlink" title="2.3.后续遍历"></a>2.3.后续遍历</h5><p>实现思路：与先序遍历原理相同，只不过是遍历的顺序不一样了。</p><ul><li>首先，遍历其左子树；</li><li>然后，遍历其右子树；</li><li>最后，遍历根（父）节点；</li></ul><p><strong>代码实现：</strong></p><pre class=" language-javascript"><code class="language-javascript">      <span class="token comment" spellcheck="true">//后序遍历</span>      BinarySearchTree<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>postOrderTraversal <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>handler<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">postOrderTraversalNode</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>root<span class="token punctuation">,</span> handler<span class="token punctuation">)</span>      <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>      BinarySearchTree<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>postOrderTraversalNode <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>node<span class="token punctuation">,</span> handler<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>node <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>          <span class="token comment" spellcheck="true">//1.遍历左子树中的节点</span>          <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">postOrderTraversalNode</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>left<span class="token punctuation">,</span> handler<span class="token punctuation">)</span>                    <span class="token comment" spellcheck="true">//2.遍历右子树中的节点</span>          <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">postOrderTraversalNode</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>right<span class="token punctuation">,</span> handler<span class="token punctuation">)</span>          <span class="token comment" spellcheck="true">//3.处理节点</span>          <span class="token function">handler</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>key<span class="token punctuation">)</span>        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>      <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span></code></pre><p><strong>过程详解：</strong></p><p>遍历的顺序应如下图所示：</p><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%A0%91%E4%BA%8C/14.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%A0%91%E4%BA%8C/14.png" alt="image-20200302120246366"></a></p><p>image-20200302120246366</p><p>首先调用postOrderTraversal方法，在方法里再调用postOrderTraversalNode方法用于遍历二叉搜索树。先使用递归1遍历左子树中的节点；然后，遍历右子树中的节点；最后，处理父节点。</p><p><strong>测试代码：</strong></p><pre class=" language-javascript"><code class="language-javascript">    <span class="token comment" spellcheck="true">//测试代码</span>    <span class="token comment" spellcheck="true">//1.创建BinarySearchTree</span>    <span class="token keyword">let</span> bst <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BinarySearchTree</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token comment" spellcheck="true">//2.插入数据</span>    bst<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    bst<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    bst<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">15</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    bst<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    bst<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    bst<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    bst<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    bst<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    bst<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">13</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    bst<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    bst<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">14</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    bst<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    bst<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    bst<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">25</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    bst<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//3.测试后序遍历</span>    <span class="token keyword">let</span> resultString3 <span class="token operator">=</span><span class="token string">""</span>    bst<span class="token punctuation">.</span><span class="token function">postOrderTraversal</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>      resultString3 <span class="token operator">+</span><span class="token operator">=</span> key <span class="token operator">+</span> <span class="token string">"->"</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">)</span>    <span class="token function">alert</span><span class="token punctuation">(</span>resultString3<span class="token punctuation">)</span></code></pre><p>输出节点的顺序应为：3 -&gt; 6 -&gt; 5 -&gt; 8 -&gt; 10 -&gt; 9 -&gt; 7 -&gt; 12 -&gt; 14 -&gt; 13 -&gt; 18 -&gt; 25 -&gt; 20 -&gt; 15 -&gt; 11 。</p><p><strong>测试结果：</strong></p><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%A0%91%E4%BA%8C/15.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%A0%91%E4%BA%8C/15.png" alt="image-20200302115446608"></a></p><p>image-20200302115446608</p><p><strong>总结：</strong>以遍历根（父）节点的顺序来区分三种遍历方式。比如：先序遍历先遍历根节点、中序遍历第二遍历根节点、后续遍历最后遍历根节点。</p><h4 id="3-查找数据"><a href="#3-查找数据" class="headerlink" title="3.查找数据"></a>3.查找数据</h4><h5 id="3-1-查找最大值-amp-最小值"><a href="#3-1-查找最大值-amp-最小值" class="headerlink" title="3.1.查找最大值&amp;最小值"></a>3.1.查找最大值&amp;最小值</h5><p>在二叉搜索树中查找最值非常简单，最小值在二叉搜索树的最左边，最大值在二叉搜索树的最右边。只需要一直向左&#x2F;右查找就能得到最值，如下图所示：</p><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%A0%91%E4%BA%8C/16.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%A0%91%E4%BA%8C/16.png" alt="image-20200302125521501"></a></p><p>image-20200302125521501</p><p><strong>代码实现：</strong></p><pre class=" language-javascript"><code class="language-javascript">      <span class="token comment" spellcheck="true">//寻找最大值</span>      BinarySearchTree<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>max <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//1.获取根节点</span>        <span class="token keyword">let</span> node <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>root        <span class="token comment" spellcheck="true">//2.定义key保存节点值</span>        <span class="token keyword">let</span> key <span class="token operator">=</span> <span class="token keyword">null</span>        <span class="token comment" spellcheck="true">//3.依次向右不断查找，直到节点为null</span>        <span class="token keyword">while</span> <span class="token punctuation">(</span>node <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>          key <span class="token operator">=</span> node<span class="token punctuation">.</span>key          node <span class="token operator">=</span> node<span class="token punctuation">.</span>right        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> key      <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>      <span class="token comment" spellcheck="true">//寻找最小值</span>      BinarySearchTree<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>min <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>         <span class="token comment" spellcheck="true">//1.获取根节点</span>         <span class="token keyword">let</span> node <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>root        <span class="token comment" spellcheck="true">//2.定义key保存节点值</span>        <span class="token keyword">let</span> key <span class="token operator">=</span> <span class="token keyword">null</span>        <span class="token comment" spellcheck="true">//3.依次向左不断查找，直到节点为null</span>        <span class="token keyword">while</span> <span class="token punctuation">(</span>node <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>          key <span class="token operator">=</span> node<span class="token punctuation">.</span>key          node <span class="token operator">=</span> node<span class="token punctuation">.</span>left        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> key      <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span></code></pre><p><strong>测试代码：</strong></p><pre class=" language-javascript"><code class="language-javascript">   <span class="token comment" spellcheck="true">//测试代码</span>    <span class="token comment" spellcheck="true">//1.创建BinarySearchTree</span>    <span class="token keyword">let</span> bst <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BinarySearchTree</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token comment" spellcheck="true">//2.插入数据</span>    bst<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    bst<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    bst<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">15</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    bst<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    bst<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    bst<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    bst<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    bst<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    bst<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">13</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    bst<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    bst<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">14</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    bst<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    bst<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    bst<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">25</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    bst<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//4.测试最值</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>bst<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>bst<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    </code></pre><p><strong>测试结果：</strong></p><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%A0%91%E4%BA%8C/17.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%A0%91%E4%BA%8C/17.png" alt="image-20200302133028801"></a></p><p>image-20200302133028801</p><h5 id="3-2-查找特定值"><a href="#3-2-查找特定值" class="headerlink" title="3.2.查找特定值"></a>3.2.查找特定值</h5><p>查找二叉搜索树当中的特定值效率也非常高。只需要从根节点开始将需要查找节点的key值与之比较，若<strong>node.key &lt; root**则向左查找，若**node.key &gt; root</strong>就向右查找，直到找到或查找到null为止。这里可以使用递归实现，也可以采用循环来实现。</p><p><strong>实现代码：</strong></p><pre class=" language-javascript"><code class="language-javascript">     <span class="token comment" spellcheck="true">//查找特定的key</span>      BinarySearchTree<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>search <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//1.获取根节点</span>        <span class="token keyword">let</span> node <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>root        <span class="token comment" spellcheck="true">//2.循环搜索key</span>        <span class="token keyword">while</span><span class="token punctuation">(</span>node <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>          <span class="token keyword">if</span> <span class="token punctuation">(</span>key <span class="token operator">&lt;</span> node<span class="token punctuation">.</span>key<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">//小于根(父)节点就往左边找</span>            node <span class="token operator">=</span> node<span class="token punctuation">.</span>left            <span class="token comment" spellcheck="true">//大于根(父)节点就往右边找</span>          <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>key <span class="token operator">></span> node<span class="token punctuation">.</span>key<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>            node <span class="token operator">=</span> node<span class="token punctuation">.</span>right          <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">else</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>            <span class="token keyword">return</span> <span class="token boolean">true</span>          <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>         <span class="token keyword">return</span> <span class="token boolean">false</span>      <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span></code></pre><p><strong>测试代码：</strong></p><pre class=" language-javascript"><code class="language-javascript">    <span class="token comment" spellcheck="true">//测试代码</span>    <span class="token comment" spellcheck="true">//1.创建BinarySearchTree</span>    <span class="token keyword">let</span> bst <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BinarySearchTree</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token comment" spellcheck="true">//2.插入数据</span>    bst<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    bst<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    bst<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">15</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    bst<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    bst<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    bst<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    bst<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    bst<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    bst<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">13</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    bst<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    bst<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">14</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    bst<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    bst<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    bst<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">25</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    bst<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//3.测试搜索方法</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>bst<span class="token punctuation">.</span><span class="token function">search</span><span class="token punctuation">(</span><span class="token number">24</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//false</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>bst<span class="token punctuation">.</span><span class="token function">search</span><span class="token punctuation">(</span><span class="token number">13</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//true</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>bst<span class="token punctuation">.</span><span class="token function">search</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//false</span></code></pre><p><strong>测试结果：</strong></p><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%A0%91%E4%BA%8C/18.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%A0%91%E4%BA%8C/18.png" alt="image-20200302141031370"></a></p><p>image-20200302141031370</p><h4 id="4-删除数据"><a href="#4-删除数据" class="headerlink" title="4.删除数据"></a>4.删除数据</h4><p><strong>实现思路：</strong></p><p><strong>第一步：</strong>先找到需要删除的节点，若没找到，则不需要删除；</p><p>首先定义变量current用于保存需要删除的节点、变量parent用于保存它的父节点、变量isLeftChild保存current是否为parent的左节点，这样方便之后删除节点时改变相关节点的指向。</p><p><strong>实现代码：</strong></p><pre class=" language-javascript"><code class="language-javascript">         <span class="token comment" spellcheck="true">//1.1.定义变量</span>        <span class="token keyword">let</span> current <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>root        <span class="token keyword">let</span> parent <span class="token operator">=</span> <span class="token keyword">null</span>        <span class="token keyword">let</span> isLeftChild <span class="token operator">=</span> <span class="token boolean">true</span>        <span class="token comment" spellcheck="true">//1.2.开始寻找删除的节点</span>        <span class="token keyword">while</span> <span class="token punctuation">(</span>current<span class="token punctuation">.</span>key <span class="token operator">!=</span> key<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>          parent <span class="token operator">=</span> current          <span class="token comment" spellcheck="true">// 小于则往左查找</span>          <span class="token keyword">if</span> <span class="token punctuation">(</span>key <span class="token operator">&lt;</span> current<span class="token punctuation">.</span>key<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>            isLeftChild <span class="token operator">=</span> <span class="token boolean">true</span>            current <span class="token operator">=</span> current<span class="token punctuation">.</span>left          <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span> <span class="token keyword">else</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>            isLeftChild <span class="token operator">=</span> <span class="token boolean">false</span>            current <span class="token operator">=</span> current<span class="token punctuation">.</span>rigth          <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>          <span class="token comment" spellcheck="true">//找到最后依然没有找到相等的节点</span>          <span class="token keyword">if</span> <span class="token punctuation">(</span>current <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>            <span class="token keyword">return</span> <span class="token boolean">false</span>          <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//结束while循环后：current.key = key</span></code></pre><p><strong>第二步：</strong>删除找到的指定节点，后分3种情况：</p><ul><li>删除叶子节点；</li><li>删除只有一个子节点的节点；</li><li>删除有两个子节点的节点；</li></ul><h5 id="4-1-情况1：没有子节点"><a href="#4-1-情况1：没有子节点" class="headerlink" title="4.1.情况1：没有子节点"></a>4.1.情况1：没有子节点</h5><p>没有子节点时也有两种情况：</p><p>当该叶子节点为根节点时，如下图所示，此时<strong>current &#x3D;&#x3D; this.root</strong>，直接通过：<strong>this.root &#x3D; null</strong>，删除根节点。</p><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%A0%91%E4%BA%8C/19.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%A0%91%E4%BA%8C/19.png" alt="image-20200302154316749"></a></p><p>image-20200302154316749</p><p>当该叶子节点不为根节点时也有两种情况，如下图所示：</p><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%A0%91%E4%BA%8C/20.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%A0%91%E4%BA%8C/20.png" alt="image-20200302154019653"></a></p><p>image-20200302154019653</p><p>若current &#x3D; 8，可以通过：parent.left &#x3D; null，删除节点8；</p><p>若current &#x3D; 10，可以通过：parent.right &#x3D; null，删除节点10；</p><p><strong>代码实现：</strong></p><pre class=" language-javas"><code class="language-javas">        //情况1：删除的是叶子节点(没有子节点)        if (current.left == null && current.right ==null) &#123;          if (current == this.root) &#123;            this.root = null          &#125;else if(isLeftChild)&#123;            parent.left = null          &#125;else &#123;            parent.right =null          &#125;        &#125;</code></pre><h5 id="4-2-情况2：有一个子节点"><a href="#4-2-情况2：有一个子节点" class="headerlink" title="4.2.情况2：有一个子节点"></a>4.2.情况2：有一个子节点</h5><p>有六种情况分别是：</p><p>当current存在左子节点时（current.right &#x3D;&#x3D; null）：</p><ul><li>情况1：current为根节点（current &#x3D;&#x3D; this.root），如节点11，此时通过：this.root &#x3D; current.left，删除根节点11；</li><li>情况2：current为父节点parent的左子节点（isLeftChild &#x3D;&#x3D; true），如节点5，此时通过：parent.left &#x3D; current.left，删除节点5；</li><li>情况3：current为父节点parent的右子节点（isLeftChild &#x3D;&#x3D; false），如节点9，此时通过：parent.right &#x3D; current.left，删除节点9；</li></ul><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%A0%91%E4%BA%8C/21.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%A0%91%E4%BA%8C/21.png" alt="image-20200302172806401"></a></p><p>image-20200302172806401</p><p>当current存在右子节点时（current.left &#x3D; null）：</p><ul><li>情况4：current为根节点（current &#x3D;&#x3D; this.root），如节点11，此时通过：this.root &#x3D; current.right，删除根节点11。</li><li>情况5：current为父节点parent的左子节点（isLeftChild &#x3D;&#x3D; true），如节点5，此时通过：parent.left &#x3D; current.right，删除节点5；</li><li>情况6：current为父节点parent的右子节点（isLeftChild &#x3D;&#x3D; false），如节点9，此时通过：parent.right &#x3D; current.right，删除节点9；</li></ul><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%A0%91%E4%BA%8C/22.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%A0%91%E4%BA%8C/22.png" alt="image-20200302172527722"></a></p><p>image-20200302172527722</p><p><strong>实现代码：</strong></p><pre class=" language-javascript"><code class="language-javascript">        <span class="token comment" spellcheck="true">//情况2：删除的节点有一个子节点</span>        <span class="token comment" spellcheck="true">//当current存在左子节点时</span>        <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>current<span class="token punctuation">.</span>right <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>current <span class="token operator">==</span> <span class="token keyword">this</span><span class="token punctuation">.</span>root<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>              <span class="token keyword">this</span><span class="token punctuation">.</span>root <span class="token operator">=</span> current<span class="token punctuation">.</span>left            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span> <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>isLeftChild<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>                parent<span class="token punctuation">.</span>left <span class="token operator">=</span> current<span class="token punctuation">.</span>left            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span> <span class="token keyword">else</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>                parent<span class="token punctuation">.</span>right <span class="token operator">=</span> current<span class="token punctuation">.</span>left            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//当current存在右子节点时</span>      <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span> <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>current<span class="token punctuation">.</span>left <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>current <span class="token operator">==</span> <span class="token keyword">this</span><span class="token punctuation">.</span>root<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>              <span class="token keyword">this</span><span class="token punctuation">.</span>root <span class="token operator">=</span> current<span class="token punctuation">.</span>rigth            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span> <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>isLeftChild<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>                parent<span class="token punctuation">.</span>left <span class="token operator">=</span> current<span class="token punctuation">.</span>right            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span> <span class="token keyword">else</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>                parent<span class="token punctuation">.</span>right <span class="token operator">=</span> current<span class="token punctuation">.</span>right            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>       <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span></code></pre><h5 id="4-3-情况3：有两个子节点"><a href="#4-3-情况3：有两个子节点" class="headerlink" title="4.3.情况3：有两个子节点"></a>4.3.情况3：有两个子节点</h5><p>这种情况<strong>十分复杂</strong>，首先依据以下二叉搜索树，讨论这样的问题：</p><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%A0%91%E4%BA%8C/23.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%A0%91%E4%BA%8C/23.png" alt="image-20200302181849832"></a></p><p>image-20200302181849832</p><p><strong>删除节点9</strong></p><p>在保证删除节点9后原二叉树仍为二叉搜索树的前提下，有两种方式：</p><ul><li>方式1：从节点9的左子树中选择一合适的节点替代节点9，可知节点8符合要求；</li><li>方式2：从节点9的右子树中选择一合适的节点替代节点9，可知节点10符合要求；</li></ul><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%A0%91%E4%BA%8C/24.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%A0%91%E4%BA%8C/24.png" alt="image-20200302190601622"></a></p><p>image-20200302190601622</p><p><strong>删除节点7</strong></p><p>在保证删除节点7后原二叉树仍为二叉搜索树的前提下，也有两种方式：</p><ul><li>方式1：从节点7的左子树中选择一合适的节点替代节点7，可知节点5符合要求；</li><li>方式2：从节点7的右子树中选择一合适的节点替代节点7，可知节点8符合要求；</li></ul><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%A0%91%E4%BA%8C/25.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%A0%91%E4%BA%8C/25.png" alt="image-20200302183058326"></a></p><p>image-20200302183058326</p><p><strong>删除节点15</strong></p><p>在保证删除节点15后原树二叉树仍为二叉搜索树的前提下，同样有两种方式：</p><ul><li>方式1：从节点15的左子树中选择一合适的节点替代节点15，可知节点14符合要求；</li><li>方式2：从节点15的右子树中选择一合适的节点替代节点15，可知节点18符合要求；</li></ul><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%A0%91%E4%BA%8C/26.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%A0%91%E4%BA%8C/26.png" alt="image-20200302184038470"></a></p><p>image-20200302184038470</p><p>相信你已经发现其中的规律了！</p><p><strong>规律总结：</strong>如果要删除的节点有两个子节点，甚至子节点还有子节点，这种情况下需要从要删除节点<strong>下面的子节点中找到一个合适的节点</strong>，来替换当前的节点。</p><p>若用current表示需要删除的节点，则合适的节点指的是：</p><ul><li>current左子树中比current<strong>小一点点的节点</strong>，即current<strong>左子树</strong>中的<strong>最大值</strong>；</li><li>current右子树中比current<strong>大一点点的节点</strong>，即current<strong>右子树</strong>中的<strong>最小值</strong>；</li></ul><p><strong>前驱&amp;后继</strong></p><p>在二叉搜索树中，这两个特殊的节点有特殊的名字：</p><ul><li>比current小一点点的节点，称为current节点的<strong>前驱</strong>。比如下图中的节点5就是节点7的前驱；</li><li>比current大一点点的节点，称为current节点的<strong>后继</strong>。比如下图中的节点8就是节点7的后继；</li></ul><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%A0%91%E4%BA%8C/27.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%A0%91%E4%BA%8C/27.png" alt="image-20200302210841453"></a></p><p>image-20200302210841453</p><p><strong>代码实现：</strong></p><ul><li>查找需要被删除的节点current的后继时，需要在current的<strong>右子树</strong>中查找<strong>最小值</strong>，即在current的<strong>右子树</strong>中一直<strong>向左遍历</strong>查找；</li><li>查找前驱时，则需要在current的<strong>左子树</strong>中查找<strong>最大值</strong>，即在current的<strong>左子树</strong>中一直<strong>向右</strong>遍历查找。</li></ul><p>下面只讨论查找current后继的情况，查找前驱的原理相同，这里暂不讨论。</p><h5 id="4-4-完整实现"><a href="#4-4-完整实现" class="headerlink" title="4.4.完整实现"></a>4.4.完整实现</h5><pre class=" language-kotlin"><code class="language-kotlin">      <span class="token comment" spellcheck="true">//删除节点</span>      BinarySearchTree<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>remove <span class="token operator">=</span> <span class="token function">function</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span>&amp;#<span class="token number">123</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">/*------------------------------1.寻找要删除的节点---------------------------------*/</span>        <span class="token comment" spellcheck="true">//1.1.定义变量current保存删除的节点，parent保存它的父节点。isLeftChild保存current是否为parent的左节点</span>        let current <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>root        let parent <span class="token operator">=</span> <span class="token keyword">null</span>        let isLeftChild <span class="token operator">=</span> <span class="token boolean">true</span>        <span class="token comment" spellcheck="true">//1.2.开始寻找删除的节点</span>        <span class="token keyword">while</span> <span class="token punctuation">(</span>current<span class="token punctuation">.</span>key <span class="token operator">!=</span> key<span class="token punctuation">)</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>          parent <span class="token operator">=</span> current          <span class="token comment" spellcheck="true">// 小于则往左查找</span>          <span class="token keyword">if</span> <span class="token punctuation">(</span>key <span class="token operator">&lt;</span> current<span class="token punctuation">.</span>key<span class="token punctuation">)</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>            isLeftChild <span class="token operator">=</span> <span class="token boolean">true</span>            current <span class="token operator">=</span> current<span class="token punctuation">.</span>left          &amp;#<span class="token number">125</span><span class="token punctuation">;</span> <span class="token keyword">else</span>&amp;#<span class="token number">123</span><span class="token punctuation">;</span>            isLeftChild <span class="token operator">=</span> <span class="token boolean">false</span>            current <span class="token operator">=</span> current<span class="token punctuation">.</span>right          &amp;#<span class="token number">125</span><span class="token punctuation">;</span>          <span class="token comment" spellcheck="true">//找到最后依然没有找到相等的节点</span>          <span class="token keyword">if</span> <span class="token punctuation">(</span>current <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>            <span class="token keyword">return</span> <span class="token boolean">false</span>          &amp;#<span class="token number">125</span><span class="token punctuation">;</span>        &amp;#<span class="token number">125</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//结束while循环后：current.key = key</span><span class="token comment" spellcheck="true">/*------------------------------2.根据对应情况删除节点------------------------------*/</span>        <span class="token comment" spellcheck="true">//情况1：删除的是叶子节点(没有子节点)</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>current<span class="token punctuation">.</span>left <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> current<span class="token punctuation">.</span>right <span class="token operator">==</span><span class="token keyword">null</span><span class="token punctuation">)</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>          <span class="token keyword">if</span> <span class="token punctuation">(</span>current <span class="token operator">==</span> <span class="token keyword">this</span><span class="token punctuation">.</span>root<span class="token punctuation">)</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>root <span class="token operator">=</span> <span class="token keyword">null</span>          &amp;#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>isLeftChild<span class="token punctuation">)</span>&amp;#<span class="token number">123</span><span class="token punctuation">;</span>            parent<span class="token punctuation">.</span>left <span class="token operator">=</span> <span class="token keyword">null</span>          &amp;#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">else</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>            parent<span class="token punctuation">.</span>right <span class="token operator">=</span><span class="token keyword">null</span>          &amp;#<span class="token number">125</span><span class="token punctuation">;</span>        &amp;#<span class="token number">125</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//情况2：删除的节点有一个子节点</span>        <span class="token comment" spellcheck="true">//当current存在左子节点时</span>        <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>current<span class="token punctuation">.</span>right <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>&amp;#<span class="token number">123</span><span class="token punctuation">;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>current <span class="token operator">==</span> <span class="token keyword">this</span><span class="token punctuation">.</span>root<span class="token punctuation">)</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>              <span class="token keyword">this</span><span class="token punctuation">.</span>root <span class="token operator">=</span> current<span class="token punctuation">.</span>left            &amp;#<span class="token number">125</span><span class="token punctuation">;</span> <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>isLeftChild<span class="token punctuation">)</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>                parent<span class="token punctuation">.</span>left <span class="token operator">=</span> current<span class="token punctuation">.</span>left            &amp;#<span class="token number">125</span><span class="token punctuation">;</span> <span class="token keyword">else</span>&amp;#<span class="token number">123</span><span class="token punctuation">;</span>                parent<span class="token punctuation">.</span>right <span class="token operator">=</span> current<span class="token punctuation">.</span>left            &amp;#<span class="token number">125</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//当current存在右子节点时</span>      &amp;#<span class="token number">125</span><span class="token punctuation">;</span> <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>current<span class="token punctuation">.</span>left <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>&amp;#<span class="token number">123</span><span class="token punctuation">;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>current <span class="token operator">==</span> <span class="token keyword">this</span><span class="token punctuation">.</span>root<span class="token punctuation">)</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>              <span class="token keyword">this</span><span class="token punctuation">.</span>root <span class="token operator">=</span> current<span class="token punctuation">.</span>right            &amp;#<span class="token number">125</span><span class="token punctuation">;</span> <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>isLeftChild<span class="token punctuation">)</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>                parent<span class="token punctuation">.</span>left <span class="token operator">=</span> current<span class="token punctuation">.</span>right            &amp;#<span class="token number">125</span><span class="token punctuation">;</span> <span class="token keyword">else</span>&amp;#<span class="token number">123</span><span class="token punctuation">;</span>                parent<span class="token punctuation">.</span>right <span class="token operator">=</span> current<span class="token punctuation">.</span>right            &amp;#<span class="token number">125</span><span class="token punctuation">;</span>       &amp;#<span class="token number">125</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//情况3：删除的节点有两个子节点</span>        <span class="token keyword">else</span>&amp;#<span class="token number">123</span><span class="token punctuation">;</span>          <span class="token comment" spellcheck="true">//1.获取后继节点</span>          let successor <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getSuccessor</span><span class="token punctuation">(</span>current<span class="token punctuation">)</span>          <span class="token comment" spellcheck="true">//2.判断是否根节点</span>          <span class="token keyword">if</span> <span class="token punctuation">(</span>current <span class="token operator">==</span> <span class="token keyword">this</span><span class="token punctuation">.</span>root<span class="token punctuation">)</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>root <span class="token operator">=</span> successor          &amp;#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>isLeftChild<span class="token punctuation">)</span>&amp;#<span class="token number">123</span><span class="token punctuation">;</span>            parent<span class="token punctuation">.</span>left <span class="token operator">=</span> successor          &amp;#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">else</span>&amp;#<span class="token number">123</span><span class="token punctuation">;</span>            parent<span class="token punctuation">.</span>right <span class="token operator">=</span> successor          &amp;#<span class="token number">125</span><span class="token punctuation">;</span>          <span class="token comment" spellcheck="true">//3.将后继的左子节点改为被删除节点的左子节点</span>          successor<span class="token punctuation">.</span>left <span class="token operator">=</span> current<span class="token punctuation">.</span>left        &amp;#<span class="token number">125</span><span class="token punctuation">;</span>      &amp;#<span class="token number">125</span><span class="token punctuation">;</span>      <span class="token comment" spellcheck="true">//封装查找后继的方法</span>      BinarySearchTree<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>getSuccessor <span class="token operator">=</span> <span class="token function">function</span><span class="token punctuation">(</span>delNode<span class="token punctuation">)</span>&amp;#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//1.定义变量,保存找到的后继</span>        let successor <span class="token operator">=</span> delNode        let current <span class="token operator">=</span> delNode<span class="token punctuation">.</span>right        let successorParent <span class="token operator">=</span> delNode        <span class="token comment" spellcheck="true">//2.循环查找current的右子树节点</span>        <span class="token keyword">while</span><span class="token punctuation">(</span>current <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span>&amp;#<span class="token number">123</span><span class="token punctuation">;</span>          successorParent <span class="token operator">=</span> successor          successor <span class="token operator">=</span> current          current <span class="token operator">=</span> current<span class="token punctuation">.</span>left        &amp;#<span class="token number">125</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//3.判断寻找到的后继节点是否直接就是删除节点的right节点</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>successor <span class="token operator">!=</span> delNode<span class="token punctuation">.</span>right<span class="token punctuation">)</span>&amp;#<span class="token number">123</span><span class="token punctuation">;</span>          successorParent<span class="token punctuation">.</span>left <span class="token operator">=</span> successor<span class="token punctuation">.</span>right          successor<span class="token punctuation">.</span>right <span class="token operator">=</span> delNode<span class="token punctuation">.</span>right         &amp;#<span class="token number">125</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> successor      &amp;#<span class="token number">125</span><span class="token punctuation">;</span></code></pre><p><strong>测试代码：</strong></p><pre class=" language-csharp"><code class="language-csharp">   <span class="token comment" spellcheck="true">//测试代码</span>    <span class="token comment" spellcheck="true">//1.创建BinarySearchTree</span>    <span class="token keyword">let</span> bst <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BinarySearchTree</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token comment" spellcheck="true">//2.插入数据</span>    bst<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    bst<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    bst<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">15</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    bst<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    bst<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    bst<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    bst<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    bst<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    bst<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">13</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    bst<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    bst<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">14</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    bst<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    bst<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    bst<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">25</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    bst<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    bst<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">19</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token comment" spellcheck="true">//3.测试删除代码</span>    <span class="token comment" spellcheck="true">//删除没有子节点的节点</span>    bst<span class="token punctuation">.</span><span class="token keyword">remove</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>    bst<span class="token punctuation">.</span><span class="token keyword">remove</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span>    bst<span class="token punctuation">.</span><span class="token keyword">remove</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>    <span class="token comment" spellcheck="true">//删除有一个子节点的节点</span>    bst<span class="token punctuation">.</span><span class="token keyword">remove</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>    bst<span class="token punctuation">.</span><span class="token keyword">remove</span><span class="token punctuation">(</span><span class="token number">19</span><span class="token punctuation">)</span>    <span class="token comment" spellcheck="true">//删除有两个子节点的节点</span>    bst<span class="token punctuation">.</span><span class="token keyword">remove</span><span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">)</span>    bst<span class="token punctuation">.</span><span class="token keyword">remove</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">)</span>    bst<span class="token punctuation">.</span><span class="token keyword">remove</span><span class="token punctuation">(</span><span class="token number">15</span><span class="token punctuation">)</span>    <span class="token comment" spellcheck="true">//遍历二叉搜索树并输出</span>    <span class="token keyword">let</span> resultString <span class="token operator">=</span> <span class="token string">""</span>    bst<span class="token punctuation">.</span><span class="token function">midOrderTraversal</span><span class="token punctuation">(</span><span class="token function">function</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>      resultString <span class="token operator">+</span><span class="token operator">=</span> key <span class="token operator">+</span> <span class="token string">"->"</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">)</span>    <span class="token function">alert</span><span class="token punctuation">(</span>resultString<span class="token punctuation">)</span></code></pre><p><strong>测试结果：</strong></p><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%A0%91%E4%BA%8C/28.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%A0%91%E4%BA%8C/28.png" alt="image-20200302225943296"></a></p><p>image-20200302225943296</p><p>可见三种情况的节点都被成功删除了。</p><h4 id="5-二叉搜索树完整封装"><a href="#5-二叉搜索树完整封装" class="headerlink" title="5.二叉搜索树完整封装"></a>5.二叉搜索树完整封装</h4><pre class=" language-kotlin"><code class="language-kotlin">    <span class="token comment" spellcheck="true">//封装二叉搜索树</span>    function <span class="token function">BinarySearchTree</span><span class="token punctuation">(</span><span class="token punctuation">)</span>&amp;#<span class="token number">123</span><span class="token punctuation">;</span>      <span class="token comment" spellcheck="true">//节点内部类</span>      function <span class="token function">Node</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span>&amp;#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>key <span class="token operator">=</span> key        <span class="token keyword">this</span><span class="token punctuation">.</span>left <span class="token operator">=</span> <span class="token keyword">null</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>right <span class="token operator">=</span> <span class="token keyword">null</span>      &amp;#<span class="token number">125</span><span class="token punctuation">;</span>      <span class="token comment" spellcheck="true">//属性</span>      <span class="token keyword">this</span><span class="token punctuation">.</span>root <span class="token operator">=</span> <span class="token keyword">null</span>      <span class="token comment" spellcheck="true">//方法</span>      <span class="token comment" spellcheck="true">//一.插入数据：insert方法:对外向用户暴露的方法</span>      BinarySearchTree<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>insert <span class="token operator">=</span> <span class="token function">function</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span>&amp;#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//1.根据key创建节点</span>        let newNode <span class="token operator">=</span> new <span class="token function">Node</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span>                  <span class="token comment" spellcheck="true">//2.判断根节点是否存在</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>root <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>          <span class="token keyword">this</span><span class="token punctuation">.</span>root <span class="token operator">=</span> newNode          <span class="token comment" spellcheck="true">//根节点存在时</span>        &amp;#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">else</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>          <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">insertNode</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>root<span class="token punctuation">,</span> newNode<span class="token punctuation">)</span>        &amp;#<span class="token number">125</span><span class="token punctuation">;</span>      &amp;#<span class="token number">125</span><span class="token punctuation">;</span>      <span class="token comment" spellcheck="true">//内部使用的insertNode方法:用于比较节点从左边插入还是右边插入</span>      BinarySearchTree<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>insertNode <span class="token operator">=</span> <span class="token function">function</span><span class="token punctuation">(</span>node<span class="token punctuation">,</span> newNode<span class="token punctuation">)</span>&amp;#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//当newNode.key &lt; node.key向左查找</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>newNode<span class="token punctuation">.</span>key <span class="token operator">&lt;</span> node<span class="token punctuation">.</span>key<span class="token punctuation">)</span>&amp;#<span class="token number">123</span><span class="token punctuation">;</span>          <span class="token comment" spellcheck="true">//情况1：node无左子节点，直接插入</span>          <span class="token keyword">if</span> <span class="token punctuation">(</span>node<span class="token punctuation">.</span>left <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>            node<span class="token punctuation">.</span>left <span class="token operator">=</span> newNode          <span class="token comment" spellcheck="true">//情况2：node有左子节点，递归调用insertNode(),直到遇到无左子节点成功插入newNode后，不再符合该情况，也就不再调用insertNode()，递归停止。</span>          &amp;#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">else</span>&amp;#<span class="token number">123</span><span class="token punctuation">;</span>            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">insertNode</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>left<span class="token punctuation">,</span> newNode<span class="token punctuation">)</span>          &amp;#<span class="token number">125</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//当newNode.key >= node.key向右查找</span>        &amp;#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">else</span>&amp;#<span class="token number">123</span><span class="token punctuation">;</span>          <span class="token comment" spellcheck="true">//情况1：node无右子节点，直接插入</span>          <span class="token keyword">if</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>right <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>&amp;#<span class="token number">123</span><span class="token punctuation">;</span>            node<span class="token punctuation">.</span>right <span class="token operator">=</span> newNode          <span class="token comment" spellcheck="true">//情况2：node有右子节点，依然递归调用insertNode(),直到遇到无右子节点成功插入newNode为止</span>          &amp;#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">else</span>&amp;#<span class="token number">123</span><span class="token punctuation">;</span>            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">insertNode</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>right<span class="token punctuation">,</span> newNode<span class="token punctuation">)</span>          &amp;#<span class="token number">125</span><span class="token punctuation">;</span>        &amp;#<span class="token number">125</span><span class="token punctuation">;</span>      &amp;#<span class="token number">125</span><span class="token punctuation">;</span>      <span class="token comment" spellcheck="true">//二.树的遍历</span>      <span class="token comment" spellcheck="true">//1.先序遍历</span>      <span class="token comment" spellcheck="true">//掺入一个handler函数对得到的key进行处理</span>      BinarySearchTree<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>preOrderTraversal <span class="token operator">=</span> <span class="token function">function</span><span class="token punctuation">(</span>handler<span class="token punctuation">)</span>&amp;#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">preOrderTraversalNode</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>root<span class="token punctuation">,</span> handler<span class="token punctuation">)</span>      &amp;#<span class="token number">125</span><span class="token punctuation">;</span>      <span class="token comment" spellcheck="true">//封装内部方法，对某个节点进行遍历</span>      BinarySearchTree<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>preOrderTraversalNode <span class="token operator">=</span> <span class="token function">function</span><span class="token punctuation">(</span>node<span class="token punctuation">,</span>handler<span class="token punctuation">)</span>&amp;#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>node <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>          <span class="token comment" spellcheck="true">//1.处理经过的节点</span>          <span class="token function">handler</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>key<span class="token punctuation">)</span>          <span class="token comment" spellcheck="true">//2.遍历经过节点的左子节点</span>          <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">preOrderTraversalNode</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>left<span class="token punctuation">,</span> handler<span class="token punctuation">)</span>          <span class="token comment" spellcheck="true">//3.遍历经过节点的右子节点</span>          <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">preOrderTraversalNode</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>right<span class="token punctuation">,</span> handler<span class="token punctuation">)</span>        &amp;#<span class="token number">125</span><span class="token punctuation">;</span>      &amp;#<span class="token number">125</span><span class="token punctuation">;</span>      <span class="token comment" spellcheck="true">//2.中序遍历</span>      BinarySearchTree<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>midOrderTraversal <span class="token operator">=</span> <span class="token function">function</span><span class="token punctuation">(</span>handler<span class="token punctuation">)</span>&amp;#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">midOrderTraversalNode</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>root<span class="token punctuation">,</span> handler<span class="token punctuation">)</span>      &amp;#<span class="token number">125</span><span class="token punctuation">;</span>      BinarySearchTree<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>midOrderTraversalNode <span class="token operator">=</span> <span class="token function">function</span><span class="token punctuation">(</span>node<span class="token punctuation">,</span> handler<span class="token punctuation">)</span>&amp;#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>node <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>          <span class="token comment" spellcheck="true">//1.遍历左子树中的节点</span>          <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">midOrderTraversalNode</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>left<span class="token punctuation">,</span> handler<span class="token punctuation">)</span>                    <span class="token comment" spellcheck="true">//2.处理节点</span>          <span class="token function">handler</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>key<span class="token punctuation">)</span>          <span class="token comment" spellcheck="true">//3.遍历右子树中的节点</span>          <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">midOrderTraversalNode</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>right<span class="token punctuation">,</span> handler<span class="token punctuation">)</span>        &amp;#<span class="token number">125</span><span class="token punctuation">;</span>      &amp;#<span class="token number">125</span><span class="token punctuation">;</span>      <span class="token comment" spellcheck="true">//3.后序遍历</span>      BinarySearchTree<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>postOrderTraversal <span class="token operator">=</span> <span class="token function">function</span><span class="token punctuation">(</span>handler<span class="token punctuation">)</span>&amp;#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">postOrderTraversalNode</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>root<span class="token punctuation">,</span> handler<span class="token punctuation">)</span>      &amp;#<span class="token number">125</span><span class="token punctuation">;</span>      BinarySearchTree<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>postOrderTraversalNode <span class="token operator">=</span> <span class="token function">function</span><span class="token punctuation">(</span>node<span class="token punctuation">,</span> handler<span class="token punctuation">)</span>&amp;#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>node <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>          <span class="token comment" spellcheck="true">//1.遍历左子树中的节点</span>          <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">postOrderTraversalNode</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>left<span class="token punctuation">,</span> handler<span class="token punctuation">)</span>                    <span class="token comment" spellcheck="true">//2.遍历右子树中的节点</span>          <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">postOrderTraversalNode</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>right<span class="token punctuation">,</span> handler<span class="token punctuation">)</span>          <span class="token comment" spellcheck="true">//3.处理节点</span>          <span class="token function">handler</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>key<span class="token punctuation">)</span>        &amp;#<span class="token number">125</span><span class="token punctuation">;</span>      &amp;#<span class="token number">125</span><span class="token punctuation">;</span>      <span class="token comment" spellcheck="true">//三.寻找最值</span>      <span class="token comment" spellcheck="true">//寻找最大值</span>      BinarySearchTree<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>max <span class="token operator">=</span> <span class="token function">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//1.获取根节点</span>        let node <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>root        <span class="token comment" spellcheck="true">//2.定义key保存节点值</span>        let key <span class="token operator">=</span> <span class="token keyword">null</span>        <span class="token comment" spellcheck="true">//3.依次向右不断查找，直到节点为null</span>        <span class="token keyword">while</span> <span class="token punctuation">(</span>node <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>          key <span class="token operator">=</span> node<span class="token punctuation">.</span>key          node <span class="token operator">=</span> node<span class="token punctuation">.</span>right        &amp;#<span class="token number">125</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> key      &amp;#<span class="token number">125</span><span class="token punctuation">;</span>      <span class="token comment" spellcheck="true">//寻找最小值</span>      BinarySearchTree<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>min <span class="token operator">=</span> <span class="token function">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span>&amp;#<span class="token number">123</span><span class="token punctuation">;</span>         <span class="token comment" spellcheck="true">//1.获取根节点</span>         let node <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>root        <span class="token comment" spellcheck="true">//2.定义key保存节点值</span>        let key <span class="token operator">=</span> <span class="token keyword">null</span>        <span class="token comment" spellcheck="true">//3.依次向左不断查找，直到节点为null</span>        <span class="token keyword">while</span> <span class="token punctuation">(</span>node <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>          key <span class="token operator">=</span> node<span class="token punctuation">.</span>key          node <span class="token operator">=</span> node<span class="token punctuation">.</span>left        &amp;#<span class="token number">125</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> key      &amp;#<span class="token number">125</span><span class="token punctuation">;</span>      <span class="token comment" spellcheck="true">//查找特定的key</span>      BinarySearchTree<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>search <span class="token operator">=</span> <span class="token function">function</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span>&amp;#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//1.获取根节点</span>        let node <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>root        <span class="token comment" spellcheck="true">//2.循环搜索key</span>        <span class="token keyword">while</span><span class="token punctuation">(</span>node <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span>&amp;#<span class="token number">123</span><span class="token punctuation">;</span>          <span class="token keyword">if</span> <span class="token punctuation">(</span>key <span class="token operator">&lt;</span> node<span class="token punctuation">.</span>key<span class="token punctuation">)</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">//小于根(父)节点就往左边找</span>            node <span class="token operator">=</span> node<span class="token punctuation">.</span>left            <span class="token comment" spellcheck="true">//大于根(父)节点就往右边找</span>          &amp;#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>key <span class="token operator">></span> node<span class="token punctuation">.</span>key<span class="token punctuation">)</span>&amp;#<span class="token number">123</span><span class="token punctuation">;</span>            node <span class="token operator">=</span> node<span class="token punctuation">.</span>right          &amp;#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">else</span>&amp;#<span class="token number">123</span><span class="token punctuation">;</span>            <span class="token keyword">return</span> <span class="token boolean">true</span>          &amp;#<span class="token number">125</span><span class="token punctuation">;</span>        &amp;#<span class="token number">125</span><span class="token punctuation">;</span>         <span class="token keyword">return</span> <span class="token boolean">false</span>      &amp;#<span class="token number">125</span><span class="token punctuation">;</span>      <span class="token comment" spellcheck="true">//四.删除节点</span>      BinarySearchTree<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>remove <span class="token operator">=</span> <span class="token function">function</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span>&amp;#<span class="token number">123</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">/*------------------------------1.寻找要删除的节点---------------------------------*/</span>        <span class="token comment" spellcheck="true">//1.1.定义变量current保存删除的节点，parent保存它的父节点。isLeftChild保存current是否为parent的左节点</span>        let current <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>root        let parent <span class="token operator">=</span> <span class="token keyword">null</span>        let isLeftChild <span class="token operator">=</span> <span class="token boolean">true</span>        <span class="token comment" spellcheck="true">//1.2.开始寻找删除的节点</span>        <span class="token keyword">while</span> <span class="token punctuation">(</span>current<span class="token punctuation">.</span>key <span class="token operator">!=</span> key<span class="token punctuation">)</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>          parent <span class="token operator">=</span> current          <span class="token comment" spellcheck="true">// 小于则往左查找</span>          <span class="token keyword">if</span> <span class="token punctuation">(</span>key <span class="token operator">&lt;</span> current<span class="token punctuation">.</span>key<span class="token punctuation">)</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>            isLeftChild <span class="token operator">=</span> <span class="token boolean">true</span>            current <span class="token operator">=</span> current<span class="token punctuation">.</span>left          &amp;#<span class="token number">125</span><span class="token punctuation">;</span> <span class="token keyword">else</span>&amp;#<span class="token number">123</span><span class="token punctuation">;</span>            isLeftChild <span class="token operator">=</span> <span class="token boolean">false</span>            current <span class="token operator">=</span> current<span class="token punctuation">.</span>right          &amp;#<span class="token number">125</span><span class="token punctuation">;</span>          <span class="token comment" spellcheck="true">//找到最后依然没有找到相等的节点</span>          <span class="token keyword">if</span> <span class="token punctuation">(</span>current <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>            <span class="token keyword">return</span> <span class="token boolean">false</span>          &amp;#<span class="token number">125</span><span class="token punctuation">;</span>        &amp;#<span class="token number">125</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//结束while循环后：current.key = key</span><span class="token comment" spellcheck="true">/*------------------------------2.根据对应情况删除节点------------------------------*/</span>        <span class="token comment" spellcheck="true">//情况1：删除的是叶子节点(没有子节点)</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>current<span class="token punctuation">.</span>left <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> current<span class="token punctuation">.</span>right <span class="token operator">==</span><span class="token keyword">null</span><span class="token punctuation">)</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>          <span class="token keyword">if</span> <span class="token punctuation">(</span>current <span class="token operator">==</span> <span class="token keyword">this</span><span class="token punctuation">.</span>root<span class="token punctuation">)</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>root <span class="token operator">=</span> <span class="token keyword">null</span>          &amp;#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>isLeftChild<span class="token punctuation">)</span>&amp;#<span class="token number">123</span><span class="token punctuation">;</span>            parent<span class="token punctuation">.</span>left <span class="token operator">=</span> <span class="token keyword">null</span>          &amp;#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">else</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>            parent<span class="token punctuation">.</span>right <span class="token operator">=</span><span class="token keyword">null</span>          &amp;#<span class="token number">125</span><span class="token punctuation">;</span>        &amp;#<span class="token number">125</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//情况2：删除的节点有一个子节点</span>        <span class="token comment" spellcheck="true">//当current存在左子节点时</span>        <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>current<span class="token punctuation">.</span>right <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>&amp;#<span class="token number">123</span><span class="token punctuation">;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>current <span class="token operator">==</span> <span class="token keyword">this</span><span class="token punctuation">.</span>root<span class="token punctuation">)</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>              <span class="token keyword">this</span><span class="token punctuation">.</span>root <span class="token operator">=</span> current<span class="token punctuation">.</span>left            &amp;#<span class="token number">125</span><span class="token punctuation">;</span> <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>isLeftChild<span class="token punctuation">)</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>                parent<span class="token punctuation">.</span>left <span class="token operator">=</span> current<span class="token punctuation">.</span>left            &amp;#<span class="token number">125</span><span class="token punctuation">;</span> <span class="token keyword">else</span>&amp;#<span class="token number">123</span><span class="token punctuation">;</span>                parent<span class="token punctuation">.</span>right <span class="token operator">=</span> current<span class="token punctuation">.</span>left            &amp;#<span class="token number">125</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//当current存在右子节点时</span>      &amp;#<span class="token number">125</span><span class="token punctuation">;</span> <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>current<span class="token punctuation">.</span>left <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>&amp;#<span class="token number">123</span><span class="token punctuation">;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>current <span class="token operator">==</span> <span class="token keyword">this</span><span class="token punctuation">.</span>root<span class="token punctuation">)</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>              <span class="token keyword">this</span><span class="token punctuation">.</span>root <span class="token operator">=</span> current<span class="token punctuation">.</span>right            &amp;#<span class="token number">125</span><span class="token punctuation">;</span> <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>isLeftChild<span class="token punctuation">)</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>                parent<span class="token punctuation">.</span>left <span class="token operator">=</span> current<span class="token punctuation">.</span>right            &amp;#<span class="token number">125</span><span class="token punctuation">;</span> <span class="token keyword">else</span>&amp;#<span class="token number">123</span><span class="token punctuation">;</span>                parent<span class="token punctuation">.</span>right <span class="token operator">=</span> current<span class="token punctuation">.</span>right            &amp;#<span class="token number">125</span><span class="token punctuation">;</span>       &amp;#<span class="token number">125</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//情况3：删除的节点有两个子节点</span>        <span class="token keyword">else</span>&amp;#<span class="token number">123</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">//寻找要删除节点右树的最小键值</span>                let node <span class="token operator">=</span> current<span class="token punctuation">.</span>rightChild                <span class="token keyword">while</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>leftChild <span class="token operator">!==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>&amp;#<span class="token number">123</span><span class="token punctuation">;</span>                    node <span class="token operator">=</span> node<span class="token punctuation">.</span>leftChild                &amp;#<span class="token number">125</span><span class="token punctuation">;</span>                <span class="token comment" spellcheck="true">//递归删除最小键值节点：肯定满足情况一和情况二</span>                <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>key<span class="token punctuation">)</span>                <span class="token comment" spellcheck="true">//用最小键值节点替换要删除的节点</span>                current<span class="token punctuation">.</span>key <span class="token operator">=</span> node<span class="token punctuation">.</span>key                current<span class="token punctuation">.</span>data <span class="token operator">=</span> node<span class="token punctuation">.</span>data                        <span class="token keyword">return</span> current                      <span class="token operator">/</span><span class="token operator">*</span><span class="token comment" spellcheck="true">//1.获取后继节点</span>          let successor <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getSuccessor</span><span class="token punctuation">(</span>current<span class="token punctuation">)</span>          <span class="token comment" spellcheck="true">//2.判断是否根节点</span>          <span class="token keyword">if</span> <span class="token punctuation">(</span>current <span class="token operator">==</span> <span class="token keyword">this</span><span class="token punctuation">.</span>root<span class="token punctuation">)</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>root <span class="token operator">=</span> successor          &amp;#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>isLeftChild<span class="token punctuation">)</span>&amp;#<span class="token number">123</span><span class="token punctuation">;</span>            parent<span class="token punctuation">.</span>left <span class="token operator">=</span> successor          &amp;#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">else</span>&amp;#<span class="token number">123</span><span class="token punctuation">;</span>            parent<span class="token punctuation">.</span>right <span class="token operator">=</span> successor          &amp;#<span class="token number">125</span><span class="token punctuation">;</span>          <span class="token comment" spellcheck="true">//3.将后继的左子节点改为被删除节点的左子节点</span>          successor<span class="token punctuation">.</span>left <span class="token operator">=</span> current<span class="token punctuation">.</span>left        &amp;#<span class="token number">125</span><span class="token punctuation">;</span>      &amp;#<span class="token number">125</span><span class="token punctuation">;</span>      <span class="token comment" spellcheck="true">//封装查找后继的方法</span>      BinarySearchTree<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>getSuccessor <span class="token operator">=</span> <span class="token function">function</span><span class="token punctuation">(</span>delNode<span class="token punctuation">)</span>&amp;#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//1.定义变量,保存找到的后继</span>        let successor <span class="token operator">=</span> delNode        let current <span class="token operator">=</span> delNode<span class="token punctuation">.</span>right        let successorParent <span class="token operator">=</span> delNode        <span class="token comment" spellcheck="true">//2.循环查找current的右子树节点</span>        <span class="token keyword">while</span><span class="token punctuation">(</span>current <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span>&amp;#<span class="token number">123</span><span class="token punctuation">;</span>          successorParent <span class="token operator">=</span> successor          successor <span class="token operator">=</span> current          current <span class="token operator">=</span> current<span class="token punctuation">.</span>left        &amp;#<span class="token number">125</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//3.判断寻找到的后继节点是否直接就是删除节点的right节点</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>successor <span class="token operator">!=</span> delNode<span class="token punctuation">.</span>right<span class="token punctuation">)</span>&amp;#<span class="token number">123</span><span class="token punctuation">;</span>          successorParent<span class="token punctuation">.</span>left <span class="token operator">=</span> successor<span class="token punctuation">.</span>right          successor<span class="token punctuation">.</span>right <span class="token operator">=</span> delNode<span class="token punctuation">.</span>right         &amp;#<span class="token number">125</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> successor      &amp;#<span class="token number">125</span><span class="token punctuation">;</span>    &amp;#<span class="token number">125</span><span class="token punctuation">;</span></code></pre><h3 id="二、平衡树"><a href="#二、平衡树" class="headerlink" title="二、平衡树"></a>二、平衡树</h3><p><strong>二叉搜索树的缺陷：</strong></p><p>当插入的数据是有序的数据，就会造成二叉搜索树的深度过大。比如原二叉搜索树右 11 7 15 组成，如下图所示：</p><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%A0%91%E4%BA%8C/29.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%A0%91%E4%BA%8C/29.png" alt="image-20200302231503639"></a></p><p>image-20200302231503639</p><p>当插入一组有序数据：6 5 4 3 2就会变成深度过大的搜索二叉树，会严重影响二叉搜索树的性能。</p><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%A0%91%E4%BA%8C/30.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%A0%91%E4%BA%8C/30.png" alt="image-20200302231745864"></a></p><p>image-20200302231745864</p><p><strong>非平衡树</strong></p><ul><li>比较好的二叉搜索树，它的数据应该是<strong>左右均匀分布</strong>的；</li><li>但是插入<strong>连续数据</strong>后，二叉搜索树中的数据分布就变得<strong>不均匀</strong>了，我们称这种树为<strong>非平衡树</strong>；</li><li>对于一棵<strong>平衡二叉树</strong>来说，插入&#x2F;查找等操作的效率是<strong>O（logN）</strong>；</li><li>而对于一棵<strong>非平衡二叉树</strong>来说，相当于编写了一个链表，查找效率变成了<strong>O（N）</strong>;</li></ul><p><strong>树的平衡性</strong></p><p>为了能以<strong>较快的时间O（logN）</strong>来操作一棵树，我们需要<strong>保证树总是平衡</strong>的：</p><ul><li>起码大部分是平衡的，此时的时间复杂度也是接近O（logN）的；</li><li>这就要求树中<strong>每个节点左边的子孙节点</strong>的个数，应该尽可能地等于<strong>右边的子孙节点</strong>的个数；</li></ul><p><strong>常见的平衡树</strong></p><ul><li><strong>AVL树</strong>：是最早的一种平衡树，它通过在每个节点多存储一个额外的数据来保持树的平衡。由于AVL树是平衡树，所以它的时间复杂度也是O（logN）。但是它的整体效率不如红黑树，开发中比较少用。</li><li><strong>红黑树</strong>：同样通过<strong>一些特性</strong>来保持树的平衡，时间复杂度也是O（logN）。进行插入&#x2F;删除等操作时，性能优于AVL树，所以平衡树的应用基本都是红黑树。</li></ul><h2 id="图解红黑树"><a href="#图解红黑树" class="headerlink" title="图解红黑树"></a>图解红黑树</h2><h3 id="一、红黑树的五条规则"><a href="#一、红黑树的五条规则" class="headerlink" title="一、红黑树的五条规则"></a>一、红黑树的五条规则</h3><p>红黑树除了符合二叉搜索树的基本规则外，还添加了以下特性：</p><ul><li><strong>规则1：节点是红色或黑色的；</strong></li><li><strong>规则2：根节点是黑色的；</strong></li><li><strong>规则3：每个叶子节点都是黑色的空节点（NIL节点）；</strong></li><li><strong>规则4：每个红色节点的两个子节点都是黑色的（从每个叶子到根的所有路径上不可能有两个连续的红色节点）；</strong></li><li><strong>规则5：从任一节点到其每个叶子节点的所有路径都包含相同数目的黑色节点；</strong></li></ul><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E7%BA%A2%E9%BB%91%E6%A0%91/1.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E7%BA%A2%E9%BB%91%E6%A0%91/1.png" alt="image-20200303121529068"></a></p><p>image-20200303121529068</p><p><strong>红黑树的相对平衡</strong></p><p>前面5条规则的约束确保了以下红黑树的关键特性：</p><ul><li>从<strong>根到叶子节点</strong>的<strong>最长路径</strong>，不会超过<strong>最短路径</strong>的<strong>两倍</strong>；</li><li>结果就是这棵树<strong>基本</strong>是平衡的；</li><li>虽然没有做到绝对的平衡，但是可以保证在最坏的情况下，该树依然是高效的；</li></ul><p>为什么可以做到<strong>最长路径不超过最短路径的两倍</strong>呢？</p><ul><li><strong>性质4</strong>决定了路径上不能有两个相连的红色节点；</li><li>所以，最长路径一定是红色节点和黑色节点交替而成的；</li><li>由于根节点和叶子节点都是黑色的，最短路径可能都是黑色节点，并且最长路径中一定是黑色节点多于红色节点；</li><li><strong>性质5</strong>决定了所有路径上都有相同数目的黑色节点；</li><li>这就表明了没有路径能多于其他任何路径两倍长。</li></ul><h3 id="二、红黑树的三种变换"><a href="#二、红黑树的三种变换" class="headerlink" title="二、红黑树的三种变换"></a>二、红黑树的三种变换</h3><p>插入一个新节点时，有可能树不再平衡，可以通过三种方式的变换使树保持平衡：</p><ul><li><strong>变色</strong>；</li><li><strong>左旋转</strong>；</li><li><strong>右旋转</strong>；</li></ul><h4 id="2-1-变色"><a href="#2-1-变色" class="headerlink" title="2.1.变色"></a>2.1.变色</h4><p>为了重新符合红黑树的规则，需要把<strong>红色</strong>节点变为<strong>黑色</strong>，或者把<strong>黑色</strong>节点变为<strong>红色</strong>；</p><p>插入的<strong>新节点</strong>通常都是<strong>红色节点</strong>：</p><ul><li>当插入的节点为<strong>红色</strong>的时候，大多数情况<strong>不违反</strong>红黑树的任何规则；</li><li>而<strong>插入黑色节点，</strong>必然会导致一条路径上多了一个<strong>黑色节点</strong>，这是很难调整的；</li><li>红色节点虽然可能导致<strong>红红相连</strong>的情况，但是这种情况可以通过<strong>颜色调换和旋转</strong>来调整；</li></ul><h4 id="2-2-左旋转"><a href="#2-2-左旋转" class="headerlink" title="2.2.左旋转"></a>2.2.左旋转</h4><p>以节点X为根<strong>逆时针</strong>旋转二叉搜索树，使得父节点原来的位置被自己的右子节点替代，左子节点的位置被父节点替代；</p><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E7%BA%A2%E9%BB%91%E6%A0%91/2.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E7%BA%A2%E9%BB%91%E6%A0%91/2.png" alt="image-20200303132706061"></a></p><p>image-20200303132706061</p><p><strong>详解：</strong></p><p>如上图所示，左旋转之后：</p><ul><li>节点X取代了节点a原来的位置；</li><li>节点Y取代了节点X原来的位置；</li><li>节点X的<strong>左子树</strong> a 仍然是节点X的<strong>左子树</strong>（这里X的左子树只有一个节点，有多个节点时同样适用，以下同理）；</li><li>节点Y的<strong>右子树</strong> c 仍然是节点Y的<strong>右子树</strong>；</li><li>节点Y的<strong>左子树</strong> b 向<strong>左平移</strong>成为了节点X的<strong>右子树</strong>；</li></ul><p>除此之外，二叉搜索树左旋转之后仍为二叉搜索树：</p><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E7%BA%A2%E9%BB%91%E6%A0%91/3.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E7%BA%A2%E9%BB%91%E6%A0%91/3.png" alt="image-20200303132617108"></a></p><p>image-20200303132617108</p><h4 id="2-3-右旋转"><a href="#2-3-右旋转" class="headerlink" title="2.3.右旋转"></a>2.3.右旋转</h4><p>以节点X为根<strong>顺时针</strong>旋转二叉搜索树，使得父节点原来的位置被自己的左子节点替代，右子节点的位置被父节点替代；</p><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E7%BA%A2%E9%BB%91%E6%A0%91/4.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E7%BA%A2%E9%BB%91%E6%A0%91/4.png" alt="image-20200303132529476"></a></p><p>image-20200303132529476</p><p><strong>详解：</strong></p><p>如上图所示，右旋转之后：</p><ul><li>节点X取代了节点a原来的位置；</li><li>节点Y取代了节点X原来的位置；</li><li>节点X的<strong>右子树</strong> a 仍然是节点X的<strong>右子树</strong>（这里X的右子树虽然只有一个节点，但是多个节点时同样适用，以下同理）；</li><li>节点Y的<strong>左子树</strong> b 仍然是节点Y的<strong>左子树</strong>；</li><li>节点Y的<strong>右子树 **c 向**右平移**成为了节点X的</strong>左子树**；</li></ul><p>除此之外，二叉搜索树右旋转之后仍为二叉搜索树：</p><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E7%BA%A2%E9%BB%91%E6%A0%91/5.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E7%BA%A2%E9%BB%91%E6%A0%91/5.png" alt="image-20200303132501369"></a></p><p>image-20200303132501369</p><h3 id="三、红黑树的插入操作"><a href="#三、红黑树的插入操作" class="headerlink" title="三、红黑树的插入操作"></a>三、红黑树的插入操作</h3><p>首先需要明确，在保证满足红黑树5条规则的情况下，新插入的节点必然是<strong>红色节点</strong>。</p><p>为了方便说明，规定以下四个节点：新插入节点为<strong>N</strong>（Node），N的父节点为<strong>P</strong>（Parent），P的兄弟节点为<strong>U</strong>（Uncle），U的父节点为<strong>G</strong>（Grandpa），如下图所示：</p><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E7%BA%A2%E9%BB%91%E6%A0%91/6.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E7%BA%A2%E9%BB%91%E6%A0%91/6.png" alt="image-20200303120344016"></a></p><p>image-20200303120344016</p><h4 id="3-1-情况1"><a href="#3-1-情况1" class="headerlink" title="3.1.情况1"></a>3.1.情况1</h4><p>当插入的新节点N位于树的根上时，没有父节点。</p><p>这种情况下，只需要将红色节点变为黑色节点即可满足规则2 。</p><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E7%BA%A2%E9%BB%91%E6%A0%91/7.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E7%BA%A2%E9%BB%91%E6%A0%91/7.png" alt="image-20200303132357511"></a></p><p>image-20200303132357511</p><h4 id="3-2-情况2"><a href="#3-2-情况2" class="headerlink" title="3.2.情况2"></a>3.2.情况2</h4><p>新界点N的父节点P为黑色节点，此时不需要任何变化。</p><p>此时既满足规则4也满足规则5。尽管新节点是红色的，但是新节点N有两个黑色节点NIL，所以通向它的路径上黑色节点的个数依然相等，因此满足规则5 。</p><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E7%BA%A2%E9%BB%91%E6%A0%91/8.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E7%BA%A2%E9%BB%91%E6%A0%91/8.png" alt="image-20200303132304098"></a></p><p>image-20200303132304098</p><h4 id="3-3-情况3"><a href="#3-3-情况3" class="headerlink" title="3.3.情况3"></a>3.3.情况3</h4><p>节点P为红色，节点U也为红色，此时节点G必为黑色，即<strong>父红叔红祖黑</strong>。</p><p>在这种情况下需要：</p><ul><li>先将父节点P变为黑色；</li><li>再将叔叔节点U变为黑色；</li><li>最后将祖父节点G变为红色；</li></ul><p>即变为<strong>父黑叔黑祖红</strong>，如下图所示：</p><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E7%BA%A2%E9%BB%91%E6%A0%91/9.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E7%BA%A2%E9%BB%91%E6%A0%91/9.png" alt="image-20200303132148128"></a></p><p>image-20200303132148128</p><p>可能出现的问题：</p><ul><li>N的祖父节点G的父节点也可能是红色，这就违反了规则4，此时可以通过递归调整节点颜色；</li><li>当递归调整到根节点时就需要旋转了，如下图节点A和节点B所示，具体情况后面会介绍；</li></ul><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E7%BA%A2%E9%BB%91%E6%A0%91/10.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E7%BA%A2%E9%BB%91%E6%A0%91/10.png" alt="image-20200303132050765"></a></p><p>image-20200303132050765</p><h4 id="3-4-情况4"><a href="#3-4-情况4" class="headerlink" title="3.4.情况4"></a>3.4.情况4</h4><p>节点P是红色节点，节点U是黑色节点，并且节点N为节点P的<strong>左子节点</strong>，此时节点G一定是黑色节点，即<strong>父红叔黑祖黑</strong>。</p><p>在这种情况下需要：</p><ul><li>先变色：将父节点P变为黑色，将祖父节点G变为红色；</li><li>后旋转：以祖父节点G为根进行右旋转；</li></ul><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E7%BA%A2%E9%BB%91%E6%A0%91/11.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E7%BA%A2%E9%BB%91%E6%A0%91/11.png" alt="image-20200303131956298"></a></p><p>image-20200303131956298</p><h4 id="3-5-情况5"><a href="#3-5-情况5" class="headerlink" title="3.5.情况5"></a>3.5.情况5</h4><p>节点P是红色节点，节点U是黑色节点，并且节点N为节点P的<strong>右子节点</strong>，此时节点G一定是黑色节点，即<strong>父红叔黑祖黑</strong>。</p><p>在这种情况下需要：</p><ul><li>先以节点P为根进行左旋转，旋转后如图b所示；</li><li>随后将<strong>红色</strong>节点<strong>P</strong>和<strong>黑色</strong>节点<strong>B</strong>看成一个整体的<strong>红色</strong>节点<strong>N1</strong>，将新插入的<strong>红色</strong>节点<strong>N</strong>看成<strong>红色</strong>节点<strong>P1</strong> 如图c所示。此时整体就转换为了情况4。</li></ul><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E7%BA%A2%E9%BB%91%E6%A0%91/12.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E7%BA%A2%E9%BB%91%E6%A0%91/12.png" alt="image-20200303140225631"></a></p><p>image-20200303140225631</p><p>接着可以按照情况4进行处理：</p><ul><li>先变色：将N1节点的父节点P1变为黑色，将祖父节点G变为红色；</li><li>后旋转：以祖父节点G为根进行右旋转，旋转后如图 e 所示；</li><li>最后将节点N1和P1变换回来，完成节点N的插入，如图 f 所示；</li></ul><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E7%BA%A2%E9%BB%91%E6%A0%91/13.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E7%BA%A2%E9%BB%91%E6%A0%91/13.png" alt="image-20200303131736316"></a></p><p>image-20200303131736316</p><h4 id="3-6-案例"><a href="#3-6-案例" class="headerlink" title="3.6.案例"></a>3.6.案例</h4><p>在二叉树中依次插入节点：10，9，8，7，6，5，4，3，2，1 。</p><p>如果直接采用普通的二叉搜索树，节点全部插入后是这样的：</p><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E7%BA%A2%E9%BB%91%E6%A0%91/14.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E7%BA%A2%E9%BB%91%E6%A0%91/14.png" alt="image-20200303161149709"></a></p><p>image-20200303161149709</p><p>是一个严重的<strong>不平衡树</strong>，相当于一个链表，不能体现出二叉搜索树的高效率。而按照红黑树的五条规则插入节点就能最大程度保证搜索二叉树是一棵<strong>平衡树</strong>。以下为过程详解：<strong>为了方便解释省略了部分红黑树的叶子节点（NIL）</strong></p><h5 id="插入10"><a href="#插入10" class="headerlink" title="插入10"></a>插入10</h5><p>符合<strong>情况1</strong>：</p><ul><li>插入节点10；</li><li>将节点10的颜色变为黑色；</li></ul><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E7%BA%A2%E9%BB%91%E6%A0%91/15.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E7%BA%A2%E9%BB%91%E6%A0%91/15.png" alt="image-20200303161257010"></a></p><p>image-20200303161257010</p><h5 id="插入9"><a href="#插入9" class="headerlink" title="插入9"></a>插入9</h5><p>符合<strong>情况2</strong>：</p><ul><li>不需要任何变化；</li></ul><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E7%BA%A2%E9%BB%91%E6%A0%91/16.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E7%BA%A2%E9%BB%91%E6%A0%91/16.png" alt="image-20200303161919072"></a></p><p>image-20200303161919072</p><h5 id="插入8"><a href="#插入8" class="headerlink" title="插入8"></a>插入8</h5><blockquote><p>快速判断属于情况3还是情况4的方法：</p><p>从新插入的节点N出发，按图示箭头经过的四个节点，若为<strong>红红黑红</strong>3个红色节点则为情况3，若为<strong>红红黑黑</strong>两个红色节点则为情况4；</p></blockquote><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E7%BA%A2%E9%BB%91%E6%A0%91/17.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E7%BA%A2%E9%BB%91%E6%A0%91/17.png" alt="image-20200303162613413"></a></p><p>image-20200303162613413</p><p>符合<strong>情况4</strong>：</p><ul><li>父节点9变成黑，祖父节点10变为红；</li><li>以祖父节点为根进行右旋转；</li></ul><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E7%BA%A2%E9%BB%91%E6%A0%91/18.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E7%BA%A2%E9%BB%91%E6%A0%91/18.png" alt="image-20200303163803388"></a></p><p>image-20200303163803388</p><h5 id="插入7"><a href="#插入7" class="headerlink" title="插入7"></a>插入7</h5><p>符合<strong>情况3</strong>：</p><ul><li>父节点8和叔节点10变为黑，祖父节点9变为红；</li><li>此时会出现问题：不符合规则2，即根节点不为黑，此时可以把以9为根节点的二叉搜索树当作一个整体作为一个新插入的节点N，而此时又符合情况1，只需要把9变回黑色即可。</li></ul><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E7%BA%A2%E9%BB%91%E6%A0%91/19.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E7%BA%A2%E9%BB%91%E6%A0%91/19.png" alt="image-20200303165135028"></a></p><p>image-20200303165135028</p><h5 id="插入6"><a href="#插入6" class="headerlink" title="插入6"></a>插入6</h5><p>符合<strong>情况4</strong>：</p><ul><li>父节点7变为黑，祖父节点8变为红；</li><li>以祖父节点8为根进行右旋转；</li></ul><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E7%BA%A2%E9%BB%91%E6%A0%91/20.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E7%BA%A2%E9%BB%91%E6%A0%91/20.png" alt="image-20200306170016958"></a></p><p>image-20200306170016958</p><h5 id="插入5"><a href="#插入5" class="headerlink" title="插入5"></a>插入5</h5><p>符合<strong>情况3</strong>：</p><ul><li>父节点6和叔节点8变为黑，祖父节点7变为红；</li></ul><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E7%BA%A2%E9%BB%91%E6%A0%91/21.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E7%BA%A2%E9%BB%91%E6%A0%91/21.png" alt="image-20200303170150314"></a></p><p>image-20200303170150314</p><h5 id="插入4"><a href="#插入4" class="headerlink" title="插入4"></a>插入4</h5><p>符合<strong>情况4</strong>：</p><ul><li>父节点5变为黑，祖父节点6变为红；</li><li>以祖父节点6为根进行右旋转；</li></ul><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E7%BA%A2%E9%BB%91%E6%A0%91/22.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E7%BA%A2%E9%BB%91%E6%A0%91/22.png" alt="image-20200303171028009"></a></p><p>image-20200303171028009</p><h5 id="插入3"><a href="#插入3" class="headerlink" title="插入3"></a>插入3</h5><p><strong>第一次变换</strong>：符合<strong>情况3</strong>：</p><ul><li>父节点4和叔节点6变为黑，祖父节点5变为红；</li></ul><p>变换之后发现5和7为相连的两个红色节点，于是把以5为根的整个子树看成一个新插入的节点N1，再进行第二次变换。</p><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E7%BA%A2%E9%BB%91%E6%A0%91/23.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E7%BA%A2%E9%BB%91%E6%A0%91/23.png" alt="image-20200303171755035"></a></p><p>image-20200303171755035</p><p><strong>第二次变换</strong>：符合<strong>情况4</strong>：</p><ul><li>父节点7变为黑，祖父节点9变为红；</li><li>以祖父节点9为根进行右旋转；</li></ul><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E7%BA%A2%E9%BB%91%E6%A0%91/24.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E7%BA%A2%E9%BB%91%E6%A0%91/24.png" alt="image-20200303172800302"></a></p><p>image-20200303172800302</p><p>最后复原N1得到变换后的红黑树：</p><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E7%BA%A2%E9%BB%91%E6%A0%91/25.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E7%BA%A2%E9%BB%91%E6%A0%91/25.png" alt="image-20200303173158141"></a></p><p>image-20200303173158141</p><h5 id="插入2"><a href="#插入2" class="headerlink" title="插入2"></a>插入2</h5><p>符合<strong>情况4</strong>：</p><ul><li>父节点3变为黑，祖父节点4变为红；</li><li>以祖父节点4为根进行右旋转；</li></ul><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E7%BA%A2%E9%BB%91%E6%A0%91/26.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E7%BA%A2%E9%BB%91%E6%A0%91/26.png" alt="image-20200303174011409"></a></p><p>image-20200303174011409</p><h5 id="插入1"><a href="#插入1" class="headerlink" title="插入1"></a><strong>插入1</strong></h5><p><strong>第一次变换</strong>：符合<strong>情况3</strong>：</p><ul><li>父节点2和叔节点4变为黑，祖父节点3变为红；</li></ul><p>变换之后发现3和5为相连的两个红色节点，于是把以3为根的整个子树看成一个新插入的节点N1，再进行第二次变换。</p><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E7%BA%A2%E9%BB%91%E6%A0%91/27.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E7%BA%A2%E9%BB%91%E6%A0%91/27.png" alt="image-20200303180603741"></a></p><p>image-20200303180603741</p><p><strong>第二次变换</strong>：符合<strong>情况3</strong>：</p><ul><li>父节点5和叔节点9变为黑，祖父节点7变为红；即由图 b -&gt; 图 c 。</li></ul><p>变换之后发现根节点7为红色不符合规则2，所以把以7为根节点的红黑树看成一个新插入的节点N2，再进行第三次变换。</p><p><strong>第三次变换</strong>：符合<strong>情况1</strong>：</p><ul><li>直接将根节点7变为黑色即可。</li></ul><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E7%BA%A2%E9%BB%91%E6%A0%91/28.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E7%BA%A2%E9%BB%91%E6%A0%91/28.png" alt="image-20200303181133397"></a></p><p>image-20200303181133397</p><p>由此，完成了1~10节点的插入，虽然没有遇到情况5，不过情况5经过左旋转的操作便可转换为情况4，原理一样。如下图所示，将这棵红黑树的叶子节点NIL补全之后，经检验满足红黑树的五条规则，并且基本属于<strong>平衡树</strong>，效率较高。</p><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E7%BA%A2%E9%BB%91%E6%A0%91/29.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E7%BA%A2%E9%BB%91%E6%A0%91/29.png" alt="image-20200303182326442"></a></p><p>image-20200303182326442</p><h3 id="四、红黑树的删除操作"><a href="#四、红黑树的删除操作" class="headerlink" title="四、红黑树的删除操作"></a>四、红黑树的删除操作</h3><p>红黑树的删除操作结合了复杂的<strong>二叉树的删除操作</strong>和复杂的<strong>红黑树的插入规则</strong>，整体来说难度非常大，篇幅较长，这里暂不进行探讨。</p><h2 id="JavaScript实现图结构"><a href="#JavaScript实现图结构" class="headerlink" title="JavaScript实现图结构"></a>JavaScript实现图结构</h2><h3 id="一、图论"><a href="#一、图论" class="headerlink" title="一、图论"></a>一、图论</h3><h4 id="1-1-图的简介"><a href="#1-1-图的简介" class="headerlink" title="1.1.图的简介"></a>1.1.图的简介</h4><p><strong>什么是图？</strong></p><ul><li><strong>图结构</strong>是一种与<strong>树结构</strong>有些相似的数据结构；</li><li><strong>图论</strong>是数学的一个分支，并且，在数学中，树是图的一种；</li><li>图论以图为研究对象，研究<strong>顶点</strong>和<strong>边</strong>组成的<strong>图形</strong>的数学理论和方法；</li><li>主要的研究目的为：<strong>事物之间的联系</strong>，<strong>顶点</strong>代表<strong>事物</strong>，<strong>边</strong>代表两个事物间的<strong>关系</strong>；</li></ul><p><strong>图的特点：</strong></p><ul><li><p><strong>一组顶点</strong>：通常用 <strong>V</strong> （Vertex）表示顶点的集合；</p></li><li><p>一组边</p><p>：通常用</p><p>E</p><p>（Edge）表示边的集合；</p><ul><li>边是顶点和顶点之间的连线；</li><li>边可以是有向的，也可以是无向的。比如A—-B表示无向，A —&gt; B 表示有向；</li></ul></li></ul><p><strong>图的常用术语：</strong></p><ul><li><strong>顶点：</strong>表示图中的一个<strong>节点</strong>；</li><li><strong>边：</strong>表示<strong>顶点和顶点</strong>给之间的<strong>连线</strong>；</li><li><strong>相邻顶点：</strong>由一条边连接在一起的顶点称为<strong>相邻顶点</strong>；</li><li><strong>度：</strong>一个顶点的<strong>度</strong>是<strong>相邻顶点的数量</strong>；</li><li><strong>路径：</strong><ul><li><strong>简单路径：</strong>简单路径要求不包含重复的顶点；</li><li><strong>回路：</strong>第一个顶点和最后一个顶点<strong>相同</strong>的路径称为回路；</li></ul></li><li><strong>无向图：</strong>图中的所有边都是<strong>没有</strong>方向的；</li><li><strong>有向图：</strong>图中的所有边都是<strong>有</strong>方向的；</li><li><strong>无权图：</strong>无权图中的边没有任何权重意义；</li><li><strong>带权图：</strong>带权图中的边有一定的权重含义；</li></ul><h4 id="1-2-图的表示"><a href="#1-2-图的表示" class="headerlink" title="1.2.图的表示"></a>1.2.图的表示</h4><h5 id="邻接矩阵"><a href="#邻接矩阵" class="headerlink" title="邻接矩阵"></a>邻接矩阵</h5><p>表示图的常用方式为：<strong>邻接矩阵</strong>。</p><ul><li>可以使用二维数组来表示邻接矩阵；</li><li>邻接矩阵让<strong>每个节点和一个整数相关联</strong>，该<strong>整数作为数组的下标值</strong>；</li><li>使用一个<strong>二维数组</strong>来表示顶点之间的<strong>连接</strong>；</li></ul><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%9B%BE/1.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%9B%BE/1.png" alt="image-20200303213913574"></a></p><p>image-20200303213913574</p><p>如上图所示：</p><ul><li>二维数组中的<strong>0</strong>表示没有连线，<strong>1</strong>表示有连线；</li><li>如：A[ 0 ] [ 3 ] &#x3D; 1，表示 A 和 C 之间有连接；</li><li>邻接矩阵的对角线上的值都为0，表示A - A ，B - B，等自回路都没有连接（自己与自己之间没有连接）；</li><li>若为无向图，则邻接矩阵应为对角线上元素全为0的对称矩阵；</li></ul><p><strong>邻接矩阵的问题：</strong></p><ul><li>如果图是一个<strong>稀疏图</strong>，那么邻接矩阵中将存在<strong>大量的 0</strong>，造成存储空间的浪费；</li></ul><h5 id="邻接表"><a href="#邻接表" class="headerlink" title="邻接表"></a>邻接表</h5><p>另外一种表示图的常用方式为：<strong>邻接表</strong>。</p><ul><li>邻接表由图中<strong>每个顶点</strong>以及<strong>和顶点相邻的顶点列表</strong>组成；</li><li>这个列表可用多种方式存储，比如：<strong>数组&#x2F;链表&#x2F;字典（哈希表）</strong>等都可以；</li></ul><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%9B%BE/2.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%9B%BE/2.png" alt="image-20200303215312091"></a></p><p>image-20200303215312091</p><p>如上图所示：</p><ul><li>图中可清楚看到<strong>A与B、C、D相邻</strong>，假如要表示这些与A顶点相邻的顶点（边），可以通过将它们作为A的值（value）存入到对应的<strong>数组&#x2F;链表&#x2F;字典</strong>中。</li><li>之后，通过键（key）A可以十分方便地取出对应的数据；</li></ul><p><strong>邻接表的问题：</strong></p><ul><li>邻接表可以简单地得出<strong>出度</strong>，即某一顶点指向其他顶点的个数；</li><li>但是，邻接表计算<strong>入度</strong>（指向某一顶点的其他顶点的个数称为该顶点的入度）十分困难。此时需要构造<strong>逆邻接表</strong>才能有效计算入度；</li></ul><h3 id="二、封装图结构"><a href="#二、封装图结构" class="headerlink" title="二、封装图结构"></a>二、封装图结构</h3><p>在实现过程中采用<strong>邻接表</strong>的方式来表示边，使用<strong>字典类</strong>来存储邻接表。</p><h4 id="2-1-添加字典类和队列类"><a href="#2-1-添加字典类和队列类" class="headerlink" title="2.1.添加字典类和队列类"></a>2.1.添加字典类和队列类</h4><p>首先需要引入之前实现的，之后会用到的字典类和队列类：</p><pre class=" language-kotlin"><code class="language-kotlin">    <span class="token comment" spellcheck="true">//封装字典类</span>function <span class="token function">Dictionary</span><span class="token punctuation">(</span><span class="token punctuation">)</span>&amp;#<span class="token number">123</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">//字典属性</span>  <span class="token keyword">this</span><span class="token punctuation">.</span>items <span class="token operator">=</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>&amp;#<span class="token number">125</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">//字典操作方法</span>  <span class="token comment" spellcheck="true">//一.在字典中添加键值对</span>  Dictionary<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>set <span class="token operator">=</span> <span class="token function">function</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> value<span class="token punctuation">)</span>&amp;#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>items<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> value  &amp;#<span class="token number">125</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">//二.判断字典中是否有某个key</span>  Dictionary<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>has <span class="token operator">=</span> <span class="token function">function</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span>&amp;#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>items<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span>  &amp;#<span class="token number">125</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">//三.从字典中移除元素</span>  Dictionary<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>remove <span class="token operator">=</span> <span class="token function">function</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span>&amp;#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//1.判断字典中是否有这个key</span>    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">false</span>    <span class="token comment" spellcheck="true">//2.从字典中删除key</span>    delete <span class="token keyword">this</span><span class="token punctuation">.</span>items<span class="token punctuation">[</span>key<span class="token punctuation">]</span>    <span class="token keyword">return</span> <span class="token boolean">true</span>  &amp;#<span class="token number">125</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">//四.根据key获取value</span>  Dictionary<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>get <span class="token operator">=</span> <span class="token function">function</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span>&amp;#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token keyword">this</span><span class="token punctuation">.</span>items<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">:</span> undefined  &amp;#<span class="token number">125</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">//五.获取所有keys</span>  Dictionary<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>keys <span class="token operator">=</span> <span class="token function">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span>&amp;#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>items<span class="token punctuation">)</span>  &amp;#<span class="token number">125</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">//六.size方法</span>  Dictionary<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>keys <span class="token operator">=</span> <span class="token function">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span>&amp;#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length  &amp;#<span class="token number">125</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">//七.clear方法</span>  Dictionary<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>clear <span class="token operator">=</span> <span class="token function">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span>&amp;#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>items <span class="token operator">=</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>&amp;#<span class="token number">125</span><span class="token punctuation">;</span>  &amp;#<span class="token number">125</span><span class="token punctuation">;</span>&amp;#<span class="token number">125</span><span class="token punctuation">;</span>   <span class="token comment" spellcheck="true">// 基于数组封装队列类</span>    function <span class="token function">Queue</span><span class="token punctuation">(</span><span class="token punctuation">)</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// 属性</span>      <span class="token keyword">this</span><span class="token punctuation">.</span>items <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>    <span class="token comment" spellcheck="true">// 方法</span>    <span class="token comment" spellcheck="true">// 1.将元素加入到队列中</span>    Queue<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>enqueue <span class="token operator">=</span> element <span class="token operator">=</span><span class="token operator">></span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>      <span class="token keyword">this</span><span class="token punctuation">.</span>items<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>element<span class="token punctuation">)</span>    &amp;#<span class="token number">125</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// 2.从队列中删除前端元素</span>    Queue<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>dequeue <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>items<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    &amp;#<span class="token number">125</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// 3.查看前端的元素</span>    Queue<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>front <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>items<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>    &amp;#<span class="token number">125</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// 4.查看队列是否为空</span>    Queue<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>isEmpty <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>items<span class="token punctuation">.</span>length <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">;</span>    &amp;#<span class="token number">125</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// 5.查看队列中元素的个数</span>    Queue<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>size <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>items<span class="token punctuation">.</span>length    &amp;#<span class="token number">125</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// 6.toString方法</span>    Queue<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>toString <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>      let resultString <span class="token operator">=</span> <span class="token string">''</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span>let i of <span class="token keyword">this</span><span class="token punctuation">.</span>items<span class="token punctuation">)</span>&amp;#<span class="token number">123</span><span class="token punctuation">;</span>          resultString <span class="token operator">+=</span> i <span class="token operator">+</span> <span class="token string">' '</span>        &amp;#<span class="token number">125</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> resultString      &amp;#<span class="token number">125</span><span class="token punctuation">;</span>    &amp;#<span class="token number">125</span><span class="token punctuation">;</span></code></pre><h4 id="2-2-创建图类"><a href="#2-2-创建图类" class="headerlink" title="2.2.创建图类"></a>2.2.创建图类</h4><p>先创建图类Graph，并添加基本属性，再实现图类的常用方法：</p><pre class=" language-csharp"><code class="language-csharp">    <span class="token comment" spellcheck="true">//封装图类</span>    function <span class="token function">Graph</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>      <span class="token comment" spellcheck="true">//属性：顶点(数组)/边(字典)</span>      <span class="token keyword">this</span><span class="token punctuation">.</span>vertexes <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>  <span class="token comment" spellcheck="true">//顶点</span>      <span class="token keyword">this</span><span class="token punctuation">.</span>edges <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Dictionary</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">//边</span>      <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span></code></pre><h4 id="2-3-添加顶点与边"><a href="#2-3-添加顶点与边" class="headerlink" title="2.3.添加顶点与边"></a>2.3.添加顶点与边</h4><p>如图所示：</p><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%9B%BE/3.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%9B%BE/3.png" alt="image-20200303235132868"></a></p><p>image-20200303235132868</p><p>创建一个数组对象vertexes存储图的顶点；创建一个字典对象edges存储图的边，其中key为顶点，value为存储key顶点相邻顶点的数组。</p><p><strong>代码实现：</strong></p><pre class=" language-kotlin"><code class="language-kotlin">      <span class="token comment" spellcheck="true">//添加方法</span>      <span class="token comment" spellcheck="true">//一.添加顶点</span>      Graph<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>addVertex <span class="token operator">=</span> <span class="token function">function</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span>&amp;#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>vertexes<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>edges<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>v<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">//将边添加到字典中，新增的顶点作为键，对应的值为一个存储边的空数组</span>      &amp;#<span class="token number">125</span><span class="token punctuation">;</span>      <span class="token comment" spellcheck="true">//二.添加边</span>      Graph<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>addEdge <span class="token operator">=</span> <span class="token function">function</span><span class="token punctuation">(</span>v1<span class="token punctuation">,</span> v2<span class="token punctuation">)</span>&amp;#<span class="token number">123</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//传入两个顶点为它们添加边</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>edges<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>v1<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>v2<span class="token punctuation">)</span><span class="token comment" spellcheck="true">//取出字典对象edges中存储边的数组，并添加关联顶点</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>edges<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>v2<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>v1<span class="token punctuation">)</span><span class="token comment" spellcheck="true">//表示的是无向表，故要添加互相指向的两条边</span>      &amp;#<span class="token number">125</span><span class="token punctuation">;</span></code></pre><h4 id="2-4-转换为字符串输出"><a href="#2-4-转换为字符串输出" class="headerlink" title="2.4.转换为字符串输出"></a>2.4.转换为字符串输出</h4><p>为图类Graph添加toString方法，实现以邻接表的形式输出图中各顶点。</p><p><strong>代码实现：</strong></p><pre class=" language-javascript"><code class="language-javascript">      <span class="token comment" spellcheck="true">//三.实现toString方法:转换为邻接表形式</span>      Graph<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>toString <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//1.定义字符串，保存最终结果</span>        <span class="token keyword">let</span> resultString <span class="token operator">=</span> <span class="token string">""</span>        <span class="token comment" spellcheck="true">//2.遍历所有的顶点以及顶点对应的边</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>vertexes<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//遍历所有顶点</span>          resultString <span class="token operator">+</span><span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>vertexes<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">'-->'</span>          <span class="token keyword">let</span> vEdges <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>edges<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>vertexes<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>          <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> vEdges<span class="token punctuation">.</span>length<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//遍历字典中每个顶点对应的数组</span>            resultString <span class="token operator">+</span><span class="token operator">=</span> vEdges<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">'  '</span><span class="token punctuation">;</span>          <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>          resultString <span class="token operator">+</span><span class="token operator">=</span> <span class="token string">'\n'</span>        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> resultString      <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span></code></pre><p><strong>测试代码：</strong></p><pre class=" language-javascript"><code class="language-javascript">   <span class="token comment" spellcheck="true">//测试代码</span>    <span class="token comment" spellcheck="true">//1.创建图结构</span>    <span class="token keyword">let</span> graph <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Graph</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token comment" spellcheck="true">//2.添加顶点</span>    <span class="token keyword">let</span> myVertexes <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'A'</span><span class="token punctuation">,</span> <span class="token string">'B'</span><span class="token punctuation">,</span> <span class="token string">'C'</span><span class="token punctuation">,</span> <span class="token string">'D'</span><span class="token punctuation">,</span> <span class="token string">'E'</span><span class="token punctuation">,</span> <span class="token string">'F'</span><span class="token punctuation">,</span> <span class="token string">'G'</span><span class="token punctuation">,</span> <span class="token string">'H'</span><span class="token punctuation">,</span> <span class="token string">'I'</span><span class="token punctuation">]</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> myVertexes<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>      graph<span class="token punctuation">.</span><span class="token function">addVertex</span><span class="token punctuation">(</span>myVertexes<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//3.添加边</span>    graph<span class="token punctuation">.</span><span class="token function">addEdge</span><span class="token punctuation">(</span><span class="token string">'A'</span><span class="token punctuation">,</span> <span class="token string">'B'</span><span class="token punctuation">)</span>    graph<span class="token punctuation">.</span><span class="token function">addEdge</span><span class="token punctuation">(</span><span class="token string">'A'</span><span class="token punctuation">,</span> <span class="token string">'C'</span><span class="token punctuation">)</span>    graph<span class="token punctuation">.</span><span class="token function">addEdge</span><span class="token punctuation">(</span><span class="token string">'A'</span><span class="token punctuation">,</span> <span class="token string">'D'</span><span class="token punctuation">)</span>    graph<span class="token punctuation">.</span><span class="token function">addEdge</span><span class="token punctuation">(</span><span class="token string">'C'</span><span class="token punctuation">,</span> <span class="token string">'D'</span><span class="token punctuation">)</span>    graph<span class="token punctuation">.</span><span class="token function">addEdge</span><span class="token punctuation">(</span><span class="token string">'C'</span><span class="token punctuation">,</span> <span class="token string">'G'</span><span class="token punctuation">)</span>    graph<span class="token punctuation">.</span><span class="token function">addEdge</span><span class="token punctuation">(</span><span class="token string">'D'</span><span class="token punctuation">,</span> <span class="token string">'G'</span><span class="token punctuation">)</span>    graph<span class="token punctuation">.</span><span class="token function">addEdge</span><span class="token punctuation">(</span><span class="token string">'D'</span><span class="token punctuation">,</span> <span class="token string">'H'</span><span class="token punctuation">)</span>    graph<span class="token punctuation">.</span><span class="token function">addEdge</span><span class="token punctuation">(</span><span class="token string">'B'</span><span class="token punctuation">,</span> <span class="token string">'E'</span><span class="token punctuation">)</span>    graph<span class="token punctuation">.</span><span class="token function">addEdge</span><span class="token punctuation">(</span><span class="token string">'B'</span><span class="token punctuation">,</span> <span class="token string">'F'</span><span class="token punctuation">)</span>    graph<span class="token punctuation">.</span><span class="token function">addEdge</span><span class="token punctuation">(</span><span class="token string">'E'</span><span class="token punctuation">,</span> <span class="token string">'I'</span><span class="token punctuation">)</span>    <span class="token comment" spellcheck="true">//4.输出结果</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>graph<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p><strong>测试结果：</strong></p><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%9B%BE/4.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%9B%BE/4.png" alt="image-20200303233737451"></a></p><p>image-20200303233737451</p><h4 id="2-5-图的遍历"><a href="#2-5-图的遍历" class="headerlink" title="2.5.图的遍历"></a>2.5.图的遍历</h4><p><strong>图的遍历思想：</strong></p><ul><li>图的遍历思想与树的遍历思想一样，意味着需要将图中<strong>所有的顶点</strong>都访问一遍，并且不能有<strong>重复的访问</strong>（上面的toString方法会重复访问）；</li></ul><p><strong>遍历图的两种算法：</strong></p><ul><li>广度优先搜索（Breadth - First Search，简称<strong>BFS</strong>）;</li><li>深度优先搜索（Depth - First Search，简称<strong>DFS</strong>）;</li><li>两种遍历算法都需要指定<strong>第一个被访问的顶点</strong>；</li></ul><p>为了记录顶点是否被访问过，使用<strong>三种颜色</strong>来表示它们的状态</p><ul><li><strong>白色</strong>：表示该顶点还没有被访问过；</li><li><strong>灰色</strong>：表示该顶点被访问过，但其相邻顶点并未完全被访问过；</li><li><strong>黑色</strong>：表示该顶点被访问过，且其所有相邻顶点都被访问过；</li></ul><p>首先封装initializeColor方法将图中的所有顶点初始化为白色，代码实现如下：</p><pre class=" language-javascript"><code class="language-javascript">      <span class="token comment" spellcheck="true">//四.初始化状态颜色</span>      Graph<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>initializeColor <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token keyword">let</span> colors <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>vertexes<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>           colors<span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>vertexes<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'white'</span><span class="token punctuation">;</span>        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> colors      <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span></code></pre><h5 id="广度优先搜索"><a href="#广度优先搜索" class="headerlink" title="广度优先搜索"></a>广度优先搜索</h5><p>广度优先搜索算法的思路：</p><ul><li>广度优先搜索算法会从指定的第一个顶点开始遍历图，先访问其所有的相邻顶点，就像一次访问图的一层；</li><li>也可以说是<strong>先宽后深</strong>地遍历图中的各个顶点；</li></ul><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%9B%BE/5.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%9B%BE/5.png" alt="image-20200303233840691"></a></p><p>image-20200303233840691</p><p><strong>实现思路：</strong></p><p>基于<strong>队列</strong>可以简单地实现广度优先搜索算法：</p><ul><li>首先创建一个队列Q（尾部进，首部出）；</li><li>调用封装的initializeColor方法将所有顶点初始化为白色；</li><li>指定第一个顶点A，将A标注为<strong>灰色</strong>（被访问过的节点），并将A放入队列Q中；</li><li>循环遍历队列中的元素，只要队列Q非空，就执行以下操作：<ul><li>先将灰色的A从Q的首部取出；</li><li>取出A后，将A的所有未被访问过（白色）的相邻顶点依次从队列Q的尾部加入队列，并变为灰色。以此保证，灰色的相邻顶点不重复加入队列；</li><li>A的全部相邻节点加入Q后，A变为黑色，在下一次循环中被移除Q外；</li></ul></li></ul><p><strong>代码实现：</strong></p><pre class=" language-javascript"><code class="language-javascript">      <span class="token comment" spellcheck="true">//五.实现广度搜索(BFS)</span>      <span class="token comment" spellcheck="true">//传入指定的第一个顶点和处理结果的函数</span>      Graph<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>bfs <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>initV<span class="token punctuation">,</span> handler<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//1.初始化颜色</span>        <span class="token keyword">let</span> colors <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">initializeColor</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token comment" spellcheck="true">//2.创建队列</span>        <span class="token keyword">let</span> que <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Queue</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token comment" spellcheck="true">//3.将顶点加入到队列中</span>        que<span class="token punctuation">.</span><span class="token function">enqueue</span><span class="token punctuation">(</span>initV<span class="token punctuation">)</span>        <span class="token comment" spellcheck="true">//4.循环从队列中取出元素，队列为空才停止</span>        <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token operator">!</span>que<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>          <span class="token comment" spellcheck="true">//4.1.从队列首部取出一个顶点</span>          <span class="token keyword">let</span> v <span class="token operator">=</span> que<span class="token punctuation">.</span><span class="token function">dequeue</span><span class="token punctuation">(</span><span class="token punctuation">)</span>          <span class="token comment" spellcheck="true">//4.2.从字典对象edges中获取和该顶点相邻的其他顶点组成的数组</span>          <span class="token keyword">let</span> vNeighbours <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>edges<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span>          <span class="token comment" spellcheck="true">//4.3.将v的颜色变为灰色</span>          colors<span class="token punctuation">[</span>v<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'gray'</span>          <span class="token comment" spellcheck="true">//4.4.遍历v所有相邻的顶点vNeighbours,并且加入队列中</span>          <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> vNeighbours<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>            <span class="token keyword">const</span> a <span class="token operator">=</span> vNeighbours<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">//判断相邻顶点是否被探测过，被探测过则不加入队列中；并且加入队列后变为灰色，表示被探测过</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>colors<span class="token punctuation">[</span>a<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'white'</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>              colors<span class="token punctuation">[</span>a<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'gray'</span>              que<span class="token punctuation">.</span><span class="token function">enqueue</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>          <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>          <span class="token comment" spellcheck="true">//4.5.处理顶点v</span>          <span class="token function">handler</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span>          <span class="token comment" spellcheck="true">//4.6.顶点v所有白色的相邻顶点都加入队列后，将顶点v设置为黑色。此时黑色顶点v位于队列最前面，进入下一次while循环时会被取出</span>          colors<span class="token punctuation">[</span>v<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'black'</span>        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>      <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span></code></pre><p><strong>过程详解：</strong></p><p>下为指定的第一个顶点为A时的遍历过程：</p><ul><li>如 a 图所示，将在字典edges中取出的与A相邻的且未被访问过的白色顶点B、C、D放入队列que中并变为灰色，随后将A变为黑色并移出队列；</li><li>接着，如图 b 所示，将在字典edges中取出的与B相邻的且未被访问过的白色顶点E、F放入队列que中并变为灰色，随后将B变为黑色并移出队列；</li></ul><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%9B%BE/6.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%9B%BE/6.png" alt="image-20200306144336380"></a></p><p>image-20200306144336380</p><ul><li>如 c 图所示，将在字典edges中取出的与C相邻的且未被访问过的白色顶点G（A，D也相邻不过已变为灰色，所以不加入队列）放入队列que中并变为灰色，随后将C变为黑色并移出队列；</li><li>接着，如图 d 所示，将在字典edges中取出的与D相邻的且未被访问过的白色顶点H放入队列que中并变为灰色，随后将D变为黑色并移出队列。</li></ul><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%9B%BE/7.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%9B%BE/7.png" alt="image-20200306144427242"></a></p><p>image-20200306144427242</p><p>如此循环直到队列中元素为0，即所有顶点都变黑并移出队列后才停止，此时图中顶点已被全部遍历。</p><p><strong>测试代码：</strong></p><pre class=" language-javascript"><code class="language-javascript">    <span class="token comment" spellcheck="true">//测试代码</span>    <span class="token comment" spellcheck="true">//1.创建图结构</span>    <span class="token keyword">let</span> graph <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Graph</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token comment" spellcheck="true">//2.添加顶点</span>    <span class="token keyword">let</span> myVertexes <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'A'</span><span class="token punctuation">,</span> <span class="token string">'B'</span><span class="token punctuation">,</span> <span class="token string">'C'</span><span class="token punctuation">,</span> <span class="token string">'D'</span><span class="token punctuation">,</span> <span class="token string">'E'</span><span class="token punctuation">,</span> <span class="token string">'F'</span><span class="token punctuation">,</span> <span class="token string">'G'</span><span class="token punctuation">,</span> <span class="token string">'H'</span><span class="token punctuation">,</span> <span class="token string">'I'</span><span class="token punctuation">]</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> myVertexes<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>      graph<span class="token punctuation">.</span><span class="token function">addVertex</span><span class="token punctuation">(</span>myVertexes<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//3.添加边</span>    graph<span class="token punctuation">.</span><span class="token function">addEdge</span><span class="token punctuation">(</span><span class="token string">'A'</span><span class="token punctuation">,</span> <span class="token string">'B'</span><span class="token punctuation">)</span>    graph<span class="token punctuation">.</span><span class="token function">addEdge</span><span class="token punctuation">(</span><span class="token string">'A'</span><span class="token punctuation">,</span> <span class="token string">'C'</span><span class="token punctuation">)</span>    graph<span class="token punctuation">.</span><span class="token function">addEdge</span><span class="token punctuation">(</span><span class="token string">'A'</span><span class="token punctuation">,</span> <span class="token string">'D'</span><span class="token punctuation">)</span>    graph<span class="token punctuation">.</span><span class="token function">addEdge</span><span class="token punctuation">(</span><span class="token string">'C'</span><span class="token punctuation">,</span> <span class="token string">'D'</span><span class="token punctuation">)</span>    graph<span class="token punctuation">.</span><span class="token function">addEdge</span><span class="token punctuation">(</span><span class="token string">'C'</span><span class="token punctuation">,</span> <span class="token string">'G'</span><span class="token punctuation">)</span>    graph<span class="token punctuation">.</span><span class="token function">addEdge</span><span class="token punctuation">(</span><span class="token string">'D'</span><span class="token punctuation">,</span> <span class="token string">'G'</span><span class="token punctuation">)</span>    graph<span class="token punctuation">.</span><span class="token function">addEdge</span><span class="token punctuation">(</span><span class="token string">'D'</span><span class="token punctuation">,</span> <span class="token string">'H'</span><span class="token punctuation">)</span>    graph<span class="token punctuation">.</span><span class="token function">addEdge</span><span class="token punctuation">(</span><span class="token string">'B'</span><span class="token punctuation">,</span> <span class="token string">'E'</span><span class="token punctuation">)</span>    graph<span class="token punctuation">.</span><span class="token function">addEdge</span><span class="token punctuation">(</span><span class="token string">'B'</span><span class="token punctuation">,</span> <span class="token string">'F'</span><span class="token punctuation">)</span>    graph<span class="token punctuation">.</span><span class="token function">addEdge</span><span class="token punctuation">(</span><span class="token string">'E'</span><span class="token punctuation">,</span> <span class="token string">'I'</span><span class="token punctuation">)</span>        <span class="token comment" spellcheck="true">//4.测试bfs遍历方法</span>    <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token string">""</span>    graph<span class="token punctuation">.</span><span class="token function">bfs</span><span class="token punctuation">(</span>graph<span class="token punctuation">.</span>vertexes<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>      result <span class="token operator">+</span><span class="token operator">=</span> v <span class="token operator">+</span> <span class="token string">"-"</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">)</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p><strong>测试结果：</strong></p><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%9B%BE/8.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%9B%BE/8.png" alt="image-20200304120023711"></a></p><p>image-20200304120023711</p><p>可见，安装了广度优先搜索的顺序<strong>不重复</strong>地遍历了<strong>所有</strong>顶点。</p><h5 id="深度优先搜索"><a href="#深度优先搜索" class="headerlink" title="深度优先搜索"></a>深度优先搜索</h5><p>广度优先算法的思路：</p><ul><li>深度优先搜索算法将会从指定的第一个顶点开始遍历图，沿着一条路径遍历直到该路径的最后一个顶点都被访问过为止；</li><li>接着沿原来路径回退并探索下一条路径，即<strong>先深后宽</strong>地遍历图中的各个顶点；</li></ul><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%9B%BE/9.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%9B%BE/9.png" alt="image-20200304120355088"></a></p><p>image-20200304120355088</p><p><strong>实现思路：</strong></p><ul><li>可以使用<strong>栈</strong>结构来实现深度优先搜索算法；</li><li>深度优先搜索算法的遍历顺序与二叉搜索树中的先序遍历较为相似，同样可以使用<strong>递归</strong>来实现（递归的本质就是<strong>函数栈</strong>的调用）。</li></ul><p>基于递归实现深度优先搜索算法：定义dfs方法用于调用递归方法dfsVisit，定义dfsVisit方法用于递归访问图中的各个顶点。</p><p>在dfs方法中：</p><ul><li>首先，调用initializeColor方法将所有顶点初始化为白色；</li><li>然后，调用dfsVisit方法遍历图的顶点；</li></ul><p>在dfsVisit方法中：</p><ul><li>首先，将传入的指定节点v标注为<strong>灰色</strong>；</li><li>接着，处理顶点V；</li><li>然后，访问V的相邻顶点；</li><li>最后，将顶点v标注为黑色；</li></ul><p><strong>代码实现：</strong></p><pre class=" language-javascript"><code class="language-javascript">      <span class="token comment" spellcheck="true">//六.实现深度搜索(DFS)</span>      Graph<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>dfs <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>initV<span class="token punctuation">,</span> handler<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//1.初始化顶点颜色</span>        <span class="token keyword">let</span> colors <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">initializeColor</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token comment" spellcheck="true">//2.从某个顶点开始依次递归访问</span>        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">dfsVisit</span><span class="token punctuation">(</span>initV<span class="token punctuation">,</span> colors<span class="token punctuation">,</span> handler<span class="token punctuation">)</span>      <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>      <span class="token comment" spellcheck="true">//为了方便递归调用，封装访问顶点的函数，传入三个参数分别表示：指定的第一个顶点、颜色、处理函数</span>      Graph<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>dfsVisit <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>v<span class="token punctuation">,</span> colors<span class="token punctuation">,</span> handler<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//1.将颜色设置为灰色</span>        colors<span class="token punctuation">[</span>v<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'gray'</span>        <span class="token comment" spellcheck="true">//2.处理v顶点</span>        <span class="token function">handler</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span>        <span class="token comment" spellcheck="true">//3.访问V的相邻顶点</span>        <span class="token keyword">let</span> vNeighbours <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>edges<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> vNeighbours<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>          <span class="token keyword">let</span> a <span class="token operator">=</span> vNeighbours<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>          <span class="token comment" spellcheck="true">//判断相邻顶点是否为白色，若为白色，递归调用函数继续访问</span>          <span class="token keyword">if</span> <span class="token punctuation">(</span>colors<span class="token punctuation">[</span>a<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'white'</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">dfsVisit</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> colors<span class="token punctuation">,</span> handler<span class="token punctuation">)</span>          <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>                  <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//4.将v设置为黑色</span>        colors<span class="token punctuation">[</span>v<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'black'</span>      <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span></code></pre><p><strong>过程详解：</strong></p><p>这里主要解释一下代码中的第3步操作：访问指定顶点的相邻顶点。</p><ul><li>以指定顶点A为例，先从储存顶点及其对应相邻顶点的字典对象edges中取出由顶点A的相邻顶点组成的数组：</li></ul><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%9B%BE/10.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%9B%BE/10.png" alt="image-20200304155916036"></a></p><p>image-20200304155916036</p><ul><li><strong>第一步</strong>：A顶点变为灰色，随后进入第一个for循环，遍历A白色的相邻顶点：B、C、D；在该for循环的第1次循环中（执行B），B顶点满足：colors &#x3D;&#x3D; “white”，触发递归，重新调用该方法；</li><li><strong>第二步</strong>：B顶点变为灰色，随后进入第二个for循环，遍历B白色的相邻顶点：E、F；在该for循环的第1次循环中（执行E），E顶点满足：colors &#x3D;&#x3D; “white”，触发递归，重新调用该方法；</li><li><strong>第三步</strong>：E顶点变为灰色，随后进入第三个for循环，遍历E白色的相邻顶点：I；在该for循环的第1次循环中（执行I），I顶点满足：colors &#x3D;&#x3D; “white”，触发递归，重新调用该方法；</li><li><strong>第四步</strong>：I顶点变为灰色，随后进入第四个for循环，由于顶点I的相邻顶点E不满足：colors &#x3D;&#x3D; “white”，停止递归调用。过程如下图所示：</li></ul><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%9B%BE/11.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%9B%BE/11.png" alt="image-20200304160536187"></a></p><p>image-20200304160536187</p><ul><li><strong>第五步</strong>：递归结束后一路向上返回，首先回到第三个for循环中继续执行其中的第2、3…次循环，每次循环的执行过程与上面的同理，直到递归再次结束后，再返回到第二个for循环中继续执行其中的第2、3…次循环….以此类推直到将图的所有顶点访问完为止。</li></ul><p>下图为遍历图中各顶点的完整过程：</p><ul><li><strong>发现</strong>表示访问了该顶点，状态变为<strong>灰色</strong>；</li><li><strong>探索</strong>表示既访问了该顶点，也访问了该顶点的全部相邻顶点，状态变为<strong>黑色</strong>；</li><li>由于在顶点变为灰色后就调用了处理函数handler，所以handler方法的输出顺序为发现顶点的顺序即：A、B、E、I、F、C、D、G、H 。</li></ul><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%9B%BE/12.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%9B%BE/12.png" alt="image-20200304154745646"></a></p><p>image-20200304154745646</p><p><strong>测试代码：</strong></p><pre class=" language-javascript"><code class="language-javascript">    <span class="token comment" spellcheck="true">//测试代码</span>    <span class="token comment" spellcheck="true">//1.创建图结构</span>    <span class="token keyword">let</span> graph <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Graph</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token comment" spellcheck="true">//2.添加顶点</span>    <span class="token keyword">let</span> myVertexes <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'A'</span><span class="token punctuation">,</span> <span class="token string">'B'</span><span class="token punctuation">,</span> <span class="token string">'C'</span><span class="token punctuation">,</span> <span class="token string">'D'</span><span class="token punctuation">,</span> <span class="token string">'E'</span><span class="token punctuation">,</span> <span class="token string">'F'</span><span class="token punctuation">,</span> <span class="token string">'G'</span><span class="token punctuation">,</span> <span class="token string">'H'</span><span class="token punctuation">,</span> <span class="token string">'I'</span><span class="token punctuation">]</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> myVertexes<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>      graph<span class="token punctuation">.</span><span class="token function">addVertex</span><span class="token punctuation">(</span>myVertexes<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//3.添加边</span>    graph<span class="token punctuation">.</span><span class="token function">addEdge</span><span class="token punctuation">(</span><span class="token string">'A'</span><span class="token punctuation">,</span> <span class="token string">'B'</span><span class="token punctuation">)</span>    graph<span class="token punctuation">.</span><span class="token function">addEdge</span><span class="token punctuation">(</span><span class="token string">'A'</span><span class="token punctuation">,</span> <span class="token string">'C'</span><span class="token punctuation">)</span>    graph<span class="token punctuation">.</span><span class="token function">addEdge</span><span class="token punctuation">(</span><span class="token string">'A'</span><span class="token punctuation">,</span> <span class="token string">'D'</span><span class="token punctuation">)</span>    graph<span class="token punctuation">.</span><span class="token function">addEdge</span><span class="token punctuation">(</span><span class="token string">'C'</span><span class="token punctuation">,</span> <span class="token string">'D'</span><span class="token punctuation">)</span>    graph<span class="token punctuation">.</span><span class="token function">addEdge</span><span class="token punctuation">(</span><span class="token string">'C'</span><span class="token punctuation">,</span> <span class="token string">'G'</span><span class="token punctuation">)</span>    graph<span class="token punctuation">.</span><span class="token function">addEdge</span><span class="token punctuation">(</span><span class="token string">'D'</span><span class="token punctuation">,</span> <span class="token string">'G'</span><span class="token punctuation">)</span>    graph<span class="token punctuation">.</span><span class="token function">addEdge</span><span class="token punctuation">(</span><span class="token string">'D'</span><span class="token punctuation">,</span> <span class="token string">'H'</span><span class="token punctuation">)</span>    graph<span class="token punctuation">.</span><span class="token function">addEdge</span><span class="token punctuation">(</span><span class="token string">'B'</span><span class="token punctuation">,</span> <span class="token string">'E'</span><span class="token punctuation">)</span>    graph<span class="token punctuation">.</span><span class="token function">addEdge</span><span class="token punctuation">(</span><span class="token string">'B'</span><span class="token punctuation">,</span> <span class="token string">'F'</span><span class="token punctuation">)</span>    graph<span class="token punctuation">.</span><span class="token function">addEdge</span><span class="token punctuation">(</span><span class="token string">'E'</span><span class="token punctuation">,</span> <span class="token string">'I'</span><span class="token punctuation">)</span>        <span class="token comment" spellcheck="true">//4.测试dfs遍历顶点</span>    <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token string">""</span>    graph<span class="token punctuation">.</span><span class="token function">dfs</span><span class="token punctuation">(</span>graph<span class="token punctuation">.</span>vertexes<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>      result <span class="token operator">+</span><span class="token operator">=</span> v <span class="token operator">+</span> <span class="token string">"-"</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">)</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>    </code></pre><p><strong>测试结果：</strong></p><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%9B%BE/13.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%9B%BE/13.png" alt="image-20200304125313739"></a></p><p>image-20200304125313739</p><h4 id="2-6-完整实现"><a href="#2-6-完整实现" class="headerlink" title="2.6.完整实现"></a>2.6.完整实现</h4><pre class=" language-kotlin"><code class="language-kotlin">    <span class="token comment" spellcheck="true">//封装图结构</span>    function <span class="token function">Graph</span> <span class="token punctuation">(</span><span class="token punctuation">)</span>&amp;#<span class="token number">123</span><span class="token punctuation">;</span>      <span class="token comment" spellcheck="true">//属性：顶点(数组)/边(字典)</span>      <span class="token keyword">this</span><span class="token punctuation">.</span>vertexes <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>  <span class="token comment" spellcheck="true">//顶点</span>      <span class="token keyword">this</span><span class="token punctuation">.</span>edges <span class="token operator">=</span> new <span class="token function">Dictionary</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">//边</span>      <span class="token comment" spellcheck="true">//方法</span>      <span class="token comment" spellcheck="true">//添加方法</span>      <span class="token comment" spellcheck="true">//一.添加顶点</span>      Graph<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>addVertex <span class="token operator">=</span> <span class="token function">function</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span>&amp;#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>vertexes<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>edges<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>v<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">//将边添加到字典中，新增的顶点作为键，对应的值为一个存储边的空数组</span>      &amp;#<span class="token number">125</span><span class="token punctuation">;</span>      <span class="token comment" spellcheck="true">//二.添加边</span>      Graph<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>addEdge <span class="token operator">=</span> <span class="token function">function</span><span class="token punctuation">(</span>v1<span class="token punctuation">,</span> v2<span class="token punctuation">)</span>&amp;#<span class="token number">123</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//传入两个顶点为它们添加边</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>edges<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>v1<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>v2<span class="token punctuation">)</span><span class="token comment" spellcheck="true">//取出字典对象edges中存储边的数组，并添加关联顶点</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>edges<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>v2<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>v1<span class="token punctuation">)</span><span class="token comment" spellcheck="true">//表示的是无向表，故要添加互相指向的两条边</span>      &amp;#<span class="token number">125</span><span class="token punctuation">;</span>      <span class="token comment" spellcheck="true">//三.实现toString方法:转换为邻接表形式</span>      Graph<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>toString <span class="token operator">=</span> <span class="token function">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span>&amp;#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//1.定义字符串，保存最终结果</span>        let resultString <span class="token operator">=</span> <span class="token string">""</span>        <span class="token comment" spellcheck="true">//2.遍历所有的顶点以及顶点对应的边</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span>let i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>vertexes<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//遍历所有顶点</span>          resultString <span class="token operator">+=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>vertexes<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">'-->'</span>          let vEdges <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>edges<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>vertexes<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>          <span class="token keyword">for</span> <span class="token punctuation">(</span>let j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> vEdges<span class="token punctuation">.</span>length<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//遍历字典中每个顶点对应的数组</span>            resultString <span class="token operator">+=</span> vEdges<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">'  '</span><span class="token punctuation">;</span>          &amp;#<span class="token number">125</span><span class="token punctuation">;</span>          resultString <span class="token operator">+=</span> <span class="token string">'\n'</span>        &amp;#<span class="token number">125</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> resultString      &amp;#<span class="token number">125</span><span class="token punctuation">;</span>      <span class="token comment" spellcheck="true">//四.初始化状态颜色</span>      Graph<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>initializeColor <span class="token operator">=</span> <span class="token function">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span>&amp;#<span class="token number">123</span><span class="token punctuation">;</span>        let colors <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span>let i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>vertexes<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>           colors<span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>vertexes<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'white'</span><span class="token punctuation">;</span>        &amp;#<span class="token number">125</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> colors      &amp;#<span class="token number">125</span><span class="token punctuation">;</span>      <span class="token comment" spellcheck="true">//五.实现广度搜索(BFS)</span>      <span class="token comment" spellcheck="true">//传入指定的第一个顶点和处理结果的函数</span>      Graph<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>bfs <span class="token operator">=</span> <span class="token function">function</span><span class="token punctuation">(</span>initV<span class="token punctuation">,</span> handler<span class="token punctuation">)</span>&amp;#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//1.初始化颜色</span>        let colors <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">initializeColor</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token comment" spellcheck="true">//2.创建队列</span>        let que <span class="token operator">=</span> new <span class="token function">Queue</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token comment" spellcheck="true">//3.将顶点加入到队列中</span>        que<span class="token punctuation">.</span><span class="token function">enqueue</span><span class="token punctuation">(</span>initV<span class="token punctuation">)</span>        <span class="token comment" spellcheck="true">//4.循环从队列中取出元素</span>        <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token operator">!</span>que<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>&amp;#<span class="token number">123</span><span class="token punctuation">;</span>          <span class="token comment" spellcheck="true">//4.1.从队列中取出一个顶点</span>          let v <span class="token operator">=</span> que<span class="token punctuation">.</span><span class="token function">dequeue</span><span class="token punctuation">(</span><span class="token punctuation">)</span>          <span class="token comment" spellcheck="true">//4.2.获取和顶点相相邻的其他顶点</span>          let vNeighbours <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>edges<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span>          <span class="token comment" spellcheck="true">//4.3.将v的颜色变为灰色</span>          colors<span class="token punctuation">[</span>v<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'gray'</span>          <span class="token comment" spellcheck="true">//4.4.遍历v所有相邻的顶点vNeighbours,并且加入队列中</span>          <span class="token keyword">for</span> <span class="token punctuation">(</span>let i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> vNeighbours<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>            <span class="token keyword">const</span> a <span class="token operator">=</span> vNeighbours<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">//判断相邻顶点是否被探测过，被探测过则不加入队列中；并且加入队列后变为灰色，表示被探测过</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>colors<span class="token punctuation">[</span>a<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'white'</span><span class="token punctuation">)</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>              colors<span class="token punctuation">[</span>a<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'gray'</span>              que<span class="token punctuation">.</span><span class="token function">enqueue</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>            &amp;#<span class="token number">125</span><span class="token punctuation">;</span>          &amp;#<span class="token number">125</span><span class="token punctuation">;</span>          <span class="token comment" spellcheck="true">//4.5.处理顶点v</span>          <span class="token function">handler</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span>          <span class="token comment" spellcheck="true">//4.6.顶点v所有白色的相邻顶点都加入队列后，将顶点v设置为黑色。此时黑色顶点v位于队列最前面，进入下一次while循环时会被取出</span>          colors<span class="token punctuation">[</span>v<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'black'</span>        &amp;#<span class="token number">125</span><span class="token punctuation">;</span>      &amp;#<span class="token number">125</span><span class="token punctuation">;</span>      <span class="token comment" spellcheck="true">//六.实现深度搜索(DFS)</span>      Graph<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>dfs <span class="token operator">=</span> <span class="token function">function</span><span class="token punctuation">(</span>initV<span class="token punctuation">,</span> handler<span class="token punctuation">)</span>&amp;#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//1.初始化顶点颜色</span>        let colors <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">initializeColor</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token comment" spellcheck="true">//2.从某个顶点开始依次递归访问</span>        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">dfsVisit</span><span class="token punctuation">(</span>initV<span class="token punctuation">,</span> colors<span class="token punctuation">,</span> handler<span class="token punctuation">)</span>      &amp;#<span class="token number">125</span><span class="token punctuation">;</span>      <span class="token comment" spellcheck="true">//为了方便递归调用，封装访问顶点的函数，传入三个参数分别表示：指定的第一个顶点、颜色、处理函数</span>      Graph<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>dfsVisit <span class="token operator">=</span> <span class="token function">function</span><span class="token punctuation">(</span>v<span class="token punctuation">,</span> colors<span class="token punctuation">,</span> handler<span class="token punctuation">)</span>&amp;#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//1.将颜色设置为灰色</span>        colors<span class="token punctuation">[</span>v<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'gray'</span>        <span class="token comment" spellcheck="true">//2.处理v顶点</span>        <span class="token function">handler</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span>        <span class="token comment" spellcheck="true">//3.访问v相连的其他顶点</span>        let vNeighbours <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>edges<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span>let i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> vNeighbours<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>          let a <span class="token operator">=</span> vNeighbours<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>          <span class="token comment" spellcheck="true">//判断相邻顶点是否为白色，若为白色，递归调用函数继续访问</span>          <span class="token keyword">if</span> <span class="token punctuation">(</span>colors<span class="token punctuation">[</span>a<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'white'</span><span class="token punctuation">)</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">dfsVisit</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> colors<span class="token punctuation">,</span> handler<span class="token punctuation">)</span>          &amp;#<span class="token number">125</span><span class="token punctuation">;</span>                  &amp;#<span class="token number">125</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//4.将v设置为黑色</span>        colors<span class="token punctuation">[</span>v<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'black'</span>      &amp;#<span class="token number">125</span><span class="token punctuation">;</span>    &amp;#<span class="token number">125</span><span class="token punctuation">;</span></code></pre><h2 id="JavaScript实现排序算法"><a href="#JavaScript实现排序算法" class="headerlink" title="JavaScript实现排序算法"></a>JavaScript实现排序算法</h2><h3 id="一、大O表示法"><a href="#一、大O表示法" class="headerlink" title="一、大O表示法"></a>一、大O表示法</h3><p><strong>大O表示法：</strong></p><ul><li>在计算机中采用<strong>粗略的度量</strong>来描述计算机算法的<strong>效率</strong>，这种方法被称为<strong>“大O”表示法</strong></li><li>在<strong>数据项个数</strong>发生改变时，<strong>算法的效率</strong>也会跟着改变。所以说算法A比算法B快两倍，这样的比较是<strong>没有意义</strong>的。</li><li>因此我们通常使用<strong>算法的速度</strong>随着<strong>数据量的变化</strong>会如何变化的方式来表示算法的效率，大O表示法就是方式之一。</li></ul><p><strong>常见的大O表示形式</strong></p><table><thead><tr><th>符号</th><th>名称</th></tr></thead><tbody><tr><td>O（1）</td><td>常数</td></tr><tr><td>O（log(n)）</td><td>对数</td></tr><tr><td>O（n）</td><td>线性</td></tr><tr><td>O（nlog(n)）</td><td>线性和对数乘积</td></tr><tr><td>O（n²）</td><td>平方</td></tr><tr><td>O（2n）</td><td>指数</td></tr></tbody></table><p><strong>不同大O形式的时间复杂度：</strong></p><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/1.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/1.png" alt="image-20200304164951223"></a></p><p>image-20200304164951223</p><p>可以看到效率从大到小分别是：O（1）&gt; O（logn）&gt; O（n）&gt; O（nlog(n)）&gt; O（n²）&gt; O（2n）</p><p><strong>推导大O表示法的三条规则：</strong></p><ul><li><strong>规则一</strong>：用常量1取代运行时间中所有的加法常量。如7 + 8 &#x3D; 15，用1表示运算结果15，大O表示法表示为O（1）；</li><li><strong>规则二</strong>：运算中只保留最高阶项。如N^3 + 3n +1，大O表示法表示为：O（N3）;</li><li><strong>规则三</strong>：若最高阶项的常数不为1，可将其省略。如4N2，大O表示法表示为：O（N2）;</li></ul><h3 id="二、排序算法"><a href="#二、排序算法" class="headerlink" title="二、排序算法"></a>二、排序算法</h3><p>这里主要介绍几种简单排序和高级排序：</p><ul><li><strong>简单排序：</strong>冒泡排序、选择排序、插入排序；</li><li><strong>高级排序：</strong>希尔排序、快速排序；</li></ul><p>此处创建一个列表类ArrayList并添加一些属性和方法，用于存放这些排序方法：</p><pre class=" language-javascript"><code class="language-javascript">    <span class="token comment" spellcheck="true">//创建列表类</span>    <span class="token keyword">function</span> <span class="token function">ArrayList</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>      <span class="token comment" spellcheck="true">//属性</span>      <span class="token keyword">this</span><span class="token punctuation">.</span>array <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>      <span class="token comment" spellcheck="true">//方法</span>      <span class="token comment" spellcheck="true">//封装将数据插入到数组中方法</span>      ArrayList<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>insert <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>array<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span>      <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>      <span class="token comment" spellcheck="true">//toString方法</span>      ArrayList<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>toString <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>array<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">'-'</span><span class="token punctuation">)</span>      <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>      <span class="token comment" spellcheck="true">//交换两个位置的数据</span>      ArrayList<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>swap <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>m<span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token keyword">let</span> temp  <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>array<span class="token punctuation">[</span>m<span class="token punctuation">]</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>array<span class="token punctuation">[</span>m<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>array<span class="token punctuation">[</span>n<span class="token punctuation">]</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>array<span class="token punctuation">[</span>n<span class="token punctuation">]</span> <span class="token operator">=</span> temp      <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span></code></pre><h4 id="1-冒泡排序"><a href="#1-冒泡排序" class="headerlink" title="1.冒泡排序"></a>1.冒泡排序</h4><p><strong>冒泡排序的思路：</strong></p><ul><li>对未排序的各元素<strong>从头到尾</strong>依次比较<strong>相邻的两个元素</strong>大小关系；</li><li>如果<strong>左边的人员高</strong>，则将两人<strong>交换位置</strong>。比如1比2矮，不交换位置；</li><li>向<strong>右移动一位</strong>，继续比较2和3，最后比较 length - 1 和 length - 2这两个数据；</li><li>当到达<strong>最右端</strong>时，<strong>最高的人</strong>一定被放在了<strong>最右边</strong>；</li><li>按照这个思路，从最左端重新开始时，只需要走到<strong>倒数第二个位置</strong>即可；</li></ul><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/2.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/2.png" alt="image-20200304191223265"></a></p><p>image-20200304191223265</p><p><strong>实现思路：</strong></p><p>两层循环：</p><ul><li>外层循环控制冒泡趟数：<ul><li>第一次：j &#x3D; length - 1，比较到倒数第一个位置 ；</li><li>第二次：j &#x3D; length - 2，比较到倒数第二个位置 ；</li></ul></li><li>内层循环控制每趟比较的次数：<ul><li>第一次比较： i &#x3D; 0，比较 0 和 1 位置的两个数据；</li><li>最后一次比较：i &#x3D; length - 2,比较length - 2和 length - 1两个数据；</li></ul></li></ul><p>详细过程如下图所示：</p><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/3.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/3.png" alt="image-20200304210611689"></a></p><p>image-20200304210611689</p><p>动态过程：</p><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/4.gif"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/4.gif" alt="img"></a></p><p><strong>代码实现：</strong></p><pre class=" language-//冒泡排序"><code class="language-//冒泡排序">      //冒泡排序      ArrayList.prototype.bubblesor = function()&#123;        //1.获取数组的长度        let length = this.array.length        //外层循环控制冒泡趟数        for(let j = length - 1; j >= 0; j--)&#123;          //内层循环控制每趟比较的次数          for(let i = 0; i < j; i++)&#123;          if (this.array[i] > this.array[i+1]) &#123;            //交换两个数据            let temp  = this.array[i]            this.array[i] = this.array[i+1]            this.array[i+1] = temp          &#125;        &#125;        &#125;      &#125;</code></pre><p><strong>测试代码：</strong></p><pre class=" language-lua"><code class="language-lua">    <span class="token operator">//</span>测试类    let list <span class="token operator">=</span> new <span class="token function">ArrayList</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token operator">//</span>插入元素    list<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">66</span><span class="token punctuation">)</span>    list<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">88</span><span class="token punctuation">)</span>    list<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">)</span>    list<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">87</span><span class="token punctuation">)</span>    list<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span>    list<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>    list<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">566</span><span class="token punctuation">)</span>    list<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">23</span><span class="token punctuation">)</span>        <span class="token operator">//</span>验证冒泡排序    list<span class="token punctuation">.</span><span class="token function">bubblesor</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p><strong>测试结果：</strong><br><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/5.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/5.png" alt="image-20200304210433388"></a></p><p>image-20200304210433388</p><p><strong>冒泡排序的效率：</strong></p><ul><li>上面所讲的对于7个数据项，比较次数为：6 + 5 + 4 + 3 + 2 + 1;</li><li>对于N个数据项，<strong>比较次数</strong>为：(N - 1) + (N - 2) + (N - 3) + … + 1 &#x3D; N * (N - 1) &#x2F; 2；如果两次比较交换一次，那么<strong>交换次数</strong>为：N * (N - 1) &#x2F; 4；</li><li>使用大O表示法表示比较次数和交换次数分别为：O（ N * (N - 1) &#x2F; 2）和O（ N * (N - 1) &#x2F; 4），根据大O表示法的三条规则都化简为：<strong>O（N^2）</strong>;</li></ul><h4 id="2-选择排序"><a href="#2-选择排序" class="headerlink" title="2.选择排序"></a>2.选择排序</h4><p><strong>选择排序改进了冒泡排序：</strong></p><ul><li>将<strong>交换次数</strong>由<strong>O（N^2）</strong>减小到<strong>O（N）</strong>；</li><li>但是<strong>比较次数</strong>依然是<strong>O（N^2）</strong>；</li></ul><p><strong>选择排序的思路：</strong></p><ul><li>选定<strong>第一个索引的位置</strong>比如1，然后依次和后面的元素<strong>依次进行比较</strong>；</li><li>如果后面的元素，<strong>小于</strong>索引1位置的元素，则<strong>交换位置</strong>到索引1处；</li><li>经过一轮的比较之后，可以确定一开始指定的索引1位置的元素是<strong>最小的</strong>；</li><li>随后使用同样的方法除索引1意外<strong>逐个比较剩下的元素</strong>即可；</li><li>可以看出选择排序，<strong>第一轮</strong>会选出<strong>最小值</strong>，<strong>第二轮</strong>会选出<strong>第二小的值</strong>，直到完成排序。</li></ul><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/6.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/6.png" alt="image-20200304213253241"></a></p><p>image-20200304213253241</p><p><strong>实现思路：</strong></p><p>两层循环：</p><ul><li>外层循环控制指定的索引：<ul><li>第一次：j &#x3D; 0，指定第一个元素 ；</li><li>最后一次：j &#x3D; length - 1，指定最后一个元素 ；</li></ul></li><li>内层循环负责将指定索引（i）的元素与剩下（i - 1）的元素进行比较；</li></ul><p>动态过程：</p><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/7.gif"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/7.gif" alt="img"></a></p><p><strong>代码实现：</strong></p><pre class=" language-javascript"><code class="language-javascript">      <span class="token comment" spellcheck="true">//选择排序</span>      ArrayList<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>selectionSort <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//1.获取数组的长度</span>        <span class="token keyword">let</span> length <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>array<span class="token punctuation">.</span>length        <span class="token comment" spellcheck="true">//2.外层循环：从0开始获取元素</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>          <span class="token keyword">let</span> min <span class="token operator">=</span> j          <span class="token comment" spellcheck="true">//内层循环：从i+1位置开始，和后面的元素进行比较</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> min <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>          <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>array<span class="token punctuation">[</span>min<span class="token punctuation">]</span> <span class="token operator">></span> <span class="token keyword">this</span><span class="token punctuation">.</span>array<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>            min <span class="token operator">=</span> i          <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">swap</span><span class="token punctuation">(</span>min<span class="token punctuation">,</span> j<span class="token punctuation">)</span>        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>      <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span></code></pre><p><strong>测试代码：</strong></p><pre class=" language-lua"><code class="language-lua">    <span class="token operator">//</span>测试类    let list <span class="token operator">=</span> new <span class="token function">ArrayList</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token operator">//</span>插入元素    list<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">66</span><span class="token punctuation">)</span>    list<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">88</span><span class="token punctuation">)</span>    list<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">)</span>    list<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">87</span><span class="token punctuation">)</span>    list<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span>    list<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>    list<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">566</span><span class="token punctuation">)</span>    list<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">23</span><span class="token punctuation">)</span>        <span class="token operator">//</span>验证选择排序    list<span class="token punctuation">.</span><span class="token function">selectionSort</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p><strong>测试结果：</strong></p><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/8.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/8.png" alt="image-20200304222224801"></a></p><p>image-20200304222224801</p><p><strong>选择排序的效率：</strong></p><ul><li>选择排序的<strong>比较次数</strong>为：N * (N - 1) &#x2F; 2，用大O表示法表示为：<strong>O（N^2）</strong>;</li><li>选择排序的<strong>交换次数</strong>为：(N - 1) &#x2F; 2，用大O表示法表示为：<strong>O（N）</strong>;</li><li>所以选择排序的效率高于冒泡排序；</li></ul><h4 id="3-插入排序"><a href="#3-插入排序" class="headerlink" title="3.插入排序"></a>3.插入排序</h4><p>插入排序是简单排序中效率<strong>最高</strong>的一种排序。</p><p><strong>插入排序的思路：</strong></p><ul><li>插入排序思想的核心是<strong>局部有序</strong>。如图所示，X左边的人称为<strong>局部有序</strong>；</li><li>首先指定一数据X（从第一个数据开始），并将数据X的左边变成局部有序状态；</li><li>随后将X右移一位，再次达到局部有序之后，继续右移一位，重复前面的操作直至X移至最后一个元素。</li></ul><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/9.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/9.png" alt="image-20200304231400959"></a></p><p>image-20200304231400959</p><p>插入排序的详细过程：</p><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/10.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/10.png" alt="image-20200304231643777"></a></p><p>image-20200304231643777</p><p>动态过程：</p><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/11.gif"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/11.gif" alt="img"></a></p><p><strong>代码实现：</strong></p><pre class=" language-javascript"><code class="language-javascript">      <span class="token comment" spellcheck="true">//插入排序</span>      ArrayList<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>insertionSort <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//1.获取数组的长度</span>        <span class="token keyword">let</span> length <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>array<span class="token punctuation">.</span>length        <span class="token comment" spellcheck="true">//2.外层循环:从第二个数据开始，向左边的已经局部有序数据进行插入</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>          <span class="token comment" spellcheck="true">//3.内层循环：获取i位置的元素，使用while循环(重点)与左边的局部有序数据依次进行比较</span>          <span class="token keyword">let</span> temp <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>array<span class="token punctuation">[</span>i<span class="token punctuation">]</span>          <span class="token keyword">let</span> j <span class="token operator">=</span> i          <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>array<span class="token punctuation">[</span>j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">></span> temp <span class="token operator">&amp;&amp;</span> j <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>array<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>array<span class="token punctuation">[</span>j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token comment" spellcheck="true">//大的数据右移</span>            j<span class="token operator">--</span>          <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>          <span class="token comment" spellcheck="true">//4.while循环结束后，index = j左边的数据变为局部有序且array[j]最大。此时将array[j]重置为排序前的数据array[i]，方便下一次for循环</span>          <span class="token keyword">this</span><span class="token punctuation">.</span>array<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> temp        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>      <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span></code></pre><p><strong>测试代码：</strong></p><pre class=" language-lua"><code class="language-lua">   <span class="token operator">//</span>测试类    let list <span class="token operator">=</span> new <span class="token function">ArrayList</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token operator">//</span>插入元素    list<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">66</span><span class="token punctuation">)</span>    list<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">88</span><span class="token punctuation">)</span>    list<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">)</span>    list<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">87</span><span class="token punctuation">)</span>    list<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span>    list<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>    list<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">566</span><span class="token punctuation">)</span>    list<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">23</span><span class="token punctuation">)</span>    <span class="token operator">//</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token operator">//</span>验证插入排序    list<span class="token punctuation">.</span><span class="token function">insertionSort</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p><strong>测试结果：</strong></p><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/12.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/12.png" alt="image-20200304235529516"></a></p><p>image-20200304235529516</p><p><strong>插入排序的效率：</strong></p><ul><li><strong>比较次数：</strong>第一趟时，需要的最大次数为1；第二次最大为2；以此类推，最后一趟最大为N-1；所以，插入排序的总比较次数为N * (N - 1) &#x2F; 2；但是，实际上每趟发现插入点之前，平均只有全体数据项的一半需要进行比较，所以比较次数为：<strong>N * (N - 1) &#x2F; 4</strong>；</li><li><strong>交换次数：</strong>指定第一个数据为X时交换0次，指定第二个数据为X最多需要交换1次，以此类推，指定第N个数据为X时最多需要交换N - 1次，所以一共需要交换N * (N - 1) &#x2F; 2次，平局次数为<strong>N * (N - 1) &#x2F; 2</strong>；</li><li>虽然用大O表示法表示插入排序的效率也是<strong>O（N^2）</strong>，但是插入排序整体操作次数更少，因此，在简单排序中，插入排序<strong>效率最高</strong>；</li></ul><h4 id="4-希尔排序"><a href="#4-希尔排序" class="headerlink" title="4.希尔排序"></a>4.希尔排序</h4><p><strong>希尔排序</strong>是<strong>插入排序</strong>的一种高效的<strong>改进版</strong>，效率比插入排序要<strong>高</strong>。</p><p><strong>希尔排序的历史背景：</strong></p><ul><li>希尔排序按其设计者希尔（Donald Shell）的名字命名，该算法由<strong>1959年公布</strong>；</li><li>希尔算法首次突破了计算机界一直认为的<strong>算法的时间复杂度都是O（N^2）</strong>的大关，为了纪念该算法里程碑式</li></ul><p>的意义，用<strong>Shell</strong>来命名该算法；</p><p><strong>插入排序的问题：</strong></p><ul><li>假设一个<strong>很小的数据项</strong>在<strong>很靠近右端的位置</strong>上，这里本应该是<strong>较大的数据项的位置</strong>；</li><li>将这个<strong>小数据项移动到左边</strong>的正确位置，所有的<strong>中间数据项都必须向右移动一位</strong>，这样效率非常低；</li><li>如果通过<strong>某种方式</strong>，不需要<strong>一个个移动所有中间的数据项</strong>，就能把较小的数据项移到左边，那么这个算法的执行速度就会有很大的改进。</li></ul><p><strong>希尔排序的实现思路：</strong></p><ul><li>希尔排序主要通过对数据进行<strong>分组</strong>实现快速排序；</li><li>根据设定的增量（gap）将数据分为gap个组（<strong>组数等于gap</strong>），再在每个分组中进行局部排序；</li></ul><blockquote><p>假如有数组有10个数据，第1个数据为黑色，增量为5。那么第二个为黑色的数据index&#x3D;5，第3个数据为黑色的数据index &#x3D; 10（不存在）。所以黑色的数据每组只有2个，10 &#x2F; 2 &#x3D; 5一共可分5组，即<strong>组数等于增量gap</strong>。</p></blockquote><ul><li>排序之后，减小增量，继续分组，再次进行局部排序，直到增量gap&#x3D;1为止。随后只需进行微调就可完成数组的排序；</li></ul><p>具体过程如下：</p><ul><li>排序之前的，储存10个数据的原始数组为：</li></ul><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/13.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/13.png" alt="image-20200305102330304"></a></p><p>image-20200305102330304</p><ul><li>设初始增量gap &#x3D; length &#x2F; 2 &#x3D; 5，即数组被分为了5组，如图所示分别为：[8, 3]、[9, 5]、[1, 4]、[7, 6]、[2, 0]：</li></ul><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/14.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/14.png" alt="image-20200305104914438"></a></p><p>image-20200305104914438</p><ul><li>随后分别在每组中对数据进行局部排序，5组的顺序如图所示，变为：[3, 8]、[5, 9]、[1, 4]、[6, 7]、[0, 2]：</li></ul><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/15.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/15.png" alt="image-20200305103136251"></a></p><p>image-20200305103136251</p><ul><li>然后缩小增量gap &#x3D; 5 &#x2F; 2 &#x3D; 2，即数组被分为了2组，如图所示分别为：[3，1，0，9，7]、[5，6，8，4，2]：</li></ul><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/16.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/16.png" alt="image-20200305104933858"></a></p><p>image-20200305104933858</p><ul><li>随后分别在每组中对数据进行局部排序，两组的顺序如图所示，变为：[0，1，3，7，9]、[2，4，5，6，8]：</li></ul><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/17.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/17.png" alt="image-20200305103815262"></a></p><p>image-20200305103815262</p><ul><li>然后然后缩小增量gap &#x3D; 2 &#x2F; 1 &#x3D; 1，即数组被分为了1组，如图所示为：[0，2，1，4，3，5，7，6，9，8]：</li></ul><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/18.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/18.png" alt="image-20200305104847458"></a></p><p>image-20200305104847458</p><ul><li>最后只需要对该组数据进行插入排序即可完成整个数组的排序：</li></ul><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/19.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/19.png" alt="image-20200305104707789"></a></p><p>image-20200305104707789</p><p>动态过程：</p><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/20.gif"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/20.gif" alt="img"></a></p><p>图中d表示增量gap。</p><p><strong>增量的选择：</strong></p><ul><li><strong>原稿</strong>中希尔建议的初始间距为<strong>N &#x2F; 2</strong>，比如对于N &#x3D; 100的数组，增量序列为：50，25，12，6，3，1，可以发现不能整除时向下取整。</li><li><strong>Hibbard增量序列：</strong>增量序列算法为：2^k - 1，即1，3，5，7… …等；这种情况的最坏复杂度为*<em>O（N3&#x2F;2）*</em>,平均复杂度为**O（N5&#x2F;4）**但未被证明；</li><li><strong>Sedgewcik增量序列：</strong></li></ul><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/21.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/21.png" alt="image-20200305110724309"></a></p><p>image-20200305110724309</p><p>以下代码实现中采用希尔排序原稿中建议的增量即<strong>N &#x2F; 2</strong> 。</p><p><strong>代码实现：</strong></p><pre class=" language-javascript"><code class="language-javascript">      <span class="token comment" spellcheck="true">//希尔排序</span>      ArrayList<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>shellSort <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//1.获取数组的长度</span>        <span class="token keyword">let</span> length <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>array<span class="token punctuation">.</span>length        <span class="token comment" spellcheck="true">//2.初始化增量</span>        <span class="token keyword">let</span> gap <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>length <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span>        <span class="token comment" spellcheck="true">//3.第一层循环：while循环(使gap不断减小)</span>        <span class="token keyword">while</span><span class="token punctuation">(</span>gap <span class="token operator">>=</span> <span class="token number">1</span> <span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>          <span class="token comment" spellcheck="true">//4.第二层循环：以gap为增量，进行分组，对分组进行插入排序</span>          <span class="token comment" spellcheck="true">//重点为：将index = gap作为选中的第一个数据</span>          <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> gap<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>            <span class="token keyword">let</span> temp <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>array<span class="token punctuation">[</span>i<span class="token punctuation">]</span>            <span class="token keyword">let</span> j <span class="token operator">=</span> i            <span class="token comment" spellcheck="true">//5.第三层循环:寻找正确的插入位置</span>            <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>array<span class="token punctuation">[</span>j <span class="token operator">-</span> gap<span class="token punctuation">]</span> <span class="token operator">></span> temp <span class="token operator">&amp;&amp;</span> j <span class="token operator">></span> gap <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>              <span class="token keyword">this</span><span class="token punctuation">.</span>array<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>array<span class="token punctuation">[</span>j <span class="token operator">-</span> gap<span class="token punctuation">]</span>              j <span class="token operator">-</span><span class="token operator">=</span> gap            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>          <span class="token comment" spellcheck="true">//6.将j位置的元素设置为temp</span>          <span class="token keyword">this</span><span class="token punctuation">.</span>array<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> temp          <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>          gap <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>gap <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span>        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>      <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span></code></pre><p>这里解释一下上述代码中的三层循环：</p><ul><li><strong>第一层循环：</strong>while循环，控制gap递减到1；</li><li><strong>第二层循环：</strong>分别取出根据g增量gap分成的gap组数据：将index &#x3D; gap的数据作为选中的第一个数据，如下图所示，gap&#x3D;5，则index &#x3D; gap的数据为3，index &#x3D; gap - 1的数据为8，两个数据为一组。随后gap不断加1右移，直到gap &lt; length，此时实现了将数组分为5组。</li></ul><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/21.5.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/21.5.png" alt="image-20200305104914438"></a></p><p>image-20200305104914438</p><ul><li><strong>第三层循环：</strong>对每一组数据进行插入排序；</li></ul><p><strong>测试代码：</strong></p><pre class=" language-lua"><code class="language-lua">   <span class="token operator">//</span>测试类    let list <span class="token operator">=</span> new <span class="token function">ArrayList</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token operator">//</span>插入元素    list<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">66</span><span class="token punctuation">)</span>    list<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">88</span><span class="token punctuation">)</span>    list<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">)</span>    list<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">87</span><span class="token punctuation">)</span>    list<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span>    list<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>    list<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">566</span><span class="token punctuation">)</span>    list<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token number">23</span><span class="token punctuation">)</span>    <span class="token operator">//</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token operator">//</span>验证希尔排序    list<span class="token punctuation">.</span><span class="token function">shellSort</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p><strong>测试结果：</strong></p><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/22.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/22.png" alt="image-20200305114934209"></a></p><p>image-20200305114934209</p><p><strong>希尔排序的效率：</strong></p><ul><li>希尔排序的效率和增量有直接关系，即使使用原稿中的增量效率都高于简单排序。</li></ul><h4 id="5-快速排序"><a href="#5-快速排序" class="headerlink" title="5.快速排序"></a>5.快速排序</h4><p>快速排序的介绍：</p><ul><li><strong>快速排序</strong>可以说是<strong>目前所有排序算法</strong>中，<strong>最快</strong>的一种排序算法。当然，没有任何一种算法是在任意情况下都是最优的。但是，大多数情况下快速排序是比较好的选择。</li><li><strong>快速排序</strong>其实是<strong>冒泡排序</strong>的升级版；</li></ul><p>快速排序的核心思想是<strong>分而治之</strong>，先选出一个数据（比如65），将比其小的数据都放在它的左边，将比它大的数据都放在它的右边。这个数据称为<strong>枢纽</strong></p><p>和冒泡排序的不同：</p><ul><li>我们选择的65可以一次性将它放在最正确的位置，之后就不需要做任何移动；</li><li>而冒泡排序即使已经找到最大值，也需要继续移动最大值，直到将它移动到最右边；</li></ul><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/23.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/23.png" alt="image-20200305154504624"></a></p><p>image-20200305154504624</p><p><strong>快速排序的枢纽：</strong></p><ul><li><strong>第一种方案：</strong>直接选择第一个元素作为枢纽。但是，当第一个元素就是最小值的情况下，效率不高；</li><li><strong>第二种方案：</strong>使用随机数。随机数本身十分消耗性能，不推荐；</li><li><strong>优秀的解决方法：</strong>取index为头、中、位的三个数据排序后的中位数；如下图所示，按下标值取出的三个数据为：92，31，0，经排序后变为：0，31，92，取其中的中位数31作为<strong>枢纽</strong>（当（length-1）&#x2F;2不整除时可向下或向上取整）：</li></ul><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/24.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/24.png" alt="image-20200305182934710"></a></p><p>image-20200305182934710</p><p><strong>实现枢纽选择：</strong></p><pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">//交换两个位置的数据</span><span class="token keyword">let</span> swap <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> m<span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token keyword">let</span> temp  <span class="token operator">=</span> arr<span class="token punctuation">[</span>m<span class="token punctuation">]</span>    arr<span class="token punctuation">[</span>m<span class="token punctuation">]</span> <span class="token operator">=</span> arr<span class="token punctuation">[</span>n<span class="token punctuation">]</span>    arr<span class="token punctuation">[</span>n<span class="token punctuation">]</span> <span class="token operator">=</span> temp<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//快速排序</span><span class="token comment" spellcheck="true">//1.选择枢纽</span><span class="token keyword">let</span> median <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">//1.取出中间的位置</span>  <span class="token keyword">let</span> center <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>arr<span class="token punctuation">.</span>length <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span>  <span class="token keyword">let</span> right <span class="token operator">=</span> arr<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span>   <span class="token keyword">let</span> left <span class="token operator">=</span> <span class="token number">0</span>  <span class="token comment" spellcheck="true">//2.判断大小并进行交换</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span>arr<span class="token punctuation">[</span>left<span class="token punctuation">]</span> <span class="token operator">></span> arr<span class="token punctuation">[</span>center<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token function">swap</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> left<span class="token punctuation">,</span> center<span class="token punctuation">)</span>  <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span>arr<span class="token punctuation">[</span>center<span class="token punctuation">]</span> <span class="token operator">></span> arr<span class="token punctuation">[</span>right<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token function">swap</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> center<span class="token punctuation">,</span> right<span class="token punctuation">)</span>  <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span>arr<span class="token punctuation">[</span>left<span class="token punctuation">]</span> <span class="token operator">></span> arr<span class="token punctuation">[</span>right<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token function">swap</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span> left<span class="token punctuation">,</span> right<span class="token punctuation">)</span>  <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">//3.返回枢纽</span>  <span class="token keyword">return</span> center<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span></code></pre><p>数组经过获取枢纽函数操作之后，选出的3个下标值对应的数据位置变为：</p><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/25.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/25.png" alt="image-20200320091750654"></a></p><p>image-20200320091750654</p><p><strong>动态过程：</strong></p><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/26.gif"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/26.gif" alt="img"></a></p><p><strong>快速排序代码实现：</strong></p><pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">//2.快速排序</span><span class="token keyword">let</span> QuickSort <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span>arr<span class="token punctuation">.</span>length <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>  <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>  <span class="token keyword">let</span> center <span class="token operator">=</span> <span class="token function">median</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span>  <span class="token keyword">let</span> c <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>center<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>  <span class="token keyword">let</span> l <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>  <span class="token keyword">let</span> r <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&lt;</span> c<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        l<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>      <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">else</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        r<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>      <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>          <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>  <span class="token keyword">return</span> <span class="token function">QuickSort</span><span class="token punctuation">(</span>l<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>c<span class="token punctuation">,</span> <span class="token function">QuickSort</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span></code></pre><p>算法的巧妙之处在于通过:</p><pre class=" language-scss"><code class="language-scss"><span class="token function">QuickSort</span><span class="token punctuation">(</span>l<span class="token punctuation">)</span><span class="token number">.</span><span class="token function">concat</span><span class="token punctuation">(</span>c, <span class="token function">QuickSort</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre><p>递归调用<code>QuickSort</code>函数实现了枢纽<code>Center</code>左边数据<code>l</code>和右边数据<code>r</code>的排序；</p><p><strong>测试代码：</strong></p><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">13</span><span class="token punctuation">,</span> <span class="token number">81</span><span class="token punctuation">,</span> <span class="token number">43</span><span class="token punctuation">,</span> <span class="token number">31</span><span class="token punctuation">,</span> <span class="token number">27</span><span class="token punctuation">,</span> <span class="token number">56</span><span class="token punctuation">,</span> <span class="token number">92</span><span class="token punctuation">]</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">QuickSort</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p><strong>测试结果</strong></p><p><a href="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/28.png"><img src="https://gitee.com/ahuntsun/BlogImgs/raw/master/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/28.png" alt="image-20200320092254048"></a></p><p>image-20200320092254048</p><p><strong>快速排序的效率：</strong></p><ul><li>快速排序最坏情况下的效率：每次选择的枢纽都是最左边或最右边的数据，此时效率等同于冒泡排序，时间复杂度为<strong>O（n2）</strong>。可根据不同的枢纽选择避免这一情况；</li><li>快速排序的平均效率：为<strong>O（N*logN）</strong>，虽然其他算法效率也可达到O（N*logN），但是其中快速排序是<strong>最好的</strong>。</li></ul>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>查漏补缺（一）</title>
      <link href="/2022/09/16/cha-lou-bu-que-yi/"/>
      <url>/2022/09/16/cha-lou-bu-que-yi/</url>
      
        <content type="html"><![CDATA[<h3 id="查漏补缺（一）"><a href="#查漏补缺（一）" class="headerlink" title="查漏补缺（一）"></a>查漏补缺（一）</h3><h4 id="1-src和href的区别"><a href="#1-src和href的区别" class="headerlink" title="1.src和href的区别"></a>1.src和href的区别</h4><p>href：是指向网络资源的所在位置，建立和当前锚点或当前文档之间的链接，用于超链接</p><p>表示超文本引用，用在link和a等元素上，href是引用和页面关联，是在当前元素和引用资源之间建立联系</p><link href="common.css" rel="stylesheet"/>当浏览器解析到这一句的时候会识别该文档为css文件，会下载并且不会停止对当前文档的处理，这也是为什么建议使用link方式来加载css而不是使用@import。 <p>src：是指向外部本地外部资源的位置，指向的内部会迁入到文档中的当前标签的所在位置；在请求src资源时会将指向的资源下载到当前文档，例如js脚本、图片等</p><p>表示资源引用，表示替换当前元素，用在img、script等；</p><script src="js.js"></script>当浏览器解析到这一句的时候会暂停其他资源的下载和处理，直至将该资源加载，编译，执行完毕，图片和框架等元素也是如此，类似于该元素所指向的资源嵌套如当前标签内，这也是为什么要把js饭再底部而不是头部。<p>区别：浏览器遇到href会并行下载资源并且不会停止对当前文档的处理，但是遇到src时候会暂停其他资源的下载和处理，直到将该资源加载完毕</p><h4 id="2-HTTP与HTTPS的区别"><a href="#2-HTTP与HTTPS的区别" class="headerlink" title="2.HTTP与HTTPS的区别"></a>2.HTTP与HTTPS的区别</h4><p>①HTTP明文传输，数据都是未加密的，安全性比较差，HTTPS数据都是加密的，安全性比较高</p><p>②HTTPS需要用到CA证书，而HTTP不需要</p><p>③HTTP的响应速度比HTTPS快，因为HTTP使用TCP三次握手建立连接，客户端和服务端需要交换三个包，而HTTPS除了TCP的三个包，还有ssl握手需要9个包，一共是12个包</p><p>④HTTP的端口是80，而HTTPS的端口是443</p><ul><li>第一次握手：客户端尝试连接服务器，向服务器发送 syn 包（同步序列编号Synchronize Sequence Numbers），syn&#x3D;j，客户端进入 SYN_SEND 状态等待服务器确认</li><li>第二次握手：服务器接收客户端syn包并确认（ack&#x3D;j+1），同时向客户端发送一个 SYN包（syn&#x3D;k），即 SYN+ACK 包，此时服务器进入 SYN_RECV 状态</li><li>第三次握手：第三次握手：客户端收到服务器的SYN+ACK包，向服务器发送确认包ACK(ack&#x3D;k+1），此包发送完毕，客户端和服务器进入ESTABLISHED状态，完成三次握手</li></ul><h4 id="3-Vue中路由配置项meta的作用"><a href="#3-Vue中路由配置项meta的作用" class="headerlink" title="3.Vue中路由配置项meta的作用"></a>3.Vue中路由配置项meta的作用</h4><p><strong>meta简单来说就是路由元信息 也就是每个路由身上携带的信息。</strong></p><p>①能做面包屑效果</p><p>②能区分用户权限</p><p>③在路由导航守卫跳转的时候判断有没有这个信息，如果有就跳转</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Object.defineProperty</title>
      <link href="/2022/08/29/object.defineproperty-fang-fa-xiang-jie/"/>
      <url>/2022/08/29/object.defineproperty-fang-fa-xiang-jie/</url>
      
        <content type="html"><![CDATA[<h1 id="Object-defineProperty方法（详解）"><a href="#Object-defineProperty方法（详解）" class="headerlink" title="Object.defineProperty方法（详解）"></a>Object.defineProperty方法（详解）</h1><p>OK，这一篇主要想说一下Object.defineProperty这个方法。</p><p>这个方法也是Vue数据双向绑定原理的常见面试题<br>所以也是有必要好好掌握的哦</p><p>首先我们知道JS中是支持面向对象编程的，也是有着对象和类这样的概念。<br>我们常见创建对象的方法应该是这样：</p><pre><code>var p1 =&#123;    name:&quot;lisi&quot;,&#125;</code></pre><p>那我们Object.defineProperty这个方法有什么用呢?</p><p>这个方法接收三个参数:</p><p>1.属性所在的对象<br>2.属性的名字<br>3.一个描述符对象</p><h4 id="这个描述符对象是个什么东西呢？"><a href="#这个描述符对象是个什么东西呢？" class="headerlink" title="这个描述符对象是个什么东西呢？"></a>这个描述符对象是个什么东西呢？</h4><p>他可以是 数据属性：</p><p>1.configurable:表示能否通过delete删除属性从而重新定义属性，能否修改属性的特性，或者能否把属性修改为访问器属性，默认值为false。</p><p>2.enumerable：表示能否通过for in循环访问属性，默认值为false</p><p>3.writable：表示能否修改属性的值。默认值为false。</p><p>4.value：包含这个属性的数据值。默认值为undefined。</p><p>现在我们就对p1这个对象，用这个方法来玩一下</p><pre><code>Object.defineProperty(p1,&quot;name&quot;,&#123;    configurable : false,&#125;)console.log(p1); //&#123; name: &#39;lisi&#39; &#125;delete p1.name;console.log(p1); //&#123; name: &#39;lisi&#39; &#125;</code></pre><p>通过这个方法设置好configurable 这个属性，delete就不能把name属性给删除掉了。</p><pre><code>Object.defineProperty(p1,&quot;age&quot;,&#123;    writable :false,    value : 15,&#125;)console.log(p1.age); //15p1.age = 20;console.log(p1.age); //15</code></pre><p>然后我们给p1这个对象新加了一个age属性，并且设置成只读的。<br>这样我们就无法修改这个age属性了。</p><pre><code>Object.defineProperty(p1,&quot;age&quot;,&#123;    enumerable:false&#125;)for(var i in p1)&#123;    console.log(p1[i]);&#125; // lisi</code></pre><p>在通过这个方法给enumerable设置为false，这样对象就不能通过迭代器遍历出age这个属性的值了。</p><p>通过这几个例子，我们基本那就了解Object.defineProperty这个方法的使用以及数据属性是做什么的了。<br>那该方法的第三个参数除了可以是数据属性，也可以是访问器属性。</p><p>1.get：在读取属性时调用的函数，默认值是undefined 2..set：在写入属性的时候调用的函数，默认值是undefined<br>现在我们来用这两个方法来实践一下：</p><pre><code>var book = &#123;    _year : 2004,    edition : 1&#125;Object.defineProperty(book,&quot;year&quot;,&#123;    get: function()&#123;        return this._year    &#125;,    set: function(newYear)&#123;        if(newYear &gt; 2004)&#123;            this._year = newYear;            this.edition += newYear - 2004        &#125;    &#125;&#125;)book.year = 2005;console.log(book.edition); // 2console.log(book._year); //2005</code></pre><p>由于get方法返回_year的值，set方法通过计算来确定正确的版本。<br>因此把year的值设置为2005会导致edition的值变为2.</p><p>OK，关于Object.defineProperty方法的第三个参数的两种属性也就说完了。</p><p>最后我们再说一下如何进行定义多个属性</p><pre><code>var student = &#123;&#125;;Object.defineProperties(student,&#123;    name:&#123;        writable:false,        value:&quot;lisi&quot;    &#125;,    age : &#123;        writable:true,        value : 16,    &#125;,    sex:&#123;        get()&#123;            return &#39;男&#39;;        &#125;,        set(v)&#123;            p1.sex = v        &#125;    &#125;&#125;)p1.sex = &quot;男&quot;;console.log(student.name + &quot;:&quot; + student.age);console.log(p1.sex); // 男student.sex = &quot;女&quot;;console.log(student.sex); //男console.log(p1.sex); // 女</code></pre><p>OK，关于写法应该也没有什么难点。</p><p>最后我在附上一个模拟Vue中v-module数据双向绑定原理的代码：</p><!DOCTYPE html><html lang="en">  <head>    <meta charset="UTF-8" />    <meta      name="viewport"      content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0"    />    <meta http-equiv="X-UA-Compatible" content="ie=edge" />    <title>Document</title>```<!DOCTYPE html><html lang="en">  <head>    <meta charset="UTF-8" />    <meta      name="viewport"      content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0"    />    <meta http-equiv="X-UA-Compatible" content="ie=edge" />    <title>Document</title><pre><code>&lt;style&gt;  #myInput &#123;    width: 400px;    height: 50px;    font-size: 40px;    color: red;  &#125;  #contain &#123;    margin-top: 20px;    width: 400px;    height: 200px;    border: 1px solid salmon;  &#125;&lt;/style&gt;</code></pre>  </head>  <body>    <input id="myInput" type="text" />    <div id="contain"></div><pre><code>&lt;script&gt;  var text;  window.data = &#123;&#125;;  var oIn = document.getElementById(&quot;myInput&quot;);  var oDiv = document.getElementById(&quot;contain&quot;);  oIn.addEventListener(&quot;input&quot;, function (e) &#123;    text = e.target.value;    console.log(text);    window.data.value = text;  &#125;);  Object.defineProperty(window.data, &quot;value&quot;, &#123;    get() &#123;      return &quot;&quot;;    &#125;,    set(v) &#123;      oDiv.innerHTML = v;    &#125;,  &#125;);&lt;/script&gt;</code></pre>  </body></html><pre><code></code></pre>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>JavaScript 单例模式</title>
      <link href="/2022/08/16/javascript-dan-li-mo-shi/"/>
      <url>/2022/08/16/javascript-dan-li-mo-shi/</url>
      
        <content type="html"><![CDATA[<h2 id="JavaScript-单例模式"><a href="#JavaScript-单例模式" class="headerlink" title="JavaScript 单例模式"></a>JavaScript 单例模式</h2><p>单例模式也称为单体模式，规定一个类只有一个实例，并且提供可全局访问点；</p><p>在读这篇文章之前，也许你对单例模式的概念感到模糊或者不清楚，但是其实在日常的开发中你肯定用到过单例模式；</p><p>　　JavaScript中没有类的定义，单例模式的特点是”唯一“和”全局访问“，那么我们可以联想到JavaScript中的全局对象，利用ES6的let不允许重复声明的特性，刚好符合这两个特点；是的，全局对象是最简单的单例模式；</p><pre><code>let obj = &#123;    name:&quot;W3Cschool&quot;,    getName:function()&#123;&#125;&#125;</code></pre><p>上述代码中可以知道obj就是一个单例，因为obj刚好就符合单例模式的两大特点：”唯一”和”可全局访问”；</p><p>但是我们并不建议这么实现单例，因为全局对象&#x2F;全局变量会有一些弊端：</p><ol><li>污染命名空间（容易变量名冲突）</li><li>维护时不容易管控 (搞不好就直接覆盖了)</li></ol><p>简单版单例模式：</p><p>​    分析：只能有一个实例，所以我们需要使用if分支来判断，如果已经存在就直接返回，如果不存在就新建一个实例；</p><pre><code>let Singleton = function(name)&#123;    this.name = name;    this.instance = null; &#125;Singleton.prototype.getName = function()&#123;    console.log(this.name);&#125;Singleton.getInstance = function(name)&#123;    if(this.instance)&#123;        return this.instance;     &#125;    return this.instance = new Singleton(name);&#125;let winner = Singleton.getInstance(&quot;winner&quot;);   //winnerconsole.log(winner.getName());let sunner = Singleton.getInstance(&quot;sunner&quot;);   //winnerconsole.log(sunner.getName())</code></pre><p>上面代码中我们是通过一个变量 instance 的值来进行判断是否已存在实例，如果存在就直接返回 this.instance，如果不存在，就新建实例并赋值给 instance；</p><p>　　但是上面的代码还是存在问题，因为创建对象的操作和判断实例的操作耦合在一起，并不符合”单一职责原则“；</p><p>改良版：</p><p>思路：通过一个<a href="https://www.w3cschool.cn/javascript/js-function-closures.html">闭包</a>，来实现判断实例的操作；</p><pre><code>let CreateSingleton = (function()&#123;    let instance = null;    return function(name)&#123;        this.name = name;        if(instance)&#123;            return instance        &#125;        return instance = this;    &#125;&#125;)()CreateSingleton.prototype.getName = function()&#123;        console.log(this.name);&#125;let winner = new CreateSingleton(&quot;winner&quot;);  //winnerconsole.log(winner.getName());let sunner = new CreateSingleton(&quot;sunner&quot;);  //winnerconsole.log(sunner.getName())</code></pre><p>代理版单例模式：</p><p>　　通过代理的形式，将创建对象的操作和实例判断的操作进行解耦拆分，实现更小粒度的划分，符合”单一职责原则“；</p><pre><code>let ProxyCreateSingleton = (function()&#123;    let instance = null;    return function(name)&#123;        if(instance)&#123;            return instance        &#125;        return instance = new Singlton(name);    &#125;&#125;)();    let Singlton = function(name)&#123;    this.name = name;&#125; Singlton.prototype.getName = function()&#123;    console.log(this.name);&#125;let winner = new ProxyCreateSingleton(&quot;winner&quot;);console.log(winner.getName());let sunner = new ProxyCreateSingleton(&quot;sunner&quot;);console.log(sunner.getName());</code></pre><p>上面的代码中，ProxyCreateSingleton()只负责判断实例，Singlton只负责创建对象和赋值；</p><p> 惰性单例模式</p><p>　　 我们经常会有这样的场景：页面多次调用都有弹窗提示，只是提示内容不一样；</p><p>　　 这个时候我们可以立马想到是单例模式，弹窗就是单例实例，提示内容是参数传递；我们可以用惰性单例模式来实现它；</p><pre><code>&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt;&lt;head&gt;  &lt;meta charset=&quot;UTF-8&quot;&gt;  &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;  &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;ie=edge&quot;&gt;  &lt;title&gt;W3Cschool&lt;/title&gt;&lt;/head&gt;&lt;body&gt;  &lt;div id=&quot;loginBtn&quot;&gt;W3Cschool&lt;/div&gt;&lt;/body&gt;&lt;script&gt;  let getSingleton = function (fn) &#123;    var result;    return function () &#123;      return result || (result = fn.apply(this, arguments)); // 确定this上下文并传递参数    &#125;  &#125;  let createAlertMessage = function (html) &#123;    var div = document.createElement(&#39;div&#39;);    div.innerHTML = html;    div.style.display = &#39;none&#39;;    document.body.appendChild(div);    return div;  &#125;  let createSingleAlertMessage = getSingleton(createAlertMessage);  document.getElementById(&#39;loginBtn&#39;).onclick = function () &#123;    let alertMessage = createSingleAlertMessage(&#39;&lt;a href=&quot;https://www.w3cschool.cn/&quot; style=&quot;text-decoration:none;&quot; target=&quot;_blank&quot;&gt;W3Cschool.cn&lt;/a&gt;&#39;);    alertMessage.style.display = &#39;block&#39;;  &#125;&lt;/script&gt;&lt;/html&gt;</code></pre><p>惰性单例是指的是页面开始加载的时候我们的实例是没有进行创建的，是当我们点击页面的div之后才开始创建实例（按需创建），这可以提高我们的网页性能，加快我们的页面渲染速度；</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Vue中$refs和$el的使用</title>
      <link href="/2022/08/10/vue-zhong-refs-he-el-de-shi-yong/"/>
      <url>/2022/08/10/vue-zhong-refs-he-el-de-shi-yong/</url>
      
        <content type="html"><![CDATA[<h2 id="Vue中-refs和-el的使用"><a href="#Vue中-refs和-el的使用" class="headerlink" title="Vue中$refs和$el的使用"></a>Vue中$refs和$el的使用</h2><h3 id="ref-给元素或者子组件注册引用信息"><a href="#ref-给元素或者子组件注册引用信息" class="headerlink" title="ref: 给元素或者子组件注册引用信息"></a>ref: 给元素或者子组件注册引用信息</h3><h4 id="ref有三种用法："><a href="#ref有三种用法：" class="headerlink" title="ref有三种用法："></a><strong>ref有三种用法：</strong></h4><h5 id="1-ref加在普通元素上"><a href="#1-ref加在普通元素上" class="headerlink" title="1.ref加在普通元素上"></a>1.ref加在普通元素上</h5><p>获取用this.$ref.xxx可以获取到dom元素</p><pre><code>&lt;div ref=&quot;system&quot;&gt;测试&lt;/div&gt;// 获取mounted() &#123;  console.log(this.$refs.system);&#125;</code></pre><h5 id="2-ref加在子组件上"><a href="#2-ref加在子组件上" class="headerlink" title="2.ref加在子组件上"></a>2.ref加在子组件上</h5><p>用this.$ref.xxx可以获取到组件实例，可以使用子组件的所有方法</p><pre><code>// this.$ref.xxx.方法名()// 父组件&lt;contact-info ref=&quot;contactInfo&quot;/&gt;import ContactInfo from &#39;./ContactInfo&#39;components: &#123; ContactInfo &#125;,mounted() &#123;   this.$refs.contactInfo.initVal(data) // 调用子组件方法&#125;// 子组件methods: &#123;  initVal(data)&#123;    Object.keys(this.contactInfo).forEach(val=&gt;&#123;      this.contactInfo[val] = data[val]    &#125;)  &#125;&#125;</code></pre><h5 id="3-利用v-for和ref组合获取一组dom节点"><a href="#3-利用v-for和ref组合获取一组dom节点" class="headerlink" title="3.利用v-for和ref组合获取一组dom节点"></a>3.利用v-for和ref组合获取一组dom节点</h5><p>在通过v-for遍历获取一组ref时记得加：，即:ref&#x3D;”xxx”</p><p>当v-for用于元素或者组件的时候，引用信息将是包含dom节点或者组件实例的数组</p><h5 id="4-ref使用注意点"><a href="#4-ref使用注意点" class="headerlink" title="4.ref使用注意点"></a>4.ref使用注意点</h5><ol><li>获取ref要确保在dom已经渲染完成，比如可以在vue生命周期的mounted() {}钩子函数中调用，或者可以在this.$nextTick(() &#x3D;&gt; {})中调用。</li><li>在页面初始渲染的时候是不能访问ref的，因为此时ref还不存在， $ref也不是响应式的，不能在模板中做数据绑定。</li><li>在vue中用ref来获取dom的时候，可能会出现this. $refs.xxx 为undefined的情况<ol><li>场景一：在created()中使用在这个生命周期中进行数据观测、属性和方法的运算，watch事件回调，但是此时dom还没有渲染完成，是不能通过ref调用dom的。<br><strong>解决:</strong> 在mounted中调用或者使用nextTick。</li><li>场景二：父元素或者当前元素使用了v-if或者v-show<br>因为 $ref不是响应式的，只在组件渲染完之后才会生效，在初始渲染的时候是不存在的<br>因为是非响应式的，所有动态加载的模板更新它都无法相应的变化<br><strong>解决:</strong> 通过setTimeout(() &#x3D;&gt; {…}, 0)来实现</li></ol></li></ol><h3 id="el-获取Vue组件实例挂载的DOM元素"><a href="#el-获取Vue组件实例挂载的DOM元素" class="headerlink" title="$el: 获取Vue组件实例挂载的DOM元素"></a>$el: 获取Vue组件实例挂载的DOM元素</h3><pre><code>// 子组件&lt;template&gt;  &lt;div&gt;    测试  &lt;/div&gt;&lt;/template&gt;&lt;script&gt;export default &#123;  name: &#39;TestComs&#39;&#125;;&lt;/script&gt;</code></pre><pre><code>// 父组件   &lt;test ref=&quot;testCom&quot; /&gt;   &lt;div ref=&quot;test&quot;&gt;11&lt;/div&gt;  mounted() &#123;    console.log(this.$refs.testCom, &#39;组件ref&#39;); // 获取组件实例    console.log(this.$refs.testCom.$el, &#39;组件el&#39;); // 获取组件实例的dom元素    console.log(this.$refs.test, &#39;元素ref&#39;); // 获取dom元素    console.log(this.$refs.test.$el, &#39;元素el&#39;); // $el用于vue组件，普通dom元素不能用  &#125;</code></pre><p>结果如下</p><p><img src="https://img-blog.csdnimg.cn/0966e3813d444cf98d16d1988db36169.png" alt="在这里插入图片描述"></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>SASS笔记</title>
      <link href="/2022/08/04/sass-bi-ji/"/>
      <url>/2022/08/04/sass-bi-ji/</url>
      
        <content type="html"><![CDATA[<h1 id="SASS语法嵌套规则与注释"><a href="#SASS语法嵌套规则与注释" class="headerlink" title="SASS语法嵌套规则与注释"></a>SASS语法嵌套规则与注释</h1><h2 id="语法嵌套规则"><a href="#语法嵌套规则" class="headerlink" title="语法嵌套规则"></a>语法嵌套规则</h2><h3 id="选择器嵌套"><a href="#选择器嵌套" class="headerlink" title="选择器嵌套"></a>选择器嵌套</h3><p>例如有这么一段css，正常CSS的写法</p><pre><code>.container&#123;width:1200px; margin: 0 auto;&#125;.container .header&#123;height: 90px; line-height: 90px;&#125;.container .header .log&#123;width:100px; height:60px;&#125;.container .center&#123;height: 600px; background-color: #F00;&#125;.container .footer&#123;font-size: 16px;text-align: center;&#125;</code></pre><p>改成写SASS的方法</p><pre><code>.container &#123;    width: 1200px;    margin: 0 auto;    .header &#123;        height: 90px;        line-height: 90px;        .log &#123;            width: 100px;            height: 60px;        &#125;    &#125;    .center &#123;        height: 600px;        background-color: #F00;    &#125;    .footer &#123;        font-size: 16px;        text-align: center;    &#125;&#125;</code></pre><p>避免了重复输入父选择器，复杂的 CSS 结构更易于管理</p><h3 id="父选择器-amp"><a href="#父选择器-amp" class="headerlink" title="父选择器 &amp;"></a>父选择器 &amp;</h3><p>在嵌套 CSS 规则时，有时也需要直接使用嵌套外层的父选择器，例如，当给某个元素设定 hover 样式时，或者当 body 元素有某个 classname 时，可以用 &amp; 代表嵌套规则外层的父选择器。</p><p>例如有这么一段样式：</p><pre><code>.container&#123;width: 1200px;margin: 0 auto;&#125;.container a&#123;color: #333;&#125;.container a:hover&#123;text-decoration: underline;color: #F00;&#125;.container .top&#123;border:1px #f2f2f2 solid;&#125;.container .top-left&#123;float: left; width: 200px;&#125; </code></pre><p>用sass编写</p><pre><code>.container &#123;    width: 1200px;    margin: 0 auto;    a &#123;        color: #333;        &amp;:hover &#123;            text-decoration: underline;            color: #F00;        &#125;    &#125;    .top &#123;        border: 1px #f2f2f2 solid;        &amp;-left &#123;            float: left;            width: 200px;        &#125;    &#125;&#125;</code></pre><h3 id="属性嵌套"><a href="#属性嵌套" class="headerlink" title="属性嵌套"></a>属性嵌套</h3><p>有些 CSS 属性遵循相同的命名空间 (namespace)，比如 font-family, font-size, font-weight 都以 font 作为属性的命名空间。为了便于管理这样的属性，同时也为了避免了重复输入，Sass 允许将属性嵌套在命名空间中</p><p>例如：</p><pre><code>.container a &#123;    color: #333;    font-size: 14px;    font-family: sans-serif;    font-weight: bold;&#125;</code></pre><p>用SASS的方式写</p><pre><code>.container &#123;    a &#123;        color: #333;        font: &#123;            size: 14px;            family: sans-serif;            weight: bold;        &#125;    &#125;&#125;</code></pre><p>注意font：后面要加一个空格</p><h3 id="占位符选择器-foo-必须通过-extend"><a href="#占位符选择器-foo-必须通过-extend" class="headerlink" title="占位符选择器 %foo 必须通过 @extend"></a>占位符选择器 %foo 必须通过 @extend</h3><p>有时，需要定义一套样式并不是给某个元素用，而是只通过 <code>@extend</code> 指令使用，尤其是在制作 Sass 样式库的时候，希望 Sass 能够忽略用不到的样式。</p><p>例如：</p><pre><code>.button%base &#123;    display: inline-block;    margin-bottom: 0;    font-weight: normal;    text-align: center;    white-space: nowrap;    vertical-align: middle;    -ms-touch-action: manipulation;    touch-action: manipulation;    cursor: pointer;    background-image: none;    border: 1px solid transparent;    padding: 6px 12px;    font-size: 14px;    line-height: 1.42857143;    border-radius: 4px;    -webkit-user-select: none;    -moz-user-select: none;    -ms-user-select: none;    user-select: none;&#125;.btn-default &#123;    @extend %base;    color: #333;    background-color: #fff;    border-color: #ccc;&#125;.btn-success &#123;    @extend %base;    color: #fff;    background-color: #5cb85c;    border-color: #4cae4c;&#125;.btn-danger &#123;    @extend %base;    color: #fff;    background-color: #d9534f;    border-color: #d43f3a;&#125;</code></pre><h2 id="注释"><a href="#注释" class="headerlink" title="注释"></a>注释</h2><p>Sass支持两种注释</p><ul><li>标准的css多行注释 &#x2F;* … *&#x2F;会编译到.css文件中</li><li>单行注释 &#x2F;&#x2F;不会编译到.css文件</li></ul><pre><code>.container &#123;    width: 1200px;    .swiper &#123;        // 网站幻灯片相关css        width: 100%;        height: 260px;        .dot &#123;            /*                     幻灯片指示点                    默认白色                    选中时蓝色                */            width: 10px;            height: 10px;            border-radius: 50%;            background-color: #FFF;            &amp;.active &#123;                background-color: blue;            &#125;        &#125;    &#125;&#125;</code></pre><hr><h1 id="SASS变量"><a href="#SASS变量" class="headerlink" title="SASS变量"></a>SASS变量</h1><h2 id="css变量的定义与书写"><a href="#css变量的定义与书写" class="headerlink" title="css变量的定义与书写"></a>css变量的定义与书写</h2><h3 id="CSS定义变量的方法"><a href="#CSS定义变量的方法" class="headerlink" title="CSS定义变量的方法"></a>CSS定义变量的方法</h3><pre><code>:root &#123;    --color: #F00;&#125;body &#123;    --border-color: #f2f2f2;&#125;.header &#123;    --background-color: #f8f8f8;&#125;p &#123;    color: var(--color);    border-color: var(--border-color);&#125;.header &#123;    background-color: var(--background-color);&#125;</code></pre><h3 id="SASS的写法"><a href="#SASS的写法" class="headerlink" title="SASS的写法"></a>SASS的写法</h3><pre><code>$font-size:14px;.container &#123;    font-size: $font-size;&#125;</code></pre><h2 id="Sass变量的定义"><a href="#Sass变量的定义" class="headerlink" title="Sass变量的定义"></a>Sass变量的定义</h2><h3 id="定义规则"><a href="#定义规则" class="headerlink" title="定义规则"></a>定义规则</h3><ol><li>变量以美元符号($)开头，后面跟变量名；</li><li>变量名是不以数字开头的可包含字母、数字、下划线、横线（连接符）；</li><li>写法同css，即变量名和值之间用冒号(:)分隔；</li><li>变量一定要先定义，后使用；</li></ol><h3 id="连接符与下划线"><a href="#连接符与下划线" class="headerlink" title="连接符与下划线"></a>连接符与下划线</h3><p>通过连接符与下划线 定义的同名变量为同一变量，建议使用连接符</p><pre><code>$font-size:14px;$font_size:16px;.container&#123;font-size: $font-size;&#125;</code></pre><h2 id="变量的作用域"><a href="#变量的作用域" class="headerlink" title="变量的作用域"></a>变量的作用域</h2><h3 id="局部变量"><a href="#局部变量" class="headerlink" title="局部变量"></a>局部变量</h3><p>定义：在选择器内容定义的变量，只能在选择器范围内使用</p><pre><code>.container &#123;    $font-size: 14px;    font-size: $font-size;&#125;</code></pre><h3 id="全局变量"><a href="#全局变量" class="headerlink" title="全局变量"></a>全局变量</h3><p>定义后能全局使用的变量</p><h4 id="第一种：在选择器外面的最前面定义的变量"><a href="#第一种：在选择器外面的最前面定义的变量" class="headerlink" title="第一种：在选择器外面的最前面定义的变量"></a>第一种：在选择器外面的最前面定义的变量</h4><pre><code>$font-size:16px;.container &#123;    font-size: $font-size;&#125;.footer &#123;    font-size: $font-size;&#125;</code></pre><h4 id="第二种：使用-global-标志定义全局变量"><a href="#第二种：使用-global-标志定义全局变量" class="headerlink" title="第二种：使用 !global 标志定义全局变量"></a>第二种：使用 !global 标志定义全局变量</h4><pre><code>.container &#123;    $font-size: 16px !global;    font-size: $font-size;&#125;.footer &#123;    font-size: $font-size;&#125;</code></pre><h2 id="变量值类型"><a href="#变量值类型" class="headerlink" title="变量值类型"></a>变量值类型</h2><p>变量值的类型可以有很多种</p><p>SASS支持 7 种主要的数据类型</p><ul><li>数字，1, 2, 13, 10px，30%</li><li>字符串，有引号字符串与无引号字符串，”foo”, ‘bar’, baz</li><li>颜色，blue, #04a3f9, rgba(255,0,0,0.5)</li><li>布尔型，true, false</li><li>空值，null</li><li>数组 (list)，用空格或逗号作分隔符，1.5em 1em 0 2em, Helvetica, Arial, sans-serif</li><li>maps, 相当于 JavaScript 的 object，(key1: value1, key2: value2)</li></ul><p>例如</p><pre><code>$layer-index:10;$border-width:3px;$font-base-family:&#39;Open Sans&#39;, Helvetica, Sans-Serif;$top-bg-color:rgba(255,147,29,0.6);$block-base-padding:6px 10px 6px 10px;$blank-mode:true;$var:null; // 值null是其类型的唯一值。它表示缺少值，通常由函数返回以指示缺少结果。$color-map: (color1: #fa0000, color2: #fbe200, color3: #95d7eb);$fonts: (serif: &quot;Helvetica Neue&quot;,monospace: &quot;Consolas&quot;);</code></pre><p>使用</p><pre><code>.container &#123;    $font-size: 16px !global;    font-size: $font-size;    @if $blank-mode &#123;        background-color: #000;    &#125;    @else &#123;        background-color: #fff;    &#125;    content: type-of($var);    content:length($var);    color: map-get($color-map, color2);&#125;.footer &#123;    font-size: $font-size;&#125;// 如果列表中包含空值，则生成的CSS中将忽略该空值。.wrap &#123;    font: 18px bold map-get($fonts, &quot;sans&quot;);&#125;</code></pre><h2 id="默认值"><a href="#默认值" class="headerlink" title="默认值"></a>默认值</h2><pre><code>$color:#333;// 如果$color之前没定义就使用如下的默认值$color:#666 !default;.container &#123;    border-color: $color;&#125;</code></pre><hr><h1 id="SASS-导入-import"><a href="#SASS-导入-import" class="headerlink" title="SASS 导入@import"></a>SASS 导入@import</h1><h2 id="import"><a href="#import" class="headerlink" title="@import"></a>@import</h2><p>Sass 拓展了 @import 的功能，允许其导入 SCSS 或 Sass 文件。被导入的文件将合并编译到同一个 CSS 文件中，另外，被导入的文件中所包含的变量或者混合指令 (mixin) 都可以在导入的文件中使用。</p><p><strong>例如</strong></p><p>public.scss</p><pre><code>$font-base-color:#333;</code></pre><p>在index.scss里面使用</p><pre><code>@import &quot;public&quot;;$color:#666;.container &#123;    border-color: $color;    color: $font-base-color;&#125;</code></pre><p><strong>注意：</strong>跟我们普通css里面@import的区别</p><h5 id="如下几种方式，都将作为普通的-CSS-语句，不会导入任何-Sass-文件"><a href="#如下几种方式，都将作为普通的-CSS-语句，不会导入任何-Sass-文件" class="headerlink" title="如下几种方式，都将作为普通的 CSS 语句，不会导入任何 Sass 文件"></a>如下几种方式，都将作为普通的 CSS 语句，不会导入任何 Sass 文件</h5><ol><li>文件拓展名是 .css；</li><li>文件名以 http:&#x2F;&#x2F; 开头；</li><li>文件名是 url()；</li><li>@import 包含 media queries。</li></ol><pre><code>@import &quot;public.css&quot;;@import url(public);@import &quot;http://xxx.com/xxx&quot;;@import &#39;landscape&#39; screen and (orientation:landscape);</code></pre><h2 id="局部文件-Partials"><a href="#局部文件-Partials" class="headerlink" title="局部文件(Partials)"></a>局部文件(Partials)</h2><p>Sass源文件中可以通过@import指令导入其他Sass源文件，被导入的文件就是****局部文件****，局部文件让Sass模块化编写更加容易。</p><p>如果一个目录正在被Sass程序监测，目录下的所有scss&#x2F;sass源文件都会被编译，但通常不希望局部文件被编译，因为局部文件是用来被导入到其他文件的。如果不想局部文件被编译，文件名可以以下划线 （_）开头</p><p>例如：</p><p>_theme.scss</p><pre><code>$border-color:#999;$background-color:#f2f2f2;</code></pre><p>使用</p><pre><code>@import &quot;theme&quot;;.container &#123;    border-color: $border-color;    background-color: $background-color;&#125;</code></pre><p>可以看到，@import 引入的<em>theme.scss，可以没有</em>，这是允许的，这也就意味着，同一个目录下不能同时出现两个相关名的sass文件（一个不带<em>，一个带</em>），添加下划线的文件将会被忽略。</p><h2 id="嵌套-import"><a href="#嵌套-import" class="headerlink" title="嵌套 @import"></a>嵌套 @import</h2><p>大多数情况下，一般在文件的最外层（不在嵌套规则内）使用 @import，其实，也可以将 @import 嵌套进 CSS 样式或者 @media 中，与平时的用法效果相同，只是这样导入的样式只能出现在嵌套的层中。</p><p>例如</p><p>_base.scss</p><pre><code>.main-color &#123;    color: #F00;&#125;</code></pre><p>使用</p><pre><code>.container &#123;    @import &quot;base&quot;;&#125;</code></pre><p><strong>注意：</strong>@import不能嵌套使用在控制指令或混入中</p><hr><h1 id="SASS混合指令-Mixin-Directives"><a href="#SASS混合指令-Mixin-Directives" class="headerlink" title="SASS混合指令 (Mixin Directives)"></a>SASS混合指令 (Mixin Directives)</h1><p>​混合指令（Mixin）用于定义可重复使用的样式。混合指令可以包含所有的 CSS 规则，绝大部分 Sass 规则，甚至通过参数功能引入变量，输出多样化的样式。</p><h2 id="定义与使用混合指令-mixin"><a href="#定义与使用混合指令-mixin" class="headerlink" title="定义与使用混合指令 @mixin"></a>定义与使用混合指令 @mixin</h2><pre><code>@mixin mixin-name() &#123;    /* css 声明 */&#125;</code></pre><h3 id="例1：标准形式"><a href="#例1：标准形式" class="headerlink" title="例1：标准形式"></a>例1：标准形式</h3><p>定义</p><pre><code>// 定义页面一个区块基本的样式@mixin block &#123;    width: 96%;    margin-left: 2%;    border-radius: 8px;    border: 1px #f6f6f6 solid;&#125;</code></pre><p>使用</p><pre><code>// 使用混入.container &#123;    .block &#123;        @include block;    &#125;&#125;</code></pre><h3 id="例2：嵌入选择器"><a href="#例2：嵌入选择器" class="headerlink" title="例2：嵌入选择器"></a>例2：嵌入选择器</h3><p>例如</p><pre><code>// 定义警告字体样式,下划线（_）与横线（-）是一样的@mixin warning-text &#123;    .warn-text &#123;        font-size: 12px;        color: rgb(255, 253, 123);        line-height: 180%;    &#125;&#125;</code></pre><p>使用</p><pre><code>// 使用混入.container &#123;    @include warning-text;&#125;</code></pre><h3 id="例3：使用变量"><a href="#例3：使用变量" class="headerlink" title="例3：使用变量"></a>例3：使用变量</h3><p>定义</p><pre><code>// 定义flex布局元素纵轴的排列方式@mixin flex-align($aitem) &#123;    -webkit-box-align: $aitem;    -webkit-align-items: $aitem;    -ms-flex-align: $aitem;    align-items: $aitem;&#125;</code></pre><p>使用</p><pre><code>// 只有一个参数，直接传递参数.container &#123;    @include flex-align(center);&#125;// 给指定参数指定值.footer &#123;    @include flex-align($aitem: center);&#125;</code></pre><h3 id="例4：使用变量（多参数）"><a href="#例4：使用变量（多参数）" class="headerlink" title="例4：使用变量（多参数）"></a>例4：使用变量（多参数）</h3><p>例如</p><pre><code>// 定义块元素内边距@mixin block-padding($top, $right, $bottom, $left) &#123;    padding-top: $top;    padding-right: $right;    padding-bottom: $bottom;    padding-left: $left;&#125;</code></pre><p>使用一</p><pre><code>// 按照参数顺序赋值.container &#123;    @include block-padding(10px, 20px, 30px, 40px);&#125;</code></pre><p>使用二</p><pre><code>// 可指定参数赋值.container &#123;    @include block-padding($left: 20px, $top: 10px, $bottom: 10px, $right: 30px);&#125;</code></pre><p>使用三：只设置两边</p><pre><code>// 可指定参数赋值.container &#123;    @include block-padding($left: 10px, $top: 10px, $bottom: 0, $right: 0);&#125;</code></pre><p><strong>问题：</strong>必须指定4个值</p><h3 id="例5：指定默认值"><a href="#例5：指定默认值" class="headerlink" title="例5：指定默认值"></a>例5：指定默认值</h3><p>定义</p><pre><code>// 定义块元素内边距，参数指定默认值@mixin block-padding($top:0, $right:0, $bottom:0, $left:0) &#123;    padding-top: $top;    padding-right: $right;    padding-bottom: $bottom;    padding-left: $left;&#125;</code></pre><p>使用</p><pre><code>// 可指定参数赋值.container &#123;    // 不带参数    //@include block-padding;    //按顺序指定参数值    //@include block-padding(10px,20px);    //给指定参数指定值    @include block-padding($left: 10px, $top: 20px)&#125;</code></pre><h3 id="例6：可变参数"><a href="#例6：可变参数" class="headerlink" title="例6：可变参数"></a>例6：可变参数</h3><p>参数不固定的情况</p><pre><code>/**     *定义线性渐变    *@param $direction  方向    *@param $gradients  颜色过度的值列表 */@mixin linear-gradient($direction, $gradients...) &#123;    background-color: nth($gradients, 1);    background-image: linear-gradient($direction, $gradients);&#125;</code></pre><p>使用</p><pre><code>.table-data &#123;    @include linear-gradient(to right, #F00, orange, yellow);&#125;</code></pre><h2 id="mixin混入总结"><a href="#mixin混入总结" class="headerlink" title="@mixin混入总结"></a>@mixin混入总结</h2><ul><li>mixin是可以重复使用的一组CSS声明</li><li>mixin有助于减少重复代码，只需声明一次，就可在文件中引用</li><li>混合指令可以包含所有的 CSS 规则，绝大部分 Sass 规则，甚至通过参数功能引入变量，输出多样化的样式。</li><li>使用参数时建议加上默认值</li></ul><p><strong>什么时候用？？？？</strong> 很多地方都会用到却能根据不同场景灵活使用的样式</p><hr><h1 id="SASS-extend（继承）指令"><a href="#SASS-extend（继承）指令" class="headerlink" title="SASS @extend（继承）指令"></a>SASS @extend（继承）指令</h1><p>​在设计网页的时候通常遇到这样的情况：一个元素使用的样式与另一个元素完全相同，但又添加了额外的样式。通常会在 HTML 中给元素定义两个 class，一个通用样式，一个特殊样式。</p><p><img src="data:image/png;base64,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" alt="image-20211127090211485"></p><h2 id="CSS案例"><a href="#CSS案例" class="headerlink" title="CSS案例"></a>CSS案例</h2><p>接下来以警告框为例进行讲解4种类型</p><table><thead><tr><th>标记</th><th>说明</th></tr></thead><tbody><tr><td>info</td><td>信息！请注意这个信息。</td></tr><tr><td>success</td><td>成功！很好地完成了提交。</td></tr><tr><td>warning</td><td>警告！请不要提交。</td></tr><tr><td>danger</td><td>错误！请进行一些更改。</td></tr></tbody></table><p>所有警告框的基本样式（风格、字体大小、内边距、边框等…） ，因为我们通常会定义一个通用alert样式</p><pre><code>.alert &#123;    padding: 15px;    margin-bottom: 20px;    border: 1px solid transparent;    border-radius: 4px;    font-size: 12px;&#125;</code></pre><p>不同警告框单独风格</p><pre><code>.alert-info &#123;    color: #31708f;    background-color: #d9edf7;    border-color: #bce8f1;&#125;.alert-success &#123;    color: #3c763d;    background-color: #dff0d8;    border-color: #d6e9c6;&#125;.alert-warning &#123;    color: #8a6d3b;    background-color: #fcf8e3;    border-color: #faebcc;&#125;.alert-danger &#123;    color: #a94442;    background-color: #f2dede;    border-color: #ebccd1;&#125;</code></pre><p>使用</p><pre><code>&lt;div class=&quot;alert alert-info&quot;&gt;    信息！请注意这个信息。&lt;/div&gt;&lt;div class=&quot;alert alert-success&quot;&gt;    成功！很好地完成了提交。&lt;/div&gt;&lt;div class=&quot;alert alert-warning&quot;&gt;    警告！请不要提交。&lt;/div&gt;&lt;div class=&quot;alert alert-danger&quot;&gt;    错误！请进行一些更改。&lt;/div&gt;</code></pre><h2 id="使用继承-extend改进"><a href="#使用继承-extend改进" class="headerlink" title="使用继承@extend改进"></a>使用继承@extend改进</h2><p>基本样式我们没有变，主要是各个警告框单独的样式</p><pre><code>.alert-info &#123;    @extend .alert;    color: #31708f;    background-color: #d9edf7;    border-color: #bce8f1;&#125;.alert-success &#123;    @extend .alert;    color: #3c763d;    background-color: #dff0d8;    border-color: #d6e9c6;&#125;.alert-warning &#123;    @extend .alert;    color: #8a6d3b;    background-color: #fcf8e3;    border-color: #faebcc;&#125;.alert-danger &#123;    @extend .alert;    color: #a94442;    background-color: #f2dede;    border-color: #ebccd1;&#125;</code></pre><p>使用时就不须要再写基本类了</p><pre><code>&lt;div class=&quot;alert-info&quot;&gt;    信息！请注意这个信息。&lt;/div&gt;&lt;div class=&quot;alert-success&quot;&gt;    成功！很好地完成了提交。&lt;/div&gt;&lt;div class=&quot;alert-warning&quot;&gt;    警告！请不要提交。&lt;/div&gt;&lt;div class=&quot;alert-danger&quot;&gt;    错误！请进行一些更改。&lt;/div&gt;</code></pre><h2 id="使用多个-extend"><a href="#使用多个-extend" class="headerlink" title="使用多个@extend"></a>使用多个@extend</h2><p>定义两个类</p><pre><code>.alert &#123;    padding: 15px;    margin-bottom: 20px;    border: 1px solid transparent;    border-radius: 4px;    font-size: 12px;&#125;.important &#123;    font-weight: bold;    font-size: 14px;&#125;</code></pre><p>使用</p><pre><code>.alert-danger &#123;    @extend .alert;    @extend .important;    color: #a94442;    background-color: #f2dede;    border-color: #ebccd1;&#125;</code></pre><h2 id="extend多层继承"><a href="#extend多层继承" class="headerlink" title="@extend多层继承"></a>@extend多层继承</h2><p>第一层继承</p><pre><code>.alert &#123;    padding: 15px;    margin-bottom: 20px;    border: 1px solid transparent;    border-radius: 4px;    font-size: 12px;&#125;.important &#123;    @extend .alert;    font-weight: bold;    font-size: 14px;&#125;</code></pre><p>再继承</p><pre><code>.alert-danger &#123;    @extend .important;    color: #a94442;    background-color: #f2dede;    border-color: #ebccd1;&#125;</code></pre><h2 id="占位符"><a href="#占位符" class="headerlink" title="占位符%"></a>占位符%</h2><p>你可能发现被继承的css父类并没有被实际应用，也就是说html代码中没有使用该类，它的唯一目的就是扩展其他选择器。</p><p>对于该类，可能不希望被编译输出到最终的css文件中，它只会增加CSS文件的大小，永远不会被使用。</p><p>这就是占位符选择器的作用。</p><p>占位符选择器类似于类选择器，但是，它们不是以句点(.)开头，而是以百分号(%)开头。</p><p>当在Sass文件中使用占位符选择器时，它可以用于扩展其他选择器，但不会被编译成最终的CSS。</p><p>改写</p><pre><code>%alert &#123;    padding: 15px;    margin-bottom: 20px;    border: 1px solid transparent;    border-radius: 4px;    font-size: 12px;&#125;.alert-info &#123;    @extend %alert;    color: #31708f;    background-color: #d9edf7;    border-color: #bce8f1;&#125;.alert-success &#123;    @extend %alert;    color: #3c763d;    background-color: #dff0d8;    border-color: #d6e9c6;&#125;.alert-warning &#123;    @extend %alert;    color: #8a6d3b;    background-color: #fcf8e3;    border-color: #faebcc;&#125;.alert-danger &#123;    @extend %alert;    color: #a94442;    background-color: #f2dede;    border-color: #ebccd1;&#125;</code></pre><p>还可以用@mixin，@import等实现并改进</p><p>@import      导入局部模块化样式（类似功能、同一组件）  多次导入</p><p>@minix  定义可重复使用的样式</p><hr><h1 id="SASS-运算-Operations-符的基本使用"><a href="#SASS-运算-Operations-符的基本使用" class="headerlink" title="SASS 运算 (Operations)符的基本使用"></a>SASS 运算 (Operations)符的基本使用</h1><h2 id="等号操作符"><a href="#等号操作符" class="headerlink" title="等号操作符"></a>等号操作符</h2><p>所有数据类型都支持等号运算符:</p><table><thead><tr><th>符号</th><th>说明</th></tr></thead><tbody><tr><td>&#x3D;&#x3D;</td><td>等于</td></tr><tr><td>!&#x3D;</td><td>不等于</td></tr></tbody></table><p>例1数字比较：</p><pre><code>$theme:1;.container &#123;    @if $theme==1 &#123;        background-color: red;    &#125;    @else &#123;        background-color: blue;    &#125;&#125;</code></pre><p>例2字符串比较：</p><pre><code>$theme:&quot;blue&quot;;.container &#123;    @if $theme !=&quot;blue&quot; &#123;        background-color: red;    &#125;    @else &#123;        background-color: blue;    &#125;&#125;</code></pre><p>所有数据类型均支持相等运算 <code>==</code> 或 <code>!=</code>，此外，每种数据类型也有其各自支持的运算方式。</p><h2 id="关系（比较）运行符"><a href="#关系（比较）运行符" class="headerlink" title="关系（比较）运行符"></a>关系（比较）运行符</h2><table><thead><tr><th>符号</th><th>说明</th></tr></thead><tbody><tr><td>&lt; （lt）</td><td>小于</td></tr><tr><td>&gt; （gt）</td><td>大于</td></tr><tr><td>&lt;&#x3D; （lte）</td><td>小于等于</td></tr><tr><td>&gt;&#x3D; （gte）</td><td>大于等于</td></tr></tbody></table><p>例</p><pre><code>$theme:3;.container &#123;    @if $theme &gt;= 5 &#123;        background-color: red;    &#125;    @else &#123;        background-color: blue;    &#125;&#125;</code></pre><h2 id="逻辑运行符"><a href="#逻辑运行符" class="headerlink" title="逻辑运行符"></a>逻辑运行符</h2><table><thead><tr><th>符号</th><th>说明</th></tr></thead><tbody><tr><td>and</td><td>逻辑与</td></tr><tr><td>or</td><td>逻辑或</td></tr><tr><td>not</td><td>逻辑非</td></tr></tbody></table><p>例</p><pre><code>$width:100;$height:200;$last:false;div &#123;    @if $width&gt;50 and $height&lt;300 &#123;        font-size: 16px;    &#125;    @else &#123;        font-size: 14px;    &#125;    @if not $last &#123;        border-color: red;    &#125;    @else &#123;        border-color: blue;    &#125;&#125;</code></pre><h2 id="数字操作符"><a href="#数字操作符" class="headerlink" title="数字操作符"></a>数字操作符</h2><table><thead><tr><th>符号</th><th>说明</th></tr></thead><tbody><tr><td>+</td><td>加</td></tr><tr><td>-</td><td>减</td></tr><tr><td>*</td><td>乘</td></tr><tr><td>&#x2F;</td><td>除</td></tr><tr><td>%</td><td>取模</td></tr></tbody></table><p>例</p><pre><code>/*     +、-、*、/、%    线数字、百分号、css部分单位（px、pt、in...）    +    线数字与百分号或单位运算时会自动转化成相应的百分比与单位值*/.container &#123;    /* ==================+ 运算===================== */    width: 50 + 20;    width: 50 + 20%;    width: 50% + 20%;    width: 10px + 20px;    width: 10pt + 20px;    width: 10pt + 20;    width: 10px + 10;    /* ==================- 运算===================== */    height: 50 - 30;    height: 10 - 30%;    height: 60% - 30%;    height: 50px - 20px;    height: 50pt - 20px;    height: 50pt - 40;    /* ==================* 运算===================== */    height: 50 * 30;    height: 10 * 30%;    /* height: 60% * 30%; 出现了两个百分号*/    /* height: 50px * 20px; 出现了两个单位*/    height: 50 * 2px;    height: 50pt * 4;    /* ==================/运算 (除完后最多只能保留一种单位)===================== */    $width: 100px;    width: 10 / 5;    width: 10px / 5px;    width: 10px / 10 * 2;    width: 20px / 2px * 5%;    width: ($width/2); // 使用变量与括号    z-index: round(10)/2; // 使用了函数    height: (500px/2); // 使用了括号    /* ==================% 运算===================== */    width: 10 % 3;    width: 50 % 3px;    width: 50px % 4px;    width: 50px % 7;    width: 50% % 7;    width: 50% % 9%;    width: 50px % 10pt; // 50px % 13.33333px      width: 50px % 13.33333px;    width: 50px + 10pt;    /* width: 50px % 5%; 单位不统一*/&#125;</code></pre><p>&#x2F; 在 CSS 中通常起到分隔数字的用途，SassScript 作为 CSS 语言的拓展当然也支持这个功能，同时也赋予了 &#x2F; 除法运算的功能。也就是说，如果 &#x2F; 在 SassScript 中把两个数字分隔，编译后的 CSS 文件中也是同样的作用。</p><p><strong>以下三种情况 &#x2F; 将被视为除法运算符号：</strong></p><ul><li>如果值或值的一部分，是变量或者函数的返回值</li><li>如果值被圆括号包裹</li><li>如果值是算数表达式的一部分</li></ul><p>例</p><pre><code>$width: 1000px;div &#123;    font: 16px/30px Arial, Helvetica, sans-serif; // 不运算    width: ($width/2); // 使用变量与括号    z-index: round(10)/2; // 使用了函数    height: (500px/2); // 使用了括号    margin-left: 5px + 8px/2px; // 使用了+表达式&#125;</code></pre><p>如果需要使用变量，同时又要确保 &#x2F; 不做除法运算而是完整地编译到 CSS 文件中，只需要用 #{} 插值语句将变量包裹。</p><h2 id="字符串运算"><a href="#字符串运算" class="headerlink" title="字符串运算"></a>字符串运算</h2><p><code>+</code> 可用于连接字符串</p><p><strong>注意</strong>：如果有引号字符串（位于 + 左侧）连接无引号字符串，运算结果是有引号的，相反，无引号字符串（位于 + 左侧）连接有引号字符串，运算结果则没有引号。</p><p>有问题？？？？   如果有一个值是函数返回的，情况可能不一样</p><p>例如</p><pre><code>.container &#123;    content: &quot;Foo &quot; + Bar;    font-family: sans- + &quot;serif&quot;;&#125;</code></pre><hr><h1 id="SASS-插值语句"><a href="#SASS-插值语句" class="headerlink" title="SASS 插值语句 #{ }"></a>SASS 插值语句 #{ }</h1><p>引入之前的案例发出一个问题</p><p>例如</p><pre><code>p&#123;    font: 16px/30px Arial, Helvetica, sans-serif; &#125;</code></pre><p>如果需要使用变量，同时又要确保 &#x2F; 不做除法运算而是完整地编译到 CSS 文件中，只需要用 #{} 插值语句将变量包裹。</p><p>使用插值语法：</p><pre><code>p &#123;    $font-size: 12px;    $line-height: 30px;    font: #&#123;$font-size&#125;/#&#123;$line-height&#125; Helvetica,    sans-serif;&#125;</code></pre><p>通过 <code>#&#123;&#125;</code> 插值语句可以在选择器、属性名、注释中使用变量：</p><pre><code>$class-name: danger;$attr: color;$author:&#39;老姚&#39;;/*    * 这是文件的说明部分    @author: #&#123;\$author&#125; */a.#&#123;$class-name&#125; &#123;    border-#&#123;$attr&#125;: #F00;&#125;</code></pre><hr><h1 id="sass-常见函数的基本使用"><a href="#sass-常见函数的基本使用" class="headerlink" title="sass 常见函数的基本使用"></a>sass 常见函数的基本使用</h1><p>常见函数简介，更多函数列表可看：<a href="https://sass-lang.com/documentation/modules">https://sass-lang.com/documentation/modules</a> </p><h2 id="Color-颜色函数"><a href="#Color-颜色函数" class="headerlink" title="Color(颜色函数)"></a>Color(颜色函数)</h2><p>sass包含很多操作颜色的函数。例如：lighten() 与 darken()函数可用于调亮或调暗颜色，opacify()函数使颜色透明度减少，transparent()函数使颜色透明度增加，mix()函数可用来混合两种颜色。</p><pre><code>p &#123;    height: 30px;&#125;.p0 &#123;    background-color: #5c7a29;&#125;.p1 &#123;    /*         让颜色变亮        lighten($color, $amount)        $amount 的取值在0% - 100% 之间     */    background-color: lighten(#5c7a29, 30%);&#125;.p2 &#123;    // 让颜色变暗  通常使用color.scale()代替该方案    background-color: darken(#5c7a29, 15%);&#125;.p3 &#123;    // 降低颜色透明度  通常使用color.scale()代替该方案    // background-color: opacify(#5c7a29,0.5);    background-color: opacify(rgba(#5c7a29, 0.1), 0.5);&#125;</code></pre><p>使用</p><pre><code>&lt;p&gt;&lt;/p&gt;&lt;p class=&quot;p0&quot;&gt;&lt;/p&gt;&lt;p class=&quot;p1&quot;&gt;&lt;/p&gt;&lt;p class=&quot;p2&quot;&gt;&lt;/p&gt;&lt;p class=&quot;p3&quot;&gt;&lt;/p&gt;</code></pre><h2 id="String（字符串函数）"><a href="#String（字符串函数）" class="headerlink" title="String（字符串函数）"></a>String（字符串函数）</h2><p>Sass有许多处理字符串的函数，比如向字符串添加引号的quote()、获取字符串长度的string-length()和将内容插入字符串给定位置的string-insert()。</p><p>例</p><pre><code>p &#123;    &amp;:after &#123;        content: quote(这是里面的内容);    &#125;    background-color: unquote($string: &quot;#F00&quot;);    z-index:str-length(&quot;sass学习&quot;);&#125;</code></pre><h2 id="Math-数值函数"><a href="#Math-数值函数" class="headerlink" title="Math(数值函数)"></a>Math(数值函数)</h2><p>数值函数处理数值计算，例如：percentage()将无单元的数值转换为百分比，round()将数字四舍五入为最接近的整数，min()和max()获取几个数字中的最小值或最大值，random()返回一个随机数。</p><p>例如</p><pre><code>p &#123;    z-index: abs($number: -15); // 15    z-index: ceil(5.8); //6    z-index: max(5, 1, 6, 8, 3); //8    opacity: random(); // 随机 0-1&#125;</code></pre><h2 id="List函数"><a href="#List函数" class="headerlink" title="List函数"></a>List函数</h2><p>List函数操作List，length()返回列表长度，nth()返回列表中的特定项，join()将两个列表连接在一起，append()在列表末尾添加一个值。</p><p>例如：</p><pre><code>p &#123;    z-index: length(12px); //1    z-index: length(12px 5px 8px); //3    z-index: index(a b c d, c); //3    padding: append(10px 20px, 30px); // 10px 20px 30px    color: nth($list: red blue green, $n: 2); // blue&#125;</code></pre><h2 id="Map函数"><a href="#Map函数" class="headerlink" title="Map函数"></a>Map函数</h2><p>Map函数操作Map，map-get()根据键值获取map中的对应值，map-merge()来将两个map合并成一个新的map，map-values()映射中的所有值。</p><pre><code>$font-sizes: (&quot;small&quot;: 12px, &quot;normal&quot;: 18px, &quot;large&quot;: 24px);$padding:(top:10px, right:20px, bottom:10px, left:30px);p &#123;    font-size: map-get($font-sizes, &quot;normal&quot;); //18px    @if map-has-key($padding, &quot;right&quot;) &#123;        padding-right: map-get($padding, &quot;right&quot;);    &#125;    &amp;:after &#123;        content: map-keys($font-sizes) + &quot; &quot;+ map-values($padding) + &quot;&quot;;    &#125;&#125;</code></pre><h2 id="selector选择器函数"><a href="#selector选择器函数" class="headerlink" title="selector选择器函数"></a>selector选择器函数</h2><p>​选择符相关函数可对CSS选择进行一些相应的操作，例如：selector-append()可以把一个选择符附加到另一个选择符，selector-unify()将两组选择器合成一个复合选择器。</p><p>例如</p><pre><code>.header &#123;    background-color: #000;    content: selector-append(&quot;.a&quot;, &quot;.b&quot;, &quot;.c&quot;) + &#39;&#39;;    content: selector-unify(&quot;a&quot;, &quot;.disabled&quot;) + &#39;&#39;;&#125;</code></pre><h2 id="自检函数"><a href="#自检函数" class="headerlink" title="自检函数"></a>自检函数</h2><p>​自检相关函数，例如：feature-exists()检查当前Sass版本是否存在某个特性，variable-exists()检查当前作用域中是否存在某个变量，mixin-exists()检查某个mixin是否存在。</p><p>例如：</p><pre><code>$color:#F00;@mixin padding($left:0, $top:0, $right:0, $bottom:0) &#123;    padding: $top $right $bottom $left;&#125;.container &#123;    @if variable-exists(color) &#123;        color: $color;    &#125;    @else &#123;        content: &quot;$color不存在&quot;;    &#125;    @if mixin-exists(padding) &#123;        @include padding($left: 10px, $right: 10px);    &#125;&#125;</code></pre><p>自检函数通常用在代码的调试上</p><hr><h1 id="sass-流程控制指令-if、-for、-each、-while"><a href="#sass-流程控制指令-if、-for、-each、-while" class="headerlink" title="sass 流程控制指令@if、@for、@each、@while"></a>sass 流程控制指令@if、@for、@each、@while</h1><h2 id="if控制指令"><a href="#if控制指令" class="headerlink" title="@if控制指令"></a>@if控制指令</h2><p>@if()函数允许您根据条件进行分支，并仅返回两种可能结果中的一种。</p><p>语法方式同js的if….else if …else</p><p>看流程图</p><p>代码形式：</p><pre><code>.container&#123;    // 第一种    @if(/* 条件 */)&#123;        // ...    &#125;    // 第二种    @if(/* 条件 */)&#123;        // ...    &#125;@else&#123;        // ...    &#125;        // 第三种    @if(/* 条件 */)&#123;        // ...    &#125;@else if()&#123;        // ...    &#125;@else&#123;        // ...    &#125;&#125;</code></pre><p>例1</p><pre><code>$theme:&quot;green&quot;;.container &#123;    @if $theme==&quot;red&quot; &#123;        color: red;    &#125;    @else if $theme==&quot;blue&quot; &#123;        color: blue;    &#125;    @else if $theme==&quot;green&quot; &#123;        color: green;    &#125;    @else &#123;        color: darkgray;    &#125;&#125;</code></pre><p>例如，定义一个css的三角形@mixin声明</p><pre><code>@mixin triangle($direction:top, $size:30px, $border-color:black) &#123;    width: 0px;    height: 0px;    display: inline-block;    border-width: $size;    border-#&#123;$direction&#125;-width: 0;    @if ($direction==top) &#123;        border-color: transparent transparent $border-color transparent;        border-style: dashed dashed solid dashed;    &#125;    @else if($direction==right) &#123;        border-color: transparent transparent transparent $border-color;        border-style: dashed dashed dashed solid;    &#125;    @else if($direction==bottom) &#123;        border-color: $border-color transparent transparent transparent;        border-style: solid dashed dashed dashed;    &#125;    @else if($direction==left) &#123;        border-color: transparent $border-color transparent transparent;        border-style: dashed solid dashed dashed;    &#125;&#125;</code></pre><p>使用</p><pre><code>.p0 &#123;    @include triangle();&#125;.p1 &#123;    @include triangle(right, 50px, red);&#125;.p2 &#123;    @include triangle(bottom, 50px, blue);&#125;.p3 &#123;    @include triangle(left, 50px, green);&#125;</code></pre><p>html</p><pre><code>&lt;p class=&quot;p0&quot;&gt;&lt;/p&gt;&lt;p class=&quot;p1&quot;&gt;&lt;/p&gt;&lt;p class=&quot;p2&quot;&gt;&lt;/p&gt;&lt;p class=&quot;p3&quot;&gt;&lt;/p&gt;</code></pre><h2 id="for指令"><a href="#for指令" class="headerlink" title="@for指令"></a>@for指令</h2><p>@for 指令可以在限制的范围内重复输出格式，每次按要求（变量的值）对输出结果做出变动。这个指令包含两种格式：@for $var from  through ，或者 @for $var from  to </p><p>区别在于 through 与 to 的含义：</p><ul><li>当使用<code>through</code>时，条件范围包含与的值。</li><li>而使用<code>to</code> 时条件范围只包含的值不包含  的值。</li><li>另外，$var 可以是任何变量，比如 $i； 和  必须是整数值。</li></ul><p>例1</p><pre><code>@for $i from 1 to 4 &#123;    .p#&#123;$i&#125; &#123;        width: 10px * $i;        height: 30px;        background-color: red;    &#125;&#125;@for $i from 1 through 3 &#123;    .p#&#123;$i&#125; &#123;        width: 10px * $i;        height: 30px;        background-color: red;    &#125;&#125;</code></pre><p>使用</p><pre><code>&lt;p class=&quot;p1&quot;&gt;&lt;/p&gt;&lt;p class=&quot;p2&quot;&gt;&lt;/p&gt;&lt;p class=&quot;p3&quot;&gt;&lt;/p&gt;</code></pre><p>例2：加载动画</p><pre><code>#loading &#123;    position: fixed;    top: 200px;    left: 46%;&#125;#loading span &#123;    position: absolute;    width: 20px;    height: 20px;    background: #3498db;    opacity: 0.5;    border-radius: 50%;    animation: loading 1s infinite ease-in-out;&#125;#loading span:nth-child(1) &#123;    left: 0;    animation-delay: 0s;&#125;#loading span:nth-child(2) &#123;    left: 20px;    animation-delay: 0.2s;&#125;#loading span:nth-child(3) &#123;    left: 40px;    animation-delay: 0.4s;&#125;#loading span:nth-child(4) &#123;    left: 60px;    animation-delay: 0.6s;&#125;#loading span:nth-child(5) &#123;    left: 80px;    animation-delay: .8s;&#125;@keyframes loading &#123;    0% &#123;        opacity: 0.3;        transform: translateY(0px);    &#125;    50% &#123;        opacity: 1;        transform: translateY(-20px);        background: green;    &#125;    100% &#123;        opacity: 0.3;        transform: translateY(0px);    &#125;&#125;</code></pre><p>html</p><pre><code>&lt;div id=&quot;loading&quot;&gt;    &lt;span&gt;&lt;/span&gt;    &lt;span&gt;&lt;/span&gt;    &lt;span&gt;&lt;/span&gt;    &lt;span&gt;&lt;/span&gt;    &lt;span&gt;&lt;/span&gt;&lt;/div&gt;</code></pre><p>用@for改进动画部分</p><pre><code>@for $i from 1 to 5 &#123;    #loading span:nth-child(#&#123;$i&#125;) &#123;        left: 20 * ($i - 1) + px;        /* animation-delay: 20 * ($i - 1) / 100 + s; */        animation-delay: unquote($string: &quot;0.&quot;) + ($i - 1) * 2 + s;    &#125;&#125;</code></pre><h2 id="each指令"><a href="#each指令" class="headerlink" title="@each指令"></a>@each指令</h2><p>@each 指令的格式是 $var in , $var 可以是任何变量名，比如 $length 或者 $name，而  是一连串的值，也就是值列表。</p><p>例如做如下效果</p><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAANcAAABICAIAAADqL/d0AAAACXBIWXMAAA7EAAAOxAGVKw4bAAABEElEQVR4nO3csQ3CMBBAUYzYgxGYgZ3SI3p2YgZGYBKzQQpk8Snea0/RJdKXKytjznmA1LF+AVAhf0CF9FRIT4X0VEhPhfRUSE+F9FRIT4X0VEhPhfRUSE+F9FRI7/TNQ2PsTdddmx33vUXztmbRr77mcH2/dqbP82XVosd47Ey3ua1atIqzkJ4K6amQngrpqZCeCumpkJ4K6amQ3vCHEHLOQnoqpKdCeiqkp0J6KqSnQnoqpKdCeiqkp0J6KqSnQnoqpKdCeiqkp0J6KqSnQnoqpKdCeiqkp0J6KqSnQnoqpKdCeiqkp0J6KqSnQnoqpKdCeiqkp0J6KqSnQnoqpKdCeiqkp0J6KqSnQnoqpPcBXV4Ti47PTEgAAAAASUVORK5CYII=" alt="image-20211129101633273"></p><p>普通CSS的写法</p><pre><code>p&#123;    width: 10px;    height: 10px;    display: inline-block;    margin: 10px;&#125;.p0&#123;    background-color: red;&#125;.p1&#123;    background-color: green;&#125;.p2&#123;    background-color: blue;&#125;.p3&#123;    background-color:turquoise;&#125;.p4&#123;    background-color: darkmagenta;&#125;</code></pre><p>用@each改进</p><pre><code>$color-list:red green blue turquoise darkmagenta;@each $color in $color-list &#123;    $index: index($color-list, $color);    .p#&#123;$index - 1&#125; &#123;        background-color: $color;    &#125;&#125;</code></pre><h2 id="while-指令"><a href="#while-指令" class="headerlink" title="@while 指令"></a>@while 指令</h2><p>@while 指令重复输出格式直到表达式返回结果为 false。这样可以实现比 @for 更复杂的循环。</p><p>用sass实现bootstrap中css的这么一段代码</p><p><a href="https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.css">https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.css</a> </p><pre><code>.col-sm-12 &#123;    width: 100%;&#125;.col-sm-11 &#123;    width: 91.66666667%;&#125;.col-sm-10 &#123;    width: 83.33333333%;&#125;.col-sm-9 &#123;    width: 75%;&#125;.col-sm-8 &#123;    width: 66.66666667%;&#125;.col-sm-7 &#123;    width: 58.33333333%;&#125;.col-sm-6 &#123;    width: 50%;&#125;.col-sm-5 &#123;    width: 41.66666667%;&#125;.col-sm-4 &#123;    width: 33.33333333%;&#125;.col-sm-3 &#123;    width: 25%;&#125;.col-sm-2 &#123;    width: 16.66666667%;&#125;.col-sm-1 &#123;    width: 8.33333333%;&#125;</code></pre><p>用@while实现</p><pre><code>$column:12;@while $column&gt;0 &#123;    .col-sm-#&#123;$column&#125; &#123;        width: $column / 12 * 100%;        // width: $column / 12 * 100 + %; 会标红        width: $column / 12 * 100#&#123;&quot;%&quot;&#125;;        width: unquote($string: $column / 12 * 100 + &quot;%&quot;);    &#125;    $column:$column - 1;&#125;</code></pre>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>js知识点</title>
      <link href="/2022/07/29/js-mian-shi-ti/"/>
      <url>/2022/07/29/js-mian-shi-ti/</url>
      
        <content type="html"><![CDATA[<h2 id="1-原型、构造函数、实例"><a href="#1-原型、构造函数、实例" class="headerlink" title="1.原型、构造函数、实例"></a>1.原型、构造函数、实例</h2><ol><li><p>原型：一个对象，用于实现对象的属性继承，可以理解为对象的父亲，在FireFox和Chrome中，每个JavaScript对象都可以通过obj.______proto______进行访问。</p></li><li><p>构造函数：可通过new创建一个新对象的函数。</p></li><li><p>实例：通过构造函数和new创建出的对象便是实例，实例通过______proto______指向原型，通过constructor指向构造函数。</p><pre class=" language-javascript"><code class="language-javascript">实例<span class="token punctuation">.</span>__proto__ <span class="token operator">===</span> 原型原型<span class="token punctuation">.</span>constructor <span class="token operator">===</span> 构造函数构造函数<span class="token punctuation">.</span>prototype <span class="token operator">===</span> 原型<span class="token comment" spellcheck="true">// 这条线其实是是基于原型进行获取的，可以理解成一条基于原型的映射线</span><span class="token comment" spellcheck="true">// 例如: </span><span class="token comment" spellcheck="true">// const o = new Object()</span><span class="token comment" spellcheck="true">// o.constructor === Object   --> true</span><span class="token comment" spellcheck="true">// o.__proto__ = null;</span><span class="token comment" spellcheck="true">// o.constructor === Object   --> false</span><span class="token comment" spellcheck="true">// 注意: 其实实例上并不是真正有 constructor 这个指针，它其实是从原型链上获取的</span><span class="token comment" spellcheck="true">//      instance.hasOwnProperty('constructor') === false   (感谢 刘博海 Brian 童鞋🥳)</span>实例<span class="token punctuation">.</span>constructor <span class="token operator">===</span> 构造函数</code></pre><p>![](img&#x2F;截屏2021-12-09 下午3.32.41.png)</p></li></ol><h2 id="2-原型链"><a href="#2-原型链" class="headerlink" title="2.原型链"></a>2.原型链</h2><p>原型链由原型对象组成，每个对象都有______proto______属性，指向了创建该对象的构造函数的原型，______proto______将对象连接起来组成了原型链，是一个用来实现继承和共享属性的有限的对象链。</p><ol><li>属性查找机制：当查找对象的属性时，如果实例对象自身不存在该属性，则沿着原型链往上一级查找，找到时则输出，不存在时，则继续沿着原型链往上一级查找，直至最顶级的原型对象Object.prototype，如还没找到，则输出undefined。</li><li>属性修改机制：只会修改实例对象本身的属性，如果不存在，则进行添加该属性，如果需要修改原型的属性时，则可以用：<code>x.prototype.x = 2;</code>，但是这样会导致所有继承于该对象的实例的属性发生改变。</li></ol><h2 id="3-执行上下文"><a href="#3-执行上下文" class="headerlink" title="3.执行上下文"></a>3.执行上下文</h2><p>执行上下文可以简单理解为一个对象</p><ul><li>它包含三个部分，分别为：变量对象（VO）、作用链域（词法作用域）、this指向</li><li>他分成三个类型，分别为：全局执行上下文、函数执行上下文、eval执行上下文</li></ul><p>代码执行过程主要为：</p><ol><li>创建全局上下文(global EC)</li><li>全局执行上下文(caller)逐行自上而下执行，遇到函数时，函数执行上下文(callee)被<code>push</code>到执行栈顶层</li><li>函数执行上下文被激活，成为active EC，开始执行函数中的代码，caller被挂起</li><li>函数执行完后，callee被<code>pop</code>移除出执行栈，控制权交还全局上下文(caller)，继续执行</li></ol><h2 id="4-变量对象"><a href="#4-变量对象" class="headerlink" title="4.变量对象"></a>4.变量对象</h2><p>变量对象是执行上下文中的一部分，可以抽象为一种数据作用域，其实也可以理解成一个简单的对象，存储着该执行上下文中的所有变量和函数声明(不包含函数表达式)。</p><p>活动对象 (AO): 当变量对象所处的上下文为 active EC 时，称为活动对象。</p><h2 id="5-作用域"><a href="#5-作用域" class="headerlink" title="5.作用域"></a>5.作用域</h2><p>执行上下文中还包含作用域链。理解作用域之前，先介绍下作用域。作用域其实可理解为该上下文中声明的变量和声明的作用范围。可分为块级作用域和函数作用域<br>特性：</p><ul><li>声明提前：一个声明在函数体内都是可见的，函数优先于变量</li><li>非匿名自执行函数，函数变量为只读状态，无法修改</li></ul><h2 id="6-作用链域"><a href="#6-作用链域" class="headerlink" title="6.作用链域"></a>6.作用链域</h2><p>我们可以在执行上下文中访问到父级甚至全局的变量，这要归功于作用链域。作用链域可以理解为一组对象列表，包含父级和自身的变量对象，因此我们能通过作用域链访问到父级里声明的变量或函数。</p><p>作用链域由两部分组成：</p><ol><li><code>[[scope]]</code>属性：指向父级变量对象和作用域链，也就是包含了父级的<code>[[scope]]</code>和AO</li><li>AO：自身活动对象</li></ol><p>如此，<code>[[scope]]</code>包含了<code>[[scope]]</code>，便自上而下形成了一条作用链域</p><h2 id="7-闭包"><a href="#7-闭包" class="headerlink" title="7.闭包"></a>7.闭包</h2><p>闭包属于一种特殊的作用域，称为静态作用域，它的定义可以理解为：在父函数被销毁的情况下，返回出的子函数的<code>[[scope]]</code>中仍然保留着父级的单变量对象和作用链域，因此可以继续访问到父级的变量对象，这样的函数称为闭包。</p><p>闭包经典问题：多个子函数的<code>[[scope]]</code>都是同时指向父级，是完全共享的。因此当父级的变量对象被修改时，所有子函数都受到影响。</p><p>解决：</p><ul><li>变量可以通过函数传参的形式传入，避免使用默认的<code>[[scope]]</code>向上查找。</li><li>使用setTimeOut包裹，通过第三个参数传入</li><li>使用块级作用域，让变量成为自己上下文的属性，避免共享</li></ul><h2 id="8-script的引入方式"><a href="#8-script的引入方式" class="headerlink" title="8.script的引入方式"></a>8.script的引入方式</h2><ol><li>html静态<code>&lt;script&gt;</code>引入</li><li>js动态插入<code>&lt;script&gt;</code></li><li><code>&lt;script defer&gt;</code>延迟加载，元素解析完成后执行</li><li><code>&lt;script async&gt;</code>异步加载，但执行时会阻塞元素渲染</li></ol><h2 id="9-对象的拷贝"><a href="#9-对象的拷贝" class="headerlink" title="9.对象的拷贝"></a>9.对象的拷贝</h2><p>浅拷贝: 以赋值的形式拷贝引用对象，仍指向同一个地址，<strong>修改时原对象也会受到影响</strong></p><ul><li><code>Object.assign</code></li><li>展开运算符(…)</li></ul><p>深拷贝: 完全拷贝一个新对象，<strong>修改时原对象不再受到任何影响</strong></p><ul><li><pre class=" language-javascript"><code class="language-javascript">JSON<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>JSON<span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre><p>: 性能最快</p><ul><li>具有循环引用的对象时，报错</li><li>当值为函数、<code>undefined</code>、或<code>symbol</code>时，无法拷贝</li></ul></li><li><p>递归进行逐一赋值</p></li></ul><h2 id="10-new运算符的执行过程"><a href="#10-new运算符的执行过程" class="headerlink" title="10.new运算符的执行过程"></a>10.new运算符的执行过程</h2><ol><li>新生成一个对象</li><li>链接到原型<code>obj.______proto______ = Con.prototype</code></li><li>绑定this：apply</li><li>返回新对象，如果构造函数有自己return时，则返回该值</li></ol><h2 id="11-instanceof原理"><a href="#11-instanceof原理" class="headerlink" title="11.instanceof原理"></a>11.instanceof原理</h2><p>能在实例的原型对象链中找到该构造函数的prototype属性所指向的原型对象，就返回true。</p><pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">// __proto__: 代表原型对象链</span>instance<span class="token punctuation">.</span><span class="token punctuation">[</span>__proto__<span class="token operator">...</span><span class="token punctuation">]</span> <span class="token operator">===</span> instance<span class="token punctuation">.</span>constructor<span class="token punctuation">.</span>prototype<span class="token comment" spellcheck="true">// return true</span></code></pre><h2 id="12-代码的复用"><a href="#12-代码的复用" class="headerlink" title="12.代码的复用"></a>12.代码的复用</h2><p>当发现任何代码开始写第二遍时，就要开始考虑如何复用。一般有以下的方式:</p><ul><li>函数封装</li><li>继承</li><li>复制<code>extend</code></li><li>混入<code>mixin</code></li><li>借用<code>apply/call</code></li></ul><h2 id="13-继承"><a href="#13-继承" class="headerlink" title="13.继承"></a>13.继承</h2><p>在js中，继承一般指的是原型链继承，也就是通过指定原型，并可以通过原型链继承原型上的属性或者方法。</p><ul><li>&#x3D;&#x3D;<strong>最优化：圣杯模式</strong>&#x3D;&#x3D;</li><li>使用 ES6 的语法糖 <code>class / extends</code></li></ul><h2 id="14-类型转换"><a href="#14-类型转换" class="headerlink" title="14.类型转换"></a>14.类型转换</h2><p>JS 中在使用运算符号或者对比符时，会自带隐式转换，规则如下:</p><ul><li>-、*、&#x2F;、% ：一律转换成数值后计算</li><li>+：<ul><li>数字 + 字符串 &#x3D; 字符串， 运算顺序是从左到右</li><li>数字 + 对象， 优先调用对象的<code>valueOf</code> -&gt; <code>toString</code></li><li>数字 + <code>boolean/null</code> -&gt; 数字</li><li>数字 + <code>undefined</code> -&gt; <code>NaN</code></li></ul></li><li><code>[1].toString() === &#39;1&#39;</code></li><li><code>&#123;&#125;.toString() === &#39;[object object]&#39;</code></li><li><code>NaN</code> !&#x3D;&#x3D; <code>NaN</code> 、<code>+undefined 为 NaN</code></li></ul><h2 id="15-类型判断"><a href="#15-类型判断" class="headerlink" title="15.类型判断"></a>15.类型判断</h2><p>判断 Target 的类型，单单用 typeof 并无法完全满足，这其实并不是 bug，本质原因是 JS 的万物皆对象的理论。因此要真正完美判断时，我们需要区分对待:</p><ul><li>基本类型(<code>null</code>)：使用 <code>String(null)</code></li><li>基本类型(<code>string / number / boolean / undefined</code>) + <code>function</code>：直接使用 <code>typeof</code>即可</li><li>其余引用类型(<code>Array / Date / RegExp Error</code>)：调用<code>toString</code>后根据<code>[object XXX]</code>进行判断</li></ul><h2 id="16-模块化"><a href="#16-模块化" class="headerlink" title="16.模块化"></a>16.模块化</h2><p>模块化开发在现代开发中已是必不可少的一部分，它大大提高了项目的可维护、可拓展和可协作性。通常，我们 <strong>在浏览器中使用 ES6 的模块化支持，在 Node 中使用 commonjs 的模块化支持。</strong></p><ul><li>分类:<ul><li>es6: <code>import / export</code></li><li>commonjs: <code>require / module.exports / exports</code></li><li>amd: <code>require / defined</code></li></ul></li><li><code>require</code>与<code>import</code>的区别<ul><li><code>require</code>支持 <strong>动态导入</strong>，<code>import</code>不支持，正在提案 (babel 下可支持)</li><li><code>require</code>是 <strong>同步</strong> 导入，<code>import</code>属于 <strong>异步</strong> 导入</li><li><code>require</code>是 <strong>值拷贝</strong>，导出值变化不会影响导入值；<code>import</code>指向 <strong>内存地址</strong>，导入值会随导出值而变化</li></ul></li></ul><h2 id="17-防抖与节流"><a href="#17-防抖与节流" class="headerlink" title="17.防抖与节流"></a>17.防抖与节流</h2><p>防抖与节流函数是一种最常用的 <strong>高频触发优化方式</strong>，能对性能有较大的帮助。</p><ul><li>**防抖 (debounce)**：将多次高频操作优化为只在最后一次执行，通常使用的场景是：用户输入，只需再输入完成后做一次输入校验即可。</li><li>**节流(throttle)**：每隔一段时间后执行一次，也就是降低频率，将高频操作优化成低频操作，通常使用场景: 滚动条事件 或者resize事件，通常每隔100~500ms执行一次即可。</li></ul><h2 id="18-函数执行改变this"><a href="#18-函数执行改变this" class="headerlink" title="18.函数执行改变this"></a>18.函数执行改变this</h2><p>由于js的设计原理，在函数中可以引用运行环境中的变量，因此就需要一个机制来让我们可以在函数体内部获取当前的运行环境，这便是this。</p><p><a href="https://www.cnblogs.com/pssp/p/5216085.html">讲得很好的this指向</a></p><p>要明白this的指向，就要弄清楚函数的运行环境，也就是 是谁调用了函数。</p><p><code>obj.fn()</code> 便是obj调用了函数，既函数中<code>this === obj</code></p><p><code>fn()</code>在此处可以看作window.fn()，因此<code>this === window</code></p><p>但这种机制并不完全能满足我们的业务需求，因此提供了三种方式可以手动修改 <code>this</code> 的指向:</p><ul><li><code>call: fn.call(target, 1, 2)</code></li><li><code>apply: fn.apply(target, [1, 2])</code></li><li><code>bind: fn.bind(target)(1,2)</code></li></ul><p><a href="https://blog.csdn.net/hexinyu_1022/article/details/82795517">讲得很好的call、apply、bind博客1</a></p><h2 id="19"><a href="#19" class="headerlink" title="19."></a>19.</h2><h2 id="20-抽象语法树-Abstract-Syntax-Tree"><a href="#20-抽象语法树-Abstract-Syntax-Tree" class="headerlink" title="20.抽象语法树 (Abstract Syntax Tree)"></a>20.抽象语法树 (Abstract Syntax Tree)</h2><p>AST，是将代码逐字母解析成树状对象的形式。</p><p>这是语言之间的转换、代码语法检查、代码风格检查、代码格式化、代码高亮、代码错误提示、代码自动补全等等的基础</p><h2 id="21-函数柯里化"><a href="#21-函数柯里化" class="headerlink" title="21.函数柯里化"></a>21.函数柯里化</h2><p>在一个函数中，首先填充几个参数，然后再返回一个新的函数的技术，称为函数的柯里化。通常可以在不入侵函数的前提下，为函数预设通用参数，供多次重复调用。</p><h1 id="————————————————————————————"><a href="#————————————————————————————" class="headerlink" title="————————————————————————————"></a>————————————————————————————</h1><p>JS基础问题</p><h1 id="1-数据类型"><a href="#1-数据类型" class="headerlink" title="1.数据类型"></a>1.数据类型</h1><h3 id="1-数据类型-1"><a href="#1-数据类型-1" class="headerlink" title="1.数据类型"></a>1.数据类型</h3><p>JS 7种原始值：null、undefined、number、boolean、string、bigint、symbol</p><p>引用数据类型：Object(包括普通对象-Object、数组对象-Array、正则对象-RegExp、日期对象-Date、数学函数-Math、函数对象-Function)</p><h3 id="2-函数参数传递问题"><a href="#2-函数参数传递问题" class="headerlink" title="2.函数参数传递问题"></a>2.函数参数传递问题</h3><img src="img/截屏2021-12-09 下午10.44.46.png" style="zoom: 50%;" /><p>因为函数参数在传递时一般是传递对象在堆中的内存地址，因此，在p1传递进test的其实是p1的地址，实际上只修改了p1.age，但随后person变成了另一块内存空间的地址，并且在最后将这另外一份内存空间的地址返回，赋给了p2。</p><h3 id="3-null是对象吗？为什么？"><a href="#3-null是对象吗？为什么？" class="headerlink" title="3.null是对象吗？为什么？"></a>3.null是对象吗？为什么？</h3><p>null不是对象，虽然 typeof null 会输出 object，但是这只是 JS 存在的一个悠久 Bug。在 JS 的最初版本中使用的是 32 位系统，为了性能考虑使用低位存储变量的类型信息，000 开头代表是对象然而 null 表示为全零，所以将它错误的判断为 object 。</p><h3 id="4-’1’-toString-为什么可以调用"><a href="#4-’1’-toString-为什么可以调用" class="headerlink" title="4.’1’.toString()为什么可以调用"></a>4.’1’.toString()为什么可以调用</h3><img src="img/截屏2021-12-09 下午10.54.11.png" style="zoom:50%;" /><h3 id="5-0-1-0-2为什么不等于0-3"><a href="#5-0-1-0-2为什么不等于0-3" class="headerlink" title="5.  0.1+0.2为什么不等于0.3"></a>5.  0.1+0.2为什么不等于0.3</h3><p>0.1和0.2在转换成二进制后会无限循环，由于标准位数的限制后面多余的位数会被截掉，此时就已经出现了精度的损失，相加后因浮点数小数位的限制而截断的二进制数字在转换为十进制就会变成0.30000000000000004。</p><h3 id="6-BigInt"><a href="#6-BigInt" class="headerlink" title="6.BigInt"></a>6.BigInt</h3><p><a href="%E7%9C%8BBigInt%E9%82%A3%E4%B8%80%E5%9D%97">https://juejin.cn/post/6844903974378668039#heading-4</a></p><h1 id="2-数据检测"><a href="#2-数据检测" class="headerlink" title="2.数据检测"></a>2.数据检测</h1><h3 id="1-typeof-是否能正确判断类型"><a href="#1-typeof-是否能正确判断类型" class="headerlink" title="1.typeof 是否能正确判断类型"></a>1.typeof 是否能正确判断类型</h3><p>对于原始类型来说，除了 null 都可以调用typeof显示正确的类型。</p><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">typeof</span> <span class="token number">1</span> <span class="token comment" spellcheck="true">// 'number'</span><span class="token keyword">typeof</span> <span class="token string">'1'</span> <span class="token comment" spellcheck="true">// 'string'</span><span class="token keyword">typeof</span> undefined <span class="token comment" spellcheck="true">// 'undefined'</span><span class="token keyword">typeof</span> <span class="token boolean">true</span> <span class="token comment" spellcheck="true">// 'boolean'</span><span class="token keyword">typeof</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment" spellcheck="true">// 'symbol'</span></code></pre><p>但对于引用数据类型，除了函数之外，都会显示”object”。</p><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">typeof</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token comment" spellcheck="true">// 'object'</span><span class="token keyword">typeof</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 'object'</span><span class="token keyword">typeof</span> console<span class="token punctuation">.</span>log <span class="token comment" spellcheck="true">// 'function'</span></code></pre><p>因此采用typeof判断对象数据类型是不合适的，采用instanceof会更好，instanceof的原理是基于原型链的查询，只要处于原型链中，判断永远为true</p><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">const</span> Person <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">const</span> p1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span>p1 <span class="token keyword">instanceof</span> <span class="token class-name">Person</span> <span class="token comment" spellcheck="true">// true</span><span class="token keyword">var</span> str1 <span class="token operator">=</span> <span class="token string">'hello world'</span>str1 <span class="token keyword">instanceof</span> <span class="token class-name">String</span> <span class="token comment" spellcheck="true">// false</span><span class="token keyword">var</span> str2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span><span class="token string">'hello world'</span><span class="token punctuation">)</span>str2 <span class="token keyword">instanceof</span> <span class="token class-name">String</span> <span class="token comment" spellcheck="true">// true</span></code></pre><h3 id="2-instanceof能否判断基本数据类型"><a href="#2-instanceof能否判断基本数据类型" class="headerlink" title="2.instanceof能否判断基本数据类型"></a>2.instanceof能否判断基本数据类型</h3><h3 id="3-手动实现instanceof"><a href="#3-手动实现instanceof" class="headerlink" title="3.手动实现instanceof"></a>3.手动实现instanceof</h3><p>核心：原型链的向上查找功能</p><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">myInstanceOf</span><span class="token punctuation">(</span>left<span class="token punctuation">,</span> right<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">//判断是否基本数据类型，如果是则返回false</span>  <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> left <span class="token operator">!==</span> <span class="token string">'object'</span> <span class="token operator">||</span> left <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>  <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">//getPrototypeOf是Object对象自带的一个方法，能拿到参数的原型对象</span>  <span class="token keyword">let</span> proto <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">getPrototypeOf</span><span class="token punctuation">(</span>left<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//如果查找到尽头还没有找到</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>proto <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>      <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//找到相同的原型对象</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>proto <span class="token operator">==</span> right<span class="token punctuation">.</span>prototype<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>      <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//顺着原型链往上</span>    proto <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">getPrototypeOf</span><span class="token punctuation">(</span>proto<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span> <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//测试</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">myInstanceof</span><span class="token punctuation">(</span><span class="token string">"111"</span><span class="token punctuation">,</span> String<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//false</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">myInstanceof</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span><span class="token string">"111"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> String<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//true</span></code></pre><h3 id="4-Object-is和-x3D-x3D-x3D-的区别"><a href="#4-Object-is和-x3D-x3D-x3D-的区别" class="headerlink" title="4.Object.is和&#x3D;&#x3D;&#x3D;的区别"></a>4.Object.is和&#x3D;&#x3D;&#x3D;的区别</h3><p>Object在严格等于的基础上修复了一些特殊情况下的失误，具体来说就是+0和-0，NaN和NaN。 源码如下：</p><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">is</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span>x <span class="token operator">===</span> y<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//运行到1/x === 1/y的时候x和y都为0，但是1/+0 = +Infinity， 1/-0 = -Infinity, 是不一样的</span>    <span class="token keyword">return</span> x <span class="token operator">!==</span> <span class="token number">0</span> <span class="token operator">||</span> y <span class="token operator">!==</span> <span class="token number">0</span> <span class="token operator">||</span> <span class="token number">1</span> <span class="token operator">/</span> x <span class="token operator">===</span> <span class="token number">1</span> <span class="token operator">/</span> y<span class="token punctuation">;</span>  <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span> <span class="token keyword">else</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//NaN===NaN是false,这是不对的，我们在这里做一个拦截，x !== x，那么一定是 NaN, y 同理</span>    <span class="token comment" spellcheck="true">//两个都是NaN的时候返回true</span>    <span class="token keyword">return</span> x <span class="token operator">!==</span> x <span class="token operator">&amp;&amp;</span> y <span class="token operator">!==</span> y<span class="token punctuation">;</span>  <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span></code></pre><h1 id="3-数据类型转换"><a href="#3-数据类型转换" class="headerlink" title="3.数据类型转换"></a>3.数据类型转换</h1><h3 id="1-x3D-x3D-结果是什么？为什么？"><a href="#1-x3D-x3D-结果是什么？为什么？" class="headerlink" title="1.[] &#x3D;&#x3D; ![]结果是什么？为什么？"></a>1.[] &#x3D;&#x3D; ![]结果是什么？为什么？</h3><p>等号左右两边进行转换，[]转化为数字0，![]首先转化为布尔型，由于[]作为一个引用类型转换为布尔值true</p><p>因此&#x3D;&#x3D;左右两边分别为：0 &#x3D;&#x3D; false，false转换为数字0，结果为true</p><h3 id="2-JS中类型转换"><a href="#2-JS中类型转换" class="headerlink" title="2.JS中类型转换"></a>2.JS中类型转换</h3><p>JS中，类型转换只有三种：</p><ul><li>转换成数字</li><li>转换成布尔值</li><li>转换成字符串</li></ul><p>转换具体规则如下:</p><p>​“Boolean 转字符串”这行结果指的是 true 转字符串的例子</p><img src="img/img1.png" style="zoom:70%;" /><p>3.<code>==</code>与<code>===</code>区别</p><p><code>===</code>叫严格要求，不仅左右两边值要相等，类型也要相等，例如<code>&#39;1&#39;===1</code>的结果是false，因为一边是<code>string</code>，另一边是<code>number</code>。</p><p><code>==</code>不像<code>===</code>一样严格，对于一般情况，只要值相等，就返回true，但<code>==</code>还涉及一些类型转换，它的转换规则如下：</p><ul><li>两边的类型是否相同，相同的话就比较值的大小，例如<code>1==2</code>，返回false</li><li>判断的是否是null和undefined，是的话返回true</li><li>判断的类型是否是String和Number，是的话，就把String转为Number再进行比较</li><li>判断其中一方是否是Boolean，是的话就把Boolean转为Number再进行比较</li><li>如果一方是否为Object，且另一方为String、Number或Symbol，会将Object转换成字符串，再进行比较</li></ul><pre class=" language-javascript"><code class="language-javascript">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>a<span class="token punctuation">:</span> <span class="token number">1</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span> <span class="token operator">==</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//false</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>a<span class="token punctuation">:</span> <span class="token number">1</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span> <span class="token operator">==</span> <span class="token string">"[object Object]"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//true</span></code></pre><h3 id="4-对象转原始类型是根据什么流程运行的"><a href="#4-对象转原始类型是根据什么流程运行的" class="headerlink" title="4.对象转原始类型是根据什么流程运行的"></a>4.对象转原始类型是根据什么流程运行的</h3><p>对象转原始数据类型，会调用内置的<code>ToPrimitive</code>函数，该函数逻辑如下：</p><ol><li>如果<code>Symbol.ToPrimitive()</code>，优先调用再返回；</li><li>调用<code>valueOf()</code>，如果转换为原始类型，则返回；</li><li>调用<code>toString()</code>，如果转换为原始类型，则返回</li><li>如果上述都没有返回原始类型，则报错</li></ol><h3 id="5-如何让if-a-x3D-x3D-1-amp-amp-a-x3D-x3D-2-条件成立？"><a href="#5-如何让if-a-x3D-x3D-1-amp-amp-a-x3D-x3D-2-条件成立？" class="headerlink" title="5.如何让if(a &#x3D;&#x3D; 1 &amp;&amp; a &#x3D;&#x3D; 2)条件成立？"></a>5.如何让if(a &#x3D;&#x3D; 1 &amp;&amp; a &#x3D;&#x3D; 2)条件成立？</h3><h1 id="4-对闭包的理解"><a href="#4-对闭包的理解" class="headerlink" title="4.对闭包的理解"></a>4.对闭包的理解</h1><h3 id="1-什么是闭包"><a href="#1-什么是闭包" class="headerlink" title="1.什么是闭包"></a>1.什么是闭包</h3><p>红宝书：闭包就是有权访问另一个函数作用域中的变量的函数。</p><p>MDN 对闭包的定义：闭包是指那些能够访问自由变量的函数。 （其中自由变量，指在函数中使用的，但既不是函数参数arguments也不是函数的局部变量的变量，其实就是另外一个函数作用域中的变量）</p><h3 id="2-闭包产生的原因"><a href="#2-闭包产生的原因" class="headerlink" title="2.闭包产生的原因"></a>2.闭包产生的原因</h3><p>首先要明白作用域链的概念：在ES5中只存在两种作用域，全局作用域和函数作用域，当访问一个变量时，解释器会首先在当前作用域查找标示符，如果没有找到，就去父作用域找，直到找到该变量的标示符或者不在父作用域中，这就是作用域链，值得注意的是，每一个子函数都会拷贝上级的作用域，形成一个作用域的链条。</p><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token keyword">function</span> <span class="token function">f1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>  <span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">2</span>  <span class="token keyword">function</span> <span class="token function">f2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//3</span>  <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span></code></pre><p>在上述代码中，f1的作用域指向全局作用域(window)和它本身，而f2的作用域指向全局作用域(window)、f1、和它本身，而且作用域是从最底层向上找，直到找到全局作用域window为止，如果全局还没有的话就会报错。就这么简单一件事情！</p><p>闭包产生的本质就是，当前环境中存在指向父级作用域的引用。还是举上面的例子:</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>前端安全</title>
      <link href="/2022/07/29/qian-duan-an-quan/"/>
      <url>/2022/07/29/qian-duan-an-quan/</url>
      
        <content type="html"><![CDATA[<h2 id="1-XSS攻击"><a href="#1-XSS攻击" class="headerlink" title="1.XSS攻击"></a>1.XSS攻击</h2><h4 id="什么是XSS攻击，能做什么"><a href="#什么是XSS攻击，能做什么" class="headerlink" title="什么是XSS攻击，能做什么"></a>什么是XSS攻击，能做什么</h4><p>对xss<a href="https://blog.csdn.net/yusimiao/article/details/94352459?spm=1001.2101.3001.6661.1&utm_medium=distribute.pc_relevant_t0.none-task-blog-2~default~CTRLIST~default-1.nonecase&depth_1-utm_source=distribute.pc_relevant_t0.none-task-blog-2~default~CTRLIST~default-1.nonecase">攻击的解释参考</a></p><p>XSS 的本质是因为网站没有对恶意代码进行过滤，与正常的代码混合在一起了，浏览器没有办法分辨哪些脚本是可信的，从而导致了恶意代码的执行。</p><p>XSS攻击：跨站脚本攻击Cross-Site Scripting（跨站脚本攻击）简称 XSS，是一种代码注入攻击，通过注入恶意脚本，使之在用户浏览器上运行，然后利用这些恶意脚本，攻击者可以：</p><ul><li>获取页面数据</li><li>获取用户的敏感信息Cookie、SessionID</li><li>劫持前端逻辑</li><li>发送请求到攻击者自己的网站实现资料的盗取</li><li>偷取网站任意数据</li><li>偷取用户密码和登陆状态</li><li>改变按钮的逻辑</li></ul><h4 id="XSS-常见的注入方法："><a href="#XSS-常见的注入方法：" class="headerlink" title="XSS 常见的注入方法："></a>XSS 常见的注入方法：</h4><ul><li>在 HTML 中内嵌的文本中，恶意内容以 script 标签形成注入。</li><li>在内联的 JavaScript 中，拼接的数据突破了原本的限制（字符串，变量，方法名等）。</li><li>在标签属性中，恶意内容包含引号，从而突破属性值的限制，注入其他属性或者标签。</li><li>在标签的 href、src 等属性中，包含 <code>javascript:</code> (伪协议)等可执行代码。</li></ul><h4 id="XSS攻击类型"><a href="#XSS攻击类型" class="headerlink" title="XSS攻击类型"></a>XSS攻击类型</h4><p>XSS攻击分为三种，分别为反射型、存储型和DOM-based型。</p><p>&#x3D;&#x3D;存储型XSS&#x3D;&#x3D;，它是最危险的一种跨站脚本，相比反射型XSS和DOM型XSS具有更高的隐蔽性，所以危害更大。</p><p>eg：<strong>在评论的时候写script标签，这样数据就是存储在数据库中的，如果该页面要读取出这条有script标签的信息，那么将这个网址发给别人别人也会中招。</strong></p><ul><li>攻击者将恶意代码提交到目标网站数据库中</li><li>客户端最后从服务器得到的就是恶意代码，在浏览器执行的也是该恶意代码</li><li>恶意代码将用户数据发送至攻击者网站</li></ul><p>&#x3D;&#x3D;反射型XSS&#x3D;&#x3D;（有点像那种色情小广告，点进去你就没了）</p><p><strong>通过URL参数直接注入，一般是使用alert来探测站点是否防御，直接攻击的使用src来引入自己的脚本</strong></p><p>eg：<code>http://localhost:1521/?from=&lt;script&gt;alert(1)&lt;/script&gt;</code></p><ul><li>攻击者构建特殊URL，里面包含恶意代码</li><li>当用户打开此URL时，网站的服务端将恶意代码从中取出，并且<strong>拼接在HTML</strong>返回给浏览器（这应该属于后端渲染范围）</li><li>恶意代码被浏览器执行，然后将用户数据发送给攻击者网站</li></ul><p>&#x3D;&#x3D;DOM型XSS&#x3D;&#x3D;（感觉和反射型XSS很像，只不过这个是属于JavaScript的安全漏洞（浏览器的DOM解析），反射型XSS是属于服务端的安全漏洞），所以防范DOM型XSS是前端的责任</p><ul><li>同样的，攻击者构造特殊URL，其中包含恶意代码</li><li>用户打开后，浏览器解析，<strong>JavaScript取出URL</strong>然后执行</li><li>恶意代码被浏览器执行，然后将用户数据发送给攻击者网站</li></ul><h4 id="防范XSS"><a href="#防范XSS" class="headerlink" title="防范XSS"></a>防范XSS</h4><h6 id="常用的防范手段："><a href="#常用的防范手段：" class="headerlink" title="常用的防范手段："></a>常用的防范手段：</h6><ul><li><p><strong>httpOnly:</strong> 在 cookie 中设置 HttpOnly 属性后，js脚本将无法读取到 cookie 信息。</p></li><li><p><strong>输入过滤:</strong> 一般是用于对于输入格式的检查，例如：邮箱，电话号码，用户名，密码……等，按照规定的格式输入。</p></li><li><p>&#x3D;&#x3D;最普遍的做法：&#x3D;&#x3D;<strong>转义 HTML:</strong> 如果拼接HTML是必要的，就需要对于引号，尖括号，斜杠进行转义。</p><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">escape</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        str <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex">/&amp;/g</span><span class="token punctuation">,</span> <span class="token string">"&amp;amp;"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        str <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex">/&lt;/g</span><span class="token punctuation">,</span> <span class="token string">"&amp;lt;"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        str <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex">/>/g</span><span class="token punctuation">,</span> <span class="token string">"&amp;gt;"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        str <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token operator">/</span><span class="token string">"/g, "</span><span class="token operator">&amp;</span>quto<span class="token punctuation">;</span>"<span class="token punctuation">)</span><span class="token punctuation">;</span>        str <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex">/'/g</span><span class="token punctuation">,</span> <span class="token string">"&amp;#39;"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        str <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex">/`/g</span><span class="token punctuation">,</span> <span class="token string">"&amp;#96;"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        str <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex">/\//g</span><span class="token punctuation">,</span> <span class="token string">"&amp;#x2F;"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> str<span class="token punctuation">;</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span></code></pre><img src="../img/截屏2021-12-11 下午7.13.28.png" style="zoom:50%;" /><pre class=" language-javascript"><code class="language-javascript"><span class="token function">escape</span><span class="token punctuation">(</span><span class="token string">'&lt;script>alert(1)&lt;/script>'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//&amp;lt;script&amp;gt;alert(1)&amp;lt;&amp;#x2F;script&amp;gt;</span></code></pre></li><li><p><strong>添加白名单</strong>：对于显示富文本来说，以上方法可能会将需要的格式也过滤掉，这时我们可以添加白名单的方式，其实也就是对匹配到的字段进行处理（使用黑名单也可以，但是黑名单要过滤的标签和标签属性太多了）</p><p>使用已经写好的xss组件<code>npm install xss</code>，使用第三方库xss指定白名单</p><p><a href="https://github.com/leizongmin/js-xss/blob/master/README.zh.md">xss具体文档</a></p><p><a href="https://jsxss.com/zh/index.html">不那么全面但是比较好打开的文档</a></p><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">var</span> xssFilter <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>html<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>html<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token string">''</span><span class="token punctuation">;</span>     <span class="token keyword">var</span> xss <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'xss'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">var</span> ret <span class="token operator">=</span> <span class="token function">xss</span><span class="token punctuation">(</span>html<span class="token punctuation">,</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        whiteList<span class="token punctuation">:</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>          <span class="token comment" spellcheck="true">//只允许img标签，该标签只允许有src属性</span>            img<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'src'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>          <span class="token comment" spellcheck="true">//只允许a标签，该标签只允许有href属性</span>            a<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'href'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>          <span class="token comment" spellcheck="true">//只允许font标签，该标签只允许有size、color属性</span>            font<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'size'</span><span class="token punctuation">,</span> <span class="token string">'color'</span><span class="token punctuation">]</span>        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">,</span>      <span class="token comment" spellcheck="true">//自定义匹配到不在白名单上的标签时的处理方法</span>        onIgnoreTag<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>            <span class="token keyword">return</span> <span class="token string">''</span><span class="token punctuation">;</span>        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>html<span class="token punctuation">,</span> ret<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> ret<span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">;</span></code></pre><p>除了XSS过滤工具，还有<strong>Sanitizer</strong>这个API，可以配置白名单，黑名单，但兼容性很差。</p></li></ul><h6 id="预防存储型XSS和反射型XSS攻击："><a href="#预防存储型XSS和反射型XSS攻击：" class="headerlink" title="预防存储型XSS和反射型XSS攻击："></a>预防存储型XSS和反射型XSS攻击：</h6><ul><li>纯前端渲染（这样就不会拼接html返回了）</li><li>同上面常用的防范手段一样的转义html</li></ul><h6 id="x3D-x3D-预防DOM型XSS攻击-x3D-x3D"><a href="#x3D-x3D-预防DOM型XSS攻击-x3D-x3D" class="headerlink" title="&#x3D;&#x3D;预防DOM型XSS攻击&#x3D;&#x3D;"></a>&#x3D;&#x3D;<strong>预防DOM型XSS攻击</strong>&#x3D;&#x3D;</h6><p>DOM型XSS攻击实际上是JavaScript代码本身不够严谨，</p><ul><li><code>.innerHTML</code>、<code>.outerHTML</code>、<code>document.write()</code> 时要特别小心，不要把不可信的数据作为 HTML 插到页面上，而应尽量使用 <code>.textContent</code>、<code>.setAttribute()</code> 等。（尽量避免这种直接插入式的写法）</li><li>Vue的 <code>v-html</code>也容易导致xss攻击（原理也是innerHTML），与此同时，<code>v-html</code>也会替换掉标签内部子元素，所以 <code>v-html</code>尽量别用</li><li>减少<code>eval()</code>的使用</li></ul><h4 id="CSP内容安全策略"><a href="#CSP内容安全策略" class="headerlink" title="CSP内容安全策略"></a>CSP内容安全策略</h4><h6 id="CSP是什么"><a href="#CSP是什么" class="headerlink" title="CSP是什么"></a>CSP是什么</h6><p>内容安全策略 (<a href="https://developer.mozilla.org/zh-CN/docs/Glossary/CSP">CSP</a>) 是一个额外的安全层，用于检测并削弱某些特定类型的攻击，包括跨站脚本 (<a href="https://developer.mozilla.org/en-US/docs/Glossary/Cross-site_scripting">XSS (en-US)</a>) 和数据注入攻击等。</p><p>CSP 本质上就是建立白名单，开发者明确告诉浏览器哪些外部资源可以加载和执行。我们只需要配置规则，如何拦截是<strong>由浏览器自己实现</strong>的。我们可以通过这种方式来尽量减少 XSS 攻击。</p><h6 id="使用（开启-CSP）"><a href="#使用（开启-CSP）" class="headerlink" title="使用（开启 CSP）"></a>使用（开启 CSP）</h6><ol><li>设置 HTTP Header 中的 <code>Content-Security-Policy</code>（有时你会看到一些关于<code>X-Content-Security-Policy</code>头部的提法, 那是旧版本，你无须再如此指定它）</li></ol><p><a href="https://content-security-policy.com/">Content-Security-Policy的更多属性设置</a></p><pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">//policy参数是一个包含了各种描述你的CSP策略指令的字符串。</span>Content<span class="token operator">-</span>Security<span class="token operator">-</span>Policy<span class="token punctuation">:</span> policy<span class="token comment" spellcheck="true">//只允许加载本站资源</span>Content<span class="token operator">-</span>Security<span class="token operator">-</span>Policy<span class="token punctuation">:</span> <span class="token keyword">default</span><span class="token operator">-</span>src <span class="token string">'self'</span><span class="token comment" spellcheck="true">//允许内容来自信任的域名及其子域名 (域名不必须与CSP设置所在的域名相同)</span>Content<span class="token operator">-</span>Security<span class="token operator">-</span>Policy<span class="token punctuation">:</span> <span class="token keyword">default</span><span class="token operator">-</span>src <span class="token string">'self'</span> <span class="token operator">*</span><span class="token punctuation">.</span>trusted<span class="token punctuation">.</span>com<span class="token comment" spellcheck="true">//允许任何来源的框架</span>Content<span class="token operator">-</span>Security<span class="token operator">-</span>Policy<span class="token punctuation">:</span> children<span class="token operator">-</span>src <span class="token string">'none'</span><span class="token comment" spellcheck="true">//只允许加载https协议的图片</span>Content<span class="token operator">-</span>Security<span class="token operator">-</span>Policy<span class="token punctuation">:</span> img<span class="token operator">-</span>src https<span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span><span class="token operator">*</span><span class="token comment" spellcheck="true">//脚本：只信任当前域名</span><span class="token comment" spellcheck="true">//&lt;object>标签：不信任任何URL，即不加载任何资源</span><span class="token comment" spellcheck="true">//样式表：只信任cdn.example.org和third-party.org 空格的意思是这里要打一个空格但是我的屏幕显示不出来</span><span class="token comment" spellcheck="true">//框架（frame）：必须使用HTTPS协议加载</span><span class="token comment" spellcheck="true">//其他资源：没有限制</span>Content<span class="token operator">-</span>Security<span class="token operator">-</span>Policy<span class="token punctuation">:</span> script<span class="token operator">-</span>src <span class="token string">'self'</span><span class="token punctuation">;</span> object<span class="token operator">-</span>src <span class="token string">'none'</span><span class="token punctuation">;</span> style<span class="token operator">-</span>src cdn<span class="token punctuation">.</span>example<span class="token punctuation">.</span>org空格third<span class="token operator">-</span>party<span class="token punctuation">.</span>org<span class="token punctuation">;</span> child<span class="token operator">-</span>src https<span class="token punctuation">:</span></code></pre><p>每个限制选项可以设置以下几种值，这些值就构成了白名单。</p><blockquote><ul><li>主机名：<code>example.org</code>，<code>https://example.com:443</code></li><li>路径名：<code>example.org/resources/js/</code></li><li>通配符：<code>*.example.org</code>，<code>*://*.example.com:*</code>（表示任意协议、任意子域名、任意端口）</li><li>协议名：<code>https:</code>、<code>data:</code></li><li>关键字<code>&#39;self&#39;</code>：当前域名，需要加引号</li><li>关键字<code>&#39;none&#39;</code>：禁止加载任何外部资源，需要加引号</li></ul></blockquote><p><a href="http://www.ruanyifeng.com/blog/2016/09/csp.html">更多可以收看阮一峰老师的教程</a></p><ol start="2"><li>在HTML的，放到<code>head</code>区域设置 <code>meta</code> 标签的方式 <code>&lt;meta http-equiv=&quot;Content-Security-Policy&quot;&gt;</code></li></ol><h2 id="2-防止SQL注入（SQL-Injection）"><a href="#2-防止SQL注入（SQL-Injection）" class="headerlink" title="2.防止SQL注入（SQL Injection）"></a>2.防止SQL注入（SQL Injection）</h2><h4 id="什么是SQL注入"><a href="#什么是SQL注入" class="headerlink" title="什么是SQL注入"></a>什么是SQL注入</h4><p>没有过滤敏感字符，绑定变量，导致攻击者可以通过sql灵活多变的语法，构造精心巧妙的语句，不择手段，达成目的，或者通过<a href="http://www.2cto.com/os/">系统</a>报错，返回对自己有用的信息。</p><p>eg：<code>select * from users where username=&#39;&#39; or 1=1</code></p><h4 id="防止SQL注入，总的来说有以下几点："><a href="#防止SQL注入，总的来说有以下几点：" class="headerlink" title="防止SQL注入，总的来说有以下几点："></a>防止SQL注入，总的来说有以下几点：</h4><ol><li>永远不要信任用户的输入，要对用户的输入进行校验，可以通过正则表达式，或限制长度，对单引号和双”-“进行转换等。</li><li>永远不要使用动态拼装SQL，可以使用参数化的SQL或者直接使用存储过程进行数据查询存取。</li><li>永远不要使用管理员权限的数据库连接，为每个应用使用单独的权限有限的数据库连接。</li><li>继续校验输入数据中是否包含SQL语句的保留字，如：WHERE，EXEC，DROP等。</li><li>预编译，在SQL映射文件中尽量使用#指示符标识参数位置，避免使用$。</li><li>确认每种数据的类型，比如是数字，数据库则必须使用int类型来存储</li><li>规定数据长度，能在一定程度上防止sql注入</li><li>严格限制数据库权限，能最大程度减少sql注入的危害</li><li>避免直接响应一些sql异常信息，sql发生异常后，自定义异常进行响应</li><li>过滤参数中含有的一些数据库关键词</li></ol><h2 id="3-CSRF"><a href="#3-CSRF" class="headerlink" title="3.CSRF"></a>3.CSRF</h2><h4 id="什么是CSRF"><a href="#什么是CSRF" class="headerlink" title="什么是CSRF"></a>什么是CSRF</h4><p>CSRF（Cross-Site Request Forgery）是一种跨站请求伪造，也被称为one-click-attack或者session riding，通常缩写为CSRF或XSRF，是一种挟持用户在当前已登录的Web应用程序上执行非本意的操作的攻击方式，跟XSS相比，XSS利用的是用户对指定网站的信任，CSRF利用的是网站对用户网页浏览器的信任。</p><p>简单地说，CSRF就是利用用户的登录态发起恶意请求。</p><p><a href="https://www.cnblogs.com/hyddd/archive/2009/04/09/1432744.html">下面的图源自这个大佬</a></p><p><img src="https://taylor12138.gitee.io/2021/03/15/an-quan-wen-ti-hui-zong/csrf.jpg" alt="https://taylor12138.gitee.io/2021/03/15/an-quan-wen-ti-hui-zong/csrf.jpg"></p><h4 id="触发条件："><a href="#触发条件：" class="headerlink" title="触发条件："></a>触发条件：</h4><ul><li>用户登录并且信任网站A，并产生cookie</li><li>未登出A的情况下，访问网站B（此网站虽然是攻击网站，但是它可能是一个存在其他漏洞的可信任的经常被人访问的网站）</li></ul><p>（感觉通俗来讲就是，你在存放重要信息的网站A登录后，没有关闭且 &#x3D;&#x3D;<strong>本地的cookie没有过期</strong>&#x3D;&#x3D;，登陆了另外一个（攻击）网站，&#x3D;&#x3D;<strong>它就会偷你的cookie，冒充你来操作你网站A的账号</strong>&#x3D;&#x3D;）</p><h4 id="常见类型"><a href="#常见类型" class="headerlink" title="常见类型"></a>常见类型</h4><ul><li><p>Get类型的CSRF</p><p>假设网站有一个通过Get请求提交用户评论的接口，那么攻击者就可以在钓鱼网站中加入一个图片，图片的地址就是评论接口</p><pre class=" language-html"><code class="language-html">&lt;img src = "http://www.domain.com/xxx?comment='attack'"></code></pre></li><li><p>POST类型的CSRF</p><pre class=" language-html"><code class="language-html">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://www.domain.com/xxx<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>CSRF<span class="token punctuation">"</span></span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>post<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>comment<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>attack<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>hidden<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">></span></span></code></pre></li><li><p>链接类型的CSRF，上面两种打开网页就中招，这种要点击的，比较low</p></li></ul><p>再来一个生动的例子认识CSRF：</p><p>用户正在登陆银行网页，同时登陆了攻击者的网页，并且银行网页未对csrf攻击进行防护。</p><p>攻击者就可以在网页放一个表单，该表单提交src为<code>http://www.bank.com/api/transfer</code>，body为<code>count=1000&amp;to=Tom</code>。</p><p>倘若是session+cookie，用户打开网页的时候就已经转给Tom1000元了（此时cookie会根据path和domain发现当前访问域名和银行相同，则&#x3D;&#x3D;<strong>携带cookie信息</strong>&#x3D;&#x3D;），由此形成CSRF攻击。</p><h4 id="防御CSRF"><a href="#防御CSRF" class="headerlink" title="防御CSRF"></a>防御CSRF</h4><p>防御CSRF攻击可以遵循以下几种规则：</p><ol><li>Get请求不对数据进行修改</li><li>不让第三方网站访问到Cookie</li><li>阻止第三方网站请求接口</li><li>请求时附带验证信息，例如验证码或者token</li></ol><p>防御措施：</p><ul><li><p>SameSite：可以对Cookie设置SameSite属性，该属性设置Cookie不随着跨域请求发送，可以很大程度减少CSRF的攻击，但是该属性目前不是所有浏览器都兼容。</p><p>它可以设置三个值。</p><ul><li><p>Strict：</p><pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">//Strict最为严格，完全禁止第三方 Cookie，跨站点时，任何情况下都不会发送 Cookie。换言之，只有当前网页的 URL 与请求目标一致，才会带上 Cookie。</span>Set<span class="token operator">-</span>Cookie<span class="token punctuation">:</span> CookieName<span class="token operator">=</span>CookieValue<span class="token punctuation">;</span> SameSite<span class="token operator">=</span>Strict<span class="token punctuation">;</span><span class="token comment" spellcheck="true">//这个规则过于严格，可能造成非常不好的用户体验。比如，当前网页有一个 GitHub 链接，用户点击跳转就不会带有 GitHub 的 Cookie，跳转过去总是未登陆状态。</span></code></pre></li><li><p>Lax</p><pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">//Lax 规则稍稍放宽，大多数情况也是不发送第三方 Cookie，但是导航到目标网址的 Get 请求除外。</span>Set<span class="token operator">-</span>Cookie<span class="token punctuation">:</span> CookieName<span class="token operator">=</span>CookieValue<span class="token punctuation">;</span> SameSite<span class="token operator">=</span>Lax<span class="token punctuation">;</span><span class="token comment" spellcheck="true">//Chrome 计划将 Lax 变为默认设置。这时，网站可以选择显式关闭 SameSite 属性，将其设为 None 。不过，前提是必须同时设置 Secure 属性（Cookie 只能通过 HTTPS 协议发送），否则无效。</span></code></pre></li><li><p>None</p></li></ul><p>下面的设置无效：</p><pre class=" language-javascript"><code class="language-javascript">Set<span class="token operator">-</span>Cookie<span class="token punctuation">:</span> widget_session<span class="token operator">=</span>abc123<span class="token punctuation">;</span> SameSite<span class="token operator">=</span>None</code></pre><p>下面的设置有效：</p><pre class=" language-javascript"><code class="language-javascript">Set<span class="token operator">-</span>Cookie<span class="token punctuation">:</span> widget_session<span class="token operator">=</span>abc123<span class="token punctuation">;</span> SameSite<span class="token operator">=</span>None<span class="token punctuation">;</span> Secure</code></pre><p>要使用 SameSite 属性，前提是用户浏览器支持 SameSite 属性，可以使用 <a href="https://link.segmentfault.com/?enc=12HbbkbA+HIQqE8POCpZZQ==.hB92U4yPxcxn7qN8uDbBQT4O87EmdWUK1FwBOcoHivi3+v2jKX7QSpn48ZAy9iij">caniuse</a> 查看浏览器对于 SameSite 属性的支持。</p></li><li><p>验证码：CSRF 攻击往往是在用户不知情的情况下成功伪造请求。而验证码会强制用户必须与应用进行交互，才能完成最终请求，而且因为 CSRF 攻击无法获取到验证码，因此通常情况下，验证码能够很好地遏制 CSRF 攻击。</p><p>强制用户必须与应用进行交互，才能完成最终请求。此种方式能很好的遏制 csrf，但是用户体验比较差。</p></li><li><p>同源检测</p><p>在 HTTP 协议中，每一个异步请求都会携带两个 Header ，用于标记来源域名：</p><ul><li>Origin Header</li><li>Referer Header</li></ul><p><img src="https://segmentfault.com/img/remote/1460000021114681" alt="img"></p><p>这两个 Header 在浏览器发起请求时，大多数情况会自动带上，并且不能由前端自定义内容。 服务器可以通过解析这两个 Header 中的域名，确定请求的来源域。</p><p>通过校验请求的该字段，我们能知道请求是否是从本站发出的。我们可以通过拒绝非本站发出的请求，来避免了 CSRF 攻击。</p><h4 id="验证-Origin"><a href="#验证-Origin" class="headerlink" title="验证 Origin"></a>验证 Origin</h4><p>如果 Origin 存在，那么直接使用 Origin 中的字段确认来源域名就可以。</p><p>但是 Origin 在以下两种情况下并不存在：</p><ul><li>1、 IE11同源策略： IE 11 不会在跨站 CORS 请求上添加 Origin 头，Referer 头将仍然是唯一的标识。最根本原因是因为IE 11对同源的定义和其他浏览器有不同，有两个主要的区别，可以参考 <a href="https://link.segmentfault.com/?enc=DysUUInE3g44UXx7CHx1xQ==.B+et3oSiznTg7fd4Jtr3A/og88lFSw3Myf5PC2ceU+TFjadpN5Z4NVptaTJfn0UKz1i2wouiXhwBmQk2IAEgFYfKQ6dXT/bIg2D1uy86d/A=">MDN Same-origin_policy#IE_Exceptions</a></li><li>2、 302重定向： 在302重定向之后 Origin 不包含在重定向的请求中，因为 Origin 可能会被认为是其他来源的敏感信息。对于302重定向的情况来说都是定向到新的服务器上的 URL ，因此浏览器不想将 Origin 泄漏到新的服务器上。</li></ul><h4 id="验证-Referer"><a href="#验证-Referer" class="headerlink" title="验证 Referer"></a>验证 Referer</h4><p>如果 Referer 存在，也可以用来确认 HTTP 请求的来源地址。</p><p>需要注意的是在以下情况下 Referer 没有或者不可信：</p><ul><li>1.IE6、7下使用<code>window.location.href=url</code>进行界面的跳转，会丢失 Referer。</li><li>2.IE6、7下使用<code>window.open</code>，也会缺失 Referer。</li><li>3.HTTPS 页面跳转到 HTTP 页面，所有浏览器 Referer 都丢失。</li><li>4.点击 Flash 上到达另外一个网站的时候，Referer 的情况就比较杂乱，不太可信。</li></ul><p>总的来说，同源检测是一个相对简单的防范方法，能够防范绝大多数的 CSRF 攻击，但这并不是万无一失的，对于安全性要求较高，或者有较多用户输入内容的网站，我们就要对关键的接口做额外的防护措施。</p></li><li><p>验证Http的Referer字段：请求来源限制，即同源检测，此种方法成本最低，但是并不能保证 100% 有效，因为服务器并不是什么时候都能取到 Referer，而且低版本的浏览器存在伪造 Referer 的风险。也就是通过判断该请求是否为第三方网站发起。</p></li><li><p>token：要抵御 CSRF，关键在于在请求中放入攻击者所不能伪造的信息，并且该信息不存在于 Cookie 之中。可以在 HTTP 请求中以参数的形式加入一个随机产生的 Token，并在服务器端建立一个拦截器来验证这个 Token，如果请求中没有 Token 或者 Token 内容不正确，则认为可能是 CSRF 攻击而拒绝该请求。</p><p>token 验证的 CSRF 防御机制是公认最合适的方案。若网站同时存在 XSS 漏洞的时候，这个方法也是空谈，因为XSS攻击有可能泄露Token。</p><h5 id="添加-Token-验证的步骤："><a href="#添加-Token-验证的步骤：" class="headerlink" title="添加 Token 验证的步骤："></a>添加 Token 验证的步骤：</h5><p><strong>1、服务器将 Token 返回到前端</strong><br>用户打开页面时，前端发起请求，服务器会返回一个 Token，该 Token 通过加密算法对数据进行加密，一般 Token 都包括随机字符串和时间戳的组合，同时 Token 会存在服务器的 Session 中。之后页面加载完成时，使用 JS 遍历整个 DOM 树，在 DOM 中所有地址是本站的 <code>a</code> 和 <code>form</code> 标签中加入 Token，其他的请求就在编码时手动添加 Token 这个参数。</p><p><strong>2、前端发请求时携带这个 Token</strong><br>对于GET请求，Token 将附在请求地址之后，这样 URL 就变成 <code>http://url?token=tokenvalue</code>。 而对于 <code>form</code> 标签发起的 POST 请求来说，要在 <code>form</code> 的最后加上：</p><pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span>”hidden”</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span>”token”</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span>”tokenvalue”/</span><span class="token punctuation">></span></span></code></pre><p>总之，就是前端发请求时把 Token 以参数的形式加入请求中。</p><p><strong>3、服务器验证 Token 是否正确</strong><br>当前端得到了 Token ，再次提交给服务器的时候，服务器需要判断 Token 的有效性，验证过程是先解密 Token，对比加密字符串以及时间戳，如果加密字符串一致且时间未过期，那么这个 Token 就是有效的。</p><p>Token注意：</p><ol><li>Token 保存在 Session 中。假如 Token 保存在 Cookie 中，用户浏览器开了很多页面。在一些页面 Token 被使用消耗掉后新的Token 会被重新种入，但那些老的 Tab 页面对应的 HTML 里还是老 Token。这会让用户觉得为啥几分钟前打开的页面不能正常提交？</li><li>尽量少用 GET。假如攻击者在我们的网站上传了一张图片，用户在加载图片的时候实际上是向攻击者的服务器发送了请求，这个请求会带有referer表示当前图片所在的页面的 url。 而如果使用 GET 方式接口的话这个 URL 就形如： <a href="https://link.zhihu.com/?target=https://xxxx.com/gift?giftId=aabbcc&_csrf_token=xxxxx">https://xxxx.com/gift?giftId=aabbcc&_csrf_token&#x3D;xxxxx</a><br>，那相当于攻击者就获取了_csrf_token，短时间内可以使用这个 token 来操作其他 GET 接口。</li></ol></li></ul><p><a href="https://www.cnblogs.com/hyddd/archive/2009/04/09/1432744.html">结合代码讲解攻击与防御</a></p><p><a href="https://juejin.cn/post/6844903689702866952">防范措施讲得很好的</a></p><p><a href="https://juejin.cn/post/6844903689702866952">讲得还可以的博客</a></p><h2 id="4-劫持"><a href="#4-劫持" class="headerlink" title="4.劫持"></a>4.劫持</h2><h4 id="DNS劫持"><a href="#DNS劫持" class="headerlink" title="DNS劫持"></a>DNS劫持</h4><p>DNS ： 域名 -&gt; ip地址 ，进行域名解析的服务器</p><p>DNS劫持又称域名劫持，是指通过某些手段取得某域名的解析控制权，修改此域名的解析结果，导致对该域名的访问由原IP地址转入到修改后的指定IP，其结果就是对特定的网址不能访问或访问的是假网址。</p><p>DNS劫持其实并不是真的“黑掉”了对方的网站，而是冒名顶替、招摇撞骗罢了</p><p>案例</p><ul><li>在查找本机系统是否缓存ip地址时，可能碰到黑客设置绑定好的解析ip（host文件），使得我们到达了一个错误的ip地址（本地DNS劫持）;</li><li>亦或者是像《巴西银行钓鱼事件》，黑客利用D-Link路由器的漏洞，更改对应的DNS配置，重新定向到黑客自己搭建的恶意DNS服务器上（DNS解析路径劫持）</li></ul><p>（DNS服务器的IP地址，有可能是动态的，每次上网时由网关分配，这叫做DHCP机制；也有可能是事先指定的固定地址。Linux系统里面，DNS服务器的IP地址保存在<code>/etc/resolv.conf</code>文件。）</p><h4 id="防止DNS劫持"><a href="#防止DNS劫持" class="headerlink" title="防止DNS劫持"></a>防止DNS劫持</h4><p>网络层面：</p><ul><li>手动修改DNS</li><li>修改路由密码</li></ul><p>应用层面：</p><ul><li>安装杀毒软件，防御木马病毒和恶意软件；定期修改路由器管理账号密码和更新固件。</li><li>有点复杂，可以网上查询（泪。。）</li></ul><p><strong>HTTP劫持</strong></p><p>你DNS解析的域名的IP地址不变。在和网站交互过程中的劫持了你的请求。在网站发给你信息前就给你返回了请求。</p><p>HTTP劫持很好判断，当年正常访问一个无广告的页面时，页面上出现广告弹窗，八成就是运营商劫持了HTTP。</p><h2 id="5-序列化"><a href="#5-序列化" class="headerlink" title="5.序列化"></a>5.序列化</h2><h4 id="反序列化漏洞"><a href="#反序列化漏洞" class="headerlink" title="反序列化漏洞"></a>反序列化漏洞</h4><p>简单来说，序列化可以理解为就是将对象转化为字节流，字节流中包括这个对象的数据和信息，序列化和反序列化便于类的持久保存，并且很利于网络传输</p><p>而在反序列化处理中，如果攻击者通过构建恶意输入，使得反序列化产生非预期的类或者对象，这个类或者对象就有可能带来任意代码的执行</p><p>所以这个问题的根源在于，字节流进行还原时，即用到ObjectInputStream在反序列化时，没有对生成的对象的类型做限制</p><h2 id="6-DDos攻击"><a href="#6-DDos攻击" class="headerlink" title="6.DDos攻击"></a>6.DDos攻击</h2><p>DOS：Denial of Service，拒绝服务，通过占用网络资源让它应接不暇，从而拒绝正常业务流量的一种网络攻击方式</p><p>DDOS：Distributed denial of service，分布式拒绝服务，俗称群殴（单台设备攻击能力有限，但是成百上千设备同时攻击很猛）</p><p>发起攻击的网络（组成成百上千设备的攻击网络）称为僵尸网络</p><p>这个网络可以通过木马、蠕虫等感染大量设备从而获取僵尸网络（亦或者富人直接买就行了）</p><p>DDos攻击可以出现在网络的很多层：</p><ol><li>网络层：霸占服务器网络带宽资源，发送大量的IP协议数据包（比如ping工具，产生ICMP包），这种攻击方式也称为ICMP flood</li><li>除此之外还有 UDP flood<ul><li>多损的招数：</li><li>反射攻击：伪造自身ip地址为攻击目标的地址，然后向大量第三方机器发送请求，然后让第三方机器回复的响应大量涌入攻击目标ip</li><li>放大攻击：一次DNS查询，返回的数据往往大于请求数据，根据带宽放大因子，一般60B的请求数据可以获得3000B的返回数据，此时再结合反射攻击，让DNS返回的数据响应到攻击地址上，更加BT（maybe，50倍的攻击效果）</li></ul></li><li>TCP flood，因为有三次握手，所以无法伪装ip</li><li>RST洪水攻击，同样是利用TCP协议，一方可以发送RST数据强行切断连接，而不用四次挥手，此时我们让攻击设备不断尝试伪造各种ip地址，发送RST数据，进行盲打，此时有可能可以命中某位xx用户的连接</li></ol><h4 id="反击"><a href="#反击" class="headerlink" title="反击"></a>反击</h4><p>根治DDos攻击的方法：</p><ul><li>网络设备检测ip，过滤掉伪装的ip地址</li><li>根据路由转发逻辑，过滤伪装ip</li></ul><p>保守治疗：</p><ul><li>使用CDN节点</li><li>流量清洗设备（有点像保镖），先自己来应答，如果是正常的流量就放行</li></ul>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>计算机网络笔记</title>
      <link href="/2022/07/29/ji-suan-ji-wang-luo/"/>
      <url>/2022/07/29/ji-suan-ji-wang-luo/</url>
      
        <content type="html"><![CDATA[<h2 id="1-常见状态码"><a href="#1-常见状态码" class="headerlink" title="1.常见状态码"></a>1.常见状态码</h2><ul><li>1xx: 接受，继续处理</li><li>200: 成功，并返回数据</li><li>201: 已创建</li><li>202: 已接受</li><li>203: 成为，但未授权</li><li>204: 成功，无内容</li><li>205: 成功，重置内容</li><li>206: 成功，部分内容</li><li>301: 永久移动，重定向</li><li>302: 临时移动，可使用原有URI</li><li>303: 明确表示客户端应当采⽤get⽅法获取资源，他会把POST请求变为GET请求进⾏重定向。</li><li>304: 资源未修改，可使用缓存</li><li>305: 需代理访问</li><li>307: 会遵照浏览器标准，不会从post变为get。 </li><li>400: 请求语法错误</li><li>401: 要求身份认证</li><li>403: 拒绝请求</li><li>404: 资源不存在</li><li>410: </li><li>500: 服务器错误</li></ul><h2 id="2-get-x2F-post"><a href="#2-get-x2F-post" class="headerlink" title="2.get &#x2F; post"></a>2.get &#x2F; post</h2><ul><li>get: 缓存、请求长度受限、会被历史保存记录<ul><li>无副作用(不修改资源)，幂等(请求次数与资源无关)的场景</li></ul></li><li>post: 安全、大数据、更多编码类型</li></ul><p>两者详细对比如下图：</p><p><code>GET是进行明文传递，POST非明文请求数据放在请求体中</code></p><p><img src="/../img/168e9d9050b9d08a~tplv-t2oaga2asx-watermark.awebp.png"></p><h2 id="3-TCP是什么-x2F-TCP-的特性"><a href="#3-TCP是什么-x2F-TCP-的特性" class="headerlink" title="3.TCP是什么&#x2F;TCP 的特性"></a>3.TCP是什么&#x2F;TCP 的特性</h2><ul><li>TCP 提供一种<strong>面向连接的、可靠的</strong>字节流服务</li><li>在一个 TCP 连接中，仅有两方进行彼此通信。广播和多播不能用于TCP</li><li>TCP 使用校验和，确认和重传机制来保证可靠传输</li><li>TCP 给数据分节进行排序，并使用累积确认保证数据的顺序不变和非重复</li><li>TCP 使用滑动窗口机制来实现流量控制，通过动态改变窗口的大小进行拥塞控制</li></ul><p><strong>注意</strong>：TCP 并不能保证数据一定会被对方接收到，因为这是不可能的。TCP 能够做到的是，如果有可能，就把数据递送到接收方，否则就（通过放弃重传并且中断连接这一手段）通知用户。因此准确说TCP也不是 100%可靠的协议，它所能提供的是数据的可靠递送或故障的可靠通知。一个TCP连接由一个4元组构成，分别是两个IP地址和两个端口号。一个TCP连接通常分为三个阶段：启动、数据传输、退出（关闭）。</p><p>当TCP接收到另一端的数据时，它会发送一个确认，但这个确认不会立即发送，一般会延迟一会儿。ACK是累积的，一个确认字节号N的ACK表示所有直到N的字节（不包括N）已经成功被接收了。这样的好处是如果一个ACK丢失，很可能后续的ACK就足以确认前面的报文段了。</p><p>一个完整的TCP连接是双向和对称的，数据可以在两个方向上平等地流动。给上层应用程序提供一种<code>双工服务</code>。一旦建立了一个连接，这个连接的一个方向上的每个TCP报文段都包含了相反方向上的报文段的一个ACK。</p><p>序列号的作用是使得一个TCP接收端可丢弃重复的报文段，记录以杂乱次序到达的报文段。因为TCP使用IP来传输报文段，而IP不提供重复消除或者保证次序正确的功能。另一方面，TCP是一个字节流协议，绝不会以杂乱的次序给上层程序发送数据。因此TCP接收端会被迫先保持大序列号的数据不交给应用程序，直到缺失的小序列号的报文段被填满。</p><h4 id="怎么让不可靠的-UDP可靠"><a href="#怎么让不可靠的-UDP可靠" class="headerlink" title="怎么让不可靠的 UDP可靠"></a><a href="https://www.infoq.cn/article/how-to-make-udp-reliable">怎么让不可靠的 UDP可靠</a></h4><h4 id="TCP与UDP的区别"><a href="#TCP与UDP的区别" class="headerlink" title="TCP与UDP的区别"></a>TCP与UDP的区别</h4><p>文章转自<a href="http://feinibuke.blog.51cto.com/1724260/340272">TCP和UDP区别</a></p><table><thead><tr><th align="left">-</th><th align="left">TCP</th><th align="left">UDP</th></tr></thead><tbody><tr><td align="left">是否连接</td><td align="left">面向连接</td><td align="left">面向非连接</td></tr><tr><td align="left">传输可靠性</td><td align="left">可靠的</td><td align="left">不可靠的</td></tr><tr><td align="left">应用场合</td><td align="left">传输大量的数据</td><td align="left">少量数据</td></tr><tr><td align="left">速度</td><td align="left">慢</td><td align="left">快</td></tr></tbody></table><p>OSI 和 TCP&#x2F;IP 模型在传输层定义两种传输协议：TCP（或传输控制协议）和 UDP（或用户数据报协议）。</p><h6 id="UDP"><a href="#UDP" class="headerlink" title="UDP"></a>UDP</h6><p><strong><code>UDP</code> 与 <code>TCP</code> 的主要区别在于 <code>UDP</code> 不一定提供可靠的数据传输。</strong><br>事实上，该协议不能保证数据准确无误地到达目的地。UDP 在许多方面非常有效。当某个程序的目标是尽快地传输尽可能多的信息时（其中任意给定数据的重要性相对较低），可使用UDP。ICQ短消息使用UDP协议发送消息。</p><p>许多程序将使用单独的TCP连接和单独的UDP连接。重要的状态信息随可靠的TCP连接发送，而主数据流通过UDP发送。</p><h6 id="TCP"><a href="#TCP" class="headerlink" title="TCP"></a>TCP</h6><p><code>TCP</code>的目的是提供可靠的数据传输，并在相互进行通信的设备或服务之间保持一个虚拟连接。<code>TCP</code>在数据包接收无序、丢失或在交付期间被破坏时，负责数据恢复。它通过为其发送的每个数据包提供一个序号来完成此恢复。记住，较低的网络层会将每个数据包视为一个独立的单元，因此，数据包可以沿完全不同的路径发送，即使它们都是同一消息的组成部分。这种路由与网络层处理分段和重新组装数据包的方式非常相似，只是级别更高而已。</p><p>为确保正确地接收数据，TCP要求在目标计算机成功收到数据时发回一个确认（即 ACK）。如果在某个时限内未收到相应的 ACK，将重新传送数据包。如果网络拥塞，这种重新传送将导致发送的数据包重复。但是，接收计算机可使用数据包的序号来确定它是否为重复数据包，并在必要时丢弃它。</p><h6 id="TCP与UDP的选择"><a href="#TCP与UDP的选择" class="headerlink" title="TCP与UDP的选择"></a>TCP与UDP的选择</h6><p>如果比较<code>UDP</code>包和<code>TCP</code>包的结构，很明显<code>UDP</code>包不具备<code>TCP</code>包复杂的可靠性与控制机制。与TCP协议相同，UDP的源端口数和目的端口数也都支持一台主机上的多个应用。一个16位的UDP包包含了一个字节长的头部和数据的长度，校验码域使其可以进行整体校验。（许多应用只支持UDP，如：多媒体数据流，不产生任何额外的数据，即使知道有破坏的包也不进行重发。）</p><p>很明显，当数据传输的性能必须让位于数据传输的完整性、可控制性和可靠性时，TCP协议是当然的选择。当强调传输性能而不是传输的完整性时，如：音频和多媒体应用，UDP是最好的选择。</p><p>在数据传输时间很短，以至于此前的连接过程成为整个流量主体的情况下，UDP也是一个好的选择，如：DNS交换。把SNMP建立在UDP上的部分原因是设计者认为当发生网络阻塞时，UDP较低的开销使其有更好的机会去传送管理数据。TCP丰富的功能有时会导致不可预料的性能低下，但是我们相信在不远的将来，TCP可靠的点对点连接将会用于绝大多数的网络应用。</p><h6 id="TCP协议和UDP协议特性区别总结："><a href="#TCP协议和UDP协议特性区别总结：" class="headerlink" title="TCP协议和UDP协议特性区别总结："></a>TCP协议和UDP协议特性区别总结：</h6><ol><li>TCP协议在传送数据段的时候要给段标号；UDP协议不</li><li>TCP协议可靠；UDP协议不可靠</li><li>TCP协议是面向连接；UDP协议采用无连接</li><li>TCP协议负载较高，采用虚电路；UDP采用无连接</li><li>TCP协议的发送方要确认接收方是否收到数据段（3次握手协议）</li><li>TCP协议采用窗口技术和流控制</li></ol><h2 id="3-TCP三次握手"><a href="#3-TCP三次握手" class="headerlink" title="3.TCP三次握手"></a>3.TCP三次握手</h2><p>所谓三次握手(Three-way Handshake)，是指&#x3D;&#x3D;建立一个 TCP 连接时，需要客户端和服务器总共发送3个包&#x3D;&#x3D;。</p><p>三次握手的目的是连接服务器指定端口，建立TCP连接，并&#x3D;&#x3D;同步连接双方的序列号和确认号&#x3D;&#x3D;，交换 TCP 窗口大小信息。在 socket 编程中，客户端执行 <code>connect()</code> 时。将触发三次握手。</p><ul><li><p>第一次握手(SYN&#x3D;1, seq&#x3D;x):</p><p>客户端发送一个 TCP 的 SYN 标志位置1的包，&#x3D;&#x3D;<strong>指明客户端打算连接的服务器的端口</strong>&#x3D;&#x3D;，以及初始序号 X,保存在包头的序列号(Sequence Number)字段里。</p><p>发送完毕后，客户端进入 <code>SYN_SEND</code> 状态，等待确认。</p></li><li><p>第二次握手(SYN&#x3D;1, ACK&#x3D;1, seq&#x3D;y, ACKnum&#x3D;x+1):</p><p>服务器发回确认包(ACK)应答。即 SYN 标志位和 ACK 标志位均为1。服务器端选择自己 ISN 序列号，放到 Seq 域里，同时将确认序号(Acknowledgement Number)设置为客户的 ISN 加1，即X+1。 发送完毕后，服务器端进入 <code>SYN_RCVD</code> 状态。</p></li><li><p>第三次握手(ACK&#x3D;1，ACKnum&#x3D;y+1)</p><p>客户端再次发送确认包(ACK)，SYN 标志位为0，ACK 标志位为1，并且把服务器发来 ACK 的序号字段+1，放在确定字段中发送给对方，并且在数据段放写ISN的+1</p><p>发送完毕后，客户端进入 <code>ESTABLISHED</code> 状态，当服务器端接收到这个包时，也进入 <code>ESTABLISHED</code> 状态，TCP 握手结束。</p><p><img src="https://raw.githubusercontent.com/HIT-Alibaba/interview/master/img/tcp-connection-made-three-way-handshake.png"></p></li></ul><p>为何需要三次握手而不能两次：**<code>为了防止已失效的连接请求报文段突然又传送到了服务端，而产生错误</code>**</p><h2 id="4-TCP四次挥手"><a href="#4-TCP四次挥手" class="headerlink" title="4. TCP四次挥手"></a>4. TCP四次挥手</h2><p>&#x3D;&#x3D;TCP 的连接的拆除需要发送四个包&#x3D;&#x3D;，因此称为四次挥手(Four-way handshake)，也叫做改进的三次握手。客户端或服务器均可主动发起挥手动作，在 socket 编程中，任何一方执行 <code>close()</code> 操作即可产生挥手操作。</p><ul><li><p>第一次挥手(FIN&#x3D;1，seq&#x3D;x)</p><p>假设客户端想要关闭连接，客户端发送一个 FIN 标志位置为1的包，表示自己已经没有数据可以发送了，但是仍然可以接受数据。</p><p>发送完毕后，客户端进入 <code>FIN_WAIT_1</code> 状态。</p></li><li><p>第二次挥手(ACK&#x3D;1，ACKnum&#x3D;x+1)</p><p>服务器端确认客户端的 FIN 包，发送一个确认包，表明自己接受到了客户端关闭连接的请求，但还没有准备好关闭连接。</p><p>发送完毕后，服务器端进入 <code>CLOSE_WAIT</code> 状态，客户端接收到这个确认包之后，进入 <code>FIN_WAIT_2</code> 状态，等待服务器端关闭连接。</p></li><li><p>第三次挥手(FIN&#x3D;1，seq&#x3D;y)</p><p>服务器端准备好关闭连接时，向客户端发送结束连接请求，FIN 置为1。</p><p>发送完毕后，服务器端进入 <code>LAST_ACK</code> 状态，等待来自客户端的最后一个ACK。</p></li><li><p>第四次挥手(ACK&#x3D;1，ACKnum&#x3D;y+1)</p><p>客户端接收到来自服务器端的关闭请求，发送一个确认包，并进入 <code>TIME_WAIT</code>状态，等待可能出现的要求重传的 ACK 包。</p><p>服务器端接收到这个确认包之后，关闭连接，进入 <code>CLOSED</code> 状态。</p><p>客户端等待了某个固定时间（两个最大段生命周期，2MSL，2 Maximum Segment Lifetime）之后，没有收到服务器端的 ACK ，认为服务器端已经正常关闭连接，于是自己也关闭连接，进入 <code>CLOSED</code> 状态。</p><p><img src="https://raw.githubusercontent.com/HIT-Alibaba/interview/master/img/tcp-connection-closed-four-way-handshake.png"></p></li></ul><p><a href="https://hit-alibaba.github.io/interview/basic/network/TCP.html">讲得很好的握手挥手</a></p><p><a href="https://zhuanlan.zhihu.com/p/53374516">深入TCP</a></p><h2 id="5-TCP-拥塞控制"><a href="#5-TCP-拥塞控制" class="headerlink" title="5.TCP 拥塞控制"></a>5.TCP 拥塞控制</h2><p>拥塞处理和流量控制不同，后者是作用于接收方，保证接收方来得及接受数据。而前者是作用于网络，防止过多的数据拥塞网络，避免出现网络负载过大的情况。</p><p>拥塞处理包括了四个算法，分别为：慢开始，拥塞避免，快速重传，快速恢复。</p><h4 id="慢开始算法"><a href="#慢开始算法" class="headerlink" title="慢开始算法"></a>慢开始算法</h4><p>慢开始算法，顾名思义，就是在传输开始时将发送窗口慢慢指数级扩大，从而避免一开始就传输大量数据导致网络拥塞。（&#x3D;&#x3D;<strong>不要一开始就发送大量的数据，先探测一下网络的拥塞程度，也就是说由小到大逐渐增加拥塞窗口的大小</strong>&#x3D;&#x3D;）</p><p>慢开始算法步骤具体如下</p><ol><li>连接初始设置拥塞窗口（Congestion Window） 为 1 MSS（一个分段的最大数据量）</li><li>每过一个 RTT 就将窗口大小乘二</li><li>指数级增长肯定不能没有限制的，所以有一个阈值限制，当窗口大小大于阈值时就会启动拥塞避免算法。</li></ol><h4 id="拥塞避免算法"><a href="#拥塞避免算法" class="headerlink" title="拥塞避免算法"></a>拥塞避免算法</h4><p>拥塞避免算法相比简单点，每过一个 RTT 窗口大小只加一，这样能够避免指数级增长导致网络拥塞，慢慢将大小调整到最佳值。（&#x3D;&#x3D;<strong>拥塞窗口缓慢增长，即每经过一个往返时间RTT就把发送方的拥塞窗口cwnd加1，而不是加倍。这样拥塞窗口按线性规律缓慢增长</strong>&#x3D;&#x3D;）</p><p>在传输过程中可能定时器超时的情况，这时候 TCP 会认为网络拥塞了，会马上进行以下步骤：</p><ul><li>将阈值设为当前拥塞窗口的一半</li><li>将拥塞窗口设为 1 MSS</li><li>启动拥塞避免算法</li></ul><h4 id="快速重传"><a href="#快速重传" class="headerlink" title="快速重传"></a>快速重传</h4><p>快速重传一般和快恢复一起出现。一旦接收端收到的报文出现失序的情况，接收端只会回复最后一个顺序正确的报文序号（没有 Sack 的情况下）。如果收到三个重复的 ACK，无需等待定时器超时再重发而是启动快速重传。（&#x3D;&#x3D;<strong>发送方只要一连收到三个重复确认就应当立即重传对方尚未收到的报文段，而不必继续等待设置的重传计时器时间到期</strong>&#x3D;&#x3D;）具体算法分为两种：</p><p><strong>TCP Taho 实现如下</strong></p><ul><li>将阈值设为当前拥塞窗口的一半</li><li>将拥塞窗口设为 1 MSS</li><li>重新开始慢开始算法</li></ul><p><strong>TCP Reno 实现如下</strong></p><ul><li>拥塞窗口减半</li><li>将阈值设为当前拥塞窗口</li><li>进入快恢复阶段（重发对端需要的包，一旦收到一个新的 ACK 答复就退出该阶段）</li><li>使用拥塞避免算法</li></ul><h4 id="TCP-New-Ren-改进后的快恢复"><a href="#TCP-New-Ren-改进后的快恢复" class="headerlink" title="TCP New Ren 改进后的快恢复"></a>TCP New Ren 改进后的快恢复</h4><p><strong>TCP New Reno</strong> 算法改进了之前 <strong>TCP Reno</strong> 算法的缺陷。在之前，快恢复中只要收到一个新的 ACK 包，就会退出快恢复。</p><p>在 <strong>TCP New Reno</strong> 中，TCP 发送方先记下三个重复 ACK 的分段的最大序号。</p><p>假如我有一个分段数据是 1 ~ 10 这十个序号的报文，其中丢失了序号为 3 和 7 的报文，那么该分段的最大序号就是 10。发送端只会收到 ACK 序号为 3 的应答。这时候重发序号为 3 的报文，接收方顺利接收并会发送 ACK 序号为 7 的应答。这时候 TCP 知道对端是有多个包未收到，会继续发送序号为 7 的报文，接收方顺利接收并会发送 ACK 序号为 11 的应答，这时发送端认为这个分段接收端已经顺利接收，接下来会退出快恢复阶段。</p><p><a href="https://taylor12138.gitee.io/2021/03/15/chao-wen-ben-chuan-shu-xie-yi/">超详细的Http</a></p><h2 id="6-HTTP"><a href="#6-HTTP" class="headerlink" title="6.HTTP"></a>6.HTTP</h2><h4 id="HTTP概述"><a href="#HTTP概述" class="headerlink" title="HTTP概述"></a>HTTP概述</h4><ol><li>HTTP（HyperText Transfer Protocol 超文本传输协议）是WEB的应用层协议，它是Web的核心；HTTP有两部分实现，一个客户端程序一个服务器程序；HTTP定义了客户和服务器进行报文交换的方法； </li><li>HTTP使用<strong>TCP</strong>作为它的传输层协议；HTTP客户<strong>首先发起一个与服务器的TCP连接</strong>，需要注意的是，服务器根据请求作出响应，但是不存储任何关于该客户的状态信息；也正因为这样，HTTP被称为<strong>无状态协议</strong>。同时，Web使用了客户端-服务器的应用体系结构；其中web服务器总是开着的</li></ol><h5 id="持续连接和非持续连接"><a href="#持续连接和非持续连接" class="headerlink" title="持续连接和非持续连接"></a>持续连接和非持续连接</h5><p> HTTP既可使用持续连接也可以使用非持续连接。尽管&#x3D;&#x3D;<strong>HTTP在默认情况下使用持续连接</strong>&#x3D;&#x3D;     </p><ul><li><p>采用非持续连接的HTTP</p><ol><li><p>使用非持续连接时，每个TCP连接在服务器发送一个对象后就会关闭，也就是每个TCP只传送一个请求报文和响应报文；</p></li><li><p>建立一个TCP连接需要三次握手，步骤如下：</p><ol><li>第一次握手：建立连接时，客户端发送&#x3D;&#x3D;syn包&#x3D;&#x3D;（seq&#x3D;j）到服务器，并进入SYN_SENT状态，等待服务器确认；SYN：同步序列编号（Synchronize Sequence Numbers）。 </li><li>第二次握手：服务器收到syn包，必须确认客户的SYN（ack&#x3D;j+1），同时自己发送一个ACK包（seq&#x3D;k），即SYN+ACK包，此时服务器进入SYN_RECV状态。</li><li>第三次握手：客户端收到服务器的SYN+ACK包，向服务器发送确认包ACK(ack&#x3D;k+1)（<strong>通常会结合一个HTTP报文一起发送</strong>），发送完毕后，客户端和服务器进入ESTABLISHED（TCP连接成功）状态，完成三次握手。</li></ol><p>因此客户端请求一个对象所需的时间为 2个RTT的时间（三次握手的前两次占一个RTT，发送报文到服务器并且接收完服务器发送回来的资源占一个RTT）</p></li></ol></li><li><p>采用持续连接的HTTP</p><p>从上面可以看出：</p><ol><li>非持续连接必须为每个请求新建一个TCP连接，而每个TCP连接将占用系统资源，包括缓冲区和变量等，这样服务器的负担就很重了。</li><li>一个对象将通过两个RTT的时延才能交付。</li></ol><p>如果使用持续连接，那么服务器在发送响应报文后将保持该TCP打开，后续客户端可以使用该连接来向服务器发出请求。不但一个完整的页面可以通过同一个连接传送，同一台服务器上的多个页面也可以通过同一个连接发送。这就&#x3D;&#x3D;提高了效率&#x3D;&#x3D;；</p></li></ul><p><strong>一般来说，如果一条持续连接在一定的时间间隔后没被使用的话，就会被关闭。HTTP默认使用的是带流水线的持续连接。</strong></p><h5 id="HTTP报文"><a href="#HTTP报文" class="headerlink" title="HTTP报文"></a>HTTP报文</h5><h6 id="请求报文"><a href="#请求报文" class="headerlink" title="请求报文"></a>请求报文</h6><p>  <img src="/../img/1609158520658.png" alt="1609158520658"></p><p>   一个请求报文具有至少一行的内容。请求报文的第一行称为<strong>请求行</strong>，其后继的各行被称为<strong>首部行</strong>。</p><ol><li><p>请求行包含三个内容：</p><ul><li>方法字段（GET、POST、PUT、DELETE、HEAD等）</li><li>URL字段（可以传递请求对象的标志）</li><li>HTTP版本</li></ul></li><li><p>首部行包含：</p><ul><li>是否在发送完响应报文后关闭TCP连接的Connection</li><li>请求的主机地址（该头部信息被Web高速缓存所要求）</li><li>浏览器版本</li><li>可接受的语言等头部信息</li></ul></li><li><p>首部行之后有一个空行，之后便是请求的<strong>实体体</strong>（entity body）。</p><p>该实体体可以在POST方法里传递Form表单内容或者传递其它一些二进制流数据等。值得注意的是，表单也不一定必须使用POST方法。如果使用get,实体体为空，会显示在url中。</p></li><li><p>Head类似于get方法，将会用一个http报文进行响应，但是不返回请求对象，经常用作调试跟踪。</p></li><li><p>put方法允许用户上传对象到指定的Web服务器上指定的路径。</p></li><li><p>Delete方法允许用户或应用程序删除Web服务器上的对象。</p></li></ol><h6 id="响应报文"><a href="#响应报文" class="headerlink" title="响应报文"></a>响应报文</h6><p><img src="/../img/1609159256967.png" alt="1609159256967"></p><p> 响应报文总体上也分三个部分</p><ol><li><strong>状态行</strong>，包含HTTP版本、状态码以及状态信息（对状态码进行描述）等内容； </li><li><strong>首部行</strong>，包含发送日期、服务器类型、上一次修改请求资源的时间、内容的类型等内容</li><li><strong>实体体</strong>，实体体包含客户端所请求的对象本身。</li></ol><p>常见状态码</p><ul><li>200：请求成功 <ul><li>处理方式：获得响应的内容，进行处理</li></ul></li><li>301：请求到的资源都会分配一个永久的URL，这样就可以在将来通过该URL来访问此资源 <ul><li>处理方式：重定向到分配的URL</li></ul></li><li>400：非法请求 <ul><li>处理方式：丢弃</li></ul></li><li>404：没有找到所请求的资源或对象<ul><li>处理方式：丢弃</li></ul></li><li>505：服务器不支持请求报文使用的http版本</li></ul><h5 id="http协议的特点"><a href="#http协议的特点" class="headerlink" title="http协议的特点"></a>http协议的特点</h5><ul><li>永远都是客户端发起请求，服务器回送响应</li><li>http协议是无状态的，但是在实际工作中，一些万维网网站希望能识别用户（给用户推销产品）&#x3D;&gt;诞生了cookie小饼干，cookie是存储在用户主机的文本文件，记录一段时间内某用户的访问记录（不太敏感的数据）</li><li>http采用TCP作为运输层协议，但是http协议本身是无连接的 （交换http报文之前不需要建立连接）</li><li>http连接方式：持久连接（非流水线式（有点像停等协议）、流水线式（有点像GBN或SR协议，即后退N帧协议和选择重传协议））、非持久连接（每次传输都要三次握手）</li></ul><h4 id="HTTP请求方法"><a href="#HTTP请求方法" class="headerlink" title="HTTP请求方法"></a><a href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Methods">HTTP请求方法</a></h4><h2 id="7-HTTP-1-0、HTTP-1-1、SDPY、HTTP2-0、HTTPS区别"><a href="#7-HTTP-1-0、HTTP-1-1、SDPY、HTTP2-0、HTTPS区别" class="headerlink" title="7.HTTP 1.0、HTTP 1.1、SDPY、HTTP2.0、HTTPS区别"></a>7.HTTP 1.0、HTTP 1.1、SDPY、HTTP2.0、HTTPS区别</h2><h3 id="HTTP1-0和HTTP1-1的区别"><a href="#HTTP1-0和HTTP1-1的区别" class="headerlink" title="HTTP1.0和HTTP1.1的区别"></a>HTTP1.0和HTTP1.1的区别</h3><ol><li><strong>缓存处理</strong>，在HTTP1.0中主要使用header里的If-Modified-Since,Expires来做为缓存判断的标准，HTTP1.1则引入了更多的缓存控制策略例如Entity tag，If-Unmodified-Since, If-Match, If-None-Match等更多可供选择的缓存头来控制缓存策略。</li><li><strong>带宽优化及网络连接的使用</strong>，HTTP1.0中，存在一些浪费带宽的现象，例如客户端只是需要某个对象的一部分，而服务器却将整个对象送过来了，并且不支持断点续传功能，HTTP1.1则在请求头引入了range头域，它允许只请求资源的某个部分，即返回码是206（Partial Content），这样就方便了开发者自由的选择以便于充分利用带宽和连接。</li><li><strong>错误通知的管理</strong>，在HTTP1.1中新增了24个错误状态响应码，如409（Conflict）表示请求的资源与资源的当前状态发生冲突；410（Gone）表示服务器上的某个资源被永久性的删除。</li><li><strong>Host头处理</strong>，在HTTP1.0中认为每台服务器都绑定一个唯一的IP地址，因此，请求消息中的URL并没有传递主机名（hostname）。但随着虚拟主机技术的发展，在一台物理服务器上可以存在多个虚拟主机（Multi-homed Web Servers），并且它们共享一个IP地址。HTTP1.1的请求消息和响应消息都应支持Host头域，且请求消息中如果没有Host头域会报告一个错误（400 Bad Request）。</li><li><strong>长连接</strong>，HTTP 1.1支持长连接（PersistentConnection）和请求的流水线（Pipelining）处理，在一个TCP连接上可以传送多个HTTP请求和响应，减少了建立和关闭连接的消耗和延迟，在HTTP1.1中默认开启Connection： keep-alive，一定程度上弥补了HTTP1.0每次请求都要创建连接的缺点。 HTTP1.1流水线（Pipelining）其实是把多个HTTP请求放到一个TCP连接中一一发送，而在发送过程中不需要等待服务器对前一个请求的响应；只不过，<strong>客户端还是要按照发送请求的顺序来接收响应！</strong> 因此存在线头阻塞。</li></ol><h3 id="SPDY和HTTP1-x的区别"><a href="#SPDY和HTTP1-x的区别" class="headerlink" title="SPDY和HTTP1.x的区别"></a>SPDY和HTTP1.x的区别</h3><p>2012年google如一声惊雷提出了SPDY的方案，优化了HTTP1.X的请求延迟，解决了HTTP1.X的安全性，具体如下：</p><ol><li><strong>降低延迟</strong>，针对HTTP高延迟的问题，SPDY优雅的采取了多路复用（multiplexing）。多路复用通过多个请求stream共享一个tcp连接的方式，解决了HOL blocking（ 队首阻塞 Head-of-line blocking ）的问题，降低了延迟同时提高了带宽的利用率。</li><li><strong>请求优先级</strong>（request prioritization）。多路复用带来一个新的问题是，在连接共享的基础之上有可能会导致关键请求被阻塞。SPDY允许给每个request设置优先级，这样重要的请求就会优先得到响应。比如浏览器加载首页，首页的html内容应该优先展示，之后才是各种静态资源文件，脚本文件等加载，这样可以保证用户能第一时间看到网页内容。</li><li><strong>header压缩。</strong>前面提到HTTP1.x的header很多时候都是重复多余的。选择合适的压缩算法可以减小包的大小和数量。</li><li><strong>基于HTTPS的加密协议传输</strong>，大大提高了传输数据的可靠性。（SPDY规定通信中需要使用SSL）</li><li><strong>服务端推送</strong>（server push），采用了SPDY的网页，例如我的网页有一个sytle.css的请求，在客户端收到sytle.css数据的同时，服务端会将sytle.js的文件推送给客户端，当客户端再次尝试获取sytle.js时就可以直接从缓存中获取到，不用再发请求了。SPDY构成图：</li></ol><p><img src="http://mmbiz.qpic.cn/mmbiz_png/cmOLumrNib1cfBOtIMQ6JfSibJdd6QkQribjhshzcKo97UNNVIFgpOYZic95drsxo5TaiadPSSmcYhOI7GYAO99W6Sw/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1"></p><h3 id="SPDY和HTTP2-0的区别"><a href="#SPDY和HTTP2-0的区别" class="headerlink" title="SPDY和HTTP2.0的区别"></a>SPDY和HTTP2.0的区别</h3><p>HTTP2.0可以说是SPDY的升级版（其实原本也是基于SPDY设计的），但是，HTTP2.0 跟 SPDY 仍有不同的地方，如下：</p><p>HTTP2.0和SPDY的区别：</p><ol><li>HTTP2.0 支持明文 HTTP 传输，而 SPDY 强制使用 HTTPS</li><li>HTTP2.0 消息头的压缩算法采用 <strong>HPACK</strong>，而非 SPDY 采用的 <strong>DEFLATE</strong></li></ol><h3 id="HTTP2-0和HTTP1-x的区别"><a href="#HTTP2-0和HTTP1-x的区别" class="headerlink" title="HTTP2.0和HTTP1.x的区别"></a>HTTP2.0和HTTP1.x的区别</h3><ul><li><strong>新的二进制格式</strong>（Binary Format），HTTP1.x的解析是基于文本。基于文本协议的格式解析存在天然缺陷，文本的表现形式有多样性，要做到健壮性考虑的场景必然很多，二进制则不同，只认0和1的组合。基于这种考虑HTTP2.0的协议解析决定采用二进制格式，实现方便且健壮。 HTTP2.0中，有两个⾮常重要的概念，分别是帧（frame）和流（stream）。 帧代表着最⼩的数据单位，每个帧会标识出该帧属于哪个流，流也就是多个帧组成的数据流。多路复⽤，就是在一个TCP连接中可以存在多条流。换句话说，也就是可以发送多个请求，对端可以通过帧中的标识知道属于哪个请求。通过这个技术，可以避免HTTP旧版本中的队头阻塞问题，极⼤的提⾼传输性能。&#x3D;&#x3D;<strong>（使用二进制传输，减少服务端压力，连接吞吐量更大，改善TCP拥塞状况，同时慢启动时间减少）</strong>&#x3D;&#x3D;</li><li><strong>多路复用</strong>（MultiPlexing），即连接共享，即每一个request都是是用作连接共享机制的。一个request对应一个id，这样一个连接上可以有多个request，每个连接的request可以随机的混杂在一起，接收方可以根据request的 id将request再归属到各自不同的服务端请求里面。不存在HTTP1.1的线头阻塞&#x3D;&#x3D;<strong>（多路复用允许同时通过单一的HTTP&#x2F;2连接发起多重的请求&#x2F;响应消息）</strong>&#x3D;&#x3D;</li><li><strong>header压缩</strong>，如上文中所言，对前面提到过HTTP1.x的header带有大量信息，而且每次都要重复发送，HTTP2.0使用encoder来减少需要传输的header大小，通讯双方各自cache一份header fields表，既避免了重复header的传输，又减小了需要传输的大小。&#x3D;&#x3D;<strong>（最小数据量化）</strong>&#x3D;&#x3D;</li><li><strong>服务端推送</strong>（server push），同SPDY一样，HTTP2.0也具有server push功能。</li></ul><blockquote><p>HTTP2.0的多路复用和HTTP1.X中的长连接复用有什么区别？</p></blockquote><ul><li><p>HTTP&#x2F;1.0 一次请求-响应，建立一个连接，用完关闭；每一个请求都要建立一个连接；</p></li><li><p>HTTP&#x2F;1.1 Pipeling解决方式为，若干个请求排队串行化单线程处理，后面的请求等待前面请求的返回才能获得执行机会，一旦有某请求超时等，后续请求只能被阻塞，毫无办法，也就是人们常说的线头阻塞；</p></li><li><p>HTTP&#x2F;2多个请求可同时在一个连接上并行执行。某个请求任务耗时严重，不会影响到其它连接的正常执行；<br>具体如图：</p></li></ul><p><img src="http://mmbiz.qpic.cn/mmbiz_png/cmOLumrNib1cfBOtIMQ6JfSibJdd6QkQriba5ygCTOOjIQH4wvoJS2iaFBseyEAUfvpJQThHmTjuGuaSspUo8xppiaA/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p><h3 id="HTTPS与HTTP的区别"><a href="#HTTPS与HTTP的区别" class="headerlink" title="HTTPS与HTTP的区别"></a>HTTPS与HTTP的区别</h3><ul><li><p>HTTPS协议需要到CA申请证书，一般免费证书很少，需要交费。</p></li><li><p>HTTP协议运行在TCP之上，所有传输的内容都是明文，HTTPS运行在SSL&#x2F;TLS之上，SSL&#x2F;TLS运行在TCP之上，所有传输的内容都经过加密的。</p></li><li><p>HTTP和HTTPS使用的是完全不同的连接方式，用的端口也不一样，前者是80，后者是443。</p></li><li><p>HTTPS可以有效的防止运营商劫持，解决了防劫持的一个大问题。</p><p><img src="http://mmbiz.qpic.cn/mmbiz_png/cmOLumrNib1cfBOtIMQ6JfSibJdd6QkQribXL5PwzkqQdmyY9egu2hpzzMCgz2F5HhhkdSNc5eYJ9UGMDBGjeCGiag/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p></li></ul><h3 id="HTTPS-握手"><a href="#HTTPS-握手" class="headerlink" title="HTTPS 握手"></a>HTTPS 握手</h3><p>HTTPS 还是通过了 HTTP 来传输信息，但是信息通过 TLS 协议进行了加密。</p><h2 id="8-TLS"><a href="#8-TLS" class="headerlink" title="8.TLS"></a>8.TLS</h2><p>TLS 协议位于传输层之上，应用层之下。首次进行 TLS 协议传输需要两个 RTT ，接下来可以通过 Session Resumption 减少到一个 RTT。</p><p>在 TLS 中使用了两种加密技术，分别为：对称加密和非对称加密。</p><p><strong>对称加密</strong>：</p><p>对称加密就是两边拥有相同的秘钥，两边都知道如何将密文加密解密。</p><p><strong>非对称加密</strong>：</p><p>有公钥私钥之分，公钥所有人都可以知道，可以将数据用公钥加密，但是将数据解密必须使用私钥解密，私钥只有分发公钥的一方才知道。</p><p><strong>TLS 握手过程如下图：</strong></p><p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2018/5/12/1635260126b3a10c~tplv-t2oaga2asx-watermark.awebp" alt="img"></p><ol><li>客户端发送一个随机值，需要的协议和加密方式</li><li>服务端收到客户端的随机值，自己也产生一个随机值，并根据客户端需求的协议和加密方式来使用对应的方式，发送自己的证书（如果需要验证客户端证书需要说明）</li><li>客户端收到服务端的证书并验证是否有效，验证通过会再生成一个随机值，通过服务端证书的公钥去加密这个随机值并发送给服务端，如果服务端需要验证客户端证书的话会附带证书</li><li>服务端收到加密过的随机值并使用私钥解密获得第三个随机值，这时候两端都拥有了三个随机值，可以通过这三个随机值按照之前约定的加密方式生成密钥，接下来的通信就可以通过该密钥来加密解密</li></ol><p>通过以上步骤可知，在 TLS 握手阶段，两端使用非对称加密的方式来通信，但是因为非对称加密损耗的性能比对称加密大，所以在正式传输数据时，两端使用对称加密的方式通信。</p><p>PS：以上说明的都是 TLS 1.2 协议的握手情况，在 1.3 协议中，首次建立连接只需要一个 RTT，后面恢复连接不需要 RTT 了。</p><h2 id="9-中间人攻击"><a href="#9-中间人攻击" class="headerlink" title="9.中间人攻击"></a>9.中间人攻击</h2><h4 id="概念"><a href="#概念" class="headerlink" title="概念"></a>概念</h4><p>中间⼈ (Man-in-the-middle attack, MITM) 是指攻击者与通讯的两端分别创建独⽴的联系, 并交换其所收到的数据, 使通讯的两端认为他们正在通过一个私密的连接与对⽅直接对话，但事实上整个会话都被攻击者完全控制。在中间⼈攻击中，攻击者可以拦截通讯双⽅的通话并插⼊新的内容。</p><h4 id="攻击过程"><a href="#攻击过程" class="headerlink" title="攻击过程"></a>攻击过程</h4><ol><li>首先中间人（攻击者）需要有一套自己的数字证书</li><li>当客户端第一次发送信息给服务器时，中间人<strong>获取到第一个随机数</strong>，并将信息原样转发给服务器</li><li>服务器接收到客户端信息，将公钥发送给客户端，中间人截取请求，<strong>获取第二个随机数</strong>，并<strong>将服务器的公钥替换成自己的公钥</strong>并发送给客户端</li><li>客户端接收到<strong>中间人的公钥</strong>，用公钥加密<strong>第三个随机数和hash值</strong>并发送给服务器，中间人再次截取请求，用自己的私钥解密，<strong>获取第三个随机数，此时中间人得知秘钥</strong>，同时要根据自己与服务器的通信信息生成假的hash值替换掉客户端发送的hash值，再将这些信息用服务器的公钥加密，发送给服务器</li><li>服务器用自己的私钥解密请求，校验hash值并根据三个随机数生成秘钥，加密三次握手的hash值并发送给客户端，中间人截取请求，用已成功 “ 窃取 ”的秘钥进行解密，将hash值替换成假的hash值并重新加密发送给客户端</li><li>客户端接收到请求，用三个随机数生成的秘钥进行解密，校验无误，开始用秘钥同服务器进行对称加密的通信，这时，<strong>客户端，中间人，服务器都持有同一个秘钥，因此中间人可以对客户端和服务器的加密信息进行对称解密</strong></li></ol><h4 id="如何防范中间人攻击？"><a href="#如何防范中间人攻击？" class="headerlink" title="如何防范中间人攻击？"></a>如何防范中间人攻击？</h4><ol><li>在上述中间人攻击中，中间人之所以可以进行攻击主要是自己替换了服务器的公钥，所以防范中间人攻击需要引入CA数字证书</li><li>CA是数字证书认证机构，而数字证书就是申请人将一些必要信息（包括公钥、姓名、电子邮件、有效期）等提供给 CA，而CA用自己的私钥对申请人所提供信息计算散列值进行加密，形成数字签名，附在数字证书并颁发给申请人，这样申请人发送公钥的时候也会提供对应的数字证书，便于接收人（客户端）验证公钥是发送方（服务器）而不是中间人的。</li><li>CA机构也有层级关系，如A机构颁发数字证书，B机构保证A机构合法性，C机构保证B机构的合法性，直到根CA保证。所以如果这个保证链中一个机构自己偷偷非法颁发数字证书或根CA的私钥泄露，那么数字证书提供的安全性也就不存在了。</li></ol><h2 id="10-DNS解析"><a href="#10-DNS解析" class="headerlink" title="10.DNS解析"></a>10.DNS解析</h2><p>DNS的作用就是通过域名查找到具体的IP</p><h4 id="输入www-google-com-DNS解析流程："><a href="#输入www-google-com-DNS解析流程：" class="headerlink" title="输入www.google.com DNS解析流程："></a>输入<a href="http://www.google.com/">www.google.com</a> DNS解析流程：</h4><ol><li>在本地缓存中查询（一般来说，因为hosts优先级较高，浏览器会首先查看本地硬盘的 hosts 文件，看看其中有没有和这个域名对应的规则，如果有的话就直接使用 hosts 文件里面的 ip 地址。）</li><li>没有的话会去系统配置的DNS服务器查询</li><li>没有的话会去DNS根服务器查询，这一步查询会找出负责com这个一级域名的服务器</li><li>然后去该服务器查询google这个二级域名</li><li>接下来三级域名的查询是可以配置的，可以给www这个域名配置一个IP，然后还可以给别的三级域名配置一个IP</li></ol><p>以上便是DNS的迭代查询，还有一种是递归查询，区别就是前者由客户端去做请求，后者是由系统配置的DNS服务器做请求，得到结果后将数据返回给客户端。</p><p>DNS是基于UDP做的查询</p><h4 id="DNS的优化与应用"><a href="#DNS的优化与应用" class="headerlink" title="DNS的优化与应用"></a>DNS的优化与应用</h4><blockquote><ol><li>DNS缓存 <code>DNS存在着多级缓存</code>，从离浏览器的距离排序的话，有以下几种: <code>浏览器缓存，系统缓存，路由器缓存，IPS服务器缓存，根域名服务器缓存，顶级域名服务器缓存，主域名服务器缓存</code>。</li><li>DNS负载均衡<code>(DNS重定向) DNS负载均衡技术</code>的实现原理是在DNS服务器中为同一个主机名配置多个IP地址，在应答DNS查询时， DNS服务器对每个查询将以DNS文件中主机记录的IP地址按顺序返回不同的解析结果，将客户端的访问 引导到不同的机器上去，使得不同的客户端访问不同的服务器，从而达到负载均衡的目的。</li></ol><ul><li>大家耳熟能详的CDN(Content Delivery Network)就是利用DNS的重定向技术，DNS服务器会返回一个跟 用户最接近的点的IP地址给用户，CDN节点的服务器负责响应用户的请求，提供所需的内容。</li></ul><ol start="3"><li>dns-prefetch <code>DNS Prefetch 是一种 DNS 预解析技术</code>。当你浏览网页时，浏览器会在加载网页时对网页中的域名进行解析缓存，这样在你单击当前网页中的连接时就无需进行DNS的解析，减少用户等待时间，提高用户体验。</li></ol></blockquote><h2 id="11-在浏览器中输入www-google-com-会发生什么"><a href="#11-在浏览器中输入www-google-com-会发生什么" class="headerlink" title="11.在浏览器中输入www.google.com 会发生什么"></a>11.在浏览器中输入<a href="http://www.google.com/">www.google.com</a> 会发生什么</h2><p><a href="https://www.h5w3.com/20238.html">讲得很详细的博客</a></p><ol><li><p><strong>URL解析</strong>：首先会对 URL 进行解析，分析所需要使用的传输协议和请求的资源的路径。如果输入的 URL 中的协议或者主机名不合法，将会把地址栏中输入的内容传递给搜索引擎。如果没有问题，浏览器会检查 URL 中是否出现了非法字符，如果存在非法字符，则对非法字符进行转义后再进行下一过程。</p></li><li><p><strong>缓存判断</strong>：</p><ol><li>浏览器缓存：浏览器会按照一定的频率缓存 DNS 记录。</li><li>操作系统缓存：如果浏览器缓存中找不到需要的DNS记录，那就去操作系统中找。</li><li>路由缓存：路由器也有 DNS 缓存。</li></ol><p>如果请求的资源在缓存里并且没有失效，那么就直接使用，否则向服务器发起新的请求。</p></li><li><p><strong>DNS查询</strong>：见10</p></li><li><p><strong>获取MAC地址</strong>：当浏览器得到IP地址后，数据传输还需要知道目的主机MAC地址，因为应用层下发数据给传输层，TCP协议会指定源端口号和目的端口号，然后下发给网络层。网络层会将本机地址作为源地址，获取的IP地址作为目的地址。然后将下发给数据链路层，数据链路层的发送需要加入通信双方的MAC地址，本机的MAC地址作为源MAC地址，目的MAC地址需要分情况处理。通过将IP地址与本机的子网掩码相与，可以判断是否与请求主机在同一个子网里，如果在同一个子网里，可以使用APR协议获取到目的主机的MAC地址，如果不在一个子网里，那么请求应该转发给网关，由它代为转发，此时同样可以通过ARP协议来获取网关的MAC地址，此时目的主机的MAC地址应该为网关的地址。</p></li><li><p><strong>TCP三次握手</strong>：见3， TCP 建立连接的三次握手的过程，首先客户端向服务器发送一个SYN连接请求报文段和一个随机序号，服务端接收到请求后向服务器端发送一个SYN ACK报文段，确认连接请求，并且也向客户端发送一个随机序号。客户端接收服务器的确认应答后，进入连接建立的状态，同时向服务器也发送一个ACK确认报文段，服务器端接收到确认后，也进入连接建立状态，此时双方的连接就建立起来了。</p></li><li><p><strong>HTTP请求</strong>：浏览器首先使用 HTTP 协议或者 HTTPS 协议，向服务端请求页面，注意如果是HTTPS协议的话，还有一个TLS四次握手</p></li><li><p><strong>返回数据</strong>：当页面请求发送到服务器端后，服务器端会返回一个 html 文件作为响应，浏览器接收到响应后，开始对 html 文件进行解析，开始页面的渲染过程。</p></li><li><p><strong>页面渲染：</strong></p><p><a href="https://juejin.cn/post/6844903476506394638#heading-6">浏览器渲染的博客，此处不深入</a></p><blockquote><p>URL请求的数据类型，有时候是下载类型，有时候是HTML页面，那么浏览器怎么区分呢？</p><p>​通过 Content-Type 字段。Content-Type是HTTP头部中的重要字段，它告诉浏览器服务器返回的响应体数据是什么类型，然后浏览器会根据Content-Type的值来决定如何显示响应体的内容。比如Content-Type的值是application&#x2F;octet-stream，通常情况下，浏览器会按照下载类型来处理该请求，该请求被提交给浏览器的下载管理器，同时该URL请求的导航流程就此结束；如果Content-Type字段的值是text&#x2F;html，这就是告诉浏览器，服务器返回的数据是HTML格式，浏览器会继续导航流程，接下来渲染进程登场了。</p></blockquote><ol><li>浏览器首先会根据 html 文件构建 DOM 树。</li><li>计算DOM树上的CSS属性，根据解析到的 CSS 文件构建 CSSOM 树<ol><li>如果遇到 script 标签，则判断是否含有 defer 或者 async 属性，前者会并行进行下载并执行JS，后者会先下载文件，如果都没有，就会阻塞渲染流程直到JS执行完毕，这里使用HTTP2.0协议的话会极大多图的下载速度。</li></ol></li><li>当 DOM 树和 CSSOM 树建立好后，根据它们来构建渲染树。渲染树构建好后，会根据渲染树来进行布局。布局完成后，最后使用浏览器的 UI 接口对页面进行绘制。这个时候整个页面就显示出来了。</li></ol></li><li><p><strong>TCP四次挥手：</strong>最后一步是 TCP 断开连接的四次挥手过程。若客户端认为数据发送完成，则它需要向服务端发送连接释放请求。服务端收到连接释放请求后，会告诉应用层要释放 TCP 链接。然后会发送 ACK 包，并进入 CLOSE_WAIT 状态，此时表明客户端到服务端的连接已经释放，不再接收客户端发的数据了。但是因为 TCP 连接是双向的，所以服务端仍旧可以发送数据给客户端。服务端如果此时还有没发完的数据会继续发送，完毕后会向客户端发送连接释放请求，然后服务端便进入 LAST-ACK 状态。客户端收到释放请求后，向服务端发送确认应答，此时客户端进入 TIME-WAIT 状态。该状态会持续 2MSL（最大段生存期，指报文段在网络中生存的时间，超时会被抛弃） 时间，若该时间段内没有服务端的重发请求的话，就进入 CLOSED 状态。当服务端收到确认应答后，也便进入 CLOSED 状态。</p></li></ol><h2 id="12-session、cookie、localStorage、sessionStorage的区别"><a href="#12-session、cookie、localStorage、sessionStorage的区别" class="headerlink" title="12.session、cookie、localStorage、sessionStorage的区别"></a>12.session、cookie、localStorage、sessionStorage的区别</h2><p><a href="https://www.cnblogs.com/jing-tian/p/10991431.html">这篇讲得超级好球你了看一看吧</a></p><h4 id="一、Cookie、session和localStorage的区别"><a href="#一、Cookie、session和localStorage的区别" class="headerlink" title="一、Cookie、session和localStorage的区别"></a><strong>一、Cookie、session和localStorage的区别</strong></h4><ul><li>cookie的内容主要包括：名字、值、过期时间、路径和域。路径与域一起构成cookie的作用范围。若不设置时间，则表示这个cookie的生命期为浏览器会话期间，关闭浏览器窗口，cookie就会消失。这种生命期为浏览器会话期的cookie被称为会话cookie。 </li><li>会话cookie一般不存储在硬盘而是保存在内存里，当然这个行为并不是规范规定的。若设置了过期时间，浏览器就会把cookie保存到硬盘上，关闭后再打开浏览器这些cookie仍然有效直到超过设定的过期时间。对于保存在内存里的cookie，不同的浏览器有不同的处理方式session机制。 </li><li>当程序需要为某个客户端的请求创建一个session时，服务器首先检查这个客户端的请求里是否已包含了一个session标识（称为session id），如果已包含则说明以前已经为此客户端创建过session，服务器就按照session id把这个session检索出来使用（检索不到，会新建一个），如果客户端请求不包含session id，则为客户端创建一个session并且生成一个与此session相关联的session id，session id的值应该是一个既不会重复，又不容易被找到规律以仿造的字符串，这个session id将被在本次响应中返回给客户端保存。保存这个session id的方式可以采用cookie，这样在交互过程中浏览器可以自动的按照规则把这个标识发送给服务器。</li></ul><h4 id="二、cookie和session的区别"><a href="#二、cookie和session的区别" class="headerlink" title="二、cookie和session的区别"></a><strong>二、cookie和session的区别</strong></h4><ol><li>cookie数据存放在客户的浏览器上，session数据放在服务器上</li><li>cookie不是很安全，别人可以分析存放在本地的cookie并进行cookie欺骗，考虑<em>到安全应当使用session</em></li><li>session会在一定时间内保存在服务器上，当访问增多，会比较占用你服务器的性能，考虑到减轻服务器性能方面，应当使用cookie </li><li>单个cookie保存的数据不能超过4K，很多浏览器都限制一个站点最多保存20个cookie </li><li>建议将登录信息等重要信息存放为session，其他信息如果需要保留，可以放在cookie中 </li><li>session保存在服务器，客户端不知道其中的信心；cookie保存在客户端，服务器能够知道其中的信息 </li><li>session中保存的是对象，cookie中保存的是字符串 </li><li>session不能区分路径，同一个用户在访问一个网站期间，所有的session在任何一个地方都可以访问到，而cookie中如果设置了路径参数，那么同一个网站中不同路径下的cookie互相是访问不到的。 </li><li>cookie：是服务端向客户端写入的小的片段信息。cookie信息保存在服务器缓存区，不会在客户端显现。当你第一次登陆一个网站，服务器向你的机器写得片段信息。你可以在Internet选项中找到存放cookie的文件夹。如果不删除，cookie就一直在这个文件夹中。 </li><li>session需要借助cookie才能正常工作。如果客户端完全禁止cookie，session将失效。 但是如果服务器端启用了url编码，也就是用 URLEncoder.encode()把所有的url编码了，则会在url后面出现如下类似的东西 index.jsp:jsessionid&#x3D;fdsaffjdlks;jaf;lkdjsf 服务器通过这个进行session的判断。</li><li>Cookie支持跨域名访问，例如将domain属性设置为“.biaodianfu.com”，则以“.biaodianfu.com”为后缀的一切域名均能够访问该Cookie。跨域名Cookie如今被普遍用在网络中，例如Google、Baidu、Sina等,而Session则不会支持跨域名访问。Session仅在他所在的域名内有效。仅运用Cookie或者仅运用Session可能完成不了理想的效果。这时应该尝试一下同时运用Cookie与Session。Cookie与Session的搭配运用在实践项目中会完成很多意想不到的效果。</li></ol><h4 id="三、web-Storage和Cookie的区别"><a href="#三、web-Storage和Cookie的区别" class="headerlink" title="三、web Storage和Cookie的区别"></a><strong>三、web Storage和Cookie的区别</strong></h4><p>Web Storage的概念和cookie相似，区别是它是为了更大容量存储设计的，cookie的大小是受限的，并且每次请求一个新的页面的时候cookie都会被发送过去，这样无形中浪费了带宽，另外cookie还需要指定作用域，不可跨域调用。<br>除此之外，web storage拥有setItem,getItem,removeItem,clear等方法，不像cookie需要前端开发者自己封装setCookie，getCookie。<br>但是cookie也是不可或缺的，cookie的作用是与服务器进行交互，作为http规范的一部分而存在的，而web Storage仅仅是为了在本地“存储”数据而生<br>sessionStorage、localStorage、cookie都是在浏览器端存储的数据，其中sessionStorage的概念很特别，引入了一个“浏览器窗口”的概念，sessionStorage是在同源的同窗口中，始终存在的数据，也就是说只要这个浏览器窗口没有关闭，即使刷新页面或进入同源另一个页面，数据仍然存在，关闭窗口后，sessionStorage就会被销毁，同时“独立”打开的不同窗口，即使是同一页面，sessionStorage对象也是不同的</p><ol><li>Web Storage带来的好处：<br>减少网络流量：一旦数据保存在本地之后，就可以避免再向服务器请求数据，因此减少不必要的数据请求，减少数据在浏览器和服务器间不必要的来回传递 </li><li>快速显示数据：性能好，从本地读数据比通过网络从服务器上获得数据快得多，本地数据可以及时获得，再加上网页本身也可以有缓存，因此整个页面和数据都在本地的话，可以立即显示 </li><li>临时存储：很多时候数据只需要在用户浏览一组页面期间使用，关闭窗口后数据就可以丢弃了，这种情况使用sessionStorage非常方便</li></ol><h4 id="四、浏览器本地存储与服务器端存储的区别"><a href="#四、浏览器本地存储与服务器端存储的区别" class="headerlink" title="四、浏览器本地存储与服务器端存储的区别"></a><strong>四、浏览器本地存储与服务器端存储的区别</strong></h4><p>其实数据既可以在浏览器本地存储，也可以在服务器端存储。</p><p>浏览器可以保存一些数据，需要的时候直接从本地存取，sessionStorage、localStorage和cookie都是由浏览器存储在本地的数据 服务器端也可以保存所有用户的所有数据，但需要的时候浏览器要向服务器请求数据。<br>服务器端可以保存用户的持久数据，如数据库和云存储将用户的大量数据保存在服务器端<br>服务器端也可以保存用户的临时会话数据，服务器端的session机制，如jsp的session对象，数据保存在服务器上，实际上，服务器和浏览器之间仅需传递session id即可，服务器根据session id找到对应用户的session对象，会话数据仅在一段时间内有效，这个时间就是server端设置的session有效期</p><p>服务器端保存所有的用户的数据，所以服务器端的开销较大，而浏览器端保存则把不同用户需要的数据分别保存在用户各自的浏览器中，浏览器端一般只用来存储小数据，而非服务可以存储大数据或小数据服务器存储数据安全一些，浏览器只适合存储一般数据</p><h4 id="五、sessionStorage、localStorage和cookie的区别"><a href="#五、sessionStorage、localStorage和cookie的区别" class="headerlink" title="五、sessionStorage、localStorage和cookie的区别"></a><strong>五、sessionStorage、localStorage和cookie的区别</strong></h4><p>共同点：都是保存在浏览器端、且同源的<br>区别：<br>1、cookie数据始终在同源的http请求中携带（即使不需要），即cookie在浏览器和服务器间来回传递，而sessionStorage和localStorage不会自动把数据发送给服务器，仅在本地保存。cookie数据还有路径（path）的概念，可以限制cookie只属于某个路径下<br>2、存储大小限制也不同，cookie数据不能超过4K，同时因为每次http请求都会携带cookie、所以cookie只适合保存很小的数据，如会话标识。sessionStorage和localStorage虽然也有存储大小的限制，但比cookie大得多，可以达到5M或更大<br>3、数据有效期不同，sessionStorage：仅在当前浏览器窗口关闭之前有效；localStorage：始终有效，窗口或浏览器关闭也一直保存，因此用作持久数据；cookie：只在设置的cookie过期时间之前有效，即使窗口关闭或浏览器关闭<br>4、作用域不同，sessionStorage不在不同的浏览器窗口中共享，即使是同一个页面；localstorage在所有同源窗口中都是共享的；cookie也是在所有同源窗口中都是共享的<br>5、web Storage支持事件通知机制，可以将数据更新的通知发送给监听者<br>6、web Storage的api接口使用更方便</p><h4 id="六、sessionStorage与页面js数据对象的区别"><a href="#六、sessionStorage与页面js数据对象的区别" class="headerlink" title="六、sessionStorage与页面js数据对象的区别"></a><strong>六、sessionStorage与页面js数据对象的区别</strong></h4><ul><li>页面中一般的js对象的生存期仅在当前页面有效，因此刷新页面或转到另一页面这样的重新加载页面的情况，数据就不存在了</li><li>而sessionStorage只要同源的同窗口中，刷新页面或进入同源的不同页面，数据始终存在，也就是说只要浏览器不关闭，数据仍然存在</li></ul><h3 id="13-说一下HTTP-3-0"><a href="#13-说一下HTTP-3-0" class="headerlink" title="13.说一下HTTP 3.0"></a>13.说一下HTTP 3.0</h3><p>HTTP&#x2F;3基于UDP协议实现了类似于TCP的多路复用数据流、传输可靠性等功能，这套功能被称为QUIC协议。</p><p><img src="https://cdn.nlark.com/yuque/0/2020/webp/1500604/1604068246276-9b0f553d-3c6e-43a3-8185-8565f9fa1fb4.webp" alt="image"></p><ol><li>流量控制、传输可靠性功能：QUIC在UDP的基础上增加了一层来保证数据传输可靠性，它提供了数据包重传、拥塞控制、以及其他一些TCP中的特性。</li><li>集成TLS加密功能：目前QUIC使用TLS1.3，减少了握手所花费的RTT数。</li><li>多路复用：同一物理连接上可以有多个独立的逻辑数据流，实现了数据流的单独传输，解决了TCP的队头阻塞问题。</li><li>快速握手：由于基于UDP，可以实现使用0 ~ 1个RTT来建立连接。</li></ol><h2 id="20-RestFul与RPC区别-RestFul-优点"><a href="#20-RestFul与RPC区别-RestFul-优点" class="headerlink" title="20.RestFul与RPC区别 RestFul 优点"></a>20.RestFul与RPC区别 RestFul 优点</h2><p><a href="https://zhuanlan.zhihu.com/p/34440779">直接看博客</a></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>html知识点</title>
      <link href="/2022/07/29/html-mian-shi-ti/"/>
      <url>/2022/07/29/html-mian-shi-ti/</url>
      
        <content type="html"><![CDATA[<h3 id="1-src和href的区别"><a href="#1-src和href的区别" class="headerlink" title="1. src和href的区别"></a>1. src和href的区别</h3><p>src和href都是<strong>用来引用外部的资源</strong>，它们的区别如下：</p><ul><li><strong>src：</strong>表示对资源的引用，它指向的内容会嵌入到当前标签所在的位置。src会将其指向的资源下载并应⽤到⽂档内，如请求js脚本。当浏览器解析到该元素时，&#x3D;&#x3D;<strong>会暂停其他资源的下载和处理</strong>&#x3D;&#x3D;，直到将该资源加载、编译、执⾏完毕，所以⼀般js脚本会放在页面底部。</li><li><strong>href：</strong>表示超文本引用，它指向一些网络资源，建立和当前元素或本文档的链接关系。当浏览器识别到它指向的⽂件时，就&#x3D;&#x3D;<strong>会并⾏下载资源</strong>&#x3D;&#x3D;，不会停⽌对当前⽂档的处理。 常用在a、link等标签上。</li></ul><h3 id="2-对HTML语义化的理解"><a href="#2-对HTML语义化的理解" class="headerlink" title="2. 对HTML语义化的理解"></a>2. 对HTML语义化的理解</h3><p><strong>语义化是指</strong>根据内容的结构化（内容语义化），选择合适的标签（代码语义化）。通俗来讲就是用正确的标签做正确的事情。</p><p>语义化的优点如下：</p><ul><li>对机器友好，带有语义的文字表现力丰富，更适合搜索引擎的爬虫爬取有效信息，有利于SEO。除此之外，语义类还支持读屏软件，根据文章可以自动生成目录；</li><li>对开发者友好，使用语义类标签增强了可读性，结构更加清晰，开发者能清晰的看出网页的结构，便于团队的开发与维护。</li></ul><p> 常见的语义化标签：</p><pre><code>&lt;header&gt;&lt;/header&gt;  头部&lt;nav&gt;&lt;/nav&gt;  导航栏&lt;section&gt;&lt;/section&gt;  区块（有语义化的div）&lt;main&gt;&lt;/main&gt;  主要区域&lt;article&gt;&lt;/article&gt;  主要内容&lt;aside&gt;&lt;/aside&gt;  侧边栏&lt;footer&gt;&lt;/footer&gt;  底部</code></pre><h3 id="4-script标签中defer和async的区别"><a href="#4-script标签中defer和async的区别" class="headerlink" title="4. script标签中defer和async的区别"></a>4. script标签中defer和async的区别</h3><p>如果没有defer或async属性，浏览器会立即加载并执行相应的脚本。它不会等待后续加载的文档元素，读取到就会开始加载和执行，这样就阻塞了后续文档的加载。</p><p>下图可以直观的看出三者之间的区别:</p><p><img src="https://cdn.nlark.com/yuque/0/2020/png/1500604/1603547262709-5029c4e4-42f5-4fd4-bcbb-c0e0e3a40f5a.png" alt="image.png"></p><p>其中蓝色代表js脚本网络加载时间，红色代表js脚本执行时间，绿色代表html解析。</p><p><strong>defer 和 async属性都是去异步加载外部的JS脚本文件，它们都不会阻塞页面的解析</strong>，其区别如下：</p><ul><li><strong>执行顺序：</strong>多个带async属性的标签，不能保证加载的顺序；多个带defer属性的标签，按照加载顺序执行；</li><li><strong>脚本是否并行执行：</strong>async属性，表示<strong>后续文档的加载和执行与js脚本的加载和执行是并行进行的</strong>，即异步执行；defer属性，加载后续文档的过程和js脚本的加载(此时仅加载不执行)是并行进行的(异步)，js脚本需要等到文档所有元素解析完成之后才执行，DOMContentLoaded事件触发执行之前。</li></ul><h3 id="5-常⽤的meta标签有哪些"><a href="#5-常⽤的meta标签有哪些" class="headerlink" title="5. 常⽤的meta标签有哪些"></a>5. 常⽤的meta标签有哪些</h3><p><code>meta</code> 标签由 <code>name</code> 和 <code>content</code> 属性定义，<strong>用来描述网页文档的属性</strong>，比如网页的作者，网页描述，关键词等，除了HTTP标准固定了一些<code>name</code>作为大家使用的共识，开发者还可以自定义name。</p><p>常用的meta标签：</p><p>（1）<code>charset</code>，用来描述HTML文档的编码类型：</p><pre><code>&lt;meta charset=&quot;UTF-8&quot; &gt;</code></pre><p>（2） <code>keywords</code>，页面关键词：</p><pre><code>&lt;meta name=&quot;keywords&quot; content=&quot;关键词&quot; /&gt;</code></pre><p>（3）<code>description</code>，页面描述：</p><pre><code>&lt;meta name=&quot;description&quot; content=&quot;页面描述内容&quot; /&gt;</code></pre><p>（4）<code>refresh</code>，页面重定向和刷新：</p><pre><code>&lt;meta http-equiv=&quot;refresh&quot; content=&quot;0;url=&quot; /&gt;</code></pre><p>（5）<code>viewport</code>，适配移动端，可以控制视口的大小和比例：</p><pre><code>&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1, maximum-scale=1&quot;&gt;</code></pre><p>其中，<code>content</code> 参数有以下几种：</p><ul><li><code>width viewport</code> ：宽度(数值&#x2F;device-width)</li><li><code>height viewport</code> ：高度(数值&#x2F;device-height)</li><li><code>initial-scale</code> ：初始缩放比例</li><li><code>maximum-scale</code> ：最大缩放比例</li><li><code>minimum-scale</code> ：最小缩放比例</li><li><code>user-scalable</code> ：是否允许用户缩放(yes&#x2F;no）</li></ul><p>（6）搜索引擎索引方式：</p><pre><code>&lt;meta name=&quot;robots&quot; content=&quot;index,follow&quot; /&gt;</code></pre><p>其中，<code>content</code> 参数有以下几种：</p><ul><li><code>all</code>：文件将被检索，且页面上的链接可以被查询；</li><li><code>none</code>：文件将不被检索，且页面上的链接不可以被查询；</li><li><code>index</code>：文件将被检索；</li><li><code>follow</code>：页面上的链接可以被查询；</li><li><code>noindex</code>：文件将不被检索；</li><li><code>nofollow</code>：页面上的链接不可以被查询。</li></ul><h3 id="6-HTML5有哪些更新"><a href="#6-HTML5有哪些更新" class="headerlink" title="6. HTML5有哪些更新"></a>6. HTML5有哪些更新</h3><h4 id="1-语义化标签"><a href="#1-语义化标签" class="headerlink" title="1. 语义化标签"></a>1. 语义化标签</h4><ul><li>header：定义文档的页眉（头部）；</li><li>nav：定义导航链接的部分；</li><li>footer：定义文档或节的页脚（底部）；</li><li>article：定义文章内容；</li><li>section：定义文档中的节（section、区段）；</li><li>aside：定义其所处内容之外的内容（侧边）；</li></ul><h4 id="2-媒体标签"><a href="#2-媒体标签" class="headerlink" title="2. 媒体标签"></a>2. 媒体标签</h4><p>（1） audio：音频</p><pre><code>&lt;audio src=&#39;&#39; controls autoplay loop=&#39;true&#39;&gt;&lt;/audio&gt;</code></pre><p>属性：</p><ul><li>controls 控制面板</li><li>autoplay 自动播放</li><li>loop&#x3D;‘true’ 循环播放</li></ul><p>（2）video视频</p><pre><code>&lt;video src=&#39;&#39; poster=&#39;imgs/aa.jpg&#39; controls&gt;&lt;/video&gt;</code></pre><p>属性：</p><ul><li>poster：指定视频还没有完全下载完毕，或者用户还没有点击播放前显示的封面。默认显示当前视频文件的第一针画面，当然通过poster也可以自己指定。</li><li>controls 控制面板</li><li>width</li><li>height</li></ul><p>（3）source标签</p><p>因为浏览器对视频格式支持程度不一样，为了能够兼容不同的浏览器，可以通过source来指定视频源。</p><pre><code>&lt;video&gt;    &lt;source src=&#39;aa.flv&#39; type=&#39;video/flv&#39;&gt;&lt;/source&gt;    &lt;source src=&#39;aa.mp4&#39; type=&#39;video/mp4&#39;&gt;&lt;/source&gt;&lt;/video&gt;</code></pre><h4 id="3-表单"><a href="#3-表单" class="headerlink" title="3. 表单"></a>3. 表单</h4><p><strong>表单类型：</strong></p><ul><li>email ：能够验证当前输入的邮箱地址是否合法</li><li>url ： 验证URL</li><li>number ： 只能输入数字，其他输入不了，而且自带上下增大减小箭头，max属性可以设置为最大值，min可以设置为最小值，value为默认值。</li><li>search ： 输入框后面会给提供一个小叉，可以删除输入的内容，更加人性化。</li><li>range ： 可以提供给一个范围，其中可以设置max和min以及value，其中value属性可以设置为默认值</li><li>color ： 提供了一个取色板</li><li>time ： 时分秒</li><li>data ： 日期选择年月日</li><li>datatime ： 时间和日期(目前只有Safari支持)</li><li>datatime-local ：日期时间控件</li><li>week ：周控件</li><li>month：月控件</li></ul><p><strong>表单属性：</strong></p><ul><li><p>placeholder ：提示信息</p></li><li><p>autofocus ：自动获取焦点</p></li><li><p>autocomplete&#x3D;“on” 或者 autocomplete&#x3D;“off” 使用这个属性需要有两个前提：</p></li><li><ul><li>表单必须提交过</li><li>必须有name属性。</li></ul></li><li><p>required：要求输入框不能为空，必须有值才能够提交。</p></li><li><p>pattern&#x3D;” “ 里面写入想要的正则模式，例如手机号patte&#x3D;”^(+86)?\d{10}$”</p></li><li><p>multiple：可以选择多个文件或者多个邮箱</p></li><li><p>form&#x3D;” form表单的ID”</p></li></ul><p><strong>表单事件：</strong></p><ul><li>oninput 每当input里的输入框内容发生变化都会触发此事件。</li><li>oninvalid 当验证不通过时触发此事件。</li></ul><h4 id="4-进度条、度量器"><a href="#4-进度条、度量器" class="headerlink" title="4. 进度条、度量器"></a>4. 进度条、度量器</h4><ul><li><p>progress标签：用来表示任务的进度（IE、Safari不支持），max用来表示任务的进度，value表示已完成多少</p></li><li><p>meter属性：用来显示剩余容量或剩余库存（IE、Safari不支持）</p></li><li><ul><li>high&#x2F;low：规定被视作高&#x2F;低的范围</li><li>max&#x2F;min：规定最大&#x2F;小值</li><li>value：规定当前度量值</li></ul></li></ul><p>设置规则：min &lt; low &lt; high &lt; max</p><h4 id="5-DOM查询操作"><a href="#5-DOM查询操作" class="headerlink" title="5.DOM查询操作"></a>5.DOM查询操作</h4><ul><li>document.querySelector()</li><li>document.querySelectorAll()</li></ul><p>它们选择的对象可以是标签，可以是类(需要加点)，可以是ID(需要加#)</p><h4 id="6-Web存储"><a href="#6-Web存储" class="headerlink" title="6. Web存储"></a>6. Web存储</h4><p>HTML5 提供了两种在客户端存储数据的新方法：</p><ul><li>localStorage - 没有时间限制的数据存储</li><li>sessionStorage - 针对一个 session 的数据存储</li></ul><h4 id="7-其他"><a href="#7-其他" class="headerlink" title="7. 其他"></a>7. 其他</h4><ul><li>拖放：拖放是一种常见的特性，即抓取对象以后拖到另一个位置。设置元素可拖放：</li></ul><pre><code>&lt;img draggable=&quot;true&quot; /&gt;</code></pre><ul><li>画布（canvas ）： canvas 元素使用 JavaScript 在网页上绘制图像。画布是一个矩形区域，可以控制其每一像素。canvas 拥有多种绘制路径、矩形、圆形、字符以及添加图像的方法。</li></ul><pre><code>&lt;canvas id=&quot;myCanvas&quot; width=&quot;200&quot; height=&quot;100&quot;&gt;&lt;/canvas&gt;</code></pre><ul><li>SVG：SVG 指可伸缩矢量图形，用于定义用于网络的基于矢量的图形，使用 XML 格式定义图形，图像在放大或改变尺寸的情况下其图形质量不会有损失，它是万维网联盟的标准</li><li>地理定位：Geolocation（地理定位）用于定位用户的位置。‘</li></ul><p><strong>总结：</strong></p><p>（1）新增语义化标签：nav、header、footer、aside、section、article</p><p>（2）音频、视频标签：audio、video</p><p>（3）数据存储：localStorage、sessionStorage</p><p>（4）canvas（画布）、Geolocation（地理定位）、websocket（通信协议）</p><p>（5）input标签新增属性：placeholder、autocomplete、autofocus、required</p><p>（6）history API：go、forward、back、pushstate</p><p><strong>移除的元素有：</strong></p><ul><li>纯表现的元素：basefont，big，center，font, s，strike，tt，u;</li><li>对可用性产生负面影响的元素：frame，frameset，noframes；</li></ul><h3 id="7-img的srcset属性的作⽤？"><a href="#7-img的srcset属性的作⽤？" class="headerlink" title="7. img的srcset属性的作⽤？"></a>7. img的srcset属性的作⽤？</h3><p>响应式页面中经常用到根据屏幕密度设置不同的图片。这时就用到了 img 标签的srcset属性。srcset属性用于设置不同屏幕密度下，img 会自动加载不同的图片。用法如下：</p><pre><code>&lt;img src=&quot;image-128.png&quot; srcset=&quot;image-256.png 2x&quot; /&gt;</code></pre><p>使用上面的代码，就能实现在屏幕密度为1x的情况下加载image-128.png, 屏幕密度为2x时加载image-256.png。</p><p>按照上面的实现，不同的屏幕密度都要设置图片地址，目前的屏幕密度有1x,2x,3x,4x四种，如果每一个图片都设置4张图片，加载就会很慢。所以就有了新的srcset标准。代码如下：</p><pre><code>&lt;img src=&quot;image-128.png&quot;     srcset=&quot;image-128.png 128w, image-256.png 256w, image-512.png 512w&quot;     sizes=&quot;(max-width: 360px) 340px, 128px&quot; /&gt;</code></pre><p>其中srcset指定图片的地址和对应的图片质量。sizes用来设置图片的尺寸零界点。对于 srcset 中的 w 单位，可以理解成图片质量。如果可视区域小于这个质量的值，就可以使用。浏览器会自动选择一个最小的可用图片。</p><p>sizes语法如下：</p><pre><code>sizes=&quot;[media query] [length], [media query] [length] ... &quot;</code></pre><p>sizes就是指默认显示128px, 如果视区宽度大于360px, 则显示340px。</p><h3 id="8-行内元素有哪些？块级元素有哪些？-空-void-元素有那些？"><a href="#8-行内元素有哪些？块级元素有哪些？-空-void-元素有那些？" class="headerlink" title="8.  行内元素有哪些？块级元素有哪些？ 空(void)元素有那些？"></a>8.  行内元素有哪些？块级元素有哪些？ 空(void)元素有那些？</h3><ul><li>行内元素有：<code>a b span img input select strong</code>；</li><li>块级元素有：<code>div ul ol li dl dt dd h1 h2 h3 h4 h5 h6 p</code>；</li></ul><p>空元素，即没有内容的HTML元素。空元素是在开始标签中关闭的，也就是空元素没有闭合标签：</p><ul><li>常见的有：<code>&lt;br&gt;</code>、<code>&lt;hr&gt;</code>、<code>&lt;img&gt;</code>、<code>&lt;input&gt;</code>、<code>&lt;link&gt;</code>、<code>&lt;meta&gt;</code>；</li><li>鲜见的有：<code>&lt;area&gt;</code>、<code>&lt;base&gt;</code>、<code>&lt;col&gt;</code>、<code>&lt;colgroup&gt;</code>、<code>&lt;command&gt;</code>、<code>&lt;embed&gt;</code>、<code>&lt;keygen&gt;</code>、<code>&lt;param&gt;</code>、<code>&lt;source&gt;</code>、<code>&lt;track&gt;</code>、<code>&lt;wbr&gt;</code>。</li></ul><h3 id="9-说一下-web-worker"><a href="#9-说一下-web-worker" class="headerlink" title="9. 说一下 web worker"></a>9. 说一下 web worker</h3><p><strong>web worker 的作用就是浏览器作为宿主环境给单线程的 JS 创造多线程运行环境</strong>，允许主线程创建 worker 线程，分配任务给后者，主线程运行的同时 worker 线程也在运行，相互不干扰，在 worker 线程运行结束后把结果返回给主线程。这样做的好处是<strong>主线程可以把计算密集型或高延迟的任务交给worker线程执行，这样主线程就会变得轻松，不会被阻塞或拖慢</strong>。这并不意味着JS语言本身支持了多线程能力，而是浏览器作为宿主环境提供了JS一个多线程运行的环境。</p><p>不过因为worker一旦新建，就会一直运行，不会被主线程的活动打断，这样有利于随时响应主线程的通性，但是也会造成资源的浪费，所以不应过度使用，用完注意关闭。</p><p><strong>限制</strong></p><p>worker线程的使用有一些注意点</p><ol><li><strong>同源限制</strong> worker线程执行的脚本文件必须和主线程的脚本文件同源，这是当然的了，总不能允许worker线程到别人电脑上到处读文件吧</li><li><strong>文件限制</strong> 为了安全，worker线程无法读取本地文件，它所加载的脚本必须来自网络，且需要与主线程的脚本同源</li><li><strong>DOM操作限制</strong> worker线程在与主线程的window不同的另一个全局上下文中运行，其中无法读取主线程所在网页的DOM对象，也不能获取 <code>document</code>、<code>window</code>等对象，但是可以获取<code>navigator</code>、<code>location(只读)</code>、<code>XMLHttpRequest</code>、<code>setTimeout族</code>等浏览器API。</li><li><strong>通信限制</strong> worker线程与主线程不在同一个上下文，不能直接通信，需要通过<code>postMessage</code>方法来通信。</li><li><strong>脚本限制</strong> worker线程不能执行<code>alert</code>、<code>confirm</code>，但可以使用 <code>XMLHttpRequest</code> 对象发出ajax请求。</li></ol><h3 id="10-HTML5的离线储存怎么使用，它的工作原理是什么"><a href="#10-HTML5的离线储存怎么使用，它的工作原理是什么" class="headerlink" title="10. HTML5的离线储存怎么使用，它的工作原理是什么"></a>10. HTML5的离线储存怎么使用，它的工作原理是什么</h3><p>离线存储指的是：在用户没有与因特网连接时，可以正常访问站点或应用，在用户与因特网连接时，更新用户机器上的缓存文件。</p><p><strong>原理：</strong>HTML5的离线存储是基于一个新建的 <code>.appcache</code> 文件的缓存机制(不是存储技术)，通过这个文件上的解析清单离线存储资源，这些资源就会像cookie一样被存储了下来。之后当网络在处于离线状态下时，浏览器会通过被离线存储的数据进行页面展示</p><p><strong>使用方法：</strong></p><p>（1）创建一个和 html 同名的 manifest 文件，然后在页面头部加入 manifest 属性：</p><pre><code>&lt;html lang=&quot;en&quot; manifest=&quot;index.manifest&quot;&gt;</code></pre><p>（2）在 <code>index.manifest</code> 文件中编写需要离线存储的资源：</p><pre><code>#v0.11CACHE:js/app.jscss/style.cssNETWORK:resourse/logo.pngFALLBACK:offline.html</code></pre><ul><li><strong>CACHE</strong>: 表示需要离线存储的资源列表，由于包含 manifest 文件的页面将被自动离线存储，所以不需要把页面自身也列出来。</li><li><strong>NETWORK</strong>: 表示在它下面列出来的资源只有在在线的情况下才能访问，他们不会被离线存储，所以在离线情况下无法使用这些资源。不过，如果在 CACHE 和 NETWORK 中有一个相同的资源，那么这个资源还是会被离线存储，也就是说 CACHE 的优先级更高。</li><li><strong>FALLBACK</strong>: 表示如果访问第一个资源失败，那么就使用第二个资源来替换他，比如上面这个文件表示的就是如果访问根目录下任何一个资源失败了，那么就去访问 offline.html 。</li></ul><p>（3）在离线状态时，操作 <code>window.applicationCache</code> 进行离线缓存的操作。</p><p><strong>如何更新缓存：</strong></p><p> （1）更新 manifest 文件</p><p> （2）通过 javascript 操作</p><p> （3）清除浏览器缓存</p><p><strong>注意事项：</strong></p><p> （1）浏览器对缓存数据的容量限制可能不太一样（某些浏览器设置的限制是每个站点 5MB）。</p><p> （2）如果 manifest 文件，或者内部列举的某一个文件不能正常下载，整个更新过程都将失败，浏览器继续全部使用老的缓存。</p><p> （3）引用 manifest 的 html 必须与 manifest 文件同源，在同一个域下。</p><p> （4）FALLBACK 中的资源必须和 manifest 文件同源。</p><p> （5）当一个资源被缓存后，该浏览器直接请求这个绝对路径也会访问缓存中的资源。</p><p> （6）站点中的其他页面即使没有设置 manifest 属性，请求的资源如果在缓存中也从缓存中访问。</p><p> （7）当 manifest 文件发生改变时，资源请求本身也会触发更新。</p><h3 id="11-浏览器是如何对-HTML5-的离线储存资源进行管理和加载？"><a href="#11-浏览器是如何对-HTML5-的离线储存资源进行管理和加载？" class="headerlink" title="11. 浏览器是如何对 HTML5 的离线储存资源进行管理和加载？"></a>11. 浏览器是如何对 HTML5 的离线储存资源进行管理和加载？</h3><ul><li><strong>在线的情况下</strong>，浏览器发现 html 头部有 manifest 属性，它会请求 manifest 文件，如果是第一次访问页面 ，那么浏览器就会根据 manifest 文件的内容下载相应的资源并且进行离线存储。如果已经访问过页面并且资源已经进行离线存储了，那么浏览器就会使用离线的资源加载页面，然后浏览器会对比新的 manifest 文件与旧的 manifest 文件，如果文件没有发生改变，就不做任何操作，如果文件改变了，就会重新下载文件中的资源并进行离线存储。</li><li><strong>离线的情况下</strong>，浏览器会直接使用离线存储的资源。</li></ul><h3 id="12-title与h1的区别、b与strong的区别、i与em的区别？"><a href="#12-title与h1的区别、b与strong的区别、i与em的区别？" class="headerlink" title="12. title与h1的区别、b与strong的区别、i与em的区别？"></a>12. title与h1的区别、b与strong的区别、i与em的区别？</h3><ul><li>strong标签有语义，是起到加重语气的效果，而b标签是没有的，b标签只是一个简单加粗标签。b标签之间的字符都设为粗体，strong标签加强字符的语气都是通过粗体来实现的，而搜索引擎更侧重strong标签。</li><li>title属性没有明确意义只表示是个标题，H1则表示层次明确的标题，对页面信息的抓取有很大的影响</li><li><strong>i内容展示为斜体，em表示强调的文本</strong></li></ul><h3 id="13-iframe-有那些优点和缺点？"><a href="#13-iframe-有那些优点和缺点？" class="headerlink" title="13. iframe 有那些优点和缺点？"></a>13. <strong>iframe 有那些优点和缺点？</strong></h3><p>iframe 元素会创建包含另外一个文档的内联框架（即行内框架）。</p><p><strong>优点：</strong></p><ul><li>用来加载速度较慢的内容（如广告）</li><li>可以使脚本可以并行下载</li><li>可以实现跨子域通信</li></ul><p><strong>缺点：</strong></p><ul><li>iframe 会阻塞主页面的 onload 事件</li><li>无法被一些搜索引擎所识别</li><li>会产生很多页面，不容易管理</li></ul><h3 id="14-label-的作用是什么？如何使用？"><a href="#14-label-的作用是什么？如何使用？" class="headerlink" title="14. label 的作用是什么？如何使用？"></a>14. label 的作用是什么？如何使用？</h3><p>label标签来定义表单控件的关系：当用户选择label标签时，浏览器会自动将焦点转到和label标签相关的表单控件上。</p><ul><li>使用方法1：</li></ul><pre><code>&lt;label for=&quot;mobile&quot;&gt;Number:&lt;/label&gt;&lt;input type=&quot;text&quot; id=&quot;mobile&quot;/&gt;</code></pre><ul><li>使用方法2：</li></ul><pre><code>&lt;label&gt;Date:&lt;input type=&quot;text&quot;/&gt;&lt;/label&gt;</code></pre><h3 id="15-Canvas和SVG的区别"><a href="#15-Canvas和SVG的区别" class="headerlink" title="15. Canvas和SVG的区别"></a>15. Canvas和SVG的区别</h3><p><strong>（1）SVG：</strong></p><p>SVG可缩放矢量图形（Scalable Vector Graphics）是基于可扩展标记语言XML描述的2D图形的语言，SVG基于XML就意味着SVG DOM中的每个元素都是可用的，可以为某个元素附加Javascript事件处理器。在 SVG 中，每个被绘制的图形均被视为对象。如果 SVG 对象的属性发生变化，那么浏览器能够自动重现图形。</p><p>其特点如下：</p><ul><li>不依赖分辨率</li><li>支持事件处理器</li><li>最适合带有大型渲染区域的应用程序（比如谷歌地图）</li><li>复杂度高会减慢渲染速度（任何过度使用 DOM 的应用都不快）</li><li>不适合游戏应用</li></ul><p><strong>（2）Canvas：</strong></p><p>Canvas是画布，通过Javascript来绘制2D图形，是逐像素进行渲染的。其位置发生改变，就会重新进行绘制。</p><p>其特点如下：</p><ul><li>依赖分辨率</li><li>不支持事件处理器</li><li>弱的文本渲染能力</li><li>能够以 .png 或 .jpg 格式保存结果图像</li><li>最适合图像密集型的游戏，其中的许多对象会被频繁重绘</li></ul><p>注：矢量图，也称为面向对象的图像或绘图图像，在数学上定义为一系列由线连接的点。矢量文件中的图形元素称为对象。每个对象都是一个自成一体的实体，它具有颜色、形状、轮廓、大小和屏幕位置等属性。</p><h3 id="19-渐进增强和优雅降级之间的区别"><a href="#19-渐进增强和优雅降级之间的区别" class="headerlink" title="19. 渐进增强和优雅降级之间的区别"></a>19. 渐进增强和优雅降级之间的区别</h3><p><strong>（1）渐进增强（progressive enhancement）</strong>：主要是针对低版本的浏览器进行页面重构，保证基本的功能情况下，再针对高级浏览器进行效果、交互等方面的改进和追加功能，以达到更好的用户体验。</p><p><strong>（2）优雅降级 graceful degradation</strong>： 一开始就构建完整的功能，然后再针对低版本的浏览器进行兼容。</p><p><strong>两者区别：</strong></p><ul><li>优雅降级是从复杂的现状开始的，并试图减少用户体验的供给；而渐进增强是从一个非常基础的，能够起作用的版本开始的，并在此基础上不断扩充，以适应未来环境的需要；</li><li>降级（功能衰竭）意味着往回看，而渐进增强则意味着往前看，同时保证其根基处于安全地带。</li></ul><h3 id="20-说一下-HTML5-drag-API"><a href="#20-说一下-HTML5-drag-API" class="headerlink" title="20. 说一下 HTML5 drag API"></a>20. 说一下 HTML5 drag API</h3><ul><li>dragstart：事件主体是被拖放元素，在开始拖放被拖放元素时触发。 </li><li>darg：事件主体是被拖放元素，在正在拖放被拖放元素时触发。 </li><li>dragenter：事件主体是目标元素，在被拖放元素进入某元素时触发。 </li><li>dragover：事件主体是目标元素，在被拖放在某元素内移动时触发。 </li><li>dragleave：事件主体是目标元素，在被拖放元素移出目标元素是触发。 </li><li>drop：事件主体是目标元素，在目标元素完全接受被拖放元素时触发。 </li><li>dragend：事件主体是被拖放元素，在整个拖放操作结束时触发。</li></ul><h3 id="documentFragment-是什么？用它跟直接操作-DOM-的区别是什么？"><a href="#documentFragment-是什么？用它跟直接操作-DOM-的区别是什么？" class="headerlink" title="documentFragment 是什么？用它跟直接操作 DOM 的区别是什么？"></a>documentFragment 是什么？用它跟直接操作 DOM 的区别是什么？</h3><p>MDN中对<code>documentFragment</code>的解释：</p><blockquote><p>DocumentFragment，文档片段接口，一个没有父对象的最小文档对象。它被作为一个轻量版的 Document使用，就像标准的document一样，存储由节点（nodes）组成的文档结构。与document相比，最大的区别是DocumentFragment不是真实 DOM 树的一部分，它的变化不会触发 DOM 树的重新渲染，且不会导致性能等问题。</p></blockquote><p>当我们把一个 DocumentFragment 节点插入文档树时，插入的不是 DocumentFragment 自身，而是它的所有子孙节点。在频繁的DOM操作时，我们就可以将DOM元素插入DocumentFragment，之后一次性的将DocumentFragment（包括了其所有的子孙节点）插入文档中。和直接操作DOM相比，将DocumentFragment 节点插入DOM树时，只会触发一次回流，这样就大大提高了页面的性能。</p><p>同时 DocumentFragment 也会被用来实现 WebComponent（原生组件）</p><h3 id="21-link和-import的区别"><a href="#21-link和-import的区别" class="headerlink" title="21.link和@import的区别"></a>21.link和@import的区别</h3><pre><code>link&lt;link rel=&quot;stylesheet&quot; rev=&quot;stylesheet&quot; href=&quot;CSS文件&quot; type=&quot;text/css&quot; media=&quot;all&quot; /&gt;@import &lt;style type=&quot;text/css&quot; media=&quot;screen&quot;&gt;     @import url(&quot;CSS文件&quot;); &lt;/style&gt; </code></pre><p>相同点：link和@import都能用来引入css</p><p>区别：1.从属关系：link是HTML提供的标签，不仅可以加载css，还可以定义ref属性；@import是css提供的语法，只能导入样式表</p><p>2.兼容性问题：link是html标签，没有兼容性问题，而@import存在兼容性问题</p><p>3.加载顺序：link在页面加载的同时一起加载，而@import引入的css要等页面加载完之后再加载 </p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>CSS应用题</title>
      <link href="/2022/07/29/css-zhi-shi-dian/"/>
      <url>/2022/07/29/css-zhi-shi-dian/</url>
      
        <content type="html"><![CDATA[<h3 id="元素宽度不确定，实现固定宽高比"><a href="#元素宽度不确定，实现固定宽高比" class="headerlink" title="元素宽度不确定，实现固定宽高比"></a>元素宽度不确定，实现固定宽高比</h3><p>&#x3D;&#x3D;使用子元素的内边距撑开元素，这是因为子元素的内边距设置为百分比时是以父元素的宽度为基准的&#x3D;&#x3D;。</p><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>container<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>padding<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>content<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style language-css">    <span class="token number">.</span>container&amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>        <span class="token property">background-color</span><span class="token punctuation">:</span> black<span class="token punctuation">;</span>        <span class="token property">width</span><span class="token punctuation">:</span> <span class="token number">200</span>px<span class="token punctuation">;</span>        <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>    &amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span>    <span class="token number">.</span>container <span class="token number">.</span>padding&amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>        <span class="token property">height</span><span class="token punctuation">:</span> <span class="token number">0</span>px<span class="token punctuation">;</span>        <span class="token property">padding-top</span><span class="token punctuation">:</span> <span class="token number">56.25%</span><span class="token punctuation">;</span>    &amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span>    <span class="token number">.</span>container <span class="token number">.</span>content&amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>        <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>    &amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span></code></pre><p>优点：容易理解</p><p>缺点：增加了一个div节点用于撑开父元素（不利于后期维护），且需要再嵌套一层绝对定位元素用于处理容器内的内容。</p><p>使用伪元素margin-top&#x2F;margin-bottom撑开父元素</p><p>用CSS变量实现</p><pre class=" language-css"><code class="language-css">&lt;div class=<span class="token string">"container"</span>>    &lt;div class=<span class="token string">"content"</span>>&lt;/div>&lt;/div>&lt;style>    <span class="token number">.</span>container&amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>        <span class="token property">--ratio</span><span class="token punctuation">:</span> <span class="token number">9</span> / <span class="token number">16</span><span class="token punctuation">;</span>        <span class="token property">--widthSize</span><span class="token punctuation">:</span> <span class="token number">200</span>px<span class="token punctuation">;</span>        <span class="token property">width</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--widthSize<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token property">height</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span><span class="token function">var</span><span class="token punctuation">(</span>--widthSize<span class="token punctuation">)</span> * <span class="token function">var</span><span class="token punctuation">(</span>--ratio<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token property">background-color</span><span class="token punctuation">:</span> black<span class="token punctuation">;</span>    &amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span>&lt;/style></code></pre><p>优点：无需使用子元素，利于维护</p><p>用CSS新属性aspect-ratio</p><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>container<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>content<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style language-css">    <span class="token number">.</span>container&amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>        <span class="token property">width</span><span class="token punctuation">:</span> <span class="token number">200</span>px<span class="token punctuation">;</span>        <span class="token property">aspect-ratio</span><span class="token punctuation">:</span> <span class="token number">16</span> / <span class="token number">9</span><span class="token punctuation">;</span>        <span class="token property">background-color</span><span class="token punctuation">:</span> black<span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">/*这里不同于使用CSS变量实现，如果不加上该属性，那么当子元素超出时，容器高度将被撑开*/</span>        <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>     &amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span></code></pre><p>优点：容易理解，代码量少</p><p>缺点：由于是新属性，兼容性还有待提高</p><h3 id="消除浮动"><a href="#消除浮动" class="headerlink" title="消除浮动"></a>消除浮动</h3><p>不清除浮动会发生高度塌陷：浮动元素父元素高度自适应（父元素不写高度时，子元素写了浮动后，父元素会发生高度塌陷），所以清除浮动是为了不让父元素发生高度塌陷。</p><ul><li><p>clear清除浮动（添加空div法）在浮动元素下方添加空div,并给该元素写css样式：</p><pre class=" language-css"><code class="language-css">&amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>    <span class="token property">clear</span><span class="token punctuation">:</span>both<span class="token punctuation">;</span>    <span class="token property">height</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">;</span>    <span class="token property">overflow</span><span class="token punctuation">:</span>hidden<span class="token punctuation">;</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span></code></pre></li><li><p>给浮动元素父级设置高度（这个很好理解，清除浮动本质是为了让父元素有高度）</p></li><li><p>父级同时浮动（需要给父级同级元素添加浮动）</p></li><li><p>父级设置成inline-block，其margin: 0 auto居中方式失效</p></li><li><p>设置父级的overflow属性不为 visible 的其他值（scroll、hidden、auto）</p></li><li><p>万能清除法 after伪类 清浮动（现在主流方法，推荐使用） </p><pre class=" language-css"><code class="language-css"><span class="token number">.</span><span class="token property">float_div</span><span class="token punctuation">:</span><span class="token punctuation">:</span>after&amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>  <span class="token property">content</span><span class="token punctuation">:</span><span class="token string">"."</span><span class="token punctuation">;</span>  <span class="token property">clear</span><span class="token punctuation">:</span>both<span class="token punctuation">;</span>  <span class="token property">display</span><span class="token punctuation">:</span>block<span class="token punctuation">;</span>  <span class="token property">height</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">;</span>  <span class="token property">overflow</span><span class="token punctuation">:</span>hidden<span class="token punctuation">;</span>  <span class="token property">visibility</span><span class="token punctuation">:</span>hidden<span class="token punctuation">;</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span></code></pre></li></ul><p>从上面我们可以看出，除了使用到<code>clear:both</code>的方法都与BFC容器有很大的关系，也就是说，本质上我们是父元素成为一个BFC从而清除浮动的。</p><h3 id="CSS文本溢出省略号？"><a href="#CSS文本溢出省略号？" class="headerlink" title="CSS文本溢出省略号？"></a>CSS文本溢出省略号？</h3><pre class=" language-css"><code class="language-css"><span class="token comment" spellcheck="true">/*单行溢出*/</span>div&amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>    <span class="token property">white-space</span><span class="token punctuation">:</span> nowrap<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">/* 强制文本不换行 */</span>    <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">/* 隐藏溢出内容 */</span>    <span class="token property">text-overflow</span><span class="token punctuation">:</span> ellipsis<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">/* 对溢出的文本用 ellipsis 省略号代替。 */</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">/*多行溢出*/</span>div&amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>    <span class="token property">display</span><span class="token punctuation">:</span> -webkit-box<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">/* 将对象作为弹性伸缩盒子模型显示 */</span>    <span class="token property">-webkit-box-orient</span><span class="token punctuation">:</span> vertical <span class="token comment" spellcheck="true">/* 使文本垂直（纵向）排列每一行，也就是文字是从左到右，从上到下 */</span>    <span class="token comment" spellcheck="true">/* 限制文本的行数 or 列数，取决于-webkit-box-orient的属性值 */</span>    <span class="token property">-webkit-line-clamp</span><span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">;</span>         <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">/* 隐藏溢出内容 */</span>    <span class="token property">text-overflow</span><span class="token punctuation">:</span> ellipsis<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">/* 对溢出的文本用 ellipsis 省略号代替。 */</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span></code></pre><h3 id="写出三栏布局，左右固定宽度，中间自适应"><a href="#写出三栏布局，左右固定宽度，中间自适应" class="headerlink" title="写出三栏布局，左右固定宽度，中间自适应"></a>写出三栏布局，左右固定宽度，中间自适应</h3><h4 id="浮动"><a href="#浮动" class="headerlink" title="浮动"></a>浮动</h4><p>实现原理：<code>left</code>和<code>right</code>由于声明了<code>float</code>属性，因此都变成了BFC，而<code>center</code>由于声明了<code>overflow: hidden</code>，因此也为BFC；众所周知，BFC相互之间是独立、隔离的，因此实现了三栏布局。</p><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>layout float<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">media</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>screen<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token style language-css">        <span class="token number">.</span>layout<span class="token number">.</span>float <span class="token number">.</span>left &amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>            <span class="token property">float</span><span class="token punctuation">:</span> left<span class="token punctuation">;</span>            <span class="token property">width</span><span class="token punctuation">:</span> <span class="token number">300</span>px<span class="token punctuation">;</span>            <span class="token property">background</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span>        &amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span>        <span class="token number">.</span>layout<span class="token number">.</span>float <span class="token number">.</span>right &amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>            <span class="token property">float</span><span class="token punctuation">:</span> right<span class="token punctuation">;</span>            <span class="token property">width</span><span class="token punctuation">:</span> <span class="token number">300</span>px<span class="token punctuation">;</span>            <span class="token property">background</span><span class="token punctuation">:</span> blue<span class="token punctuation">;</span>        &amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span>        <span class="token number">.</span>layout<span class="token number">.</span>float <span class="token number">.</span>center &amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>            <span class="token property">background</span><span class="token punctuation">:</span> gold<span class="token punctuation">;</span>            <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>        &amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span>    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>article</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>left-right-center<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>left<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>right<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>center<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>article</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">></span></span></code></pre><h4 id="绝对定位"><a href="#绝对定位" class="headerlink" title="绝对定位"></a>绝对定位</h4><p>实现原理：通过定位实现了<code>left、right、center</code>三个元素在空间上的分隔，而这三个元素由于设置了<code>position:absolute</code>，因此都为BFC容器，实现了其内容的隔离。</p><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">media</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>screen<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token style language-css">    <span class="token number">.</span>left-center-right > div &amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>        <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>    &amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span>    <span class="token number">.</span>left &amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>        <span class="token property">left</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token property">width</span><span class="token punctuation">:</span> <span class="token number">300</span>px<span class="token punctuation">;</span>        <span class="token property">background</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span>    &amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span>    <span class="token number">.</span>right &amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>        <span class="token property">right</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token property">width</span><span class="token punctuation">:</span> <span class="token number">300</span>px<span class="token punctuation">;</span>        <span class="token property">background</span><span class="token punctuation">:</span> blue<span class="token punctuation">;</span>    &amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span>    <span class="token number">.</span>center &amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>        <span class="token property">left</span><span class="token punctuation">:</span> <span class="token number">300</span>px<span class="token punctuation">;</span>        <span class="token property">right</span><span class="token punctuation">:</span> <span class="token number">300</span>px<span class="token punctuation">;</span>        <span class="token property">background</span><span class="token punctuation">:</span> gold<span class="token punctuation">;</span>    &amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>article</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>left-center-right<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>left<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>center<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>绝对定位---center部分<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>right<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>article</span><span class="token punctuation">></span></span></code></pre><h4 id="Flex"><a href="#Flex" class="headerlink" title="Flex"></a>Flex</h4><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>layout flex<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">media</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>screen<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token style language-css">        <span class="token number">.</span>layout<span class="token number">.</span>flex &amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>            <span class="token property">margin-top</span><span class="token punctuation">:</span> <span class="token number">200</span>px<span class="token punctuation">;</span>        &amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span>        <span class="token number">.</span>layout<span class="token number">.</span>flex <span class="token number">.</span>left-center-right &amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>            <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>        &amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span>        <span class="token number">.</span>layout<span class="token number">.</span>flex <span class="token number">.</span>left &amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>            <span class="token property">width</span><span class="token punctuation">:</span> <span class="token number">300</span>px<span class="token punctuation">;</span>            <span class="token property">background</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span>        &amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span>        <span class="token number">.</span>layout<span class="token number">.</span>flex <span class="token number">.</span>right &amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>            <span class="token property">width</span><span class="token punctuation">:</span> <span class="token number">300</span>px<span class="token punctuation">;</span>            <span class="token property">background</span><span class="token punctuation">:</span> blue<span class="token punctuation">;</span>        &amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span>        <span class="token number">.</span>layout<span class="token number">.</span>flex <span class="token number">.</span>center &amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>            <span class="token property">flex</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">;</span>            <span class="token property">background</span><span class="token punctuation">:</span> gold<span class="token punctuation">;</span>        &amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span>    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>article</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>left-center-right<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>left<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>center<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>flex布局---center部分<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>right<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>article</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">></span></span></code></pre><h4 id="Grid"><a href="#Grid" class="headerlink" title="Grid"></a>Grid</h4><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>layout grid<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">media</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>screen<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token style language-css">        <span class="token number">.</span>layout<span class="token number">.</span>grid <span class="token number">.</span>left-center-right &amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>            <span class="token property">display</span><span class="token punctuation">:</span> grid<span class="token punctuation">;</span>            <span class="token property">width</span><span class="token punctuation">:</span> <span class="token number">100%</span><span class="token punctuation">;</span>            <span class="token property">grid-template-rows</span><span class="token punctuation">:</span> <span class="token number">100</span>px<span class="token punctuation">;</span>            <span class="token property">grid-template-columns</span><span class="token punctuation">:</span> <span class="token number">300</span>px auto <span class="token number">300</span>px<span class="token punctuation">;</span>        &amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span>        <span class="token number">.</span>layout<span class="token number">.</span>grid <span class="token number">.</span>left &amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>            <span class="token property">background</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span>        &amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span>        <span class="token number">.</span>layout<span class="token number">.</span>grid <span class="token number">.</span>right &amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>            <span class="token property">background</span><span class="token punctuation">:</span> blue<span class="token punctuation">;</span>        &amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span>        <span class="token number">.</span>layout<span class="token number">.</span>grid <span class="token number">.</span>center &amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>            <span class="token property">background</span><span class="token punctuation">:</span> gold<span class="token punctuation">;</span>        &amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span>    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>article</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>left-center-right<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>left<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>center<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Grid布局---center部分<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>right<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>article</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">></span></span></code></pre><h4 id="表格布局"><a href="#表格布局" class="headerlink" title="表格布局"></a>表格布局</h4><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>layout table<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">media</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>screen<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token style language-css">        <span class="token number">.</span>layout<span class="token number">.</span>table <span class="token number">.</span>left-center-right &amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>            <span class="token property">display</span><span class="token punctuation">:</span> table<span class="token punctuation">;</span>            <span class="token property">width</span><span class="token punctuation">:</span> <span class="token number">100%</span><span class="token punctuation">;</span>            <span class="token property">height</span><span class="token punctuation">:</span> <span class="token number">100</span>px<span class="token punctuation">;</span>        &amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span>        <span class="token number">.</span>layout<span class="token number">.</span>table <span class="token number">.</span>left &amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>            <span class="token property">display</span><span class="token punctuation">:</span> table-cell<span class="token punctuation">;</span>            <span class="token property">width</span><span class="token punctuation">:</span> <span class="token number">300</span>px<span class="token punctuation">;</span>            <span class="token property">background</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span>        &amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span>        <span class="token number">.</span>layout<span class="token number">.</span>table <span class="token number">.</span>right &amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>            <span class="token property">display</span><span class="token punctuation">:</span> table-cell<span class="token punctuation">;</span>            <span class="token property">width</span><span class="token punctuation">:</span> <span class="token number">300</span>px<span class="token punctuation">;</span>            <span class="token property">background</span><span class="token punctuation">:</span> blue<span class="token punctuation">;</span>        &amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span>        <span class="token number">.</span>layout<span class="token number">.</span>table <span class="token number">.</span>center &amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>            <span class="token property">display</span><span class="token punctuation">:</span> table-cell<span class="token punctuation">;</span>            <span class="token property">background</span><span class="token punctuation">:</span> gold<span class="token punctuation">;</span>        &amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span>    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>article</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>left-center-right<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>left<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>center<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>表格布局---center部分<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>right<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>article</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">></span></span></code></pre><h4 id="5种方案的优缺点"><a href="#5种方案的优缺点" class="headerlink" title="5种方案的优缺点"></a>5种方案的优缺点</h4><table><thead><tr><th></th><th>优点</th><th>缺点</th></tr></thead><tbody><tr><td>浮动</td><td>兼容性好</td><td>清除浮动（脱离文档流，会带来很多问题）</td></tr><tr><td>绝对定位</td><td>快捷</td><td>脱离文档流</td></tr><tr><td>Flexbox</td><td>最全面，移动端很普及</td><td>兼容性</td></tr><tr><td>表格布局</td><td>兼容性好</td><td>单元格高度随着调整</td></tr><tr><td>Grid</td><td>替代栅格系统</td><td>兼容性</td></tr></tbody></table><h4 id="假如高度未知，哪个方案失效"><a href="#假如高度未知，哪个方案失效" class="headerlink" title="假如高度未知，哪个方案失效"></a>假如高度未知，哪个方案失效</h4><ul><li>浮动、绝对定位、Grid均会失效</li><li>flex、表格布局可以</li></ul><h3 id="如何实现一个元素水平垂直居中？"><a href="#如何实现一个元素水平垂直居中？" class="headerlink" title="如何实现一个元素水平垂直居中？"></a>如何实现一个元素水平垂直居中？</h3><ul><li>方法1 已知元素宽高：父元素相对定位，子元素绝对定位。设置子元素<code>left</code> <code>top</code> <code>right</code> <code>bottom</code>都为<code>0</code>, 外边距设置为<code>auto</code>;</li></ul><pre class=" language-css"><code class="language-css"><span class="token number">.</span>parent &amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>  <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>  <span class="token property">width</span><span class="token punctuation">:</span>  <span class="token number">300</span>px<span class="token punctuation">;</span>  <span class="token property">height</span><span class="token punctuation">:</span> <span class="token number">300</span>px<span class="token punctuation">;</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span><span class="token number">.</span>child &amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>  <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>  <span class="token property">left</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">;</span>  <span class="token property">top</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">;</span>  <span class="token property">right</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">;</span>  <span class="token property">bottom</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">;</span>  <span class="token property">width</span><span class="token punctuation">:</span> <span class="token number">100</span>px<span class="token punctuation">;</span>  <span class="token property">height</span><span class="token punctuation">:</span> <span class="token number">100</span>px<span class="token punctuation">;</span>  <span class="token property">margin</span><span class="token punctuation">:</span> auto<span class="token punctuation">;</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span></code></pre><ul><li>方法2 已知元素宽高：父元素相对定位，子元素绝对定位。设置子元素<code>left</code> <code>top</code> 都为<code>50%</code>, <code>margin-left``margin-top</code>外边距设置为<strong>负的宽高的一半</strong>;</li></ul><pre class=" language-css"><code class="language-css"><span class="token number">.</span>child &amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>  <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>  <span class="token property">left</span><span class="token punctuation">:</span> <span class="token number">50%</span><span class="token punctuation">;</span>  <span class="token property">top</span><span class="token punctuation">:</span> <span class="token number">50%</span><span class="token punctuation">;</span>  <span class="token property">width</span><span class="token punctuation">:</span> <span class="token number">100</span>px<span class="token punctuation">;</span>  <span class="token property">height</span><span class="token punctuation">:</span> <span class="token number">100</span>px<span class="token punctuation">;</span>  <span class="token property">margin-top</span><span class="token punctuation">:</span> -<span class="token number">50</span>px<span class="token punctuation">;</span>  <span class="token property">margin-left</span><span class="token punctuation">:</span> -<span class="token number">50</span>px<span class="token punctuation">;</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span></code></pre><ul><li>方法3 未知元素宽高：父元素相对定位，子元素绝对定位。设置子元素的<code>left</code> <code>right</code> 都为<code>50%</code>，通过css平移属性向左和向上平移平移自身宽高的一半<code>transform: translate(-50%, -50%);</code></li></ul><pre class=" language-css"><code class="language-css"><span class="token number">.</span>child &amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>  <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>  <span class="token property">left</span><span class="token punctuation">:</span> <span class="token number">50%</span><span class="token punctuation">;</span>  <span class="token property">top</span><span class="token punctuation">:</span> <span class="token number">50%</span><span class="token punctuation">;</span>  <span class="token property">width</span><span class="token punctuation">:</span> <span class="token number">100</span>px<span class="token punctuation">;</span>  <span class="token property">height</span><span class="token punctuation">:</span> <span class="token number">100</span>px<span class="token punctuation">;</span>  <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translate</span><span class="token punctuation">(</span>-<span class="token number">50%</span>, -<span class="token number">50%</span><span class="token punctuation">)</span><span class="token punctuation">;</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span></code></pre><ul><li>方法4 通过弹性盒属性设置在主轴和侧轴上居中对齐</li></ul><pre class=" language-css"><code class="language-css"><span class="token number">.</span>parent &amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>  <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>  <span class="token property">align-items</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>  <span class="token property">justify-content</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span></code></pre><ul><li>方法5 兼容IE8可以使用table相关属性</li></ul><pre class=" language-css"><code class="language-css"><span class="token number">.</span>parent &amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>  <span class="token property">display</span><span class="token punctuation">:</span> table<span class="token punctuation">;</span>  <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>  <span class="token property">width</span><span class="token punctuation">:</span> <span class="token number">300</span>px<span class="token punctuation">;</span>  <span class="token property">height</span><span class="token punctuation">:</span> <span class="token number">300</span>px<span class="token punctuation">;</span>  <span class="token property">border</span><span class="token punctuation">:</span> <span class="token number">1</span>px solid <span class="token hexcode">#ccc</span><span class="token punctuation">;</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span><span class="token number">.</span>parent <span class="token number">.</span>child &amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>  <span class="token property">display</span><span class="token punctuation">:</span> table-cell<span class="token punctuation">;</span>  <span class="token property">vertical-align</span><span class="token punctuation">:</span> middle<span class="token punctuation">;</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span><span class="token number">.</span>parent <span class="token number">.</span>child span &amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">/* span会水平垂直巨中 */</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span></code></pre><ul><li>方法6 通过最新的网格布局来实现</li></ul><pre class=" language-css"><code class="language-css"><span class="token number">.</span>parent &amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>  <span class="token property">display</span><span class="token punctuation">:</span> grid<span class="token punctuation">;</span>  <span class="token property">align-items</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>  <span class="token property">justify-content</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span></code></pre><ul><li>方法7 单行文字，设置行高等于自身高度，文本设置居中</li></ul><pre class=" language-css"><code class="language-css"><span class="token number">.</span>parent &amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>  <span class="token property">height</span><span class="token punctuation">:</span> <span class="token number">22</span>px<span class="token punctuation">;</span>  <span class="token property">line-height</span><span class="token punctuation">:</span> <span class="token number">22</span>px<span class="token punctuation">;</span>  <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span></code></pre><h3 id="如何使用css实现等宽布局？"><a href="#如何使用css实现等宽布局？" class="headerlink" title="如何使用css实现等宽布局？"></a>如何使用css实现等宽布局？</h3><pre class=" language-css"><code class="language-css"><span class="token number">.</span>parent &amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>  <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span><span class="token number">.</span>child &amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>  <span class="token property">flex</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">;</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span></code></pre><h3 id="如何实现满屏品字布局？"><a href="#如何实现满屏品字布局？" class="headerlink" title="如何实现满屏品字布局？"></a>如何实现满屏品字布局？</h3><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style language-css">    html,body&amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>        <span class="token property">height</span><span class="token punctuation">:</span> <span class="token number">100%</span><span class="token punctuation">;</span>        <span class="token property">padding</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token property">margin</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">;</span>    &amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span>    <span class="token number">.</span>main&amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>        <span class="token property">margin</span><span class="token punctuation">:</span> <span class="token number">0</span> auto<span class="token punctuation">;</span>        <span class="token property">width</span><span class="token punctuation">:</span> <span class="token number">700</span>px<span class="token punctuation">;</span>        <span class="token property">height</span><span class="token punctuation">:</span> <span class="token number">50%</span><span class="token punctuation">;</span>        <span class="token property">background-color</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span>    &amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span>    <span class="token number">.</span>nav&amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>        <span class="token property">height</span><span class="token punctuation">:</span> <span class="token number">50%</span><span class="token punctuation">;</span>    &amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span>    <span class="token number">.</span>frist, <span class="token number">.</span>two&amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>        <span class="token property">display</span><span class="token punctuation">:</span> inline-block<span class="token punctuation">;</span>        <span class="token property">height</span><span class="token punctuation">:</span> <span class="token number">100%</span><span class="token punctuation">;</span>        <span class="token property">width</span><span class="token punctuation">:</span> <span class="token number">50%</span><span class="token punctuation">;</span>        <span class="token property">background-color</span><span class="token punctuation">:</span> blue<span class="token punctuation">;</span>    &amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span>    <span class="token number">.</span>two&amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>        <span class="token property">float</span><span class="token punctuation">:</span> left<span class="token punctuation">;</span>        <span class="token property">background-color</span><span class="token punctuation">:</span> yellow<span class="token punctuation">;</span>    &amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>main<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>nav<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>frist<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>two<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></code></pre><p><img src="https://files.catbox.moe/dzv6c2.png"></p><h3 id="实现一个扇形"><a href="#实现一个扇形" class="headerlink" title="实现一个扇形"></a>实现一个扇形</h3><p>用CSS实现扇形的思路和三角形基本一致，就是多了一个圆角的样式，实现一个90°的扇形：</p><pre><code>div&#123;    border: 100px solid transparent;    width: 0;    heigt: 0;    border-radius: 100px;    border-top-color: red;&#125;</code></pre><p><img src="https://files.catbox.moe/qikz0z.png"></p><h3 id="画一条0-5px的线"><a href="#画一条0-5px的线" class="headerlink" title="画一条0.5px的线"></a>画一条0.5px的线</h3><ul><li><strong>采用transform: scale()的方式</strong>，该方法用来定义元素的2D 缩放转换：</li></ul><pre><code>transform: scale(0.5,0.5);</code></pre><ul><li><strong>采用meta viewport的方式</strong></li></ul><pre><code>&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=0.5, minimum-scale=0.5, maximum-scale=0.5&quot;/&gt;</code></pre><p>这样就能缩放到原来的0.5倍，如果是1px那么就会变成0.5px。viewport只针对于移动端，只在移动端上才能看到效果</p><h3 id="怎么让-Chrome-支持小于-12px-的文字？"><a href="#怎么让-Chrome-支持小于-12px-的文字？" class="headerlink" title="怎么让 Chrome 支持小于 12px 的文字？"></a>怎么让 Chrome 支持小于 12px 的文字？</h3><ul><li>使用Webkit的内核的私有CSS属性来解决<code>-webkit-text-size-adjust:none</code>，设置后字体大小就不受限制了。但是chrome更新到27版本之后就不可以用了。</li><li>css3 的 transform 属性，设置值为 scale(x, y) 定义 2D 缩放转换。</li></ul><h2 id="CSS冷门八股"><a href="#CSS冷门八股" class="headerlink" title="CSS冷门八股"></a>CSS冷门八股</h2><h3 id="解决-img-图片自带边距的问题"><a href="#解决-img-图片自带边距的问题" class="headerlink" title="解决 img 图片自带边距的问题"></a>解决 img 图片自带边距的问题</h3><p>（1）转化成（行级）块元素</p><pre class=" language-css"><code class="language-css"> <span class="token property">display</span> <span class="token punctuation">:</span> block<span class="token punctuation">;</span></code></pre><p>（2）浮动，浮动后的元素默认可以转化为块元素（可以随意设置宽高属性）</p><pre class=" language-css"><code class="language-css"><span class="token property">float</span> <span class="token punctuation">:</span> left<span class="token punctuation">;</span></code></pre><p>（3）给 img 定义 vertical-align（消除底部边距）</p><pre class=" language-css"><code class="language-css">img&amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>        <span class="token property">border</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token property">vertical-align</span><span class="token punctuation">:</span> bottom<span class="token punctuation">;</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span></code></pre><p>（4）将其父容器的font-size 设为 0；</p><p>（5）给父标签设置与图片相同的高度</p><h3 id="li-与-li-之间有看不见的空白间隔是什么原因引起的？有什么解决办法？"><a href="#li-与-li-之间有看不见的空白间隔是什么原因引起的？有什么解决办法？" class="headerlink" title="li 与 li 之间有看不见的空白间隔是什么原因引起的？有什么解决办法？"></a>li 与 li 之间有看不见的空白间隔是什么原因引起的？有什么解决办法？</h3><p>浏览器的默认行为是把 inline 元素间的空白字符（空格换行 tab）渲染成一个空格，也就是<li>换行后会产生换行字符，而它会变成一个空格，当然空格就占用一个字符的宽度。</p><p>解决方案：</p><p>方法一：既然是因为 <code>&lt;li&gt;</code> 换行导致的，那就可以将 <code>&lt;li&gt;</code> 代码全部写在一排，如下</p><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>wrap<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">></span></span>li标签空白测试<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>part1<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>part2<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>part3<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>part4<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></code></pre><p>方法二：我们为了代码美观以及方便修改，很多时候我们不可能将 <code>&lt;li&gt;</code> 全部写在一排，那怎么办？既然是空格占一个字符的宽度，那我们索性就将 <code>&lt;ul&gt;</code> 内的字符尺寸直接设为 0，将下面样式放入样式表，问题解决。</p><pre class=" language-css"><code class="language-css"><span class="token number">.</span>wrap ul &amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>    <span class="token property">font-size</span><span class="token punctuation">:</span> <span class="token number">0</span>px<span class="token punctuation">;</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span></code></pre><p>但随着而来的就是 <code>&lt;ul&gt;</code> 中的其他文字就不见了，因为其尺寸被设为 0px 了，我们只好将他们重新设定字符尺寸。</p><h3 id="css-sprite（雪碧图）是什么-有什么优缺点？"><a href="#css-sprite（雪碧图）是什么-有什么优缺点？" class="headerlink" title="css sprite（雪碧图）是什么, 有什么优缺点？"></a>css sprite（雪碧图）是什么, 有什么优缺点？</h3><p>概念：将多个小图片拼接到一个图片中。通过 background-position 和元素尺寸调节需要显示的背景图案。</p><p>优点：</p><ul><li>减少 HTTP 请求数，极大地提高页面加载速度。</li><li>增加图片信息重复度，提高压缩比，减少图片大小。</li><li>更换风格方便，只需在一张或几张图片上修改颜色或样式即可实现。</li></ul><p>缺点：</p><ul><li>图片合并麻烦。</li><li>维护麻烦，修改一个图片可能需要从新布局整个图片，样式。</li></ul><h3 id="css-sprite和-base64-如何选择？"><a href="#css-sprite和-base64-如何选择？" class="headerlink" title="css sprite和 base64 如何选择？"></a>css sprite和 base64 如何选择？</h3><p>base64 适用场景：<br>应用于小的图片几 k 的，太大的图片会转换后的大小太大，得不偿失。<br>用于一些 css sprites 不利处理的小图片，如一些可以通过 background-repeat 平铺来做成背景的图片</p><h3 id="如果设计中使用了非标准的字体，你该如何去实现？"><a href="#如果设计中使用了非标准的字体，你该如何去实现？" class="headerlink" title="如果设计中使用了非标准的字体，你该如何去实现？"></a>如果设计中使用了非标准的字体，你该如何去实现？</h3><p>使用 <code>@font-face</code> 并为不同的 <code>font-weight</code> 定义 <code>font-family</code> 。</p><h3 id="在网页中的应该使用奇数还是偶数的字体？为什么呢？"><a href="#在网页中的应该使用奇数还是偶数的字体？为什么呢？" class="headerlink" title="在网页中的应该使用奇数还是偶数的字体？为什么呢？"></a>在网页中的应该使用奇数还是偶数的字体？为什么呢？</h3><p>参考答案：应该使用偶数字体</p><p>1. 比例关系</p><p>相对来说偶数字号比较容易和页面中其他部分的字号构成一个比例关系。如我使用 14px 的字体作为正文字号，那么其他部分的字体（如标题）就可以使用 14×1. 5 &#x3D;21px 的字体，或者在一些地方使用到了 14×0. 5&#x3D;7px 的 padding 或者 margin，如果你是在用 sass 或者 less 编写 css，这时候用处就凸显出来了。</p><p>2. UI 设计师的缘故</p><p>大多数设计师用的软件如 ps 提供的字号是偶数，自然到了   前端那边也是用的是偶数。</p><p>3. 浏览器缘故</p><p>其一是低版本的浏览器 ie6 会把奇数字体强制转化为偶数，即 13px 渲染为 14px。</p><p>其二是为了平分字体。偶数宽的汉字，如 12px 的汉子，去掉 1 像素的字体间距，填充了的字体像素宽度其实就是 11px，这样的汉字中竖线左右是平分的，如“中”子，左右就是 5px 了。</p><p>4. 系统差别</p><p>Windows 自带的点阵宋体（中易宋体）从 Vista 开始只提供 12、14、16 px 这三个大小的点阵，而 13、15、17 px 时用的是小一号的点阵（即每个字占的空间大了 1 px，但点阵没变），于是略显稀疏。</p><p>而在 Linux 和其他手持设备上，奇数偶数的渲染效果其实相差不大。</p><h3 id="CSS中使用列布局是什么？"><a href="#CSS中使用列布局是什么？" class="headerlink" title="CSS中使用列布局是什么？"></a>CSS中使用列布局是什么？</h3><p>CSS列布局帮助你分割文本变为列，例如考虑下面的杂志新闻在一个大的文本中，但是我们需要在他们之间使用边界划分为3列，这里HTML5的列布局就有所帮助了</p><p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2019/4/27/16a5d9ddd53f7691~tplv-t2oaga2asx-watermark.awebp" alt="img"></p><p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2019/4/27/16a5d9eadc51d9bd~tplv-t2oaga2asx-watermark.awebp" alt="img"></p><h3 id="如何修改-chrome-记住密码后自动填充表单的黄色背景？"><a href="#如何修改-chrome-记住密码后自动填充表单的黄色背景？" class="headerlink" title="如何修改 chrome 记住密码后自动填充表单的黄色背景？"></a>如何修改 chrome 记住密码后自动填充表单的黄色背景？</h3><pre class=" language-css"><code class="language-css"><span class="token property">input</span><span class="token punctuation">:</span>-webkit-autofill &amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>    <span class="token property">-webkit-box-shadow</span><span class="token punctuation">:</span> <span class="token number">0</span> <span class="token number">0</span> <span class="token number">0</span>px <span class="token number">1000</span>px 颜色 inset<span class="token punctuation">;</span>    <span class="token property">border</span><span class="token punctuation">:</span> <span class="token number">1</span>px solid <span class="token hexcode">#CCC</span>!important<span class="token punctuation">;</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span></code></pre><h3 id="除了-screen，你还能说出一个-media-属性的例子吗？"><a href="#除了-screen，你还能说出一个-media-属性的例子吗？" class="headerlink" title="除了 screen，你还能说出一个 @media 属性的例子吗？"></a>除了 screen，你还能说出一个 @media 属性的例子吗？</h3><ul><li><p>all</p><p>适用于所有设备。</p></li><li><p>print</p><p>为了加载合适的文档到当前使用的可视窗口. 需要提前咨询 paged media（媒体屏幕尺寸）, 以满足个别设备网页尺寸不匹配等问题。</p></li><li><p>screen</p><p>主要适用于彩色的电脑屏幕</p></li><li><p>speech</p><p>speech 这个合成器. 注意: CSS2 已经有一个相似的媒体类型叫 aural</p></li></ul><h3 id="让页面里的字体变清晰，变细用-CSS-怎么做？"><a href="#让页面里的字体变清晰，变细用-CSS-怎么做？" class="headerlink" title="让页面里的字体变清晰，变细用 CSS 怎么做？"></a>让页面里的字体变清晰，变细用 CSS 怎么做？</h3><p><code>-webkit-font-smoothing: antialiased;</code> </p><h3 id="font-style-属性的值为-oblique-时是什么意思？"><a href="#font-style-属性的值为-oblique-时是什么意思？" class="headerlink" title="font-style 属性的值为 oblique 时是什么意思？"></a>font-style 属性的值为 oblique 时是什么意思？</h3><p>Oblique是让没有斜体属性的文字倾斜</p><h3 id="无依赖绝对定位是什么？"><a href="#无依赖绝对定位是什么？" class="headerlink" title="无依赖绝对定位是什么？"></a>无依赖绝对定位是什么？</h3><pre><code>没有设置left/top/right/bottom属性值的绝对定位称为“无依赖绝对定位”。无依赖绝对定位其定位的位置和没有设置position:absolute时候的位置相关。</code></pre><h3 id="隐藏元素的方法有哪些"><a href="#隐藏元素的方法有哪些" class="headerlink" title="隐藏元素的方法有哪些"></a>隐藏元素的方法有哪些</h3><ul><li><strong>display: none</strong>：渲染树不会包含该渲染对象，因此该元素不会在页面中占据位置，也不会响应绑定的监听事件。</li><li><strong>visibility: hidden</strong>：元素在页面中仍占据空间，但是不会响应绑定的监听事件。</li><li><strong>opacity: 0</strong>：将元素的透明度设置为 0，以此来实现元素的隐藏。元素在页面中仍然占据空间，并且能够响应元素绑定的监听事件。</li><li><strong>position: absolute</strong>：通过使用绝对定位将元素移除可视区域内，以此来实现元素的隐藏。</li><li><strong>z-index: 负值</strong>：来使其他元素遮盖住该元素，以此来实现隐藏。</li><li><strong>clip&#x2F;clip-path</strong> ：使用元素裁剪的方法来实现元素的隐藏，这种方法下，元素仍在页面中占据位置，但是不会响应绑定的监听事件。</li><li>**transform: scale(0,0)**：将元素缩放为 0，来实现元素的隐藏。这种方法下，元素仍在页面中占据位置，但是不会响应绑定的监听事件。</li></ul><h2 id="CSS高频八股"><a href="#CSS高频八股" class="headerlink" title="CSS高频八股"></a>CSS高频八股</h2><h3 id="讲讲BFC"><a href="#讲讲BFC" class="headerlink" title="讲讲BFC"></a>讲讲BFC</h3><p><strong>什么是BFC</strong></p><p>BFC（Block Formatting Context）格式化上下文，是 Web 页面中盒模型布局的 CSS 渲染模式，指一个独立的渲染区域或者说是一个隔离的独立容器。</p><p><strong>形成 BFC 的条件:</strong></p><ul><li>浮动元素，float 除 none 以外的值</li><li>定位元素，position（absolute，fixed）</li><li>display 为以下其中之一的值 inline-block，table-cell，table-caption</li><li>overflow 除了 visible 以外的值（hidden，auto，scroll）</li><li>HTML 就是一个 BFC</li></ul><p><strong>BFC 的特性：</strong></p><ul><li>内部的 Box 会在垂直方向上一个接一个的放置。</li><li>垂直方向上的距离由 margin 决定</li><li>bfc 的区域不会与 float 的元素区域重叠。</li><li>计算 bfc 的高度时，浮动元素也参与计算</li><li>bfc 就是页面上的一个独立容器，容器里面的子元素不会影响外面元素。</li></ul><h3 id="CSS的属性值-auto"><a href="#CSS的属性值-auto" class="headerlink" title="CSS的属性值 auto?"></a>CSS的属性值 auto?</h3><h4 id="width"><a href="#width" class="headerlink" title="width"></a>width</h4><ul><li>对于width来说，当子元素设置为 <code>width: auto</code>时，子元素的 <code>margin-left + margin-right + border-left + border-right + padding-left + padding-right + content-width</code> 对等于父元素的<code>content-width</code></li><li>当子元素设置为 <code>width:100%</code>时，将根据子元素的盒模型来调整：<ul><li>子元素为<code>content-box</code>时，子元素的<code>content-width</code>等于父元素的<code>content-width</code></li><li>子元素为<code>border-box</code>时，子元素的<code>border-left + border-right + padding-left + padding-right + content-width</code>等于父元素的<code>content-width</code></li></ul></li></ul><h4 id="height"><a href="#height" class="headerlink" title="height"></a>height</h4><ul><li>对于height来说，当子元素设置为<code>height:auto</code>时，其高度由其内容撑开，与父元素无关。</li><li>当子元素设置为<code>height:100%</code>，其表现与设置为<code>width:100%</code>一致。</li></ul><h4 id="margin"><a href="#margin" class="headerlink" title="margin"></a>margin</h4><p>子元素为非绝对定位元素时：</p><ul><li>margin的auto值只对 <code>margin-left</code>和<code>margin-right</code>有效，对<code>margin-top</code>和<code>margin-bottom</code>无效，相当于没有设置。</li><li>当只设置 <code>margin-left: auto</code>时，子元素的右侧贴近父元素<code>content</code>的右侧</li><li>当只设置<code>margin-right: auto</code>时，子元素的左侧贴近父元素<code>content</code>的左侧</li><li>当同时设置<code>margin-left: auto</code>、<code>margin-right: auto</code>时，子元素相当于父元素的<code>content</code>居中</li></ul><p>子元素为绝对定位元素时（absolute、fixed）,为<code>absolute</code>时父元素指代最近的不为static的上级元素、为<code>fixed</code>时父元素指代body</p><ul><li><p>当设置 <code>margin-left:auto</code>时，只有同时设置<code>left: 0</code>时才能生效；<code>margin-right</code>、<code>margin-top</code>、<code>margin-bottom</code>也类似，因此进行如下设置时，子元素相对于父元素（padding + content的区域）水平垂直居中。</p><pre class=" language-css"><code class="language-css"><span class="token number">.</span>child&amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>    <span class="token property">left</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token property">right</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token property">top</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token property">right</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token property">margin</span><span class="token punctuation">:</span> auto<span class="token punctuation">;</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span></code></pre></li></ul><p><strong>注意：当子元素不是绝对定位时，margin: auto 相对于父元素 content进行定位，当子元素为绝对定位元素时，margin: auto 相对于父元素 padding + content 进行定位。</strong></p><h4 id="flex"><a href="#flex" class="headerlink" title="flex"></a>flex</h4><p><code>flex:auto</code>等价于<code>flex: 1 1 auto</code>，也就是<code>flex-grow: 1; flex-shrink: 1; flex-basis: auto;</code></p><h4 id="overflow"><a href="#overflow" class="headerlink" title="overflow"></a>overflow</h4><p>当元素设置<code>overflow:auto</code>时，当元素内容超出元素的高度和宽度时会显示滚动条。</p><p><code>overflow:auto</code>与<code>overflow:scroll</code>的区别是：</p><ul><li><code>overflow:scroll</code>无论元素内容是否超出元素的高度和宽度时都会显示纵向滚动条和横向滚动条</li><li><code>overflow:auto</code>只在元素内容超出元素的高度时显示纵向滚动条，元素内容超出元素宽度时显示横向滚动条。</li></ul><h4 id="left、right、top、bottom"><a href="#left、right、top、bottom" class="headerlink" title="left、right、top、bottom"></a>left、right、top、bottom</h4><p>当元素为<strong>非绝对定位</strong>元素时 <code>left、right、top、bottom</code>这些定位的<code>auto</code>值都无效，但当元素为<strong>绝对定位</strong>（absolute、fixed）时，这些属性则有各种的表现形式：</p><ul><li><code>left:auto</code>：<code>left</code>属性的值相当于<strong>父元素</strong>的<code>padding-left</code>值，也就是元素的左侧会贴在父元素<code>content-box</code>的左侧</li><li><code>top:auto</code>：<code>top</code>属性的值相当于<strong>父元素</strong>的<code>padding-top</code>值，也就是元素的上侧会贴在父元素<code>content-box</code>的上侧</li><li><code>right:auto</code>：<code>right</code>属性的值为元素<code>padding-box</code>的右侧到父元素的<code>padding-box</code>下侧的距离</li><li><code>bottom:auto</code>：<code>bottom</code>属性的值为元素<code>padding-box</code>的下侧到父元素的<code>padding-box</code>下侧的距离</li></ul><p>left、right、top、bottom的优先级：</p><ul><li>当同时设置了<code>left</code>和<code>right</code>时，<code>left</code>优先设置，有一种情况例外：当<code>left:auto</code>且<code>right</code>属性为具体数值（如<code>right:10px</code>），以right为优先、同理，<code>top</code>和<code>bottom</code>也是一样。</li></ul><p><strong>注意：当父元素设置 <code>direction: rtl</code>时，上述的<code>left</code>和<code>right</code>的表现形式和优先级逆转。</strong></p><h3 id="重置CSS-和-标准化CSS-的区别是什么？你会选择哪种方式，为什么？"><a href="#重置CSS-和-标准化CSS-的区别是什么？你会选择哪种方式，为什么？" class="headerlink" title="重置CSS 和 标准化CSS 的区别是什么？你会选择哪种方式，为什么？"></a>重置CSS 和 标准化CSS 的区别是什么？你会选择哪种方式，为什么？</h3><p>参考答案：</p><ul><li><strong>重置（Resetting）</strong>： 重置意味着除去所有的浏览器默认样式。对于页面所有的元素，像 <code>margin</code> 、 <code>padding</code> 、 <code>font-size</code> 这些样式全部置成一样。你将必须重新定义各种元素的样式。</li><li><strong>标准化（Normalizing）</strong>： 标准化没有去掉所有的默认样式，而是保留了有用的一部分，同时还纠正了一些常见错误。</li></ul><p>当需要实现非常个性化的网页设计时，我会选择重置的方式，因为我要写很多自定义的样式以满足设计需求，这时候就不再需要标准化的默认样式了。</p><h3 id="设置元素浮动后，该元素的-display-值是什么？"><a href="#设置元素浮动后，该元素的-display-值是什么？" class="headerlink" title="设置元素浮动后，该元素的 display 值是什么？"></a>设置元素浮动后，该元素的 display 值是什么？</h3><p>自动变成 <code>display:block</code></p><h3 id="使用-clear-属性清除浮动的原理？"><a href="#使用-clear-属性清除浮动的原理？" class="headerlink" title="使用 clear 属性清除浮动的原理？"></a>使用 clear 属性清除浮动的原理？</h3><p>使用clear属性清除浮动，其语法如下：</p><pre class=" language-css"><code class="language-css"><span class="token property">clear</span><span class="token punctuation">:</span> none|left|right|both</code></pre><p>如果单看字面意思，clear:left 是“清除左浮动”，clear:right 是“清除右浮动”，实际上，这种解释是有问题的，因为浮动一直还在，并没有清除。</p><p>官方对clear属性解释：“<strong>元素盒子的边不能和前面的浮动元素相邻</strong>”，对元素设置clear属性是为了避免浮动元素对该元素的影响，而不是清除掉浮动。</p><p>还需要注意 clear 属性指的是元素盒子的边不能和前面的浮动元素相邻，注意这里“<strong>前面的</strong>”3个字，也就是clear属性对“后面的”浮动元素是不闻不问的。考虑到float属性要么是left，要么是right，不可能同时存在，同时由于clear属性对“后面的”浮动元素不闻不问，因此，当clear:left有效的时候，clear:right必定无效，也就是此时clear:left等同于设置clear:both；同样地，clear:right如果有效也是等同于设置clear:both。由此可见，clear:left和clear:right这两个声明就没有任何使用的价值，至少在CSS世界中是如此，直接使用clear:both吧。</p><p><img src="C:\Users\HZR\OneDrive\图片\1638669840611.png" alt="1638669840611"></p><h3 id="行内元素和块级元素的具体区别是什么"><a href="#行内元素和块级元素的具体区别是什么" class="headerlink" title="行内元素和块级元素的具体区别是什么?"></a>行内元素和块级元素的具体区别是什么?</h3><p><strong>块级元素( block )特性：</strong></p><p>总是独占一行，表现为另起一行开始，而且其后的元素也必须另起一行显示（浮动元素除外）；</p><p>宽度(width)、高度(height)、内边距(padding)和外边距(margin)都可控制；</p><p><img src="https://iknow-pic.cdn.bcebos.com/6a600c338744ebf8a67ad383d4f9d72a6059a707?x-bce-process=image/resize,m_lfit,w_600,h_800,limit_1/quality,q_85/format,f_jpg" alt="img"></p><p><strong>内联元素(inline)特性：</strong></p><p>和相邻的内联元素在同一行;</p><p>宽度(width)、高度(height)、内边距的top&#x2F;bottom(padding-top&#x2F;padding-bottom)和外边距的top&#x2F;bottom(margin-top&#x2F;margin-bottom)都不可改变（也就是padding和margin的left和right是可以设置的）。</p><p><img src="https://iknow-pic.cdn.bcebos.com/42a98226cffc1e17fb093a8d4790f603728de9dc?x-bce-process=image/resize,m_lfit,w_600,h_800,limit_1/quality,q_85/format,f_jpg" alt="img"></p><p><strong>行内块元素（inline-block）（拥有内在尺寸，可设置高宽，但不会自动换行）</strong></p><p>如：img、input</p><h3 id="元素竖向的百分比设定是相对于容器的高度吗？"><a href="#元素竖向的百分比设定是相对于容器的高度吗？" class="headerlink" title="元素竖向的百分比设定是相对于容器的高度吗？"></a>元素竖向的百分比设定是相对于容器的高度吗？</h3><p>当按百分比设定一个元素的宽度时，它是相对于父容器的宽度计算的，但是，对于一些表示竖向距离的属性，例如 padding-top , padding-bottom , margin-top , margin-bottom 等，当按百分比设定它们时，依据的也是父容器的宽度，而不是高度。</p><h3 id="rgba-和-opacity-的透明效果有什么不同？"><a href="#rgba-和-opacity-的透明效果有什么不同？" class="headerlink" title="rgba() 和 opacity 的透明效果有什么不同？"></a>rgba() 和 opacity 的透明效果有什么不同？</h3><p>rgba()和opacity都能实现透明效果，但最大的不同是opacity作用于元素，以及元素内的所有内容的透明度，而rgba()只作用于元素的颜色或其背景色。（设置rgba透明的元素的子元素不会继承透明效果！）</p><h3 id="px、em、rem的区别及使用场景"><a href="#px、em、rem的区别及使用场景" class="headerlink" title="px、em、rem的区别及使用场景"></a>px、em、rem的区别及使用场景</h3><p><strong>三者的区别：</strong></p><ul><li>px是固定的像素，一旦设置了就无法因为适应页面大小而改变。</li><li>em和rem相对于px更具有灵活性，他们是相对长度单位，其长度不是固定的，更适用于响应式布局。</li><li>em的值相对于其父元素字体的大小，这样就会存在一个问题，进行任何元素设置，都有可能需要知道他父元素字体的大小。而rem是相对于根元素字体，这样就意味着，只需要在根元素确定一个参考值。</li></ul><p><strong>使用场景：</strong></p><ul><li>对于只需要适配少部分移动设备，且分辨率对页面影响不大的，使用px即可 。</li><li>对于需要适配各种移动设备，使用rem，例如需要适配iPhone和iPad等分辨率差别比较挺大的设备。</li></ul><h3 id="position-的不同值分别是相对于什么定位的？"><a href="#position-的不同值分别是相对于什么定位的？" class="headerlink" title="position 的不同值分别是相对于什么定位的？"></a>position 的不同值分别是相对于什么定位的？</h3><ul><li>absolute : 生成绝对定位的元素， 相对于最近一级的定位不是 static 的父元素来进行定位。</li><li>fixed （老 IE 不支持）生成绝对定位的元素，通常相对于浏览器窗口或 frame 进行定位。</li><li>relative 生成相对定位的元素，相对于其在普通流中的位置进行定位。</li><li>static 默认值。没有定位，元素出现在正常的流中</li><li>sticky 生成粘性定位的元素，元素始终被限制在最近块级父元素的区域中，当未超出父元素区域时，显示效果相当于fixed。</li></ul> <img src="https://z3.ax1x.com/2021/11/21/Ivi34J.gif" alt="Ivi34J.gif" style="zoom:50%;" /><h3 id="如何解决不同浏览器的样式兼容性问题？"><a href="#如何解决不同浏览器的样式兼容性问题？" class="headerlink" title="如何解决不同浏览器的样式兼容性问题？"></a>如何解决不同浏览器的样式兼容性问题？</h3><ul><li>在确定问题原因和有问题的浏览器后，使用单独的样式表，仅供出现问题的浏览器加载。这种方法需要使用服务器端渲染。</li><li>使用已经处理好此类问题的库，比如 Bootstrap。</li><li>使用 <code>autoprefixer</code> 自动生成 CSS 属性前缀。</li><li>使用 Reset CSS 或 Normalize. css。</li></ul><h3 id="什么情况下，用-translate-而不用绝对定位？什么时候下相反？"><a href="#什么情况下，用-translate-而不用绝对定位？什么时候下相反？" class="headerlink" title="什么情况下，用 translate() 而不用绝对定位？什么时候下相反？"></a>什么情况下，用 translate() 而不用绝对定位？什么时候下相反？</h3><p><code>translate()</code> 是 <code>transform</code> 的一个值。改变 <code>transform</code> 或 <code>opacity</code> 不会触发浏览器重新布局（reflow）或重绘（repaint），只会触发复合（compositions）。而改变绝对定位会触发重新布局，进而触发重绘和复合。 <code>transform</code> 使浏览器为元素创建一个 GPU 图层，但改变绝对定位会使用到 CPU。 因此 <code>translate()</code> 更高效，可以缩短平滑动画的绘制时间。</p><p>当使用 <code>translate()</code> 时，元素仍然占据其原始空间（有点像 <code>position：relative</code> ），这与改变绝对定位不同。</p><h3 id="请阐述-z-index-属性，并说明如何形成层叠上下文（stacking-context"><a href="#请阐述-z-index-属性，并说明如何形成层叠上下文（stacking-context" class="headerlink" title="请阐述  z-index  属性，并说明如何形成层叠上下文（stacking context)"></a>请阐述  z-index  属性，并说明如何形成层叠上下文（stacking context)</h3><p>CSS 中的 <code>z-index</code> 属性控制重叠元素的垂直叠加顺序。 <code>z-index</code> 只能影响 <code>position</code> 值不是 <code>static</code> 的元素。</p><p>没有定义 <code>z-index</code> 的值时，元素按照它们出现在 DOM 中的顺序堆叠（层级越低，出现位置越靠上）。非静态定位的元素（及其子元素）将始终覆盖静态定位（static）的元素，而不管 HTML 层次结构如何。</p><p>层叠上下文是包含一组图层的元素。 在一组层叠上下文中，其子元素的 <code>z-index</code> 值是相对于该父元素而不是 document root 设置的。每个层叠上下文完全独立于它的兄弟元素。如果元素 B 位于元素 A 之上，则即使元素 A 的子元素 C 具有比元素 B 更高的 <code>z-index</code> 值，元素 C 也永远不会在元素 B 之上. </p><p>每个层叠上下文是自包含的：当元素的内容发生层叠后，整个该元素将会在父层叠上下文中按顺序进行层叠。少数 CSS 属性会触发一个新的层叠上下文，例如 <code>opacity</code> 小于 1， <code>filter</code> 不是 <code>none</code> ， <code>transform</code> 不是 <code>none</code> 。</p><h3 id="CSS渲染层？"><a href="#CSS渲染层？" class="headerlink" title="CSS渲染层？"></a>CSS渲染层？</h3><h4 id="什么是渲染层？"><a href="#什么是渲染层？" class="headerlink" title="什么是渲染层？"></a>什么是渲染层？</h4><p>处于相同坐标空间（z轴空间）的渲染对象，都将归并到同一个渲染层中，因此根据层叠上下文，不同坐标空间的的渲染对象将形成多个渲染层，以体现它们的层叠关系。所以，对于满足形成层叠上下文条件的渲染对象，浏览器会自动为其创建新的渲染层。能够导致浏览器为其创建新的渲染层的，包括以下几类常见的情况：</p><ul><li>根元素 document</li><li>有明确的定位属性（relative、fixed、sticky、absolute）</li><li>opacity &lt; 1</li><li>有 CSS fliter 属性</li><li>有 CSS mask 属性</li><li>有 CSS mix-blend-mode 属性且值不为 normal</li><li>有 CSS transform 属性且值不为 none</li><li>backface-visibility 属性为 hidden</li><li>有 CSS reflection 属性</li><li>有 CSS column-count 属性且值不为 auto或者有 CSS column-width 属性且值不为 auto</li><li>当前有对于 opacity、transform、fliter、backdrop-filter 应用动画</li><li>overflow 不为 visible</li></ul><h4 id="合成层"><a href="#合成层" class="headerlink" title="合成层"></a>合成层</h4><p>满足某些特殊条件的渲染层，会被浏览器自动提升为合成层。合成层拥有单独的 GraphicsLayer，而其他不是合成层的渲染层，则和其第一个拥有 GraphicsLayer 的父层共用一个。</p><p>那么一个渲染层满足哪些特殊条件时，才能被提升为合成层呢？这里列举了一些常见的情况：</p><ul><li>3D transforms：translate3d、translateZ 等</li><li>video、canvas、iframe 等元素</li><li>通过 Element.animate() 实现的 opacity 动画转换</li><li>通过 СSS 动画实现的 opacity 动画转换</li><li>position: fixed</li><li>具有 will-change 属性</li><li>对 opacity、transform、fliter、backdropfilter 应用了 animation 或者 transition</li></ul><p>我们可以使用<code>will-change</code>属性或者<code>transform: translateZ(0)</code>将 CPU 消耗高的渲染元素提升为一个新的合成层，从而开启 GPU 加速的。</p><p>这里值得注意的是，不少人会将这些合成层的条件和渲染层产生的条件混淆，这两种条件发生在两个不同的层处理环节，是完全不一样的。</p><p>每一个GraphicsLayer 处理自己所属的合成层（可能有多个渲染层），GraphicsLayer拥有一个图形上下文（GraphicsContext），GraphicsContext 会负责输出该层（合成层）的位图。存储在共享内存中的位图将作为纹理上传到 GPU，最后由 GPU 将多个位图（多个合成层）进行合成，然后绘制到屏幕上，此时，我们的页面也就展现到了屏幕上。</p><p><strong>总结：一个渲染层的内容发生了变化，会引起该渲染层所属的合成层的重绘或重排（有些操作不会引起重排），而一个合成层的内容的任何改变，都不会引起其他合成层的重绘和重排</strong></p><h4 id="优化建议"><a href="#优化建议" class="headerlink" title="优化建议"></a>优化建议</h4><p>一些交互复杂的玩法页面，存在持续变化位置的 animation 元素，我们最好是使用 transform 来实现而不是通过改变 left&#x2F;top 的方式。这样做的原因是：如果使用 left&#x2F;top 来实现位置变化，animation 节点和 Document 将被放到了同一个 GraphicsLayer 中进行渲染，持续的动画效果将导致整个 Document 不断地执行重绘，而使用 transform 的话，能够让 animation 节点被放置到一个独立合成层中进行渲染绘制，动画发生时不会影响到其它层。并且另一方面，动画会完全运行在 GPU 上，相比起 CPU 处理图层后再发送给显卡进行显示绘制来说，这样的动画往往更加流畅。</p><p>来源文章：<a href="https://juejin.cn/post/6844903966573068301">https://juejin.cn/post/6844903966573068301</a></p><h3 id="z-index属性在什么情况下会失效？"><a href="#z-index属性在什么情况下会失效？" class="headerlink" title="z-index属性在什么情况下会失效？"></a>z-index属性在什么情况下会失效？</h3><p>通常 z-index 的使用是在有两个重叠的标签，在一定的情况下控制其中一个在另一个的上方或者下方出现。z-index值越大就越是在上层。z-index元素的position属性需要是relative，absolute或是fixed。</p><p><strong>z-index属性在下列情况下会失效：</strong></p><ul><li>父元素position为relative时，子元素的z-index失效。解决：父元素position改为absolute或static；</li><li>元素 position 属性为 static 。解决：设置该元素的position属性为relative，absolute或是fixed中的一种；</li><li>元素在设置z-index的同时还设置了float浮动。解决：float去除，改为display：inline-block；</li></ul><h3 id="CSS3中有哪些新特性"><a href="#CSS3中有哪些新特性" class="headerlink" title="CSS3中有哪些新特性"></a>CSS3中有哪些新特性</h3><ul><li>新增各种CSS选择器 （: not(.input)：所有 class 不是“input”的节点）</li><li>圆角 （border-radius:8px）</li><li>多列布局 （multi-column layout）</li><li>阴影和反射 （Shadow、reflect）</li><li>文字特效 （text-shadow）</li><li>文字渲染 （Text-decoration）</li><li>线性渐变 （gradient）</li><li>旋转 （transform）</li><li>增加了旋转,缩放,定位,倾斜,动画,多背景</li></ul><h3 id="替换元素的概念及计算规则"><a href="#替换元素的概念及计算规则" class="headerlink" title="替换元素的概念及计算规则"></a>替换元素的概念及计算规则</h3><p>通过修改某个属性值呈现的内容就可以被替换的元素就称为“替换元素”。</p><p>如<code>img、input、textarea、select</code>等元素，img 元素修改 src属性可以替换显示内容，同样，input元素修改 type 属性也可以改变显示内容。</p><p>替换元素除了内容可替换这一特性以外，还有以下特性：</p><ul><li><strong>内容的外观不受页面上的CSS的影响</strong>：用专业的话讲就是在样式表现在CSS作用域之外。如何更改替换元素本身的外观需要类似appearance属性，或者浏览器自身暴露的一些样式接口。</li><li><strong>有自己的尺寸</strong>：在Web中，很多替换元素在没有明确尺寸设定的情况下，其默认的尺寸（不包括边框）是300像素×150像素，如</li><li><strong>在很多CSS属性上有自己的一套表现规则</strong>：比较具有代表性的就是vertical-align属性，对于替换元素和非替换元素，vertical-align属性值的解释是不一样的。比方说vertical-align的默认值的baseline，很简单的属性值，基线之意，被定义为字符x的下边缘，而替换元素的基线却被硬生生定义成了元素的下边缘。</li><li><strong>所有的替换元素都是内联水平元素</strong>：也就是替换元素和替换元素、替换元素和文字都是可以在一行显示的。但是，替换元素默认的display值却是不一样的，有的是inline，有的是inline-block。</li></ul><p>替换元素的尺寸从内而外分为三类：</p><ul><li><strong>固有尺寸：</strong> 指的是替换内容原本的尺寸。例如，图片、视频作为一个独立文件存在的时候，都是有着自己的宽度和高度的。</li><li><strong>HTML尺寸：</strong> 只能通过HTML原生属性改变，这些HTML原生属性包括的width和height属性、的size属性。</li><li><strong>CSS尺寸：</strong> 特指可以通过CSS的width和height或者max-width&#x2F;min-width和max-height&#x2F;min-height设置的尺寸，对应盒尺寸中的content box。</li></ul><p>这三层结构的计算规则具体如下：</p><p>（1）如果没有CSS尺寸和HTML尺寸，则使用固有尺寸作为最终的宽高。</p><p>（2）如果没有CSS尺寸，则使用HTML尺寸作为最终的宽高。</p><p>（3）如果有CSS尺寸，则最终尺寸由CSS属性决定。</p><p>（4）如果“固有尺寸”含有固有的宽高比例，同时仅设置了宽度或仅设置了高度，则元素依然按照固有的宽高比例显示。</p><p>（5）如果上面的条件都不符合，则最终宽度表现为300像素，高度为150像素。</p><p>（6）内联替换元素和块级替换元素使用上面同一套尺寸计算规则。</p><h3 id="如何判断元素是否到达可视区域"><a href="#如何判断元素是否到达可视区域" class="headerlink" title="如何判断元素是否到达可视区域"></a>如何判断元素是否到达可视区域</h3><p>以图片显示为例：</p><ul><li><code>window.innerHeight</code> 是浏览器可视区的高度；</li><li><code>window.pageYOffset</code>是浏览器滚动的过的距离；</li><li><code>imgs.offsetTop</code> 是元素顶部距离文档顶部的高度</li><li>内容达到显示区域的条件：<code>img.offsetTop &lt; window.innerHeight + window.pageYOffset</code></li></ul><h3 id="line-height-的理解及其赋值方式"><a href="#line-height-的理解及其赋值方式" class="headerlink" title="line-height 的理解及其赋值方式"></a>line-height 的理解及其赋值方式</h3><p><strong>（1）line-height的概念：</strong></p><ul><li>line-height 指一行文本（包括文字、行内元素、行内块元素）的高度，包含了字间距，实际上是下一行基线到上一行基线距离；</li><li>如果一个标签没有定义 height 属性，那么其最终表现的高度由 line-height 决定；</li><li>一个容器没有设置高度，那么撑开容器高度的是 line-height，而不是容器内的文本内容；</li><li>把 line-height 值设置为 height 一样大小的值可以实现单行文字的垂直居中；</li><li>line-height 和 height 都能撑开一个高度；</li></ul><p><strong>（2）line-height 的赋值方式：</strong></p><ul><li>带单位：px 是固定值，而 em 会参考父元素 font-size 值计算自身的行高</li><li>纯数字：会把比例传递给后代。例如，父级行高为 1.5，子元素字体为 18px，则子元素行高为 1.5 * 18 &#x3D; 27px</li><li>百分比：将计算后的值传递给后代</li></ul><h3 id="display-inline-block-什么时候会显示间隙？"><a href="#display-inline-block-什么时候会显示间隙？" class="headerlink" title="display:inline-block 什么时候会显示间隙？"></a>display:inline-block 什么时候会显示间隙？</h3><p><strong>原因：</strong>换行或空格会占据一定的位置</p><p><strong>解决</strong>：</p><p>水平间隙时：父元素设置<code>letter-spacing: -4px</code>或<code>word-spacing:-4px</code><br>垂直间隙时：子元素间设置 负值margin，如：<code>margin: -2px 0</code><br>上述两种情况通用：父元素设置 <code>font-size:0</code></p><h3 id="知道外边距重叠问题吗？如何解决？"><a href="#知道外边距重叠问题吗？如何解决？" class="headerlink" title="知道外边距重叠问题吗？如何解决？"></a>知道外边距重叠问题吗？如何解决？</h3><p><strong>问题描述：</strong></p><p>两个块级元素的上外边距和下外边距可能会合并（折叠）为一个外边距，其大小会取其中外边距值大的那个，这种行为就是外边距折叠。需要注意的是，<strong>浮动的元素和绝对定位</strong>这种脱离文档流的元素的外边距不会折叠。重叠只会出现在<strong>垂直方向</strong>。</p><p><strong>计算原则：</strong></p><p>折叠合并后外边距的计算原则如下：</p><ul><li>如果两者都是正数，那么就去最大者</li><li>如果是一正一负，就会正值减去负值的绝对值</li><li>两个都是负值时，用0减去两个中绝对值大的那个</li></ul><p><strong>解决办法：</strong></p><p>对于折叠的情况，主要有两种：<strong>兄弟之间重叠</strong>和<strong>父子之间重叠</strong></p><p>（1）兄弟之间重叠</p><ul><li>底部元素变为行内盒子：<code>display: inline-block</code></li><li>底部元素设置浮动：<code>float</code></li><li>底部元素的position的值为<code>absolute/fixed</code></li></ul><p>（2）父子之间重叠</p><ul><li>父元素加入：<code>overflow: hidden</code></li><li>父元素添加透明边框：<code>border:1px solid transparent</code></li><li>子元素变为行内盒子：<code>display: inline-block</code></li><li>子元素加入浮动属性或定位</li></ul><h4 id="什么是包含块，对于包含块的理解"><a href="#什么是包含块，对于包含块的理解" class="headerlink" title="什么是包含块，对于包含块的理解?"></a>什么是包含块，对于包含块的理解?</h4><p>包含块（containing block）就是元素用来计算和定位的一个框。</p><p>（1）根元素（很多场景下可以看成是<html>）被称为“初始包含块”，其尺寸等同于浏览器可视窗口的大小。</p><p>（2）对于其他元素，如果该元素的position是relative或者static，则“包含块”由其最近的块级祖先元素的content box<br>边界形成。</p><p>（3）如果元素position:fixed，则“包含块”是“初始包含块”。</p><p>（4）如果元素position:absolute，则“包含块”由最近的position不为static的祖先元素建立，具体方式如下：</p><p>如果该祖先元素是纯inline元素，则规则略复杂：<br>•假设给内联元素的前后各生成一个宽度为0的内联盒子（inline box），则这两个内联盒子的padding box外面的包<br>围盒就是内联元素的“包含块”；<br>•如果该内联元素被跨行分割了，那么“包含块”是未定义的，也就是CSS2.1规范并没有明确定义，浏览器自行发挥<br>否则，“包含块”由该祖先的padding box边界形成。</p><p>如果没有符合条件的祖先元素，则“包含块”是“初始包含块”。</p><p>简单描述：默认情况下包含块就是离当前元素最近的块级祖先元素；<br>        对于开启了绝对定位的元素来说，包含块是离它最近的开启了定位（且position不为static）的祖先元素，<br>        如果所有的祖先元素都没有开启定位，则其包含块就是初始包含块。</p><h3 id="display、float、position的关系"><a href="#display、float、position的关系" class="headerlink" title="display、float、position的关系"></a>display、float、position的关系</h3><p>（1）首先判断display属性是否为none，如果为none，则position和float属性的值不影响元素最后的表现。</p><p>（2）然后判断position的值是否为absolute或者fixed，如果是，则float属性失效，并且display的值应该被设置为table或者block，具体转换需要看初始转换值。</p><p>（3）如果position的值不为absolute或者fixed，则判断float属性的值是否为none，如果不是，则display的值则按上面的规则转换。注意，如果position的值为relative并且float属性的值存在，则relative相对于浮动后的最终位置定位。</p><p>（4）如果float的值为none，则判断元素是否为根元素，如果是根元素则display属性按照上面的规则转换，如果不是，则保持指定的display属性值不变。</p><p>总的来说，可以把它看作是一个类似优先级的机制：</p><p><code>display:none</code> &gt;&gt;<code>position: absolute | fixed</code> &gt;&gt; <code>float: !none</code> &gt;&gt;  <code>element === root</code>  &gt;&gt; <code>display: other value</code> </p><h2 id="CSS响应式布局"><a href="#CSS响应式布局" class="headerlink" title="CSS响应式布局"></a>CSS响应式布局</h2><h3 id="flex布局"><a href="#flex布局" class="headerlink" title="flex布局"></a>flex布局</h3><p><a href="https://www.cnblogs.com/zhouqi666/articles/5322833.html">经典阮一峰1</a></p><p><a href="https://www.ruanyifeng.com/blog/2015/07/flex-examples.html">经典阮一峰2</a></p><ul><li><p><strong>flex-flow</strong>: flex-direction 和 flex-wrap 的简写。</p><ul><li><p><strong>flex-direction</strong>：指定了flex容器的主轴方向</p><p><code>row</code>(默认) | <code>column</code> | <code>row-reverse</code> | <code>column-reverse</code></p><pre><code>row、row-reverse：主轴为x轴，子元素横向排列column、column-reverse：主轴为y轴，子元素纵向排列</code></pre></li><li><p><strong>flex-wrap：</strong>指定容器空间不够时的换行策略。</p><p><code>nowrap</code>（默认） | <code>wrap</code> | <code>wrap-reverse</code></p></li></ul></li><li><p><strong>flex</strong>：flex-grow、flex-shrink和flex-basis的简写。 </p><ul><li><p><strong>flex-grow：</strong>定义子元素<code>在主轴上</code>的<code>放大比例</code>，默认为0，即如果存在剩余空间，也不放大。</p><pre><code>某个子元素的分得的额外空间 = (容器剩余空间 / 所有子元素flex-grow属性值的和) * 该子元素flex-grow的属性值</code></pre></li><li><p><strong>flex-shrink：</strong>定义了子元素的缩小比例，默认为1，即如果空间不足，该子元素将缩小。</p><pre><code>设: 有 n 个子元素，空间分别为 W1、W2、W3 ··· Wn，flex-shrink的值分别为 S1、S2、S3 ··· S4，容器空间为 T则:某个子元素k的缩小的空间 = (sum(W1 ~ Wn) - T) * (Wk * Sk / sum(W1 * S1 ~ Wn * Sn))</code></pre></li><li><p><strong>flex-basis：</strong>定义了在分配多余空间之前，子元素占据的主轴空间。浏览器根据这个属性，计算主轴是否有多余空间。它的默认值为<code>auto</code>。当设定为长度值时分以下情况：</p><pre><code>当flex-direction为 row 或 row-reverse时，等同于 width当flex-direction为 column 或 column-reverse时，等同于 height</code></pre></li></ul></li><li><p><strong>justify-content、justify-self：</strong>定义了如何分配父容器主轴方向的子元素之间及其周围的空间。</p><p> <img src="https://www.ruanyifeng.com/blogimg/asset/2015/bg2015071010.png" alt="img"></p></li><li><p><strong>align-items、align-self：</strong>定义子元素在交叉轴上如何对齐。</p><p> <img src="https://www.ruanyifeng.com/blogimg/asset/2015/bg2015071011.png" alt="img"></p></li><li><p><strong>align-content：</strong>多根轴线的对齐方式。如果项目只有一根轴线，该属性不起作用。</p><p> <img src="https://www.ruanyifeng.com/blogimg/asset/2015/bg2015071012.png" alt="img"></p></li></ul><h3 id="grid布局"><a href="#grid布局" class="headerlink" title="grid布局"></a>grid布局</h3><p><a href="https://www.ruanyifeng.com/blog/2019/03/grid-layout-tutorial.html">经典阮一峰</a></p><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>container<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>header<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>header<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>side-bar<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>side-bar<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>footer<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>footer<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>content<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>content<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style language-css">    <span class="token number">.</span>container&amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>        <span class="token property">display</span><span class="token punctuation">:</span> grid<span class="token punctuation">;</span>        <span class="token property">height</span><span class="token punctuation">:</span> <span class="token number">600</span>px<span class="token punctuation">;</span>        <span class="token property">width</span><span class="token punctuation">:</span> <span class="token number">1000</span>px<span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">/** 将容器分为由 10 * 6 的网格 */</span>        <span class="token property">grid-template-rows</span><span class="token punctuation">:</span> <span class="token function">repeat</span><span class="token punctuation">(</span><span class="token number">6</span>, <span class="token number">1</span>fr<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token property">grid-template-columns</span><span class="token punctuation">:</span> <span class="token function">repeat</span><span class="token punctuation">(</span><span class="token number">10</span>, <span class="token number">1</span>fr<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token property">grid-template-areas</span><span class="token punctuation">:</span>             <span class="token string">"hd hd hd hd hd hd hd hd hd hd"</span>            <span class="token string">"sb sb ct ct ct ct ct ct ct ct"</span>            <span class="token string">"sb sb ct ct ct ct ct ct ct ct"</span>            <span class="token string">"sb sb ct ct ct ct ct ct ct ct"</span>            <span class="token string">"sb sb ct ct ct ct ct ct ct ct"</span>            <span class="token string">"ft ft ft ft ft ft ft ft ft ft"</span><span class="token punctuation">;</span>    &amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span>        <span class="token number">.</span>header&amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>        <span class="token property">background-color</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">/** 第一种，使用名称*/</span>        <span class="token property">grid-area</span><span class="token punctuation">:</span> hd<span class="token punctuation">;</span>                <span class="token comment" spellcheck="true">/**第二、三、四种作用原理相同*/</span>        <span class="token comment" spellcheck="true">/** 第二种，指定坐标，四个值分别为左上角x,y坐标，右下角y,x坐标*/</span>        <span class="token property">grid-area</span><span class="token punctuation">:</span> <span class="token number">1</span> / <span class="token number">1</span> / <span class="token number">2</span> / <span class="token number">11</span><span class="token punctuation">;</span>                <span class="token comment" spellcheck="true">/** 第三种*/</span>        <span class="token property">grid-column</span><span class="token punctuation">:</span> <span class="token number">1</span> / <span class="token number">11</span><span class="token punctuation">;</span>        <span class="token property">grid-row</span><span class="token punctuation">:</span> <span class="token number">1</span> / <span class="token number">2</span><span class="token punctuation">;</span>                <span class="token comment" spellcheck="true">/**第四种*/</span>        <span class="token property">grid-column-start</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">;</span>        <span class="token property">grid-column-end</span><span class="token punctuation">:</span> <span class="token number">11</span><span class="token punctuation">;</span>        <span class="token property">grid-row-start</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">;</span>        <span class="token property">grid-row-end</span><span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">;</span>    &amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span>        <span class="token number">.</span>side-bar&amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>        <span class="token property">background-color</span><span class="token punctuation">:</span> green<span class="token punctuation">;</span>        <span class="token property">grid-area</span><span class="token punctuation">:</span> sb<span class="token punctuation">;</span>    &amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span>        <span class="token number">.</span>footer&amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>        <span class="token property">background-color</span><span class="token punctuation">:</span> yellow<span class="token punctuation">;</span>        <span class="token property">grid-area</span><span class="token punctuation">:</span> ft<span class="token punctuation">;</span>    &amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span>        <span class="token number">.</span>content&amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>        <span class="token property">background-color</span><span class="token punctuation">:</span> blue<span class="token punctuation">;</span>        <span class="token property">grid-area</span><span class="token punctuation">:</span> ct<span class="token punctuation">;</span>    &amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span></code></pre><p><img src="https://files.catbox.moe/4rf4tk.png"></p><h2 id="CSS动画"><a href="#CSS动画" class="headerlink" title="CSS动画"></a>CSS动画</h2><h3 id="transition"><a href="#transition" class="headerlink" title="transition"></a>transition</h3><p><strong>示例</strong></p><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>box<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style language-css">    #box &amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>        <span class="token property">height</span><span class="token punctuation">:</span> <span class="token number">100</span>px<span class="token punctuation">;</span>        <span class="token property">width</span><span class="token punctuation">:</span> <span class="token number">100</span>px<span class="token punctuation">;</span>        <span class="token property">background</span><span class="token punctuation">:</span> green<span class="token punctuation">;</span>        <span class="token property">transition</span><span class="token punctuation">:</span> transform <span class="token number">1</span>s ease-in <span class="token number">1</span>s<span class="token punctuation">;</span>    &amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span>    #<span class="token property">box</span><span class="token punctuation">:</span>hover &amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>        <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">rotate</span><span class="token punctuation">(</span><span class="token number">180</span>deg<span class="token punctuation">)</span> <span class="token function">scale</span><span class="token punctuation">(</span><span class="token number">.5</span>, <span class="token number">.5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    &amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span></code></pre><p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2018/6/3/163c42601ede4b6e~tplv-t2oaga2asx-watermark.awebp" alt="image"></p><p><strong>属性</strong></p><p><code>transition: property | duration | timing-function | delay</code></p><table><thead><tr><th>值</th><th>描述</th></tr></thead><tbody><tr><td>transition-property</td><td>规定设置过渡效果的 CSS 属性的名称</td></tr><tr><td>transition-duration</td><td>规定完成过渡效果需要多少秒或毫秒</td></tr><tr><td>transition-timing-function</td><td>规定速度效果的贝塞尔曲线</td></tr><tr><td>transition-delay</td><td>定义过渡效果的延迟时间</td></tr></tbody></table><h3 id="animation、keyframes"><a href="#animation、keyframes" class="headerlink" title="animation、keyframes"></a>animation、keyframes</h3><p>animation和keyframes总是一起出现，keyframes用来描述一个动画，animation用来定义如何使用一个动画</p><p><strong>示例</strong></p><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>box<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style language-css">    <span class="token number">.</span>box &amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>        <span class="token property">height</span><span class="token punctuation">:</span> <span class="token number">100</span>px<span class="token punctuation">;</span>        <span class="token property">width</span><span class="token punctuation">:</span> <span class="token number">100</span>px<span class="token punctuation">;</span>        <span class="token property">border</span><span class="token punctuation">:</span> <span class="token number">15</span>px solid black<span class="token punctuation">;</span>        <span class="token property">animation</span><span class="token punctuation">:</span> changebox <span class="token number">1</span>s ease-in-out <span class="token number">1</span>s infinite alternate running forwards<span class="token punctuation">;</span>    &amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span>    <span class="token number">.</span><span class="token property">box</span><span class="token punctuation">:</span>hover &amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>        <span class="token property">animation-play-state</span><span class="token punctuation">:</span> paused<span class="token punctuation">;</span>    &amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span>    <span class="token atrule"><span class="token rule">@keyframes</span> changebox &amp;#123<span class="token punctuation">;</span></span>        <span class="token number">10%</span> &amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>            <span class="token property">background</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span>        &amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span>        <span class="token number">50%</span> &amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>            <span class="token property">width</span><span class="token punctuation">:</span> <span class="token number">80</span>px<span class="token punctuation">;</span>        &amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span>        <span class="token number">70%</span> &amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>            <span class="token property">border</span><span class="token punctuation">:</span> <span class="token number">15</span>px solid yellow<span class="token punctuation">;</span>        &amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span>        <span class="token number">100%</span> &amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>            <span class="token property">width</span><span class="token punctuation">:</span> <span class="token number">180</span>px<span class="token punctuation">;</span>            <span class="token property">height</span><span class="token punctuation">:</span> <span class="token number">180</span>px<span class="token punctuation">;</span>        &amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span>    &amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span></code></pre><p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2018/6/3/163c4261137cc7df~tplv-t2oaga2asx-watermark.awebp" alt="image"></p><p><strong>属性</strong></p><p><code>animation: name | duration | timing-function | delay | iteration-count | direction | play-state | fill-mode</code></p><table><thead><tr><th>值</th><th>描述</th></tr></thead><tbody><tr><td>name</td><td>用来调用@keyframes定义好的动画，与@keyframes定义的动画名称一致</td></tr><tr><td>duration</td><td>指定元素播放动画所持续的时间</td></tr><tr><td>timing-function</td><td>规定速度效果的速度曲线，是针对每一个小动画所在时间范围的变换速率</td></tr><tr><td>delay</td><td>定义在浏览器开始执行动画之前等待的时间，值整个animation执行之前等待的时间</td></tr><tr><td>iteration-count</td><td>定义动画的播放次数，可选具体次数或者无限(infinite)</td></tr><tr><td>direction</td><td>设置动画播放方向：normal(按时间轴顺序),reverse(时间轴反方向运行),alternate(轮流，即来回往复进行),alternate-reverse(动画先反运行再正方向运行，并持续交替运行)</td></tr><tr><td>play-state</td><td>控制元素动画的播放状态，通过此来控制动画的暂停和继续，两个值：running(继续)，paused(暂停)</td></tr><tr><td>fill-mode</td><td>控制动画结束后元素的样式，有四个值：none(回到动画没开始时的状态)，forwards(动画结束后动画停留在结束状态)，backwords(动画回到第一帧的状态)，both(根据animation-direction轮流应用forwards和backwards规则)，注意与iteration-count不要冲突(动画执行无限次)</td></tr></tbody></table><h2 id="CSS选择器"><a href="#CSS选择器" class="headerlink" title="CSS选择器"></a>CSS选择器</h2><h3 id="CSS选择器的权重和优先级"><a href="#CSS选择器的权重和优先级" class="headerlink" title="CSS选择器的权重和优先级"></a>CSS选择器的权重和优先级</h3><p><strong>权重</strong></p><ul><li>从0开始，一个行内样式+1000，一个id选择器+100，一个属性选择器、class或者伪类+10，一个元素选择器，或者伪元素+1，通配符+0</li></ul><p><strong>优先级</strong></p><ul><li>权重相同，写在后面的覆盖前面的</li><li>使用 <code>!important</code> 达到最大优先级，都使用 <code>!important</code> 时，权重大的优先级高</li></ul><h3 id="浏览器是怎样解析CSS选择器的？"><a href="#浏览器是怎样解析CSS选择器的？" class="headerlink" title="浏览器是怎样解析CSS选择器的？"></a>浏览器是怎样解析CSS选择器的？</h3><p><strong>CSS选择器的解析是从右向左解析的，为了避免对所有元素进行遍历</strong>。因为如果从左向右的匹配，发现不符合规则，需要进行回溯，会损失很多性能。若从右向左匹配，先找到所有的最右节点，对于每一个节点，向上寻找其父节点直到找到根元素或满足条件的匹配规则，则结束这个分支的遍历。两种匹配规则的性能差别很大，是因为从右向左的匹配在第一步就筛选掉了大量的不符合条件的最右节点（叶子节点），而从左向右的匹配规则的性能都浪费在了失败的查找上面。</p><h3 id="CSS选择器有哪些？"><a href="#CSS选择器有哪些？" class="headerlink" title="CSS选择器有哪些？"></a>CSS选择器有哪些？</h3><h4 id="直接选择器"><a href="#直接选择器" class="headerlink" title="直接选择器"></a>直接选择器</h4><h5 id="通配符选择器"><a href="#通配符选择器" class="headerlink" title="通配符选择器"></a>通配符选择器</h5><pre class=" language-css"><code class="language-css">*&amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>    <span class="token property">margin</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">;</span>    <span class="token property">padding</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">;</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span></code></pre><h5 id="标签选择器"><a href="#标签选择器" class="headerlink" title="标签选择器"></a>标签选择器</h5><pre class=" language-css"><code class="language-css">p&amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span></code></pre><h5 id="类选择器"><a href="#类选择器" class="headerlink" title="类选择器"></a>类选择器</h5><pre class=" language-css"><code class="language-css"><span class="token number">.</span>warning&amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span></code></pre><h5 id="ID选择器"><a href="#ID选择器" class="headerlink" title="ID选择器"></a>ID选择器</h5><pre class=" language-css"><code class="language-css">#warning&amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span></code></pre><h5 id="属性选取器"><a href="#属性选取器" class="headerlink" title="属性选取器"></a>属性选取器</h5><p><strong>[attribute]</strong></p><pre class=" language-css"><code class="language-css"><span class="token comment" spellcheck="true">/* 选择所有具有 foo 属性的元素 */</span>[foo]&amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span></code></pre><p><strong>[attribute&#x3D;value]</strong></p><pre class=" language-css"><code class="language-css"><span class="token comment" spellcheck="true">/* 选择 foo 属性值为 abc 的元素*/</span>[foo=abc]&amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span></code></pre><p><em><em>[attribute~&#x3D;value]、[attribute</em>&#x3D;value]</em>*</p><pre class=" language-css"><code class="language-css"><span class="token comment" spellcheck="true">/**    e1: foo = "abc def"    e2: foo = "abcdef"*/</span><span class="token comment" spellcheck="true">/* 选择 foo 属性值中带有 abc 这个单词的元素，可以选中 e1 */</span>[foo~=abc]&amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">/* 选择 foo 属性值中带有 abc 的元素，可以选中 e1, e2*/</span>[foo*=abc]&amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span></code></pre><p><strong>[attribute^&#x3D;value]、[attribute|&#x3D;value]、[attribute$&#x3D;value]</strong></p><pre class=" language-css"><code class="language-css"><span class="token comment" spellcheck="true">/* 选择 foo 属性值以 abc 开头的元素*/</span>[foo^=abc]&amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">/* 选择 foo 属性值以 abc 开头的元素，且与后面部分只能用连字符连接如：foo = "abc"、foo = "abc-def"、foo = "abc-def-ghi"*/</span>[foo|=abc]&amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">/* 选择 foo 属性值以 abc 结尾的元素*/</span>[foo$=abc]&amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span></code></pre><h4 id="文档结构选择器"><a href="#文档结构选择器" class="headerlink" title="文档结构选择器"></a>文档结构选择器</h4><h5 id="后代选择器"><a href="#后代选择器" class="headerlink" title="后代选择器"></a>后代选择器</h5><pre class=" language-css"><code class="language-css"><span class="token comment" spellcheck="true">/* 选择 ul 元素内的所有 li 元素 */</span>ul li&amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span></code></pre><h5 id="子选择器"><a href="#子选择器" class="headerlink" title="子选择器"></a>子选择器</h5><pre class=" language-css"><code class="language-css"><span class="token comment" spellcheck="true">/* 选择 父元素为 li、爷元素为 ul 的 p 元素 */</span> ul>li>p&amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span></code></pre><h5 id="相邻兄弟选择器"><a href="#相邻兄弟选择器" class="headerlink" title="相邻兄弟选择器"></a>相邻兄弟选择器</h5><pre class=" language-css"><code class="language-css"><span class="token comment" spellcheck="true">/* 选择紧邻在 h1 元素后的 p 元素，注意只选择一个 */</span>h<span class="token number">1</span>+p&amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span></code></pre><h5 id="一般兄弟选择器"><a href="#一般兄弟选择器" class="headerlink" title="一般兄弟选择器"></a>一般兄弟选择器</h5><pre class=" language-css"><code class="language-css"><span class="token comment" spellcheck="true">/* 选择前面有 h1 元素后的 p 元素，注意可选择多个 */</span> h<span class="token number">1</span>~p&amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span></code></pre><h4 id="伪类选择器"><a href="#伪类选择器" class="headerlink" title="伪类选择器"></a>伪类选择器</h4><h5 id="root-根元素伪类"><a href="#root-根元素伪类" class="headerlink" title=":root 根元素伪类"></a>:root 根元素伪类</h5><pre class=" language-css"><code class="language-css"><span class="token comment" spellcheck="true">/* 一般情况下相当于 html 元素 */</span><span class="token punctuation">:</span>root&amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>    <span class="token property">background-color</span><span class="token punctuation">:</span>red<span class="token punctuation">;</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span></code></pre><h5 id="子元素相关伪类"><a href="#子元素相关伪类" class="headerlink" title="子元素相关伪类"></a>子元素相关伪类</h5><p><strong>:nth-child(n)、:nth-last-child(n) 、:first-child、:last-child</strong></p><pre class=" language-css"><code class="language-css"><span class="token comment" spellcheck="true">/* 选中div元素的第一个子节点 */</span><span class="token property">div</span> <span class="token punctuation">:</span><span class="token function">nth-child</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>&amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>    <span class="token property">color</span><span class="token punctuation">:</span>red<span class="token punctuation">;</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">/* 选中div元素的最后一个子节点 */</span><span class="token property">div</span> <span class="token punctuation">:</span><span class="token function">nth-last-child</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>&amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>    <span class="token property">color</span><span class="token punctuation">:</span>red<span class="token punctuation">;</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">/* 选中div元素的第一个子节点 */</span><span class="token property">div</span> <span class="token punctuation">:</span>first-child&amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>    <span class="token property">color</span><span class="token punctuation">:</span>red<span class="token punctuation">;</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">/* 选中div元素的最后一个子节点 */</span><span class="token property">div</span> <span class="token punctuation">:</span>last-child&amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>    <span class="token property">color</span><span class="token punctuation">:</span>red<span class="token punctuation">;</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span></code></pre><p><strong>:nth-of-type(n) 、:nth-last-of-type(n)、:first-of-type、:last-of-type</strong></p><pre class=" language-css"><code class="language-css"><span class="token comment" spellcheck="true">/* 选中div元素的第二个子节点，且该子节点的类型为 p */</span>div <span class="token property">p</span><span class="token punctuation">:</span><span class="token function">nth-of-type</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>&amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>    <span class="token property">color</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">/* 选中div元素的倒数第二个子节点，且该子节点的类型为 p */</span>div <span class="token property">p</span><span class="token punctuation">:</span><span class="token function">nth-last-of-type</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>&amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>    <span class="token property">color</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">/* 选中div元素的第一个 p 子节点 */</span>div <span class="token property">p</span><span class="token punctuation">:</span>first-of-type&amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>    <span class="token property">color</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">/* 选中div元素的最后一个 p 子节点 */</span>div <span class="token property">p</span><span class="token punctuation">:</span>last-of-type&amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>    <span class="token property">color</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span></code></pre><p><strong>:only-child</strong></p><pre class=" language-css"><code class="language-css"><span class="token comment" spellcheck="true">/* 选中div元素的唯一一个子元素 */</span><span class="token property">div</span> <span class="token punctuation">:</span>only-child&amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span></code></pre><p><strong>:empty</strong></p><pre class=" language-css"><code class="language-css"><span class="token comment" spellcheck="true">/* 选中没有子元素的div元素 */</span><span class="token property">div</span> <span class="token punctuation">:</span>empty&amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span></code></pre><p><strong>:only-of-type</strong></p><pre class=" language-css"><code class="language-css"><span class="token comment" spellcheck="true">/* 选中div的唯一一个 p 子元素*/</span>div <span class="token property">p</span><span class="token punctuation">:</span>only-of-type&amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span></code></pre><h5 id="元素状态相关选择器"><a href="#元素状态相关选择器" class="headerlink" title="元素状态相关选择器"></a>元素状态相关选择器</h5><p><strong>:link、:active、:hover、:visited、:focus、:enable、:disabled、:checked、:not()</strong></p><pre class=" language-css"><code class="language-css"><span class="token comment" spellcheck="true">/* 选择地址未被访问过的 a 标签，通过 a 标签的 href 属性和浏览器历史记录的匹配结果实现，而且是响应式的 */</span><span class="token property">a</span><span class="token punctuation">:</span>link&amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">/* 选择正在处于激活状态的 a 标签 */</span><span class="token property">a</span><span class="token punctuation">:</span>active&amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">/* 选择处于鼠标指针位置上的 a 标签 */</span><span class="token property">a</span><span class="token punctuation">:</span>hover&amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">/* 选择地址已被访问过的 a 标签，与 :link 刚好互斥 */</span><span class="token property">a</span><span class="token punctuation">:</span>visited&amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">/* 选择获得焦点的 input 元素 */</span><span class="token property">input</span><span class="token punctuation">:</span>focus&amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">/* 选择处于启用状态的 input 元素，即未使用 disabled 属性的 input 元素 */</span><span class="token property">input</span><span class="token punctuation">:</span>enabled&amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">/* 选择处于禁用状态的 input 元素，即使用了 disabled 属性的 input 元素 */</span><span class="token property">input</span><span class="token punctuation">:</span>disabled&amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">/* 选择每一个选中的 input[type="radio"]、input[type="checkbox"]和 option */</span>*<span class="token punctuation">:</span>checked&amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">/* 反向选择 */</span><span class="token punctuation">:</span><span class="token function">not</span><span class="token punctuation">(</span>selector<span class="token punctuation">)</span></code></pre><h4 id="伪元素选择器"><a href="#伪元素选择器" class="headerlink" title="伪元素选择器"></a>伪元素选择器</h4><p>注意，伪类选择器是一个冒号、伪元素选择器是两个冒号</p><p><strong>::first-line、::first-letter、::selection</strong></p><pre class=" language-css"><code class="language-css"><span class="token comment" spellcheck="true">/* 选中所有 p 元素的第一行文字 */</span><span class="token property">p</span><span class="token punctuation">:</span><span class="token punctuation">:</span>first-line&amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">/* 选中所有 p 元素的第一个字母 */</span><span class="token property">p</span><span class="token punctuation">:</span><span class="token punctuation">:</span>first-letter&amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">/* 选中所有 p 元素的被选择的文字 */</span><span class="token property">p</span><span class="token punctuation">:</span><span class="token punctuation">:</span>selection&amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span></code></pre><p><strong>::before、::after</strong></p><pre class=" language-css"><code class="language-css"><span class="token comment" spellcheck="true">/* 在 p 元素前插入元素 */</span><span class="token property">p</span><span class="token punctuation">:</span><span class="token punctuation">:</span>before&amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>    <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">'hello'</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">/* 在 p 元素后插入元素 */</span><span class="token property">p</span><span class="token punctuation">:</span><span class="token punctuation">:</span>after&amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>    <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">'。'</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span></code></pre><h2 id="CSS浏览器相关"><a href="#CSS浏览器相关" class="headerlink" title="CSS浏览器相关"></a>CSS浏览器相关</h2><h3 id="标准盒模型和怪异（IE）盒模型"><a href="#标准盒模型和怪异（IE）盒模型" class="headerlink" title="标准盒模型和怪异（IE）盒模型"></a>标准盒模型和怪异（IE）盒模型</h3><ol><li>标准盒模型<br>标准盒模型（W3C盒子模型），设置的width或height是对 实际内容（content）的width或height进行设置，内容周围的border和padding另外设置，即盒子模型的width（height）&#x3D;设置的content的宽高+padding+border+margin<br>注：除内容content外，其他为上下左右都有</li></ol><p><img src="/../../Desktop/img/20200902173247902.png"></p><ol start="2"><li><p>怪异盒模型（IE盒子模型）</p><p>怪异盒模型（IE盒子模型），设置的width或height是对 实际内容（content）+内边距（padding）+边框（border）之和的width和height进行设置的，其盒模型的width（height）&#x3D;设置的width（height）+外边距margin</p></li></ol><p><img src="/../../Desktop/img/20200902173305473.png"></p><p>可使用box-sizing: content-box | border-box 来进行切换，非IE浏览器默认为标准盒模型</p><h3 id="主流浏览器内核私有属性css前缀是什么？"><a href="#主流浏览器内核私有属性css前缀是什么？" class="headerlink" title="主流浏览器内核私有属性css前缀是什么？"></a>主流浏览器内核私有属性css前缀是什么？</h3><ul><li>mozilla 内核 （firefox,flock 等）    -moz</li><li>webkit  内核 （safari,chrome 等）   -webkit</li><li>opera   内核 （opera 浏览器）        -o</li><li>trident 内核 （ie 浏览器）           -ms</li></ul><h3 id="CSS引入的方式有哪些？使用Link和-import有什么区别？"><a href="#CSS引入的方式有哪些？使用Link和-import有什么区别？" class="headerlink" title="CSS引入的方式有哪些？使用Link和@import有什么区别？"></a>CSS引入的方式有哪些？使用Link和@import有什么区别？</h3><ol><li>link 属于 XHTML 标签，除了加载 CSS 外，还能用于定义RSS，定义 rel 连接属性等作用，无兼容性，支持使用javascript改变样式；而@import是CSS提供的，只能用于加载CSS，不支持使用 javascript 改变样式；</li><li>页面被加载的时，link会被同时加载，而@import引用的CSS会等到页面加载完再加载；</li><li>import是CSS2.1提出的，CSS2.1以下浏览器不支持，只在IE5以上才能被识别，而link是XHTML标签，无兼容问题。</li></ol><h3 id="浏览器的渲染原理？"><a href="#浏览器的渲染原理？" class="headerlink" title="浏览器的渲染原理？"></a>浏览器的渲染原理？</h3><ul><li>首先解析收到的文档，根据文档定义构建一棵 DOM 树，DOM 树是由 DOM 元素及属性节点组成的</li><li>然后对 CSS 进行解析，生成CSSOM规则树。</li><li>根据DOM树和CSSOM规则树构建渲染树。渲染树的节点被称为渲染对象，渲染对象是一个包含有颜色和大小等属性的矩形，渲染对象和DOM元素相对应，但这种对应关系不是一对一的，不可见的DOM元素不会被插入渲染树。还有一些DOM元素对应几个可见对象，它们一般是一些具有复杂结构的元素，无法用一个矩形来描述。</li><li>当渲染对象被创建并添加到树中，它们并没有位置和大小，所以当浏览器生成渲染树以后，就会根据渲染树来进行布局（也可以叫做回流）。这一阶段浏览器要做的事情是要弄清楚各个节点在页面中的确切位置和大小。通常这一行为也被称为“自动重排”。</li><li>布局阶段结束后是绘制阶段，遍历渲染树并调用渲染对象的paint方法将它们的内容显示在屏幕上，绘制使用UI基础组件。</li></ul><h3 id="回流和重绘"><a href="#回流和重绘" class="headerlink" title="回流和重绘"></a>回流和重绘</h3><p>在讨论回流与重绘之前，我们要知道：</p><ol><li>浏览器使用流式布局模型 (Flow Based Layout)。</li><li>浏览器会把<code>HTML</code>解析成<code>DOM</code>，把<code>CSS</code>解析成<code>CSSOM</code>，<code>DOM</code>和<code>CSSOM</code>合并就产生了<code>Render Tree</code>。</li><li>有了<code>RenderTree</code>，我们就知道了所有节点的样式，然后计算他们在页面上的大小和位置，最后把节点绘制到页面上。</li><li>由于浏览器使用流式布局，对<code>Render Tree</code>的计算通常只需要遍历一次就可以完成，但<code>table</code>及其内部元素除外，他们可能需要多次计算，通常要花3倍于同等元素的时间，这也是为什么要避免使用<code>table</code>布局的原因之一。</li></ol><h4 id="回流"><a href="#回流" class="headerlink" title="回流"></a>回流</h4><p>当<code>Render Tree</code>中部分或全部元素的尺寸、结构、或某些属性发生改变时，浏览器重新渲染部分或全部文档的过程称为<strong>回流</strong>。</p><p>会导致回流的操作：</p><ul><li>页面首次渲染</li><li>浏览器窗口大小发生改变</li><li>元素尺寸或位置发生改变</li><li>元素内容变化（文字数量或图片大小等等）</li><li>元素字体大小变化</li><li>添加或者删除<strong>可见</strong>的<code>DOM</code>元素</li><li>激活<code>CSS</code>伪类（例如：<code>:hover</code>）</li><li>查询某些属性或调用某些方法</li></ul><h4 id="重绘"><a href="#重绘" class="headerlink" title="重绘"></a>重绘</h4><p>当页面中元素样式的改变并不影响它在文档流中的位置时（例如：<code>color</code>、<code>background-color</code>、<code>visibility</code>等），浏览器会将新样式赋予给元素并重新绘制它，这个过程称为<strong>重绘</strong>。</p><h4 id="浏览器优化"><a href="#浏览器优化" class="headerlink" title="浏览器优化"></a>浏览器优化</h4><p>浏览器对回流和重绘做了以下的优化：</p><p>浏览器会维护一个队列，把所有引起回流和重绘的操作放入队列中，如果队列中的任务数量或者时间间隔达到一个阈值的，浏览器就会将队列清空，进行一次批处理，这样可以把多次回流和重绘变成一次。</p><p>当访问以下属性或方法时，浏览器会立刻清空队列：</p><ul><li><code>clientWidth</code>、<code>clientHeight</code>、<code>clientTop</code>、<code>clientLeft</code></li><li><code>offsetWidth</code>、<code>offsetHeight</code>、<code>offsetTop</code>、<code>offsetLeft</code></li><li><code>scrollWidth</code>、<code>scrollHeight</code>、<code>scrollTop</code>、<code>scrollLeft</code></li><li><code>width</code>、<code>height</code></li><li><code>getComputedStyle()</code></li><li><code>getBoundingClientRect()</code></li></ul><p>因为队列中可能会有影响到这些属性或方法返回值的操作，即使你希望获取的信息与队列中操作引发的改变无关，浏览器也会强行清空队列，确保你拿到的值是最精确的。</p><h4 id="代码优化"><a href="#代码优化" class="headerlink" title="代码优化"></a>代码优化</h4><p><strong>CSS</strong></p><ul><li>避免使用<code>table</code>布局。</li><li>尽可能在<code>DOM</code>树的最末端改变<code>class</code>。</li><li>避免设置多层内联样式。</li><li>将动画效果应用到<code>position</code>属性为<code>absolute</code>或<code>fixed</code>的元素上。</li><li>避免使用<code>CSS</code>表达式（例如：<code>calc()</code>）。</li></ul><p><strong>JavaScript</strong></p><ul><li>避免频繁操作样式，最好一次性重写<code>style</code>属性，或者将样式列表定义为<code>class</code>并一次性更改<code>class</code>属性。</li><li>避免频繁操作<code>DOM</code>，创建一个<code>documentFragment</code>，在它上面应用所有<code>DOM操作</code>，最后再把它添加到文档中。</li><li>也可以先为元素设置<code>display: none</code>，操作结束后再把它显示出来。因为在<code>display</code>属性为<code>none</code>的元素上进行的<code>DOM</code>操作不会引发回流和重绘。</li><li>避免频繁读取会引发回流&#x2F;重绘的属性，如果确实需要多次使用，就用一个变量缓存起来。</li><li>对具有复杂动画的元素使用绝对定位，使它脱离文档流，否则会引起父元素及后续元素频繁回流。</li></ul><h2 id="CSS预处理器"><a href="#CSS预处理器" class="headerlink" title="CSS预处理器"></a>CSS预处理器</h2><h3 id="对-CSS-工程化的理解"><a href="#对-CSS-工程化的理解" class="headerlink" title="对 CSS 工程化的理解"></a>对 CSS 工程化的理解</h3><p>CSS 工程化是为了解决以下问题：</p><ol><li><strong>宏观设计</strong>：CSS 代码如何组织、如何拆分、模块结构怎样设计？</li><li><strong>编码优化</strong>：怎样写出更好的 CSS？</li><li><strong>构建</strong>：如何处理我的 CSS，才能让它的打包结果最优？</li><li><strong>可维护性</strong>：代码写完了，如何最小化它后续的变更成本？如何确保任何一个同事都能轻松接手？</li></ol><p>以下三个方向都是时下比较流行的、普适性非常好的 CSS 工程化实践：</p><ul><li>预处理器：Less、 Sass 等；</li><li>重要的工程化插件： PostCss；</li><li>Webpack loader 等 。</li></ul><p>基于这三个方向，可以衍生出一些具有典型意义的子问题，这里我们逐个来看：</p><p><strong>（1）预处理器：为什么要用预处理器？它的出现是为了解决什么问题？</strong></p><p>预处理器，其实就是CSS世界的“轮子”。预处理器支持我们写一种类似 CSS、但实际并不是 CSS 的语言，然后把它编译成 CSS 代码：</p><p><img src="/../../Desktop/img/5ee2df9500016ef112620300.png" alt="image"></p><p>那为什么写 CSS 代码写得好好的，偏偏要转去写“类 CSS”呢？这就和本来用 JS 也可以实现所有功能，但最后却写 React 的 jsx 或者 Vue 的模板语法一样——为了爽！要想知道有了预处理器有多爽，首先要知道的是传统 CSS 有多不爽。随着前端业务复杂度的提高，前端工程中对 CSS 提出了以下的诉求：</p><ol><li>宏观设计上：我们希望能优化 CSS 文件的目录结构，对现有的CSS文件实现复用；</li><li>编码优化上：我们希望能写出结构清晰、简明易懂的 CSS，需要它具有一目了然的嵌套层级关系，而不是无差别的一铺到底写法；我们希望它具有变量特征、计算能力、循环能力等等更强的可编程性，这样我们可以少写一些无用的代码；</li><li>可维护性上：更强的可编程性意味着更优质的代码结构，实现复用意味着更简单的目录结构和更强的拓展能力，这两点如果能做到，自然会带来更强的可维护性。</li></ol><p>这三点是传统 CSS 所做不到的，也正是预处理器所解决掉的问题。预处理器普遍会具备这样的特性：</p><ul><li>嵌套代码的能力，通过嵌套来反映不同 css 属性之间的层级关系 ；</li><li>支持定义 css 变量；</li><li>提供计算函数；</li><li>允许对代码片段进行 extend 和 mixin；</li><li>支持循环语句的使用；</li><li>支持将 CSS 文件模块化，实现复用。</li></ul><p><strong>（2）PostCss：PostCss 是如何工作的？我们在什么场景下会使用 PostCss？</strong></p><p>PostCss 仍然是一个对CSS进行解析和处理的工具，它会对CSS做这样的事情：</p><p><img src="/../../Desktop/img/5ee2df9e0001fdcf12580304.png" alt="img"></p><p>它和预处理器的不同就在于，预处理器处理的是类CSS，而 PostCss 处理的就是 CSS 本身。Babel 可以将高版本的 JS 代码转换为低版本的 JS 代码。PostCss 做的是类似的事情：它可以编译尚未被浏览器广泛支持的先进的 CSS 语法，还可以自动为一些需要额外兼容的语法增加前缀。更强的是，由于 PostCss 有着强大的插件机制，支持各种各样的扩展，极大地强化了 CSS 的能力。</p><p>PostCss 在业务中的使用场景非常多：</p><ul><li>提高 CSS 代码的可读性：PostCss 其实可以做类似预处理器能做的工作；</li><li>当我们的 CSS 代码需要适配低版本浏览器时，PostCss 的 <a href="https://github.com/postcss/autoprefixer">Autoprefixer</a> 插件可以帮助我们自动增加浏览器前缀；</li><li>允许我们编写面向未来的 CSS：PostCss 能够帮助我们编译 CSS next 代码；</li></ul><p><strong>（3）Webpack 能处理 CSS 吗？如何实现？</strong></p><p>Webpack 能处理 CSS 吗：</p><ul><li><strong>Webpack 在裸奔的状态下，是不能处理 CSS 的</strong>，Webpack 本身是一个面向 JavaScript 且只能处理 JavaScript 代码的模块化打包工具；</li><li>Webpack 在 loader 的辅助下，是可以处理 CSS 的。</li></ul><p>如何用 Webpack 实现对 CSS 的处理：</p><ul><li><p>Webpack 中操作 CSS 需要使用的两个关键的 loader：css-loader 和 style-loader</p></li><li><p>注意，答出“用什么”有时候可能还不够，面试官会怀疑你是不是在背答案，所以你还需要了解每个 loader 都做了什么事情：</p></li><li><ul><li>css-loader：导入 CSS 模块，对 CSS 代码进行编译处理；</li><li>style-loader：创建style标签，把 CSS 内容写入标签。</li></ul></li></ul><p>在实际使用中，<strong>css-loader 的执行顺序一定要安排在 style-loader 的前面</strong>。因为只有完成了编译过程，才可以对 css 代码进行插入；若提前插入了未编译的代码，那么 webpack 是无法理解这坨东西的，它会无情报错。</p><h3 id="使用-CSS-预处理的优缺点分别是什么？"><a href="#使用-CSS-预处理的优缺点分别是什么？" class="headerlink" title="使用 CSS 预处理的优缺点分别是什么？"></a>使用 CSS 预处理的优缺点分别是什么？</h3><p>优点：</p><ul><li>提高 CSS 可维护性。</li><li>易于编写嵌套选择器。</li><li>引入变量，增添主题功能。可以在不同的项目中共享主题文件。</li><li>通过混合（Mixins）生成重复的 CSS。</li><li>将代码分割成多个文件。不进行预处理的 CSS，虽然也可以分割成多个文件，但需要建立多个 HTTP 请求加载这些文件。</li></ul><p>缺点：</p><ul><li>需要预处理工具。</li><li>重新编译的时间可能会很慢。</li></ul><h3 id="Less"><a href="#Less" class="headerlink" title="Less"></a>Less</h3><h4 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h4><ol><li><p><strong>值变量</strong></p><pre class=" language-less"><code class="language-less"><span class="token comment" spellcheck="true">/* Less */</span><span class="token variable">@color<span class="token punctuation">:</span></span> <span class="token hexcode">#999</span><span class="token punctuation">;</span><span class="token variable">@bgColor<span class="token punctuation">:</span></span> skyblue<span class="token punctuation">;</span><span class="token comment" spellcheck="true">//不要添加引号</span><span class="token variable">@width<span class="token punctuation">:</span></span> <span class="token number">50%</span><span class="token punctuation">;</span><span class="token mixin-usage function">#wrap &amp;#123</span><span class="token punctuation">;</span>  <span class="token property">color</span><span class="token punctuation">:</span> <span class="token variable">@color</span><span class="token punctuation">;</span>  <span class="token property">background</span><span class="token punctuation">:</span> <span class="token variable">@bgColor</span><span class="token punctuation">;</span>  <span class="token property">width</span><span class="token punctuation">:</span> <span class="token variable">@width</span><span class="token punctuation">;</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">/* 生成后的 CSS */</span>#wrap &amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>  <span class="token property">color</span><span class="token punctuation">:</span> <span class="token hexcode">#999</span><span class="token punctuation">;</span>  <span class="token property">background</span><span class="token punctuation">:</span> skyblue<span class="token punctuation">;</span>  <span class="token property">width</span><span class="token punctuation">:</span> <span class="token number">50%</span><span class="token punctuation">;</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span></code></pre><p>以 <code>@</code> 开头 定义变量，并且使用时 直接 键入 <code>@</code>名称。</p><p>在平时工作中，我们就可以把 常用的变量 封装到一个文件中，这样利于代码组织维护。</p><pre class=" language-less"><code class="language-less"><span class="token variable">@lightPrimaryColor<span class="token punctuation">:</span></span> <span class="token hexcode">#c5cae9</span><span class="token punctuation">;</span><span class="token variable">@textPrimaryColor<span class="token punctuation">:</span></span> <span class="token hexcode">#fff</span><span class="token punctuation">;</span><span class="token variable">@accentColor<span class="token punctuation">:</span></span> <span class="token function">rgb</span><span class="token punctuation">(</span><span class="token number">99</span><span class="token punctuation">,</span> <span class="token number">137</span><span class="token punctuation">,</span> <span class="token number">185</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token variable">@primaryTextColor<span class="token punctuation">:</span></span> <span class="token hexcode">#646464</span><span class="token punctuation">;</span><span class="token variable">@secondaryTextColor<span class="token punctuation">:</span></span> <span class="token hexcode">#000</span><span class="token punctuation">;</span><span class="token variable">@dividerColor<span class="token punctuation">:</span></span> <span class="token hexcode">#b6b6b6</span><span class="token punctuation">;</span><span class="token variable">@borderColor<span class="token punctuation">:</span></span> <span class="token hexcode">#dadada</span><span class="token punctuation">;</span></code></pre></li><li><p><strong>选择器变量</strong></p><p>让 选择器 变成 动态</p><pre class=" language-less"><code class="language-less"><span class="token comment" spellcheck="true">/* Less */</span><span class="token variable">@mySelector<span class="token punctuation">:</span></span> #wrap<span class="token punctuation">;</span><span class="token variable">@Wrap<span class="token punctuation">:</span></span> wrap<span class="token punctuation">;</span>@&amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>mySelector&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span>&amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//变量名 必须使用大括号包裹</span>  <span class="token property">color</span><span class="token punctuation">:</span> <span class="token hexcode">#999</span><span class="token punctuation">;</span>  <span class="token property">width</span><span class="token punctuation">:</span> <span class="token number">50%</span><span class="token punctuation">;</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span><span class="token number">.</span>@&amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>Wrap&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span>&amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>  <span class="token property">color</span><span class="token punctuation">:</span><span class="token hexcode">#ccc</span><span class="token punctuation">;</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span>#@&amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>Wrap&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span>&amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>  <span class="token property">color</span><span class="token punctuation">:</span><span class="token hexcode">#666</span><span class="token punctuation">;</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">/* 生成的 CSS */</span>#wrap&amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>  <span class="token property">color</span><span class="token punctuation">:</span> <span class="token hexcode">#999</span><span class="token punctuation">;</span>  <span class="token property">width</span><span class="token punctuation">:</span> <span class="token number">50%</span><span class="token punctuation">;</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span><span class="token mixin-usage function">.wrap&amp;#123</span><span class="token punctuation">;</span>  <span class="token property">color</span><span class="token punctuation">:</span><span class="token hexcode">#ccc</span><span class="token punctuation">;</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span><span class="token mixin-usage function">#wrap&amp;#123</span><span class="token punctuation">;</span>  <span class="token property">color</span><span class="token punctuation">:</span><span class="token hexcode">#666</span><span class="token punctuation">;</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span></code></pre></li><li><p><strong>属性变量</strong></p><p>可减少代码书写量</p><pre class=" language-less"><code class="language-less"><span class="token comment" spellcheck="true">/* Less */</span><span class="token variable">@borderStyle<span class="token punctuation">:</span></span> border<span class="token operator">-</span>style<span class="token punctuation">;</span><span class="token variable">@Soild<span class="token punctuation">:</span></span>solid<span class="token punctuation">;</span><span class="token mixin-usage function">#wrap&amp;#123</span><span class="token punctuation">;</span>  @&amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>borderStyle&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span><span class="token punctuation">:</span> <span class="token variable">@Soild</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//变量名 必须使用大括号包裹</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">/* 生成的 CSS */</span>#wrap&amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>  <span class="token property">border-style</span><span class="token punctuation">:</span>solid<span class="token punctuation">;</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span></code></pre></li><li><p><strong>url 变量</strong></p><p>项目结构改变时，修改其变量即可。</p><pre class=" language-less"><code class="language-less"><span class="token comment" spellcheck="true">/* Less */</span><span class="token variable">@images<span class="token punctuation">:</span></span> <span class="token string">"../img"</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//需要加引号</span>body &amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>  <span class="token property">background</span><span class="token punctuation">:</span> <span class="token url">url("@&amp;#123;images&amp;#125;/dog.png")</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//变量名 必须使用大括号包裹</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">/* 生成的 CSS */</span>body &amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>  <span class="token property">background</span><span class="token punctuation">:</span> <span class="token url">url("../img/dog.png")</span><span class="token punctuation">;</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span></code></pre></li><li><p><strong>声明变量</strong></p><p>有点类似于 下面的 混合方法</p><ul><li>结构: @name: { 属性: 值 ;};</li><li>使用：@name();</li></ul><pre class=" language-less"><code class="language-less"><span class="token comment" spellcheck="true">/* Less */</span><span class="token variable">@background<span class="token punctuation">:</span></span> &amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span><span class="token property">background</span><span class="token punctuation">:</span>red<span class="token punctuation">;</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span><span class="token punctuation">;</span><span class="token mixin-usage function">#main&amp;#123</span><span class="token punctuation">;</span>    <span class="token variable">@background</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span><span class="token variable">@Rules<span class="token punctuation">:</span></span>&amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>    <span class="token property">width</span><span class="token punctuation">:</span> <span class="token number">200</span>px<span class="token punctuation">;</span>    <span class="token property">height</span><span class="token punctuation">:</span> <span class="token number">200</span>px<span class="token punctuation">;</span>    <span class="token property">border</span><span class="token punctuation">:</span> solid <span class="token number">1</span>px red<span class="token punctuation">;</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span><span class="token punctuation">;</span><span class="token mixin-usage function">#con&amp;#123</span><span class="token punctuation">;</span>  <span class="token variable">@Rules</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">/* 生成的 CSS */</span>#main&amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>  <span class="token property">background</span><span class="token punctuation">:</span>red<span class="token punctuation">;</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span><span class="token mixin-usage function">#con&amp;#123</span><span class="token punctuation">;</span>  <span class="token property">width</span><span class="token punctuation">:</span> <span class="token number">200</span>px<span class="token punctuation">;</span>  <span class="token property">height</span><span class="token punctuation">:</span> <span class="token number">200</span>px<span class="token punctuation">;</span>  <span class="token property">border</span><span class="token punctuation">:</span> solid <span class="token number">1</span>px red<span class="token punctuation">;</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span></code></pre></li><li><p><strong>变量运算</strong></p><p>不得不提的是，Less 的变量运算完全超出我的期望，十分强大。</p><ul><li>加减法时，以第一个数据的单位为基准</li><li>乘除法时 注意单位一定要统一</li></ul><pre class=" language-less"><code class="language-less"><span class="token comment" spellcheck="true">/* Less */</span><span class="token variable">@width<span class="token punctuation">:</span></span><span class="token number">300</span>px<span class="token punctuation">;</span><span class="token variable">@color<span class="token punctuation">:</span></span><span class="token hexcode">#222</span><span class="token punctuation">;</span><span class="token mixin-usage function">#wrap&amp;#123</span><span class="token punctuation">;</span>  <span class="token property">width</span><span class="token punctuation">:</span><span class="token variable">@width-20</span><span class="token punctuation">;</span>  <span class="token property">height</span><span class="token punctuation">:</span><span class="token variable">@width-20</span><span class="token operator">*</span><span class="token number">5</span><span class="token punctuation">;</span>  <span class="token property">margin</span><span class="token punctuation">:</span><span class="token punctuation">(</span><span class="token variable">@width-20</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">5</span><span class="token punctuation">;</span>  <span class="token property">color</span><span class="token punctuation">:</span><span class="token variable">@color</span><span class="token operator">*</span><span class="token number">2</span><span class="token punctuation">;</span>  <span class="token property">background-color</span><span class="token punctuation">:</span><span class="token variable">@color</span> <span class="token operator">+</span> <span class="token hexcode">#111</span><span class="token punctuation">;</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">/* 生成的 CSS */</span>#wrap&amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>  <span class="token property">width</span><span class="token punctuation">:</span><span class="token number">280</span>px<span class="token punctuation">;</span>  <span class="token property">height</span><span class="token punctuation">:</span><span class="token number">200</span>px<span class="token punctuation">;</span>  <span class="token property">margin</span><span class="token punctuation">:</span><span class="token number">1400</span>px<span class="token punctuation">;</span>  <span class="token property">color</span><span class="token punctuation">:</span><span class="token hexcode">#444</span><span class="token punctuation">;</span>  <span class="token property">background-color</span><span class="token punctuation">:</span><span class="token hexcode">#333</span><span class="token punctuation">;</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span></code></pre></li><li><p><strong>变量作用域</strong></p><p>一句话理解就是：<strong>就近原则</strong></p><pre class=" language-less"><code class="language-less"><span class="token comment" spellcheck="true">/* Less */</span><span class="token variable">@var<span class="token punctuation">:</span></span> <span class="token variable">@a</span><span class="token punctuation">;</span><span class="token variable">@a<span class="token punctuation">:</span></span> <span class="token number">100%</span><span class="token punctuation">;</span><span class="token mixin-usage function">#wrap &amp;#123</span><span class="token punctuation">;</span>  <span class="token property">width</span><span class="token punctuation">:</span> <span class="token variable">@var</span><span class="token punctuation">;</span>  <span class="token variable">@a<span class="token punctuation">:</span></span> <span class="token number">9%</span><span class="token punctuation">;</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">/* 生成的 CSS */</span>#wrap &amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>  <span class="token property">width</span><span class="token punctuation">:</span> <span class="token number">9%</span><span class="token punctuation">;</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span></code></pre></li><li><p><strong>用变量去定义变量</strong></p><pre class=" language-less"><code class="language-less"><span class="token comment" spellcheck="true">/* Less */</span><span class="token variable">@fnord<span class="token punctuation">:</span></span>  <span class="token string">"I am fnord."</span><span class="token punctuation">;</span><span class="token variable">@var<span class="token punctuation">:</span></span>    <span class="token string">"fnord"</span><span class="token punctuation">;</span><span class="token mixin-usage function">#wrap::after&amp;#123</span><span class="token punctuation">;</span>  <span class="token property">content</span><span class="token punctuation">:</span> <span class="token variable">@@var</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//将@var替换为其值 content:@fnord;</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">/* 生成的 CSS */</span>#<span class="token property">wrap</span><span class="token punctuation">:</span><span class="token punctuation">:</span>after&amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>  <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">"I am fnord."</span><span class="token punctuation">;</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span></code></pre></li></ol><h4 id="嵌套"><a href="#嵌套" class="headerlink" title="嵌套"></a>嵌套</h4><ol><li><p><strong>&amp; 的妙用</strong></p><p>&amp; ：代表的上一层选择器的名字，此例便是<code>header</code>。</p><pre class=" language-less"><code class="language-less"><span class="token comment" spellcheck="true">/* Less */</span>#header&amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>  &amp;<span class="token punctuation">:</span>after&amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>    <span class="token property">content</span><span class="token punctuation">:</span><span class="token string">"Less is more!"</span><span class="token punctuation">;</span>  &amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span>  <span class="token mixin-usage function">.title&amp;#123</span><span class="token punctuation">;</span>    <span class="token property">font-weight</span><span class="token punctuation">:</span>bold<span class="token punctuation">;</span>  &amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span>  &amp;_content&amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//理解方式：直接把 &amp; 替换成 #header</span>    <span class="token property">margin</span><span class="token punctuation">:</span><span class="token number">20</span>px<span class="token punctuation">;</span>  &amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">/* 生成的 CSS */</span>#<span class="token property">header</span><span class="token punctuation">:</span><span class="token punctuation">:</span>after&amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>  <span class="token property">content</span><span class="token punctuation">:</span><span class="token string">"Less is more!"</span><span class="token punctuation">;</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span><span class="token mixin-usage function">#header .title&amp;#123</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//嵌套了</span>  <span class="token property">font-weight</span><span class="token punctuation">:</span>bold<span class="token punctuation">;</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span><span class="token mixin-usage function">#header_content&amp;#123</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//没有嵌套！</span>    <span class="token property">margin</span><span class="token punctuation">:</span><span class="token number">20</span>px<span class="token punctuation">;</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span></code></pre></li><li><p><strong>媒体查询</strong></p><p>在以往的工作中，我们使用 媒体查询，都要把一个元素 分开写</p><pre class=" language-less"><code class="language-less">#wrap&amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>  <span class="token property">width</span><span class="token punctuation">:</span><span class="token number">500</span>px<span class="token punctuation">;</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span><span class="token variable">@media</span> screen and <span class="token punctuation">(</span><span class="token property">max-width</span><span class="token punctuation">:</span><span class="token number">768</span>px<span class="token punctuation">)</span>&amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>  <span class="token mixin-usage function">#wrap&amp;#123</span><span class="token punctuation">;</span>    <span class="token property">width</span><span class="token punctuation">:</span><span class="token number">100</span>px<span class="token punctuation">;</span>  &amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span></code></pre><p>Less 提供了一个十分便捷的方式</p><pre class=" language-less"><code class="language-less"><span class="token comment" spellcheck="true">/* Less */</span>#main&amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//something...</span>    <span class="token variable">@media</span> screen&amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>        <span class="token variable">@media</span> <span class="token punctuation">(</span><span class="token property">max-width</span><span class="token punctuation">:</span><span class="token number">768</span>px<span class="token punctuation">)</span>&amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>          <span class="token property">width</span><span class="token punctuation">:</span><span class="token number">100</span>px<span class="token punctuation">;</span>        &amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span>    &amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span>    <span class="token variable">@media</span> tv &amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>      <span class="token property">width</span><span class="token punctuation">:</span><span class="token number">2000</span>px<span class="token punctuation">;</span>    &amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">/* 生成的 CSS */</span><span class="token variable">@media</span> screen and <span class="token punctuation">(</span><span class="token property">max-width</span><span class="token punctuation">:</span><span class="token number">768</span>px<span class="token punctuation">)</span>&amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>  <span class="token mixin-usage function">#main&amp;#123</span><span class="token punctuation">;</span>      <span class="token property">width</span><span class="token punctuation">:</span><span class="token number">100</span>px<span class="token punctuation">;</span>   &amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span><span class="token variable">@media</span> tv&amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>  <span class="token mixin-usage function">#main&amp;#123</span><span class="token punctuation">;</span>    <span class="token property">width</span><span class="token punctuation">:</span><span class="token number">2000</span>px<span class="token punctuation">;</span>  &amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span></code></pre><p>唯一的缺点就是 每一个元素都会编译出自己 <code>@media</code> 声明，并不会合并。</p></li><li><p><strong>实战技巧</strong></p><p>可以借助 Less 在元素中，去定义自己的私有样式。</p><pre class=" language-less"><code class="language-less"><span class="token comment" spellcheck="true">/* Less */</span>#main&amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">// something..</span>  &amp;<span class="token number">.</span>show&amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>    <span class="token property">display</span><span class="token punctuation">:</span>block<span class="token punctuation">;</span>  &amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span><span class="token mixin-usage function">.show&amp;#123</span><span class="token punctuation">;</span>  <span class="token property">display</span><span class="token punctuation">:</span>none<span class="token punctuation">;</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span></code></pre><pre class=" language-less"><code class="language-less">const main = document<span class="token number">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"main"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>main<span class="token number">.</span>classList<span class="token number">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"show"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>结果：</p><pre class=" language-less"><code class="language-less">#main<span class="token number">.</span>show&amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>  <span class="token property">display</span><span class="token punctuation">:</span>block<span class="token punctuation">;</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span><span class="token mixin-usage function">.show&amp;#123</span><span class="token punctuation">;</span>  <span class="token property">display</span><span class="token punctuation">:</span>none<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//会被覆盖。</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span></code></pre></li></ol><h4 id="混合方法"><a href="#混合方法" class="headerlink" title="混合方法"></a>混合方法</h4><ol><li><p><strong>无参数方法</strong></p><p>方法犹如 声明的集合，使用时 直接键入名称即可。</p><pre class=" language-less"><code class="language-less"><span class="token comment" spellcheck="true">/* Less */</span><span class="token number">.</span>card &amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 等价于 .card()</span>    <span class="token property">background</span><span class="token punctuation">:</span> <span class="token hexcode">#f6f6f6</span><span class="token punctuation">;</span>    <span class="token property">-webkit-box-shadow</span><span class="token punctuation">:</span> <span class="token number">0</span> <span class="token number">1</span>px <span class="token number">2</span>px <span class="token function">rgba</span><span class="token punctuation">(</span><span class="token number">151</span><span class="token punctuation">,</span> <span class="token number">151</span><span class="token punctuation">,</span> <span class="token number">151</span><span class="token punctuation">,</span> <span class="token number">.58</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token property">box-shadow</span><span class="token punctuation">:</span> <span class="token number">0</span> <span class="token number">1</span>px <span class="token number">2</span>px <span class="token function">rgba</span><span class="token punctuation">(</span><span class="token number">151</span><span class="token punctuation">,</span> <span class="token number">151</span><span class="token punctuation">,</span> <span class="token number">151</span><span class="token punctuation">,</span> <span class="token number">.58</span><span class="token punctuation">)</span><span class="token punctuation">;</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span><span class="token mixin-usage function">#wrap&amp;#123</span><span class="token punctuation">;</span>  <span class="token mixin-usage function">.card</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//等价于.card();</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">/* 生成的 CSS */</span>#wrap&amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>  <span class="token property">background</span><span class="token punctuation">:</span> <span class="token hexcode">#f6f6f6</span><span class="token punctuation">;</span>  <span class="token property">-webkit-box-shadow</span><span class="token punctuation">:</span> <span class="token number">0</span> <span class="token number">1</span>px <span class="token number">2</span>px <span class="token function">rgba</span><span class="token punctuation">(</span><span class="token number">151</span><span class="token punctuation">,</span> <span class="token number">151</span><span class="token punctuation">,</span> <span class="token number">151</span><span class="token punctuation">,</span> <span class="token number">.58</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token property">box-shadow</span><span class="token punctuation">:</span> <span class="token number">0</span> <span class="token number">1</span>px <span class="token number">2</span>px <span class="token function">rgba</span><span class="token punctuation">(</span><span class="token number">151</span><span class="token punctuation">,</span> <span class="token number">151</span><span class="token punctuation">,</span> <span class="token number">151</span><span class="token punctuation">,</span> <span class="token number">.58</span><span class="token punctuation">)</span><span class="token punctuation">;</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span></code></pre><p>其中 <code>.card</code> 与 <code>.card()</code> 是等价的。 个人建议，为了避免代码混淆，应写成 :</p><pre class=" language-less"><code class="language-less"><span class="token number">.</span><span class="token function">card</span><span class="token punctuation">(</span><span class="token punctuation">)</span>&amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">//something...</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span><span class="token mixin-usage function">#wrap&amp;#123</span><span class="token punctuation">;</span>  <span class="token mixin-usage function">.card</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span></code></pre><p>要点：</p><ul><li><code>.</code> 与 <code>#</code> 皆可作为方法前缀。</li><li>方法后写不写 <code>()</code> 看个人习惯。</li></ul></li><li><p><strong>默认参数方法</strong></p><ul><li>Less可以使用默认参数，如果没有传参数，那么将使用默认参数。</li><li><code>@arguments</code> 犹如JS中的 <code>arguments</code> 指代的是全部参数。</li><li>传的参数中必须带着单位。</li></ul><pre class=" language-less"><code class="language-less"><span class="token comment" spellcheck="true">/* Less */</span><span class="token number">.</span><span class="token function">border</span><span class="token punctuation">(</span><span class="token variable">@a<span class="token punctuation">:</span></span><span class="token number">10</span>px<span class="token punctuation">,</span><span class="token variable">@b<span class="token punctuation">:</span></span><span class="token number">50</span>px<span class="token punctuation">,</span><span class="token variable">@c<span class="token punctuation">:</span></span><span class="token number">30</span>px<span class="token punctuation">,</span><span class="token variable">@color<span class="token punctuation">:</span></span><span class="token hexcode">#000</span><span class="token punctuation">)</span>&amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>    <span class="token property">border</span><span class="token punctuation">:</span>solid <span class="token number">1</span>px <span class="token variable">@color</span><span class="token punctuation">;</span>    <span class="token property">box-shadow</span><span class="token punctuation">:</span> <span class="token variable">@arguments</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//指代的是全部参数</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span><span class="token mixin-usage function">#main&amp;#123</span><span class="token punctuation">;</span>    <span class="token mixin-usage function">.border</span><span class="token punctuation">(</span><span class="token number">0</span>px<span class="token punctuation">,</span><span class="token number">5</span>px<span class="token punctuation">,</span><span class="token number">30</span>px<span class="token punctuation">,</span>red<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//必须带着单位</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span><span class="token mixin-usage function">#wrap&amp;#123</span><span class="token punctuation">;</span>    <span class="token mixin-usage function">.border</span><span class="token punctuation">(</span><span class="token number">0</span>px<span class="token punctuation">)</span><span class="token punctuation">;</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span><span class="token mixin-usage function">#content&amp;#123</span><span class="token punctuation">;</span>  <span class="token mixin-usage function">.border</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//等价于 .border()</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">/* 生成的 CSS */</span>#main&amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>    <span class="token property">border</span><span class="token punctuation">:</span>solid <span class="token number">1</span>px red<span class="token punctuation">;</span>    <span class="token property">box-shadow</span><span class="token punctuation">:</span><span class="token number">0</span>px<span class="token punctuation">,</span><span class="token number">5</span>px<span class="token punctuation">,</span><span class="token number">30</span>px<span class="token punctuation">,</span>red<span class="token punctuation">;</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span><span class="token mixin-usage function">#wrap&amp;#123</span><span class="token punctuation">;</span>    <span class="token property">border</span><span class="token punctuation">:</span>solid <span class="token number">1</span>px <span class="token hexcode">#000</span><span class="token punctuation">;</span>    <span class="token property">box-shadow</span><span class="token punctuation">:</span> <span class="token number">0</span>px <span class="token number">50</span>px <span class="token number">30</span>px <span class="token hexcode">#000</span><span class="token punctuation">;</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span><span class="token mixin-usage function">#content&amp;#123</span><span class="token punctuation">;</span>    <span class="token property">border</span><span class="token punctuation">:</span>solid <span class="token number">1</span>px <span class="token hexcode">#000</span><span class="token punctuation">;</span>    <span class="token property">box-shadow</span><span class="token punctuation">:</span> <span class="token number">10</span>px <span class="token number">50</span>px <span class="token number">30</span>px <span class="token hexcode">#000</span><span class="token punctuation">;</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span></code></pre></li><li><p><strong>方法的匹配模式</strong></p><p>与 面向对象中的多态 很相似</p><pre class=" language-less"><code class="language-less"><span class="token comment" spellcheck="true">/* Less */</span><span class="token number">.</span><span class="token function">triangle</span><span class="token punctuation">(</span>top<span class="token punctuation">,</span><span class="token variable">@width<span class="token punctuation">:</span></span><span class="token number">20</span>px<span class="token punctuation">,</span><span class="token variable">@color<span class="token punctuation">:</span></span><span class="token hexcode">#000</span><span class="token punctuation">)</span>&amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>    <span class="token property">border-color</span><span class="token punctuation">:</span>transparent  transparent <span class="token variable">@color</span> transparent <span class="token punctuation">;</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span><span class="token mixin-usage function">.triangle</span><span class="token punctuation">(</span>right<span class="token punctuation">,</span><span class="token variable">@width<span class="token punctuation">:</span></span><span class="token number">20</span>px<span class="token punctuation">,</span><span class="token variable">@color<span class="token punctuation">:</span></span><span class="token hexcode">#000</span><span class="token punctuation">)</span>&amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>    <span class="token property">border-color</span><span class="token punctuation">:</span>transparent <span class="token variable">@color</span> transparent  transparent <span class="token punctuation">;</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span><span class="token mixin-usage function">.triangle</span><span class="token punctuation">(</span>bottom<span class="token punctuation">,</span><span class="token variable">@width<span class="token punctuation">:</span></span><span class="token number">20</span>px<span class="token punctuation">,</span><span class="token variable">@color<span class="token punctuation">:</span></span><span class="token hexcode">#000</span><span class="token punctuation">)</span>&amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>    <span class="token property">border-color</span><span class="token punctuation">:</span><span class="token variable">@color</span> transparent  transparent  transparent <span class="token punctuation">;</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span><span class="token mixin-usage function">.triangle</span><span class="token punctuation">(</span>left<span class="token punctuation">,</span><span class="token variable">@width<span class="token punctuation">:</span></span><span class="token number">20</span>px<span class="token punctuation">,</span><span class="token variable">@color<span class="token punctuation">:</span></span><span class="token hexcode">#000</span><span class="token punctuation">)</span>&amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>    <span class="token property">border-color</span><span class="token punctuation">:</span>transparent  transparent  transparent <span class="token variable">@color</span><span class="token punctuation">;</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span><span class="token mixin-usage function">.triangle</span><span class="token punctuation">(</span><span class="token variable">@_</span><span class="token punctuation">,</span><span class="token variable">@width<span class="token punctuation">:</span></span><span class="token number">20</span>px<span class="token punctuation">,</span><span class="token variable">@color<span class="token punctuation">:</span></span><span class="token hexcode">#000</span><span class="token punctuation">)</span>&amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>    <span class="token property">border-style</span><span class="token punctuation">:</span> solid<span class="token punctuation">;</span>    <span class="token property">border-width</span><span class="token punctuation">:</span> <span class="token variable">@width</span><span class="token punctuation">;</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span><span class="token mixin-usage function">#main&amp;#123</span><span class="token punctuation">;</span>    <span class="token mixin-usage function">.triangle</span><span class="token punctuation">(</span>left<span class="token punctuation">,</span> <span class="token number">50</span>px<span class="token punctuation">,</span> <span class="token hexcode">#999</span><span class="token punctuation">)</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">/* 生成的 CSS */</span>#main&amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>  <span class="token property">border-color</span><span class="token punctuation">:</span>transparent  transparent  transparent <span class="token hexcode">#999</span><span class="token punctuation">;</span>  <span class="token property">border-style</span><span class="token punctuation">:</span> solid<span class="token punctuation">;</span>  <span class="token property">border-width</span><span class="token punctuation">:</span> <span class="token number">50</span>px<span class="token punctuation">;</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span></code></pre><p>要点</p><ul><li>第一个参数 <code>left</code> 要会找到方法中匹配程度最高的，如果匹配程度相同，将全部选择，并存在着样式覆盖替换。</li><li>如果匹配的参数 是变量，则将会匹配，如 <code>@_</code> 。</li></ul></li><li><p><strong>方法的命名空间</strong></p><p>让方法更加规范</p><pre class=" language-less"><code class="language-less"><span class="token comment" spellcheck="true">/* Less */</span>#<span class="token function">card</span><span class="token punctuation">(</span><span class="token punctuation">)</span>&amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>    <span class="token property">background</span><span class="token punctuation">:</span> <span class="token hexcode">#723232</span><span class="token punctuation">;</span>    <span class="token mixin-usage function">.d</span><span class="token punctuation">(</span><span class="token variable">@w<span class="token punctuation">:</span></span><span class="token number">300</span>px<span class="token punctuation">)</span>&amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>        <span class="token property">width</span><span class="token punctuation">:</span> <span class="token variable">@w</span><span class="token punctuation">;</span>                <span class="token mixin-usage function">#a</span><span class="token punctuation">(</span><span class="token variable">@h<span class="token punctuation">:</span></span><span class="token number">300</span>px<span class="token punctuation">)</span>&amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>            <span class="token property">height</span><span class="token punctuation">:</span> <span class="token variable">@h</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//可以使用上一层传进来的方法</span>        &amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span>    &amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span><span class="token mixin-usage function">#wrap&amp;#123</span><span class="token punctuation">;</span>    <span class="token mixin-usage function">#card > .d > #a</span><span class="token punctuation">(</span><span class="token number">100</span>px<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 父元素不能加 括号</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span><span class="token mixin-usage function">#main&amp;#123</span><span class="token punctuation">;</span>    <span class="token mixin-usage function">#card .d</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span><span class="token mixin-usage function">#con&amp;#123</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//不得单独使用命名空间的方法</span>    <span class="token comment" spellcheck="true">//.d() 如果前面没有引入命名空间 #card ，将会报错</span>        #card<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 等价于 #card();</span>    <span class="token number">.</span><span class="token function">d</span><span class="token punctuation">(</span><span class="token number">20</span>px<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//必须先引入 #card</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">/* 生成的 CSS */</span>#wrap&amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>  <span class="token property">height</span><span class="token punctuation">:</span><span class="token number">100</span>px<span class="token punctuation">;</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span><span class="token mixin-usage function">#main&amp;#123</span><span class="token punctuation">;</span>  <span class="token property">width</span><span class="token punctuation">:</span><span class="token number">300</span>px<span class="token punctuation">;</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span><span class="token mixin-usage function">#con&amp;#123</span><span class="token punctuation">;</span>  <span class="token property">width</span><span class="token punctuation">:</span><span class="token number">20</span>px<span class="token punctuation">;</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span></code></pre><p>要点</p><ul><li>在 CSS 中<code>&gt;</code> 选择器，选择的是 儿子元素，就是 必须与父元素 有直接血源的元素。</li><li>在引入命令空间时，如使用 <code>&gt;</code> 选择器，父元素不能加 括号。</li><li>不得单独使用命名空间的方法 必须先引入命名空间，才能使用 其中方法。</li><li>子方法 可以使用上一层传进来的方法</li></ul></li><li><p><strong>方法的条件筛选</strong></p><p>Less 没有 if else，可是它有 <code>when</code></p><pre class=" language-less"><code class="language-less"><span class="token comment" spellcheck="true">/* Less */</span>#card&amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// and 运算符 ，相当于 与运算 &amp;&amp;，必须条件全部符合才会执行</span>    <span class="token number">.</span><span class="token function">border</span><span class="token punctuation">(</span><span class="token variable">@width</span><span class="token punctuation">,</span><span class="token variable">@color</span><span class="token punctuation">,</span><span class="token variable">@style</span><span class="token punctuation">)</span> when <span class="token punctuation">(</span><span class="token variable">@width</span>><span class="token number">100</span>px<span class="token punctuation">)</span> <span class="token function">and</span><span class="token punctuation">(</span><span class="token variable">@color</span>=<span class="token hexcode">#999</span><span class="token punctuation">)</span>&amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>        <span class="token property">border</span><span class="token punctuation">:</span><span class="token variable">@style</span> <span class="token variable">@color</span> <span class="token variable">@width</span><span class="token punctuation">;</span>    &amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// not 运算符，相当于 非运算 !，条件为 不符合才会执行</span>    <span class="token number">.</span><span class="token function">background</span><span class="token punctuation">(</span><span class="token variable">@color</span><span class="token punctuation">)</span> when not <span class="token punctuation">(</span><span class="token variable">@color</span>>=<span class="token hexcode">#222</span><span class="token punctuation">)</span>&amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>        <span class="token property">background</span><span class="token punctuation">:</span><span class="token variable">@color</span><span class="token punctuation">;</span>    &amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// , 逗号分隔符：相当于 或运算 ||，只要有一个符合条件就会执行</span>    <span class="token number">.</span><span class="token function">font</span><span class="token punctuation">(</span><span class="token variable">@size<span class="token punctuation">:</span></span><span class="token number">20</span>px<span class="token punctuation">)</span> when <span class="token punctuation">(</span><span class="token variable">@size</span>><span class="token number">50</span>px<span class="token punctuation">)</span> <span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token variable">@size</span>&lt;<span class="token number">100</span>px<span class="token punctuation">)</span>&amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>        <span class="token property">font-size</span><span class="token punctuation">:</span> <span class="token variable">@size</span><span class="token punctuation">;</span>    &amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span><span class="token mixin-usage function">#main&amp;#123</span><span class="token punctuation">;</span>    <span class="token mixin-usage function">#card>.border</span><span class="token punctuation">(</span><span class="token number">200</span>px<span class="token punctuation">,</span><span class="token hexcode">#999</span><span class="token punctuation">,</span>solid<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token mixin-usage function">#card .background</span><span class="token punctuation">(</span><span class="token hexcode">#111</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token mixin-usage function">#card > .font</span><span class="token punctuation">(</span><span class="token number">40</span>px<span class="token punctuation">)</span><span class="token punctuation">;</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">/* 生成后的 CSS */</span>#main&amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>  <span class="token property">border</span><span class="token punctuation">:</span>solid <span class="token hexcode">#999</span> <span class="token number">200</span>px<span class="token punctuation">;</span>  <span class="token property">background</span><span class="token punctuation">:</span><span class="token hexcode">#111</span><span class="token punctuation">;</span>  <span class="token property">font-size</span><span class="token punctuation">:</span><span class="token number">40</span>px<span class="token punctuation">;</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span></code></pre><p>要点</p><ul><li>比较运算有： &gt; &gt;&#x3D; &#x3D; &#x3D;&lt; &lt;。</li><li>&#x3D; 代表的是等于</li><li>除去关键字 true 以外的值都被视为 false：</li></ul></li><li><p><strong>数量不定的参数</strong></p><p>如果你希望你的方法接受数量不定的参数，你可以使用… ，犹如 ES6 的扩展运算符。</p><pre class=" language-less"><code class="language-less"><span class="token comment" spellcheck="true">/* Less */</span><span class="token number">.</span><span class="token function">boxShadow</span><span class="token punctuation">(</span><span class="token number">...</span><span class="token punctuation">)</span>&amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>    <span class="token property">box-shadow</span><span class="token punctuation">:</span> <span class="token variable">@arguments</span><span class="token punctuation">;</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span><span class="token mixin-usage function">.textShadow</span><span class="token punctuation">(</span><span class="token variable">@a</span><span class="token punctuation">,</span><span class="token number">...</span><span class="token punctuation">)</span>&amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>    <span class="token property">text-shadow</span><span class="token punctuation">:</span> <span class="token variable">@arguments</span><span class="token punctuation">;</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span><span class="token mixin-usage function">#main&amp;#123</span><span class="token punctuation">;</span>    <span class="token mixin-usage function">.boxShadow</span><span class="token punctuation">(</span><span class="token number">1</span>px<span class="token punctuation">,</span><span class="token number">4</span>px<span class="token punctuation">,</span><span class="token number">30</span>px<span class="token punctuation">,</span>red<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token mixin-usage function">.textShadow</span><span class="token punctuation">(</span><span class="token number">1</span>px<span class="token punctuation">,</span><span class="token number">4</span>px<span class="token punctuation">,</span><span class="token number">30</span>px<span class="token punctuation">,</span>red<span class="token punctuation">)</span><span class="token punctuation">;</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">/* 生成后的 CSS */</span>#main&amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>  <span class="token property">box-shadow</span><span class="token punctuation">:</span> <span class="token number">1</span>px <span class="token number">4</span>px <span class="token number">30</span>px red<span class="token punctuation">;</span>  <span class="token property">text-shadow</span><span class="token punctuation">:</span> <span class="token number">1</span>px <span class="token number">4</span>px <span class="token number">30</span>px red<span class="token punctuation">;</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span></code></pre></li><li><p><strong>方法使用important！</strong></p><p>使用方法 非常简单，在方法名后 加上关键字即可。</p><pre class=" language-less"><code class="language-less"><span class="token comment" spellcheck="true">/* Less */</span><span class="token number">.</span>border&amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>    <span class="token property">border</span><span class="token punctuation">:</span> solid <span class="token number">1</span>px red<span class="token punctuation">;</span>    <span class="token property">margin</span><span class="token punctuation">:</span> <span class="token number">50</span>px<span class="token punctuation">;</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span><span class="token mixin-usage function">#main&amp;#123</span><span class="token punctuation">;</span>    <span class="token mixin-usage function">.border</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token important">!important</span><span class="token punctuation">;</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">/* 生成后的 CSS */</span>#main &amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>    <span class="token property">border</span><span class="token punctuation">:</span> solid <span class="token number">1</span>px red <span class="token important">!important</span><span class="token punctuation">;</span>    <span class="token property">margin</span><span class="token punctuation">:</span> <span class="token number">50</span>px <span class="token important">!important</span><span class="token punctuation">;</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span></code></pre></li><li><p><strong>循环方法</strong></p><p>Less 并没有提供 for 循环功能，但这也难不倒 聪明的程序员，使用递归去实现。 下面是官网中的一个 Demo，模拟了生成栅格系统。</p><pre class=" language-less"><code class="language-less"><span class="token comment" spellcheck="true">/* Less */</span><span class="token number">.</span><span class="token function">generate-columns</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token mixin-usage function">.generate-columns</span><span class="token punctuation">(</span><span class="token variable">@n</span><span class="token punctuation">,</span> <span class="token variable">@i<span class="token punctuation">:</span></span> <span class="token number">1</span><span class="token punctuation">)</span> when <span class="token punctuation">(</span><span class="token variable">@i</span> =&lt; <span class="token variable">@n</span><span class="token punctuation">)</span> &amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>  <span class="token mixin-usage function">.column-@&amp;#123</span><span class="token punctuation">;</span>i&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span> &amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>    <span class="token property">width</span><span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token variable">@i</span> <span class="token operator">*</span> <span class="token number">100%</span> <span class="token operator">/</span> <span class="token variable">@n</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  &amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span>  <span class="token mixin-usage function">.generate-columns</span><span class="token punctuation">(</span><span class="token variable">@n</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token variable">@i</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">/* 生成后的 CSS */</span><span class="token number">.</span>column<span class="token operator">-</span><span class="token number">1</span> &amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>  <span class="token property">width</span><span class="token punctuation">:</span> <span class="token number">25%</span><span class="token punctuation">;</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span><span class="token mixin-usage function">.column-2 &amp;#123</span><span class="token punctuation">;</span>  <span class="token property">width</span><span class="token punctuation">:</span> <span class="token number">50%</span><span class="token punctuation">;</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span><span class="token mixin-usage function">.column-3 &amp;#123</span><span class="token punctuation">;</span>  <span class="token property">width</span><span class="token punctuation">:</span> <span class="token number">75%</span><span class="token punctuation">;</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span><span class="token mixin-usage function">.column-4 &amp;#123</span><span class="token punctuation">;</span>  <span class="token property">width</span><span class="token punctuation">:</span> <span class="token number">100%</span><span class="token punctuation">;</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span></code></pre></li><li><p><strong>属性拼接方法</strong></p><p><code>+_</code> 代表的是 空格；<code>+</code> 代表的是 逗号。</p><ul><li>逗号</li></ul><pre class=" language-less"><code class="language-less"><span class="token comment" spellcheck="true">/* Less */</span><span class="token number">.</span><span class="token function">boxShadow</span><span class="token punctuation">(</span><span class="token punctuation">)</span> &amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>    <span class="token property">box-shadow+</span><span class="token punctuation">:</span> inset <span class="token number">0</span> <span class="token number">0</span> <span class="token number">10</span>px <span class="token hexcode">#555</span><span class="token punctuation">;</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span><span class="token mixin-usage function">.main &amp;#123</span><span class="token punctuation">;</span>  <span class="token mixin-usage function">.boxShadow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token property">box-shadow+</span><span class="token punctuation">:</span> <span class="token number">0</span> <span class="token number">0</span> <span class="token number">20</span>px black<span class="token punctuation">;</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">/* 生成后的 CSS */</span><span class="token number">.</span>main &amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>  <span class="token property">box-shadow</span><span class="token punctuation">:</span> inset <span class="token number">0</span> <span class="token number">0</span> <span class="token number">10</span>px <span class="token hexcode">#555</span><span class="token punctuation">,</span> <span class="token number">0</span> <span class="token number">0</span> <span class="token number">20</span>px black<span class="token punctuation">;</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span></code></pre><ul><li>空格</li></ul><pre class=" language-less"><code class="language-less"><span class="token comment" spellcheck="true">/* Less */</span><span class="token number">.</span><span class="token function">Animation</span><span class="token punctuation">(</span><span class="token punctuation">)</span> &amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>  <span class="token property">transform+_</span><span class="token punctuation">:</span> <span class="token function">scale</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span><span class="token mixin-usage function">.main &amp;#123</span><span class="token punctuation">;</span>  <span class="token mixin-usage function">.Animation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token property">transform+_</span><span class="token punctuation">:</span> <span class="token function">rotate</span><span class="token punctuation">(</span><span class="token number">15</span>deg<span class="token punctuation">)</span><span class="token punctuation">;</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">/* 生成的 CSS */</span><span class="token number">.</span>main &amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>  <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">scale</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token function">rotate</span><span class="token punctuation">(</span><span class="token number">15</span>deg<span class="token punctuation">)</span><span class="token punctuation">;</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span></code></pre></li><li><p><strong>实战技巧</strong></p><p>下面是官网中的一个非常赞的 Demo</p><pre class=" language-less"><code class="language-less"><span class="token comment" spellcheck="true">/* Less */</span><span class="token number">.</span><span class="token function">average</span><span class="token punctuation">(</span><span class="token variable">@x</span><span class="token punctuation">,</span> <span class="token variable">@y</span><span class="token punctuation">)</span> &amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>  <span class="token variable">@average<span class="token punctuation">:</span></span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token variable">@x</span> <span class="token operator">+</span> <span class="token variable">@y</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span>div &amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>  <span class="token mixin-usage function">.average</span><span class="token punctuation">(</span><span class="token number">16</span>px<span class="token punctuation">,</span> <span class="token number">50</span>px<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 调用 方法</span>  <span class="token property">padding</span><span class="token punctuation">:</span> <span class="token variable">@average</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// 使用返回值</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">/* 生成的 CSS */</span>div &amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>  <span class="token property">padding</span><span class="token punctuation">:</span> <span class="token number">33</span>px<span class="token punctuation">;</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span></code></pre></li></ol><p>可以说 Less 是一门优雅编程语言。</p><h4 id="继承"><a href="#继承" class="headerlink" title="继承"></a>继承</h4><p>extend 是 Less 的一个伪类。它可继承 所匹配声明中的全部样式。</p><ol><li><p><strong>extend 关键字的使用</strong></p><pre class=" language-less"><code class="language-less"><span class="token comment" spellcheck="true">/* Less */</span><span class="token number">.</span>animation&amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>    <span class="token property">transition</span><span class="token punctuation">:</span> all <span class="token number">.3</span>s ease<span class="token operator">-</span>out<span class="token punctuation">;</span>    <span class="token mixin-usage function">.hide&amp;#123</span><span class="token punctuation">;</span>      <span class="token property">transform</span><span class="token punctuation">:</span><span class="token function">scale</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    &amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span><span class="token mixin-usage function">#main&amp;#123</span><span class="token punctuation">;</span>    &amp;<span class="token punctuation">:</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token number">.</span>animation<span class="token punctuation">)</span><span class="token punctuation">;</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span><span class="token mixin-usage function">#con&amp;#123</span><span class="token punctuation">;</span>    &amp;<span class="token punctuation">:</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token number">.</span>animation <span class="token number">.</span>hide<span class="token punctuation">)</span><span class="token punctuation">;</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">/* 生成后的 CSS */</span><span class="token number">.</span>animation<span class="token punctuation">,</span>#main&amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>  <span class="token property">transition</span><span class="token punctuation">:</span> all <span class="token number">.3</span>s ease<span class="token operator">-</span>out<span class="token punctuation">;</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span><span class="token mixin-usage function">.animation .hide , #con&amp;#123</span><span class="token punctuation">;</span>    <span class="token property">transform</span><span class="token punctuation">:</span><span class="token function">scale</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span></code></pre></li><li><p><strong>all 全局搜索替换</strong></p><p>使用选择器匹配到的 全部声明。</p><pre class=" language-less"><code class="language-less"><span class="token comment" spellcheck="true">/* Less */</span>#main&amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>  <span class="token property">width</span><span class="token punctuation">:</span> <span class="token number">200</span>px<span class="token punctuation">;</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span><span class="token mixin-usage function">#main &amp;#123</span><span class="token punctuation">;</span>  &amp;<span class="token punctuation">:</span>after &amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>    <span class="token property">content</span><span class="token punctuation">:</span><span class="token string">"Less is good!"</span><span class="token punctuation">;</span>  &amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span><span class="token mixin-usage function">#wrap:extend</span><span class="token punctuation">(</span>#main all<span class="token punctuation">)</span> &amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">/* 生成的 CSS */</span>#main<span class="token punctuation">,</span>#wrap&amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>  <span class="token property">width</span><span class="token punctuation">:</span> <span class="token number">200</span>px<span class="token punctuation">;</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span><span class="token mixin-usage function">#main:after, #wrap:after &amp;#123</span><span class="token punctuation">;</span>    <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">"Less is good!"</span><span class="token punctuation">;</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span></code></pre></li><li><p><strong>减少代码的重复性</strong></p><p>从表面 看来，extend 与 方法 最大的差别，就是 extend 是同个选择器共用同一个声明，而 方法 是使用自己的声明，这无疑 增加了代码的重复性。</p><p>方法示例 与上面的 extend 进行对比：</p><pre class=" language-less"><code class="language-less"><span class="token comment" spellcheck="true">/* Less */</span><span class="token number">.</span>Method&amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>  <span class="token property">width</span><span class="token punctuation">:</span> <span class="token number">200</span>px<span class="token punctuation">;</span>  &amp;<span class="token punctuation">:</span>after &amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>      <span class="token property">content</span><span class="token punctuation">:</span><span class="token string">"Less is good!"</span><span class="token punctuation">;</span>  &amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span><span class="token mixin-usage function">#main&amp;#123</span><span class="token punctuation">;</span>  <span class="token mixin-usage function">.Method</span><span class="token punctuation">;</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span><span class="token mixin-usage function">#wrap&amp;#123</span><span class="token punctuation">;</span>  <span class="token mixin-usage function">.Method</span><span class="token punctuation">;</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">/* 生成的 CSS */</span>#main&amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>  <span class="token property">width</span><span class="token punctuation">:</span> <span class="token number">200</span>px<span class="token punctuation">;</span>  &amp;<span class="token punctuation">:</span>after&amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>    <span class="token property">content</span><span class="token punctuation">:</span><span class="token string">"Less is good!"</span><span class="token punctuation">;</span>  &amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span>  &amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span><span class="token mixin-usage function">#wrap&amp;#123</span><span class="token punctuation">;</span>  <span class="token property">width</span><span class="token punctuation">:</span> <span class="token number">200</span>px<span class="token punctuation">;</span>  &amp;<span class="token punctuation">:</span>after&amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>    <span class="token property">content</span><span class="token punctuation">:</span><span class="token string">"Less is good!"</span><span class="token punctuation">;</span>  &amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span>  &amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span></code></pre></li><li><p><strong>要点</strong></p><p><em>翻译官网</em></p><ul><li>选择器和扩展之间 是允许有空格的：pre:hover :extend(div pre).</li><li>可以有多个扩展: pre:hover:extend(div pre):extend(.bucket tr) - 注意这与 pre:hover:extend(div pre, .bucket tr)一样。</li><li>这是不可以的，扩展必须在最后 : pre:hover:extend(div pre).nth-child(odd)。</li><li>如果一个规则集包含多个选择器，所有选择器都可以使用extend关键字。</li></ul><h3 id="导入"><a href="#导入" class="headerlink" title="导入"></a>导入</h3><ol><li>导入 less 文件 可省略后缀</li></ol><pre class=" language-less"><code class="language-less">import <span class="token string">"main"</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//等价于</span>import <span class="token string">"main.less"</span><span class="token punctuation">;</span></code></pre><ol><li><code>@import</code> 的位置可随意放置</li></ol><pre class=" language-less"><code class="language-less">#main&amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>  <span class="token property">font-size</span><span class="token punctuation">:</span><span class="token number">15</span>px<span class="token punctuation">;</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span><span class="token variable">@import</span> <span class="token string">"style"</span><span class="token punctuation">;</span></code></pre></li><li><p><strong>reference</strong></p><p>Less 中 最强大的特性 使用 引入的 Less 文件，但不会 编译它。</p><pre class=" language-less"><code class="language-less"><span class="token comment" spellcheck="true">/* Less */</span><span class="token variable">@import</span> <span class="token punctuation">(</span>reference<span class="token punctuation">)</span> <span class="token string">"bootstrap.less"</span><span class="token punctuation">;</span> <span class="token mixin-usage function">#wrap:extend</span><span class="token punctuation">(</span><span class="token number">.</span>navbar all<span class="token punctuation">)</span>&amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span></code></pre><p>翻译官网：</p><blockquote><p>使用@import (reference)导入外部文件，但不会添加 把导入的文件 编译到最终输出中，只引用。</p></blockquote></li><li><p><strong>once</strong></p><blockquote><p>@import语句的默认行为。这表明相同的文件只会被导入一次，而随后的导入文件的重复代码都不会解析。</p></blockquote><pre class=" language-less"><code class="language-less"><span class="token variable">@import</span> <span class="token punctuation">(</span>once<span class="token punctuation">)</span> <span class="token string">"foo.less"</span><span class="token punctuation">;</span><span class="token variable">@import</span> <span class="token punctuation">(</span>once<span class="token punctuation">)</span> <span class="token string">"foo.less"</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// this statement will be ignored</span></code></pre></li><li><p><strong>multiple</strong></p><blockquote><p>使用@import (multiple)允许导入多个同名文件。</p></blockquote><pre class=" language-less"><code class="language-less"><span class="token comment" spellcheck="true">/* Less */</span><span class="token comment" spellcheck="true">// file: foo.less</span><span class="token number">.</span>a &amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>  <span class="token property">color</span><span class="token punctuation">:</span> green<span class="token punctuation">;</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// file: main.less</span><span class="token variable">@import</span> <span class="token punctuation">(</span>multiple<span class="token punctuation">)</span> <span class="token string">"foo.less"</span><span class="token punctuation">;</span><span class="token variable">@import</span> <span class="token punctuation">(</span>multiple<span class="token punctuation">)</span> <span class="token string">"foo.less"</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">/* 生成后的 CSS */</span><span class="token number">.</span>a &amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>  <span class="token property">color</span><span class="token punctuation">:</span> green<span class="token punctuation">;</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span><span class="token mixin-usage function">.a &amp;#123</span><span class="token punctuation">;</span>  <span class="token property">color</span><span class="token punctuation">:</span> green<span class="token punctuation">;</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span></code></pre></li></ol><h4 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h4><ol><li><p><strong>判断类型</strong></p><ul><li>isnumber</li></ul><blockquote><p>判断给定的值 是否 是一个数字。</p></blockquote><pre class=" language-less"><code class="language-less"><span class="token function">isnumber</span><span class="token punctuation">(</span><span class="token hexcode">#ff0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment" spellcheck="true">// false</span><span class="token function">isnumber</span><span class="token punctuation">(</span>blue<span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment" spellcheck="true">// false</span><span class="token function">isnumber</span><span class="token punctuation">(</span><span class="token string">"string"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// false</span><span class="token function">isnumber</span><span class="token punctuation">(</span><span class="token number">1234</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment" spellcheck="true">// true</span><span class="token function">isnumber</span><span class="token punctuation">(</span><span class="token number">56</span>px<span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment" spellcheck="true">// true</span><span class="token function">isnumber</span><span class="token punctuation">(</span><span class="token number">7.8%</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment" spellcheck="true">// true</span><span class="token function">isnumber</span><span class="token punctuation">(</span>keyword<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">// false</span><span class="token function">isnumber</span><span class="token punctuation">(</span><span class="token url">url(...)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// false</span></code></pre><ul><li>iscolor</li></ul><blockquote><p>判断给定的值 是否 是一个颜色。</p></blockquote><ul><li>isurl</li></ul><blockquote><p>判断给定的值 是否 是一个 url 。</p></blockquote></li><li><p><strong>颜色操作</strong></p><ul><li>saturate</li></ul><blockquote><p>增加一定数值的颜色饱和度。</p></blockquote><ul><li>lighten</li></ul><blockquote><p>增加一定数值的颜色亮度。</p></blockquote><ul><li>darken</li></ul><blockquote><p>降低一定数值的颜色亮度。</p></blockquote><ul><li>fade</li></ul><blockquote><p>给颜色设定一定数值的透明度。</p></blockquote><ul><li>mix</li></ul><blockquote><p>根据比例混合两种颜色。</p></blockquote></li><li><p><strong>数学函数</strong></p><ul><li>ceil</li></ul><blockquote><p>向上取整。</p></blockquote><ul><li>floor</li></ul><blockquote><p>向下取整。</p></blockquote><ul><li>percentage</li></ul><blockquote><p>将浮点数转换为百分比字符串。</p></blockquote><ul><li>round</li></ul><blockquote><p>四舍五入。</p></blockquote><ul><li>sqrt</li></ul><blockquote><p>计算一个数的平方根。</p></blockquote><ul><li>abs</li></ul><blockquote><p>计算数字的绝对值，原样保持单位。</p></blockquote><ul><li>pow</li></ul><blockquote><p>计算一个数的乘方。</p></blockquote></li></ol><h4 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h4><ol><li><p><strong>注释</strong></p><ul><li>&#x2F;* *&#x2F; CSS原生注释，会被编译在 CSS 文件中。</li><li>&#x2F;  &#x2F; Less提供的一种注释，不会被编译在 CSS 文件中。</li></ul></li><li><p><strong>避免编译</strong></p><pre class=" language-less"><code class="language-less"><span class="token comment" spellcheck="true">/* Less */</span>#main&amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>  <span class="token property">width</span><span class="token punctuation">:</span>~<span class="token string">'calc(300px-30px)'</span><span class="token punctuation">;</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">/* 生成后的 CSS */</span>#main&amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>  <span class="token property">width</span><span class="token punctuation">:</span><span class="token function">calc</span><span class="token punctuation">(</span><span class="token number">300</span>px<span class="token operator">-</span><span class="token number">30</span>px<span class="token punctuation">)</span><span class="token punctuation">;</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span></code></pre><p>结构： <code>~&#39; 值 &#39;</code></p></li><li><p><strong>变量拼串</strong></p><p>在平时工作中，这种需求 太常见了。 在下面例子中， 实现了不同的 transtion-delay、animation、@keyframes</p><pre class=" language-less"><code class="language-less"><span class="token number">.</span><span class="token function">judge</span><span class="token punctuation">(</span><span class="token variable">@i</span><span class="token punctuation">)</span> <span class="token function">when</span><span class="token punctuation">(</span><span class="token variable">@i</span>=<span class="token number">1</span><span class="token punctuation">)</span>&amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>  <span class="token variable">@size<span class="token punctuation">:</span></span><span class="token number">15</span>px<span class="token punctuation">;</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span><span class="token mixin-usage function">.judge</span><span class="token punctuation">(</span><span class="token variable">@i</span><span class="token punctuation">)</span> <span class="token function">when</span><span class="token punctuation">(</span><span class="token variable">@i</span>><span class="token number">1</span><span class="token punctuation">)</span>&amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>  <span class="token variable">@size<span class="token punctuation">:</span></span><span class="token number">16</span>px<span class="token punctuation">;</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span><span class="token mixin-usage function">.loopAnimation</span><span class="token punctuation">(</span><span class="token variable">@i</span><span class="token punctuation">)</span> when <span class="token punctuation">(</span><span class="token variable">@i</span>&lt;<span class="token number">16</span><span class="token punctuation">)</span> &amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>    <span class="token mixin-usage function">.circle:nth-child</span><span class="token punctuation">(</span>@&amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>i&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span><span class="token punctuation">)</span>&amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>      <span class="token mixin-usage function">.judeg</span><span class="token punctuation">(</span><span class="token variable">@i</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token property">border-radius</span><span class="token punctuation">:</span><span class="token variable">@size</span> <span class="token variable">@size</span> <span class="token number">0</span> <span class="token number">0</span><span class="token punctuation">;</span>      <span class="token property">animation</span><span class="token punctuation">:</span> ~<span class="token string">"circle-@&amp;#123;i&amp;#125;"</span> <span class="token variable">@duration</span> infinite <span class="token variable">@ease</span><span class="token punctuation">;</span>      <span class="token property">transition-delay</span><span class="token punctuation">:</span>~<span class="token string">"@&amp;#123;i&amp;#125;ms"</span><span class="token punctuation">;</span>  &amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span>  <span class="token variable">@keyframes</span> ~<span class="token string">"circle-@&amp;#123;i&amp;#125;"</span> &amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>      <span class="token comment" spellcheck="true">// do something...</span>  &amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span>  <span class="token mixin-usage function">.loopAnimation</span><span class="token punctuation">(</span><span class="token variable">@i</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span></code></pre><p>结构： <code>~&quot;字符@&#123;变量&#125;字符&quot;</code>;</p></li><li><p><strong>使用 JS</strong></p><p>因为 Less 是由 JS 编写，所以 Less 有一得天独厚的特性：代码中使用 Javascript 。</p><pre class=" language-less"><code class="language-less"><span class="token comment" spellcheck="true">/* Less */</span><span class="token variable">@content<span class="token punctuation">:</span></span>`<span class="token string">"aaa"</span><span class="token number">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span>`<span class="token punctuation">;</span><span class="token mixin-usage function">#randomColor&amp;#123</span><span class="token punctuation">;</span>  <span class="token variable">@randomColor<span class="token punctuation">:</span></span> ~<span class="token string">"rgb(`Math.round(Math.random() * 256)`,`Math.round(Math.random() * 256)`,`Math.round(Math.random() * 256)`)"</span><span class="token punctuation">;</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span><span class="token mixin-usage function">#wrap&amp;#123</span><span class="token punctuation">;</span>  <span class="token property">width</span><span class="token punctuation">:</span> ~<span class="token string">"`Math.round(Math.random() * 100)`px"</span><span class="token punctuation">;</span>  &amp;<span class="token punctuation">:</span>after&amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>      <span class="token property">content</span><span class="token punctuation">:</span><span class="token variable">@content</span><span class="token punctuation">;</span>  &amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span>  <span class="token property">height</span><span class="token punctuation">:</span> ~<span class="token string">"`window.innerHeight`px"</span><span class="token punctuation">;</span>  <span class="token property">alert</span><span class="token punctuation">:</span>~<span class="token string">"`alert(1)`"</span><span class="token punctuation">;</span>  <span class="token mixin-usage function">#randomColor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token property">background-color</span><span class="token punctuation">:</span> <span class="token variable">@randomColor</span><span class="token punctuation">;</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">/* 生成后的 CSS */</span><span class="token comment" spellcheck="true">// 弹出 1</span>#wrap&amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>  <span class="token property">width</span><span class="token punctuation">:</span> 随机值（<span class="token number">0</span>~<span class="token number">100</span>）px<span class="token punctuation">;</span>  <span class="token property">height</span><span class="token punctuation">:</span> <span class="token number">743</span>px<span class="token punctuation">;</span><span class="token comment" spellcheck="true">//由电脑而异</span>  <span class="token property">background</span><span class="token punctuation">:</span> 随机颜色<span class="token punctuation">;</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span><span class="token mixin-usage function">#wrap::after&amp;#123</span><span class="token punctuation">;</span>  <span class="token property">content</span><span class="token punctuation">:</span><span class="token string">"AAA"</span><span class="token punctuation">;</span>&amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span></code></pre></li></ol>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Webpack知识点</title>
      <link href="/2022/07/29/webpack-zhi-shi-dian/"/>
      <url>/2022/07/29/webpack-zhi-shi-dian/</url>
      
        <content type="html"><![CDATA[<h3 id="CommonJS和ES6-Module"><a href="#CommonJS和ES6-Module" class="headerlink" title="CommonJS和ES6 Module"></a>CommonJS和ES6 Module</h3><ol><li><p><strong>动态和静态</strong><br>CommonJS 与 ES6 Module最本质的区别在于前者对<strong>模块依赖的解决</strong>是“动态的”，而后者是“静 态的”。在这里“动态”的含义是，模块依赖关系的建立发生在代码运行阶段;而“静态”则是模块依赖关系的建立发生在代码编译阶段。</p><pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">//CommonJS</span><span class="token operator">...</span>some script<span class="token keyword">var</span> name <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./person.js'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>name<span class="token comment" spellcheck="true">//ES6 Module</span><span class="token keyword">import</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>name<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span> <span class="token keyword">from</span> <span class="token string">'./person.js'</span> </code></pre><p>我们可以看出，CommonJS可以在代码的任何位置引入模块，而ES6 Module只能在文件的开头导入模块。因此CommonJS的实际导入行为是发生在代码执行时的，因此是动态的，而ES6 Module则会在代码执行前就导入模块（代码编译阶段），因此是静态的。因此ES6 Module相比CommonJS有如下优点：</p><ul><li>死代码检测和排除。我们可以用静态分析工具检测出哪些模块没有被调用过。<br>比如，在引入工具类库时，工程中往往只用到了其中一部分组件或接口，但有可能会将其代码完整地加载进来。未被调用到的模块代码永远不会被执行，也就成为了死代码。通过静态分析可以在打包时去掉这些未曾使用过的模块，以减小打包资源体积。</li><li>模块变量类型检查。JavaScript属于动态类型语言，不会在代码执行前检查类型错误（比如对一个字符串类型的值进行函数调用)。ES6 Module的静态模块结构有助于确保模块之间传递的值或接口类型是正确的。</li><li>编译器优化。在 CommonJS等动态模块系统中，无论采用哪种方式，本质上导入的都是一个对象，而ES6 Module支持直接导入变量，减少了引用层级，程序效率更高。</li></ul></li><li><p><strong>拷贝与动态映射</strong></p><p>在导入一个模块时，对于CommonJS来说获取的是一份<strong>导出值的拷贝（浅拷贝）</strong>；而在ES6Module中则是<strong>值的动态映射</strong>，并且这个映射是<strong>只读</strong>的。</p><p>CommonJS中的值拷贝:</p><pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">// calculator.js .</span><span class="token keyword">var</span> count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    count<span class="token punctuation">:</span> count<span class="token punctuation">,</span>    add<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span>a， b<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        count <span class="token operator">+</span><span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> a <span class="token operator">+</span> b<span class="token punctuation">;</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// index.js</span><span class="token keyword">var</span> count <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./calculator.js'</span><span class="token punctuation">)</span> <span class="token punctuation">.</span>count <span class="token punctuation">;</span> <span class="token keyword">var</span> add <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./calculator.js'</span><span class="token punctuation">)</span> <span class="token punctuation">.</span>add<span class="token punctuation">;</span>console<span class="token punctuation">.</span> <span class="token function">log</span><span class="token punctuation">(</span>count<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//0</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">2</span>，<span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">;</span>console<span class="token punctuation">.</span> log <span class="token punctuation">(</span>count<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 0 (calculator.js中变量值的改变不会对拷贝值造成影响)</span>count <span class="token operator">+</span><span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>console<span class="token punctuation">.</span> log <span class="token punctuation">(</span>count<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 1 (拷贝的值可以更改)</span></code></pre><p>ES6 Module的值动态映射：</p><pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">// calculator.js .</span><span class="token keyword">let</span> count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token keyword">let</span> add <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    count<span class="token operator">++</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> a <span class="token operator">+</span> b<span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">export</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span> count<span class="token punctuation">,</span> add <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// index.js</span><span class="token keyword">import</span> <span class="token punctuation">(</span> count， add <span class="token punctuation">)</span> <span class="token keyword">from</span> <span class="token string">'./calculator.js'</span><span class="token punctuation">;</span>console<span class="token punctuation">.</span> <span class="token function">log</span><span class="token punctuation">(</span>count<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 0 (对calculator.js 中count 值的映射)</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">2</span>，<span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">;</span>console<span class="token punctuation">.</span> <span class="token function">log</span><span class="token punctuation">(</span>count<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// 1 (实时反映calculator.js中count值的变化)</span>count <span class="token operator">+</span><span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//不可更改，会抛出SyntaxBrror: "count" is read-only</span></code></pre><p>上面的例子展示了ES6 Module中导入的变量其实是对原有值的动态映射。index.js<br>中的count是对calculator.js中的count值的实时反映，当我们通过调用add函数更改了<br>calculator.js中count值时，index.js 中count的值也随之变化。<br>我们不可以对ES6 Module导入的变量进行更改，可以将这种映射关系理解为一面<br>镜子，从镜子里我们可以实时观察到原有的事物，但是并不可以操纵镜子中的影像。</p></li><li><p><strong>循环依赖</strong></p><p>循环依赖是指模块A依赖于模块B，同时模块B依赖于模块A。一般来说工程中应该尽量避免循环依赖的产生，因为从软件设计的角度来说，单向的依赖关系更加清晰，而循环依赖则会带来一定的复杂度。</p><p>CommonJS中循环依赖的例子:</p><pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">// foo.js</span><span class="token keyword">const</span> bar <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./bar.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'value of bar:'</span><span class="token punctuation">,</span> bar<span class="token punctuation">)</span><span class="token punctuation">;</span>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token string">'This is foo.js'</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// bar.js</span><span class="token keyword">const</span> foo <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./foo.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'value of foo:'</span>， foo<span class="token punctuation">)</span><span class="token punctuation">;</span>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token string">'This is bar.js'</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// index.js</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./foo.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>理想状态下我们希望在控制台上输出。</p><pre class=" language-javascript"><code class="language-javascript">value <span class="token keyword">of</span> foo<span class="token punctuation">:</span> This is foo<span class="token punctuation">.</span>jsvalue <span class="token keyword">of</span> bar<span class="token punctuation">:</span> This is bar<span class="token punctuation">.</span>js</code></pre><p>而当我们运行上面的代码时，实际输出却是:</p><pre class=" language-javascript"><code class="language-javascript">value <span class="token keyword">of</span> foo<span class="token punctuation">:</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>value <span class="token keyword">of</span> bar<span class="token punctuation">:</span> This is bar<span class="token punctuation">.</span>is</code></pre><p>为什么foo的值会是一个空对象呢?让我们从头梳理一下代码的实际执行顺序。</p><ol><li>index.js导入了foo.js， 此时开始执行foo.js中的代码。</li><li>foo.js 的第一句导入了bar.js， 这时foo.js不会继续向下执行，而是进入了bar.js内部。</li><li>在bar.js中又对foo.js进行了require，这里产生了循环依赖。需要注意的是，执行权并不会再交回foo.js，而是<strong>直接取其导出值</strong>，也就是module.exports。 但由于foo.js未执行完毕，导出值在这时为默认的空对象，因此当bar.js执行到打印语句时，我们看到控制台中的value of foo就是一个空对象。</li></ol><p>我们再从Webpack的实现角度来看，将上面例子打包后，bundle.js 中有这样一段代码非常重要:</p><pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">// The require function </span><span class="token keyword">function</span> <span class="token function">__webpack_require__</span><span class="token punctuation">(</span>moduleId<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>installedModules<span class="token punctuation">[</span>moduleId<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> installedModules<span class="token punctuation">[</span>moduleId<span class="token punctuation">]</span><span class="token punctuation">.</span>exports<span class="token punctuation">;</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//创建模块，我们可以看见，模块的安装是先于模块的执行的</span>    <span class="token keyword">var</span> module <span class="token operator">=</span> installedModules<span class="token punctuation">[</span>moduleId<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        i<span class="token punctuation">:</span> moduleId<span class="token punctuation">,</span>        l<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>        exports<span class="token punctuation">:</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span></code></pre><p>当index.js引用了foo.js之后，相当于执行了这个__webpack_require__ 函数, 初始化了一个module对象并放入installedModules中。当bar.js再次引用foo.js时，又执行了该函数，但这次是直接从installedModules里面取值，此时它的module.exports是一个空对象。这就解释了上面在第3步看到的现象。</p><p>接下来让我们使用ES6 Module的方式重写上面的例子：</p><pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">//foo.js</span><span class="token keyword">import</span> bar <span class="token keyword">from</span> <span class="token string">' ./bar.js'</span><span class="token punctuation">;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'value of bar:'</span><span class="token punctuation">,</span> bar<span class="token punctuation">)</span> <span class="token punctuation">;</span><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token string">'This is foo.js'</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// bar.js</span><span class="token keyword">import</span> foo <span class="token keyword">from</span> <span class="token string">' ./foo.js'</span> <span class="token punctuation">;</span>console<span class="token punctuation">.</span>log<span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token string">'value of foo:'</span><span class="token punctuation">,</span> foo<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token string">'This is bar.js'</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// index.js</span><span class="token keyword">import</span> foo <span class="token keyword">from</span> <span class="token string">' ./foo.js'</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">//执行结果如下:</span>value <span class="token keyword">of</span> foo<span class="token punctuation">:</span> undefinedvalue <span class="token keyword">of</span> bar<span class="token punctuation">:</span> This is bar<span class="token punctuation">.</span>js</code></pre><p>很遗憾，在bar.js中同样无法得到foo.js正确的导出值，只不过和CommonJS默认导出一个个空对象不同，这里获取到的是undefined。<br>上面我们谈到，在导入一个模块时，CommonJS获取到的是值的拷贝，ES6 Module则是动态映射，那么我们能否利用ES6Module的特性使其支持循环依赖呢?请看下面这个例子:</p><pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">//index.js</span><span class="token keyword">import</span> foo <span class="token keyword">from</span> <span class="token string">' ./foo.js'</span><span class="token punctuation">;</span><span class="token function">foo</span><span class="token punctuation">(</span><span class="token string">'index.js'</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token comment" spellcheck="true">// foo.js</span><span class="token keyword">import</span> bar <span class="token keyword">from</span> <span class="token string">'./bar.js'</span><span class="token punctuation">;</span><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span>invoker<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    console<span class="token punctuation">.</span>log <span class="token punctuation">(</span>invoker <span class="token operator">+</span> <span class="token string">' invokes foo.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">bar</span><span class="token punctuation">(</span><span class="token string">'foo.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">export</span> <span class="token keyword">default</span> foo<span class="token punctuation">;</span><span class="token comment" spellcheck="true">// bar.js</span><span class="token keyword">import</span> foo <span class="token keyword">from</span> <span class="token string">'./foo.js'</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//在这里时，foo还是没有值的</span><span class="token keyword">let</span> invoked <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span><span class="token keyword">function</span> <span class="token function">bar</span><span class="token punctuation">(</span>invoker<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>invoked<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        invoked <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>        console<span class="token punctuation">.</span>log <span class="token punctuation">(</span>invoker <span class="token operator">+</span> <span class="token string">' invokes bar.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">foo</span><span class="token punctuation">(</span><span class="token string">'bar.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//执行到这里时，由于现在的执行权在index.js上，所以foo函数已成功导出，所以可以调用</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">export</span> <span class="token keyword">default</span> bar<span class="token punctuation">;</span><span class="token comment" spellcheck="true">//上面代码的执行结果如下:</span>index<span class="token punctuation">.</span>js invokes foo<span class="token punctuation">.</span>jsfoo<span class="token punctuation">.</span>js invokes bar<span class="token punctuation">.</span>jsbar<span class="token punctuation">.</span>js invokes foo<span class="token punctuation">.</span>js</code></pre><p>由上面的例子可以看出，ES6 Module的特性使其可以更好地支持循环依赖，只是需要由开发者来保证当导入的值被使用时已经设置好正确的导出值。</p></li></ol><h3 id="模块打包原理"><a href="#模块打包原理" class="headerlink" title="模块打包原理"></a>模块打包原理</h3><p>面对工程中成百上千个模块，Webpack 究竟是如何将它们有序地组织在一起，并按照我们预想的顺序运行在浏览器上的呢？下面我们将从原理上进行探究:</p><pre class=" language-javascript"><code class="language-javascript"> <span class="token comment" spellcheck="true">// index.js</span><span class="token keyword">const</span> calculator <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./calculator.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token keyword">const</span> sum <span class="token operator">=</span> calculator<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'sum'</span><span class="token punctuation">,</span> sum<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// calculator.js</span>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>     add<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>         <span class="token keyword">return</span> a <span class="token operator">+</span> b<span class="token punctuation">;</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">;</span></code></pre><p>上面的代码经过Webpack打包后将会成为如下的形式（为了易读性这里只展示代码的大体结构）：</p><pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">// 立即执行匿名函数 </span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span>modules<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>     <span class="token comment" spellcheck="true">//模块缓存</span>    <span class="token keyword">var</span> installedModules <span class="token operator">=</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">;</span>     <span class="token comment" spellcheck="true">// 实现require</span>    <span class="token keyword">function</span> <span class="token function">__webpack_require__</span><span class="token punctuation">(</span>moduleId<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>         <span class="token operator">...</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>         <span class="token comment" spellcheck="true">// 执行入口模块的加载 </span>        <span class="token keyword">return</span> <span class="token function">__webpack_require__</span><span class="token punctuation">(</span>__webpack_require__<span class="token punctuation">.</span>s <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// modules：以key-value的形式储存所有被打包的模块 </span>        <span class="token number">0</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span>module<span class="token punctuation">,</span> exports<span class="token punctuation">,</span> __webpack_require__<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>             <span class="token comment" spellcheck="true">// 打包入口</span>            module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token function">__webpack_require__</span><span class="token punctuation">(</span><span class="token string">"3qiv"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>         <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">,</span>        <span class="token string">"3qiv"</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span>module<span class="token punctuation">,</span> exports<span class="token punctuation">,</span> __webpack_require__<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>             <span class="token comment" spellcheck="true">// index.js内容</span>        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">,</span>        jkzz<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span>module<span class="token punctuation">,</span> exports<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>             <span class="token comment" spellcheck="true">// calculator.js 内容</span>        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>这是一个最简单的Webpack 打包结果（bundle），但已经可以清晰地展示出它是如何将具有依赖关系的模块串联在一起的。上面的 bundle 分为以下几个部分：</p><ol><li>最外层立即执行匿名函数。它用来包裹整个 bundle，并构成自身的作用域。 </li><li>installedModules 对象。每个模块只在第一次被加载的时候执行，之后其导出值就被存储到这个对象里面，当再次被加载的时候直接从这里取值，而不会重新执行。</li><li><em>_webpack_require</em>_ 函数。对模块加载的实现，在浏览器中可以通过调用 <em>_webpack_require</em>_(module_id) 来完成模块导入。</li><li>modules 对象。工程中所有产生了依赖关系的模块都会以 key-value 的形式放在 这里。key 可以理解为一个模块的 id，由数字或者一个很短的 hash 字符串构成； value 则是由一个匿名函数包裹的模块实体，匿名函数的参数则赋予了每个模块导出和导入的能力。</li></ol><p>接下来让我们看看一个 bundle 是如何在浏览器中执行的。 </p><ol><li>在最外层的匿名函数中会初始化浏览器执行环境，包括定义 installedModules 对<br>象、<em>_webpack_require</em>_ 函数等，为模块的加载和执行做一些准备工作。</li><li>加载入口模块。每个 bundle 都有且只有一个入口模块，在上面的示例中，<br>index.js 是入口模块，在浏览器中会从它开始执行。</li><li>执行模块代码。如果执行到了 module.exports 则记录下模块的导出值；如果中<br>间遇到 require 函数（准确地说是 __webpack_require_<em>），则会暂时交出执行权，进入 __webpack_require</em>_ 函数体内进行加载其他模块的逻辑。</li><li>在 <em>_webpack_require</em>_ 中会判断即将加载的模块是否存在于 installedModules 中。如果存在则直接取值，否则回到第 3 步，执行该模块的代码来获取导出值。</li><li>所有依赖的模块都已执行完毕，最后执行权又回到入口模块。当入口模块的代码执行到结尾，也就意味着整个 bundle 运行结束。 不难看出，第 3 步和第 4 步是一个递归的过程。Webpack 为每个模块创造了一个可以导出和导入模块的环境，但本质上并没有修改代码的执行逻辑，因此代码执行的顺序与模块加载的顺序是完全一致的，这就是Webpack 模块打包的奥秘。</li></ol><h3 id="资源输入输出"><a href="#资源输入输出" class="headerlink" title="资源输入输出"></a>资源输入输出</h3><h4 id="资源处理流程"><a href="#资源处理流程" class="headerlink" title="资源处理流程"></a>资源处理流程</h4><p>从上面我们已经了解到，Webpack 会从入口文件开始检索，并将具有依赖关系的模块生成一棵依赖树，最终得到一个chunk。由这个chunk得到的打包产物我们一般称之为bundle。entry、chunk、 bundle 的关系如图所示：</p><img src="https://files.catbox.moe/c1b0di.png" style="zoom:100%;margin-left:0" /><h4 id="配置资源入口"><a href="#配置资源入口" class="headerlink" title="配置资源入口"></a>配置资源入口</h4><h5 id="配置项"><a href="#配置项" class="headerlink" title="配置项"></a>配置项</h5><p>Webpack通过context和entry这两个配置项来共同决定入口文件的路径。在配置<br>入口时，实际上做了两件事:</p><ul><li>确定入口模块位置（context + entry），告诉Webpack从哪里开始进行打包。</li><li>定义chunk name。 如果工程只有一个入口，那么默认其chunk name为“main”；如果工程有多个入口，我们需要为每个入口定义chunk name,来作为该chunk的唯一标识。</li></ul><p>context可以理解为资源入口的路径前缀，在配置时要求必须使用绝对路径的形式。<br>请看下面两个例子：</p><pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">//以下两种配置达到的效果相同，入口都为&lt;工程根路径>/src/scripts/index.js</span>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    context<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'./src'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>     entry<span class="token punctuation">:</span> <span class="token string">'./scripts/index.js'</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">;</span> module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    context<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'./src/scripts'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>     entry<span class="token punctuation">:</span> <span class="token string">'./index.js'</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">;</span></code></pre><p>配置 context 的主要目的是让 entry 的编写更加简洁，尤其是在多入口的情况下。 context 可以省略，默认值为当前工程的根目录。</p><p>entry 与 context 只能为字符串不同，entry 的配置可以有多种形式：字符串、数组、对象、 函数。可以根据不同的需求场景来选择。</p><ol><li>字符串类型入口，直接传入文件路径：</li></ol><pre class=" language-javascript"><code class="language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    entry<span class="token punctuation">:</span> <span class="token string">'./src/index.js'</span><span class="token punctuation">,</span>     output<span class="token punctuation">:</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        filename<span class="token punctuation">:</span> <span class="token string">'bundle.js'</span><span class="token punctuation">,</span>     <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">,</span>     mode<span class="token punctuation">:</span> <span class="token string">'development'</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">;</span> </code></pre><ol start="2"><li>数组类型入口<br> 传入一个数组的作用是将多个资源预先合并，在打包时Webpack 会将数组中的最后一个元素作为实际的入口路径。如：</li></ol><pre class=" language-javascript"><code class="language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    entry<span class="token punctuation">:</span> <span class="token punctuation">[</span>        <span class="token string">'babel-polyfill'</span><span class="token punctuation">,</span>         <span class="token string">'./src/index.js'</span>    <span class="token punctuation">]</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">;</span>上面的配置等同于：<span class="token comment" spellcheck="true">//webpack.config.js </span>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    entry<span class="token punctuation">:</span> <span class="token string">'./src/index.js'</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// index.js</span><span class="token keyword">import</span> <span class="token string">'babel-polyfill'</span><span class="token punctuation">;</span></code></pre><ol start="3"><li><p>对象类型入口如果想要定义<strong>多入口</strong> ， 则必须使用对象的形式。<br>对象的属性名（key）是 chunk name，属性值（value）是入口路径。如：</p><pre class=" language-javascript"><code class="language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>     entry<span class="token punctuation">:</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// chunk name为index，入口路径为./src/index.js </span>        index<span class="token punctuation">:</span> <span class="token string">'./src/index.js'</span><span class="token punctuation">,</span>         <span class="token comment" spellcheck="true">// chunk name为lib，入口路径为./src/lib.js </span>        lib<span class="token punctuation">:</span> <span class="token string">'./src/lib.js'</span><span class="token punctuation">,</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//对象的属性值为字符串或数组。如：</span>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>     entry<span class="token punctuation">:</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        index<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'babel-polyfill'</span><span class="token punctuation">,</span> <span class="token string">'./src/index.js'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>         lib<span class="token punctuation">:</span> <span class="token string">'./src/lib.js'</span><span class="token punctuation">,</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span> <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">;</span> </code></pre><p>在使用字符串或数组定义单入口时，并没有办法更改 chunk name，只能为默认的 “main”。在使用对象来定义多入口时，则必须为每一个入口定义 chunk name。</p></li><li><p>函数类型入口</p><p>用函数定义入口时，只要返回上面介绍的任何配置形式即可，如：</p><pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">// 返回一个字符串型的入口</span>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    entry<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token string">'./src/index.js'</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// 返回一个对象型的入口 </span>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>     entry<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">(</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        index<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'babel-polyfill'</span><span class="token punctuation">,</span> <span class="token string">'./src/index.js'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>         lib<span class="token punctuation">:</span> <span class="token string">'./src/lib.js'</span><span class="token punctuation">,</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">;</span></code></pre><p>传入一个函数的优点在于我们可以在函数体里添加一些动态的逻辑来获取工程的入 口。另外，函数也支持返回一个 Promise 对象来进行异步操作。</p><pre class=" language-javascript"><code class="language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    entry<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span>resolve<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>         <span class="token comment" spellcheck="true">// 模拟异步操作 </span>        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>            <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'./src/index.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>         <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">;</span></code></pre></li></ol><h5 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h5><p><strong>单页应用</strong></p><p>单页应用好处是只会产生一个 JS 文件，依赖关系清晰。即所有模块都打包到一起，当应用的规模上升到一定程度之后会导致产生的资源体积过大，降低用户的页面渲染速度，而且当代码发生一点改变并打包上传后，用户的缓存便失效而不得不重新下载整个资源，这对于页面的加载也是不利的。<br>解决单页应用所引发的性能问题可以使用vendor来分割业务代码和第三方依赖，如：</p><pre class=" language-javascript"><code class="language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    context<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'./src'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>       entry<span class="token punctuation">:</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        app<span class="token punctuation">:</span> <span class="token string">'./src/app.js'</span><span class="token punctuation">,</span>        vendor<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'react'</span><span class="token punctuation">,</span> <span class="token string">'react-dom'</span><span class="token punctuation">,</span> <span class="token string">'react-router'</span><span class="token punctuation">]</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">;</span></code></pre><p>通过这样的配置，app.js 产生的 bundle 将只包含业务模块，其依赖的第三方模块将会被抽取出来生成一个新的 bundle，由于 vendor 仅仅包含第三方模块，这部分不会经常变动，因此可以有效地利用客户端缓存，在用户后续请求页面时会加快整体的渲染速度。</p><p><strong>多页应用</strong></p><p>对于多页应用的场景，为了尽可能减小资源的体积，我们希望每个页面都只加载各自必要的逻辑，而不是将所有页面打包到同一个 bundle 中。因此每个页面都需要有一个独立的 bundle，这种情形我们使用多入口来实现。请看下面的例子：</p><pre class=" language-javascript"><code class="language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>     entry<span class="token punctuation">:</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        pageA<span class="token punctuation">:</span> <span class="token string">'./src/pageA.js'</span><span class="token punctuation">,</span>         pageB<span class="token punctuation">:</span> <span class="token string">'./src/pageB.js'</span><span class="token punctuation">,</span>         pageC<span class="token punctuation">:</span> <span class="token string">'./src/pageC.js'</span><span class="token punctuation">,</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">;</span></code></pre><p>在上面的配置中，入口与页面是一一对应的关系，这样每个 HTML 只要引入各自的 JS 就可以加载其所需要的模块。另外，对于多页应用的场景，我们同样可以使用提取 vendor 的方法，将各个页面之间的公共模块进行打包。如：</p><pre class=" language-javascript"><code class="language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>     entry<span class="token punctuation">:</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        pageA<span class="token punctuation">:</span> <span class="token string">'./src/pageA.js'</span><span class="token punctuation">,</span>         pageB<span class="token punctuation">:</span> <span class="token string">'./src/pageB.js'</span><span class="token punctuation">,</span>         pageC<span class="token punctuation">:</span> <span class="token string">'./src/pageC.js'</span><span class="token punctuation">,</span>         vendor<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'react'</span><span class="token punctuation">,</span> <span class="token string">'react-dom'</span><span class="token punctuation">]</span> <span class="token punctuation">,</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">;</span></code></pre><p>可以看到，我们将 react 和 react-dom 打包进了 vendor，之后再配置 optimization.splitChunks，将它们从各个页面中提取出来，生成单独的 bundle 即可。</p><h4 id="配置资源出口"><a href="#配置资源出口" class="headerlink" title="配置资源出口"></a>配置资源出口</h4><h5 id="配置项-1"><a href="#配置项-1" class="headerlink" title="配置项"></a>配置项</h5><p>接着我们来看资源输出相关的配置,所有与出口相关的配置都集中在 output 对象里。例如：</p><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">const</span> path <span class="token operator">=</span> require <span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span> <span class="token punctuation">;</span>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    entry<span class="token punctuation">:</span> <span class="token string">'./ src/app.js'</span><span class="token punctuation">,</span>    output<span class="token punctuation">:</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        filename<span class="token punctuation">:</span> <span class="token string">'bundle.js'</span><span class="token punctuation">,</span>        path<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span><span class="token string">'assets'</span> <span class="token punctuation">)</span> <span class="token punctuation">,</span>        publicPath<span class="token punctuation">:</span> <span class="token string">'/dist/'</span> <span class="token punctuation">,</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>，<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">;</span></code></pre><ul><li><p>filename：filename的作用是控制输出资源的文件名，其形式为字符串，默认为 “bundle.js”，webpack也支持动态生成输出资源的文件名，如：</p><pre class=" language-javascript"><code class="language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    entry <span class="token punctuation">:</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        app<span class="token punctuation">:</span> <span class="token string">'./src/app.js'</span><span class="token punctuation">,</span>        vendor<span class="token punctuation">:</span> <span class="token string">'./src/vendor.js'</span><span class="token punctuation">,</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">,</span>    output <span class="token punctuation">:</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        filename<span class="token punctuation">:</span> <span class="token string">'[name].js'</span> <span class="token punctuation">,</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span> <span class="token punctuation">,</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">;</span></code></pre><p>在资源输出时，上面配置的 filename中的[name]会被替换为chunk name，因此最后项目中实际生成的资源是vendor.js 与 app.js,<br>除了[name]可以指代chunk name 以外，还有其他几种模板变量可以用于filename的配置中，如表所示：</p><table><thead><tr><th>变量名称</th><th>功能描述</th></tr></thead><tbody><tr><td>[hash]</td><td>指代webpack 此次打包所有资源生成的hash</td></tr><tr><td>[chunkhash]</td><td>指代当前chunk 内容的 hash</td></tr><tr><td>[id]</td><td>指代当前chunk 的id</td></tr><tr><td>[query]</td><td>指代filename配置项中的query</td></tr></tbody></table></li><li><p>path：path 可以指定资源输出的位置，要求值必须为绝对路径，默认值为 “dist”目录。如:</p><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span> <span class="token string">'path '</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    entry <span class="token punctuation">:</span> <span class="token string">'./src/app.js'</span><span class="token punctuation">,</span>    output <span class="token punctuation">:</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        filename <span class="token punctuation">:</span> <span class="token string">'bundle.js'</span><span class="token punctuation">,</span>        path<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'dist'</span> <span class="token punctuation">)</span><span class="token punctuation">,</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">;</span></code></pre></li><li><p>publicPath：publicPath是一个非常重要的配置项，并且容易与 path 相混淆。从功能上来说， path 用来指定资源的输出位置，而 publicPath 则用来指定资源的请求位置。让我们详细解释这两个定义：</p><ul><li>输出位置：打包完成后资源产生的目录，一般将其指定为工程中的 dist 目录。 </li><li>请求位置：由 JS 或 CSS 所请求的间接资源路径。页面中的资源分为两种，一种是由 HTML 页面直接请求的，比如通过 script 标签加载的 JS；另一种是由 JS 或 CSS 请求的，如异步加载的 JS、从 CSS 请求的图片字体等。publicPath 的作用就是指定这部分间接资源的请求位置。</li></ul><pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">//若当前HTML地址为https://example.com/app/index.html,异步加载的资源名为0.chunk.js</span>publicPath<span class="token punctuation">:</span> <span class="token string">""</span> <span class="token comment" spellcheck="true">// 实际路径https://example.com/app/0.chunk.js</span>publicPath<span class="token punctuation">:</span> <span class="token string">"../assets/"</span> <span class="token comment" spellcheck="true">// 实际路径https://example.com/aseets/0.chunk.js</span>publicPath<span class="token punctuation">:</span> <span class="token string">"http://cdn.com/"</span> <span class="token comment" spellcheck="true">// 实际路径http://cdn.com/0.chunk.js</span></code></pre></li></ul><h5 id="实例-1"><a href="#实例-1" class="headerlink" title="实例"></a>实例</h5><p><strong>单入口应用</strong></p><p>对于单入口的场景来说，通常不必设置动态的 output.filename，直接指定输出的文件名即可。</p><p><strong>多入口应用</strong></p><p>在多入口的场景下，必然会需要模板变量来配置 filename。请看下面的例子： </p><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>     entry<span class="token punctuation">:</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        pageA<span class="token punctuation">:</span> <span class="token string">'./src/pageA.js'</span><span class="token punctuation">,</span>         pageB<span class="token punctuation">:</span> <span class="token string">'./src/pageB.js'</span><span class="token punctuation">,</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">,</span>     output<span class="token punctuation">:</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>         filename<span class="token punctuation">:</span> <span class="token string">'[name].js'</span><span class="token punctuation">,</span>     <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//最终输出两个文件 /dist/pageA.js 和 /dist/pageB.js，不过为了使客户端精确更新资源，一般需要使用[chunkhash]</span></code></pre><h3 id="预处理器"><a href="#预处理器" class="headerlink" title="预处理器"></a>预处理器</h3><h4 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h4><p><strong>loader的源码结构</strong></p><pre class=" language-javascript"><code class="language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token function">loader</span><span class="token punctuation">(</span>content<span class="token punctuation">,</span>map<span class="token punctuation">,</span> meta<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token keyword">var</span> callback <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token keyword">async</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">var</span> result <span class="token operator">=</span> <span class="token function">handler</span><span class="token punctuation">(</span>content<span class="token punctuation">,</span>map<span class="token punctuation">,</span>meta<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">callback</span><span class="token punctuation">(</span>        <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">//error</span>        result<span class="token punctuation">.</span>content<span class="token punctuation">,</span> <span class="token comment" spellcheck="true">//转换后的内容</span>        result<span class="token punctuation">.</span>map<span class="token punctuation">,</span> <span class="token comment" spellcheck="true">//转换后的source-map</span>        result<span class="token punctuation">.</span>meta<span class="token punctuation">,</span> <span class="token comment" spellcheck="true">//转换后的AST</span>    <span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p><strong>引入loader</strong></p><pre class=" language-javascript"><code class="language-javascript">npm install css<span class="token operator">-</span>loadermodule<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// ...</span>    module<span class="token punctuation">:</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        rules<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>            test<span class="token punctuation">:</span> <span class="token regex">/\.css$/</span> <span class="token punctuation">,</span>            use<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'css-loader'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">;</span></code></pre><h4 id="配置项-2"><a href="#配置项-2" class="headerlink" title="配置项"></a>配置项</h4><ul><li><p><strong>exclude</strong>、<strong>include</strong></p><p>exclude和 include同时存在时，<strong>exclude 的优先级更高</strong>。如：</p><pre class=" language-javascript"><code class="language-javascript">module<span class="token punctuation">:</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    rules<span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        test<span class="token punctuation">:</span> <span class="token regex">/\.css$/</span><span class="token punctuation">,</span>        use<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'style-loader'</span><span class="token punctuation">,</span> 'css<span class="token operator">-</span>loader"<span class="token punctuation">]</span><span class="token punctuation">,</span>         exclude<span class="token punctuation">:</span> <span class="token regex">/node_modules/</span><span class="token punctuation">,</span>        include<span class="token punctuation">:</span> <span class="token regex">/node_modules\/awesome-ui/</span> <span class="token punctuation">,</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">,</span></code></pre></li><li><p><strong>resource</strong>、<strong>issuer</strong></p><p>resource 与 issuer可用于更加精确地确定模块规则的作用范围。在 Webpack 中，我们认为被加载模块是resource，而加载者是issuer。前面介绍的test、exclude、include本质上属于对resource的配置，而issuer的配置如下：</p><pre class=" language-javascript"><code class="language-javascript">module<span class="token punctuation">:</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    rules<span class="token punctuation">:</span><span class="token punctuation">[</span>        <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>            test<span class="token punctuation">:</span> <span class="token regex">/\.css$/</span><span class="token punctuation">,</span>            use<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'style-loader'</span><span class="token punctuation">,</span> <span class="token string">'css-loader'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>            exclude<span class="token punctuation">:</span> <span class="token regex">/node_modules/</span><span class="token punctuation">,</span>            <span class="token comment" spellcheck="true">//只有在 /src/pages/ 下的JS文件引用的CSS文件才能使这条规则失效</span>            issuer<span class="token punctuation">:</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>                test<span class="token punctuation">:</span> <span class="token regex">/\.js$/</span><span class="token punctuation">,</span>                include<span class="token punctuation">:</span> <span class="token regex">/src\/pages/</span><span class="token punctuation">,</span>            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">,</span>        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>    <span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">,</span></code></pre></li><li><p><strong>enforce</strong></p><p>Webpack中的 loader 按照执行顺序可分为pre、inline、normal、post 四种类型，上面我们直接定义的 loader 都属于normal类型，inline形式官方已经不推荐使用，而pre和post则需要使用enforce来指定。如：</p><pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">//eslint-loader对所有js文件进行语法检测，pre则保证代码没有被其他loader修改过</span>rules<span class="token punctuation">:</span><span class="token punctuation">[</span>    <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        test<span class="token punctuation">:</span> <span class="token regex">/\.js$/</span><span class="token punctuation">,</span>        enforce<span class="token punctuation">:</span> <span class="token string">'pre'</span><span class="token punctuation">,</span>        use<span class="token punctuation">:</span> <span class="token string">'eslint-loader'</span><span class="token punctuation">,</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">]</span><span class="token punctuation">,</span></code></pre></li></ul><h4 id="常用loader"><a href="#常用loader" class="headerlink" title="常用loader"></a>常用loader</h4><h5 id="babel-loader"><a href="#babel-loader" class="headerlink" title="babel-loader"></a>babel-loader</h5><p>将ES6+的语法转化成ES5，使我们能在保证兼容性的同时使用最新的语法</p><p><strong>安装</strong></p><pre class=" language-shell"><code class="language-shell">npm install babel-loader @babel/core @babel/preset-env</code></pre><ul><li>babel-loader: 使Babel 与 Webpack 协同工作的模块。</li><li>@babel&#x2F;core: Babel编译器的核心模块。</li><li>@babel&#x2F;preset-env: Babel官方推荐的预置器，可根据用户设置目标环境。</li></ul><p><strong>配置</strong></p><pre class=" language-javascript"><code class="language-javascript">rules<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        test<span class="token punctuation">:</span> <span class="token regex">/\.js$/</span><span class="token punctuation">,</span>        exclude<span class="token punctuation">:</span> <span class="token regex">/node_modules/</span><span class="token punctuation">,</span>        use<span class="token punctuation">:</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>            loader<span class="token punctuation">:</span> <span class="token string">'babel-loader'</span><span class="token punctuation">,</span>            options<span class="token punctuation">:</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>                cacheDirectory<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>                presets<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">[</span>                    <span class="token string">'env'</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>                        modules<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>                    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>                <span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">,</span>        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">,</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">]</span><span class="token punctuation">,</span></code></pre><ul><li>cacheDirectory配置项会启用缓存机制，防止对未改变的文件进行二次编译，从而加快打包的速度。cacheDirectory可以接收一个字符串来作为缓存路径，这个值也可以为true，此时其缓存目录会指向node_modules&#x2F;.cache&#x2F;babel-loader。</li><li>由于@babel&#x2F;preset-env会将ES6 Module转化为CommonJS的形式，从而导致 Webpack 中的tree-shaking特性失效。将@babel&#x2F;preset-env的modules配置项设置为false会禁用模块语句的转化，而将ES6Module的语法交给Webpack本身处理。</li><li>babel-loader支持从**.babelrc**文件读取Babel配置，因此可以将presets和 plugins 从Webpack配置文件中提取出来，也能达到相同的效果。</li></ul><h5 id="ts-loader"><a href="#ts-loader" class="headerlink" title="ts-loader"></a>ts-loader</h5><p>ts-loader 与 babel-loader 的性质类似，它是用于连接Webpack 与 Typescript的模块。</p><p><strong>安装</strong></p><pre class=" language-shell"><code class="language-shell">npm install ts-loader</code></pre><p><strong>配置</strong></p><pre class=" language-javascript"><code class="language-javascript">rules<span class="token punctuation">:</span><span class="token punctuation">[</span>    <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        test<span class="token punctuation">:</span> <span class="token regex">/\.ts$/</span><span class="token punctuation">,</span>        use<span class="token punctuation">:</span> <span class="token string">'ts-loader'</span><span class="token punctuation">,</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">]</span><span class="token punctuation">,</span></code></pre><p>需要注意的是，Typescript本身的配置并不在 ts-loader中，而是必须要放在工程目录下的 tsconfig.json中。如：</p><pre class=" language-json"><code class="language-json">&amp;#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token property">"compileroptions"</span><span class="token operator">:</span> &amp;#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token property">"target"</span><span class="token operator">:</span> <span class="token string">"es5"</span><span class="token punctuation">,</span>        <span class="token property">"sourceMap"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>    &amp;#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">,</span>&amp;#<span class="token number">125</span><span class="token punctuation">;</span></code></pre><p>通过Typescript和 ts-loader，我们可以实现代码类型检查。<a href="https://github.com/TypeStrong/ts-loader">配置文档</a></p><h5 id="html-loader"><a href="#html-loader" class="headerlink" title="html-loader"></a>html-loader</h5><p>html-loader 用于将HTML文件转化为字符串并进行格式化，这使得我们可以把一个HTML片段通过JS加载进来。</p><p><strong>安装</strong></p><pre class=" language-shell"><code class="language-shell">npm install html-loader</code></pre><p><strong>配置</strong></p><pre class=" language-javascript"><code class="language-javascript">rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>    <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        test<span class="token punctuation">:</span> <span class="token regex">/\.html$/</span><span class="token punctuation">,</span>        use<span class="token punctuation">:</span> <span class="token string">'html-loader'</span><span class="token punctuation">,</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">]</span><span class="token punctuation">,</span></code></pre><p><strong>使用实例</strong></p><pre class=" language-jsx"><code class="language-jsx"><span class="token comment" spellcheck="true">//header.html</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>header</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">></span></span>This is a Header<span class="token punctuation">.</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>header</span><span class="token punctuation">></span></span><span class="token comment" spellcheck="true">//index.js</span><span class="token keyword">import</span> headerHtml <span class="token keyword">from</span> <span class="token string">'./header.html'</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//header.html将会转化为字符串，并通过document.write插人页面中。</span>document<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>headerHtml<span class="token punctuation">)</span> <span class="token punctuation">;</span></code></pre><h5 id="file-loader"><a href="#file-loader" class="headerlink" title="file-loader"></a>file-loader</h5><p>file-loader用于打包文件类型的资源，并返回其publicPath。</p><p><strong>安装</strong></p><pre class=" language-shell"><code class="language-shell">npm install file-loader</code></pre><p><strong>配置</strong></p><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    entry<span class="token punctuation">:</span> <span class="token string">'./app.js'</span><span class="token punctuation">,</span>    output<span class="token punctuation">:</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        path<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'dist'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>        filename<span class="token punctuation">:</span> <span class="token string">'bundle.js'</span><span class="token punctuation">,</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">,</span>    module<span class="token punctuation">:</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>            <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>                test<span class="token punctuation">:</span> <span class="token regex">/\.(png|jpg|gif)$/</span><span class="token punctuation">,</span>                use<span class="token punctuation">:</span> <span class="token string">'file-loader'</span><span class="token punctuation">,</span>             <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>        <span class="token punctuation">]</span><span class="token punctuation">,</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">;</span></code></pre><p>上面我们对png、jpg、gif 这类图片资源使用file-loader,然后就可以在JS中加载图片了，如：</p><pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">//index.js</span><span class="token keyword">import</span> avatarImage <span class="token keyword">from</span> <span class="token string">'./avatar.jpg'</span><span class="token punctuation">;</span>console<span class="token punctuation">.</span>log <span class="token punctuation">(</span>avatarImage<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// c6f482ac9a1905e1d7d22caa909371fc.jpg</span><span class="token comment" spellcheck="true">//webpack.config.js</span>output<span class="token punctuation">:</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    publicPath<span class="token punctuation">:</span> <span class="token string">'./assets'</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//index.js</span><span class="token keyword">import</span> avatarImage <span class="token keyword">from</span> <span class="token string">'./avatar.jpg'</span><span class="token punctuation">;</span>console<span class="token punctuation">.</span>log <span class="token punctuation">(</span>avatarImage<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// ./assets/c6f482ac9a1905e1d7d22caa909371fc.jpg</span></code></pre><p>使用Webpack打包完成后，dist 目录下会生成名为 <code>c6f482ac9al905e1d7d22caa909371fc.jpg</code>的图片文件。当配置中并没有指定output.publicPath时，打印的图片路径只是文件名，默认为文件的hash值加上文件后缀。</p><h5 id="url-loader"><a href="#url-loader" class="headerlink" title="url-loader"></a>url-loader</h5><p>url-loader与file-loader作用类似，唯一的不同在于用户可以设置一个文件大小的阈值，当大于该阈值时与file-loader一样返回publicPath, 而小于该阈值时则返回文件的base64形式编码。</p><p><strong>安装</strong></p><pre class=" language-shell"><code class="language-shell">npm install url-loader</code></pre><p><strong>配置</strong></p><pre class=" language-javascript"><code class="language-javascript">rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>    <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        test<span class="token punctuation">:</span> <span class="token regex">/\.(png|jpg|gif)$/</span><span class="token punctuation">,</span>        use<span class="token punctuation">:</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>            loader<span class="token punctuation">:</span> <span class="token string">'url-loader'</span><span class="token punctuation">,</span>            options<span class="token punctuation">:</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>                limit<span class="token punctuation">:</span> <span class="token number">10240</span><span class="token punctuation">,</span>                name<span class="token punctuation">:</span> <span class="token string">'[name].[ext]'</span><span class="token punctuation">,</span>                publicPath<span class="token punctuation">:</span> <span class="token string">'./assets-path/'</span><span class="token punctuation">,</span>            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">,</span>        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">,</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">]</span></code></pre><p><strong>使用示例</strong></p><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">import</span> avatarImage <span class="token keyword">from</span> <span class="token string">'./avatar.jpg'</span><span class="token punctuation">;</span>console<span class="token punctuation">.</span>log <span class="token punctuation">(</span>avatarImage<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//data:image/jpeg;base64,/9j/2wCEAAgGBg.....</span></code></pre><p>由于图片小于limit设置的大小，因此经过url-loader转化后得到的是base64形式的编码。</p><h4 id="自定义loader"><a href="#自定义loader" class="headerlink" title="自定义loader"></a>自定义loader</h4><ul><li><p>创建  force-strict-loader 目录，执行 <code>npm init</code></p></li><li><p>在目录下创建index.js，编写loader</p><pre class=" language-javascript"><code class="language-javascript">module<span class="token punctuation">.</span><span class="token keyword">export</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token keyword">var</span> strict <span class="token operator">=</span> <span class="token string">'\'use strict\';\n\n'</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> strict <span class="token operator">+</span> content<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span></code></pre></li><li><p>在自己的工程项目中安装 loader</p><pre class=" language-shell"><code class="language-shell">npm install <path-of-loader>/force-strict-loader</code></pre></li><li><p>配置loader</p><pre class=" language-javascript"><code class="language-javascript">module<span class="token punctuation">:</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    rules<span class="token punctuation">:</span><span class="token punctuation">[</span>        <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>            test<span class="token punctuation">:</span> <span class="token regex">/\.js$/</span><span class="token punctuation">,</span>            use<span class="token punctuation">:</span> <span class="token string">'force-strict-loader'</span>        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>    <span class="token punctuation">]</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span></code></pre></li></ul><p>配置完后，我们自定义的 <code>force-strict-loader</code> 就会对所有JS文件添加严格模式。</p><p><strong>启用缓存</strong></p><p>当文件输人和其依赖没有发生变化时，应该让loader直接使用缓存，而不是重复进行转换的工作。在Webpack中可以使用 this.cacheable 进行控制：</p><pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">// force-strict-loader/index.js</span>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>content<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>cacheable<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">cacheable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>    <span class="token keyword">var</span> strict <span class="token operator">=</span> <span class="token string">'\'use strict\';\n\n'</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> strict <span class="token operator">+</span> content<span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span></code></pre><p>通过启用缓存可以加快Webpack打包速度，并且可保证相同的输人产生相同的输出。</p><p><strong>获取options</strong></p><p>loader的配置项可通过use.options传进来，如：</p><pre class=" language-javascript"><code class="language-javascript">rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>    <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        test<span class="token punctuation">:</span> <span class="token regex">/\.js$/</span><span class="token punctuation">,</span>        use<span class="token punctuation">:</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>            loader<span class="token punctuation">:</span> <span class="token string">'force-strict-loader'</span><span class="token punctuation">,</span>            options<span class="token punctuation">:</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>                sourceMap<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">,</span>        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">,</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">]</span><span class="token punctuation">,</span></code></pre><p>上面我们为force-strict-loader传人了一个配置项sourceMap，接下来我们要在loader中获取它。可以使用一个依赖库loader-utils提供的帮助函数获取：</p><pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">//在控制台执行以下命令:</span>npm install loader<span class="token operator">-</span>utils<span class="token comment" spellcheck="true">// force-strict-loader/index.js</span><span class="token keyword">var</span> loaderUtils <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"loader-utils"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>cacheable<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">cacheable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//获取和打印options </span>    <span class="token keyword">var</span> options <span class="token operator">=</span> loaderUtils<span class="token punctuation">.</span>getOptions <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">;</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'options'</span><span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//处理content</span>    <span class="token keyword">var</span> strict <span class="token operator">=</span> <span class="token string">'\'use strict\';\n\n'</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> strict <span class="token operator">+</span> content <span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span></code></pre><p><strong>实现source-map</strong></p><pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">// force-strict-loader/index.js</span><span class="token keyword">var</span> loaderUtils <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"loader-utils"</span><span class="token punctuation">)</span> <span class="token punctuation">;</span><span class="token keyword">var</span> SourceNode <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"source-map"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>SourceNode <span class="token punctuation">;</span><span class="token keyword">var</span> SourceMapConsumer <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"source-map"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>SourceMapConsumer<span class="token punctuation">;</span>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>content<span class="token punctuation">,</span> sourceMap<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token keyword">var</span> useStrictPrefix <span class="token operator">=</span> <span class="token string">'\'use strict\';\n\n'</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>cacheable<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">cacheable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>    <span class="token keyword">var</span> options <span class="token operator">=</span> loaderUtils<span class="token punctuation">.</span><span class="token function">getoptions</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//支持sourceMap的版本</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>options<span class="token punctuation">.</span>sourceMap <span class="token operator">&amp;&amp;</span> sourceMap<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token keyword">var</span> currentRequest <span class="token operator">=</span> loaderUtils<span class="token punctuation">.</span><span class="token function">getCurrentRequest</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">var</span> node <span class="token operator">=</span> SourceNode<span class="token punctuation">.</span><span class="token function">fromStringWithSourceMap</span><span class="token punctuation">(</span>            content<span class="token punctuation">,</span>            <span class="token keyword">new</span> <span class="token class-name">SourceMapConsumer</span> <span class="token punctuation">(</span>sourceMap<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                node<span class="token punctuation">.</span><span class="token function">prepend</span><span class="token punctuation">(</span>useStrictPrefix<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">var</span> result <span class="token operator">=</span> node<span class="token punctuation">.</span><span class="token function">toStringWithSourceMap</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span> file<span class="token punctuation">:</span> currentRequest <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">var</span> callback <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token keyword">async</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        callback <span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> result<span class="token punctuation">.</span>code<span class="token punctuation">,</span> result<span class="token punctuation">.</span>map<span class="token punctuation">.</span><span class="token function">toJSON</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//不支持sourceMap的版本</span>    <span class="token keyword">return</span> useStrictPrefix <span class="token operator">+</span> content<span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span></code></pre><ul><li>首先，在loader函数的参数中我们获取到sourceMap对象，这是由Webpack或者上一个loader传递下来的，只有当它存在时我们的loader才能进行继续处理和向下传递。</li><li>之后我们通过 <code>source-map</code> 这个库来对map进行操作，包括接收和消费之前的文件内容和sourceMap，对内容节点进行修改，最后产生新的sourceMap。</li><li>在函数返回的时候要使用 this.async 获取 callback 函数（主要是为了一次性返回多个值）。callback函数的3个参数分别是<code>抛出的错误</code>、<code>处理后的源码</code>，<code>向下一级传递的sourceMap</code>。</li></ul><h3 id="样式处理"><a href="#样式处理" class="headerlink" title="样式处理"></a>样式处理</h3><h4 id="分离样式文件"><a href="#分离样式文件" class="headerlink" title="分离样式文件"></a>分离样式文件</h4><p>在Webpack中，我们通常会独立编写 js 文件和 css 文件，并在 js 中导入 css 模块，如：</p><pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">//index.css</span>body<span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    margin<span class="token punctuation">:</span> <span class="token number">0</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//index.js</span><span class="token keyword">import</span> <span class="token string">'./index.css'</span></code></pre><p>同时，我们一般会在 webpack.config.js 中为 css 文件配置 <code>css-loader</code>和<code>style-loader</code>，如：</p><pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">//webpack.config.js</span>module<span class="token punctuation">.</span><span class="token keyword">export</span> <span class="token operator">=</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    module<span class="token punctuation">:</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>            <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>                test<span class="token punctuation">:</span> <span class="token regex">/\.css$/</span><span class="token punctuation">,</span>                use<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'style-loader'</span><span class="token punctuation">,</span> <span class="token string">'css-loader'</span><span class="token punctuation">]</span>            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>        <span class="token punctuation">]</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span></code></pre><p>配置完后，loader处理原理大致为：</p><ul><li>css-loader将index.css的样式内容转化为字符串形式，并将其作为js模块的导出内容。</li><li>style-loader 执行css-loader导出的 js 模块，获取到样式字符串，然后再以 <code>style标签</code>的形式拼接到文档中</li></ul><p>style-loader的大致原理如下：</p><pre class=" language-javascript"><code class="language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>content<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>  <span class="token comment" spellcheck="true">// do nothing</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//pitch函数的执行顺序与loader处理顺序相反</span><span class="token comment" spellcheck="true">//执行顺序为 css-loader -> style-loader -> style-loader.pitch -> css-loader.pitch</span><span class="token comment" spellcheck="true">//remainingRequest参数为loader链的剩余部分，在这是css-loader(css-loader.pitch未执行)</span>module<span class="token punctuation">.</span>exports<span class="token punctuation">.</span>pitch <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>remainingRequest<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>      <span class="token comment" spellcheck="true">//用'!!'前缀跳过配置中的loader，避免重复执行</span>  <span class="token comment" spellcheck="true">//用loaderUtils的stringifyRequest方法将request语句中的绝对路径转为相对路径</span>  <span class="token comment" spellcheck="true">//在这里requestPath为: '!!../node_modules/css-loader/index.js!src/index.css'</span>  <span class="token comment" spellcheck="true">//前面我们说到 loader的配置有字符串形式和数组形式，其实还有一种内联(inline)形式，就是     requestPath的这种表示形式</span>  <span class="token keyword">const</span> requestPath <span class="token operator">=</span> loaderUtils<span class="token punctuation">.</span><span class="token function">stringifyRequest</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token string">'!!'</span> <span class="token operator">+</span> remainingRequest<span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment" spellcheck="true">//用require语句获取css-loader返回的js模块的导出</span>  <span class="token keyword">return</span> <span class="token template-string"><span class="token string">`    const content = require($&amp;#123;requestPath&amp;#125;)    const style = document.createElement('style');    style.innerHTML = content;    document.head.appendChild(style);  `</span></span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">;</span></code></pre><p>从上面我们可以看出，导入的 css 模块最终会以 style标签的形式存在于我们的HTML中，因此不利于客户端对于 css 的缓存，因此我们使用<code>extract-text-webpack-plugin</code>这个插件来完成功能。</p><p><strong>extract-text-webpack-plugin</strong></p><ul><li><p>安装</p><pre class=" language-shell"><code class="language-shell">npm install extract-text-webpack-plugin</code></pre></li><li><p>配置</p><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">const</span> ExtractTextPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'extract-text-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    entry<span class="token punctuation">:</span> <span class="token string">'./app.js'</span><span class="token punctuation">,</span>    mode <span class="token punctuation">:</span> <span class="token string">'development'</span><span class="token punctuation">,</span>    module<span class="token punctuation">:</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        rules<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>                test<span class="token punctuation">:</span> <span class="token operator">/</span>\<span class="token punctuation">.</span>css$<span class="token operator">/</span>，                use<span class="token punctuation">:</span> ExtractTextPlugin<span class="token punctuation">.</span><span class="token function">extract</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>                        fallback<span class="token punctuation">:</span> <span class="token string">'style-loader'</span><span class="token punctuation">,</span>                         use<span class="token punctuation">:</span><span class="token string">'css-loader'</span><span class="token punctuation">,</span>                    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">)</span>        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">,</span>    plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>        <span class="token function">newExtractTextPlugin</span><span class="token punctuation">(</span><span class="token string">'bundle.css'</span><span class="token punctuation">)</span>    <span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">;</span></code></pre></li></ul><p>​我们在配置文件中并没有直接传入loader，而是使用了插件的<code>extract</code>方法包了一层。内部的<code>fallback</code>属性指定提取失败所采用的 loader，<code>use</code>属性指定在提取样式之前采用哪些 loader 进行预处理。除此之外，还要在<code>plugins</code>配置中添加该插件，并传入提取后的资源文件名。<br>​       进行打包后，所有导入的 css 文件的内容都会被提取到一个名为 <code>bundle.css</code>的文件，我们可以直接在 html 中使用它，以达到优化缓存的目的。</p><h4 id="多入口样式文件处理"><a href="#多入口样式文件处理" class="headerlink" title="多入口样式文件处理"></a>多入口样式文件处理</h4><pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">//webpack.config.js</span><span class="token keyword">const</span> ExtractTextPlugin <span class="token operator">=</span> require <span class="token punctuation">(</span><span class="token string">'extract-text-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    entry<span class="token punctuation">:</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        foo<span class="token punctuation">:</span> <span class="token string">'./src/scripts/foo.js'</span><span class="token punctuation">,</span>        bar<span class="token punctuation">:</span> <span class="token string">'./src/scripts/bar.js'</span><span class="token punctuation">,</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">,</span>    output<span class="token punctuation">:</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        filename<span class="token punctuation">:</span> <span class="token string">'[name].js'</span><span class="token punctuation">,</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">,</span>    mode<span class="token punctuation">:</span> <span class="token string">'development'</span><span class="token punctuation">,</span>    module<span class="token punctuation">:</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>            <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>                test<span class="token punctuation">:</span> <span class="token regex">/\.css$/</span><span class="token punctuation">,</span>                use<span class="token punctuation">:</span> ExtractTextPlugin<span class="token punctuation">.</span><span class="token function">extract</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>                    fallback<span class="token punctuation">:</span> <span class="token string">'style-loader'</span><span class="token punctuation">,</span>                    use<span class="token punctuation">:</span> <span class="token string">'css-loader'</span><span class="token punctuation">,</span>                <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>        <span class="token punctuation">]</span><span class="token punctuation">,</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">,</span>    plugins<span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token keyword">new</span> <span class="token class-name">ExtractTextPlugin</span><span class="token punctuation">(</span><span class="token string">'[name].css'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span></code></pre><p>打包后会在 dist 目录下生成 <code>foo.js</code>, <code>bar.js</code>,<code>foo.css</code>, <code>bar.css</code></p><h4 id="mini-css-extract-plugin"><a href="#mini-css-extract-plugin" class="headerlink" title="mini-css-extract-plugin"></a>mini-css-extract-plugin</h4><p><code>mini-css-extract-plugin</code>可以理解成<code>extract-text-webpack-plugin</code>的升级版，它拥有更丰富的特性和更好的性能。<br><code>mini-css-extract-plugin</code>最重要的就是它支持按需加载CSS，举个例子, a.js通过<code>import</code>函数异步加载了b.js, b.js 里面加载了style.css, 那么style. css最终只能被同步加载。但是现在mini-css-extract-plugin会单独打包出一个<br>0.css (假设使用默认配置)，这个CSS文件将由a.js通过动态插入link 标签的方式加载。<br>请看下面的例子：</p><pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">// app.js</span><span class="token keyword">import</span> <span class="token string">'./style.css'</span><span class="token punctuation">;</span><span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'./next-page.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>document<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">'app.js&lt;br/>'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// next-page.js</span><span class="token keyword">import</span> <span class="token string">'./next-page.css'</span><span class="token punctuation">;</span>document<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">'Next page.&lt;br/>'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">/* style.css */</span>body <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span> background<span class="token operator">-</span>color<span class="token punctuation">:</span> #eee<span class="token punctuation">;</span> <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">/* next-page.css */</span>body <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span> background<span class="token operator">-</span>color<span class="token punctuation">:</span> #<span class="token number">999</span><span class="token punctuation">;</span> <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span></code></pre><p>在上面代码中，由于<code>next-page.js</code>是通过import函数<code>异步加载</code>而不是通过import关键字同步加载的，如果使用的是<code>extract-text-webpack-plugin</code>，那么我们在打包阶段只能将 <code>style.css </code>和<code>next-page.css</code>一起打包进 bundle.css 然后使用。但是如果使用的是<code>mini-css-extract-plugin</code>的话，只有 style.css 会被打包进 bundle.css，而 next-page.css 会被单独打包为 0.css（默认配置），然后在代码执行过程中，在 app.js 成功加载完 next-page.js 的同时，app.js 会将 0.css 通过 link标签的方式动态插入文档，这样就可以实现 css 的按需加载。</p><p><strong>配置</strong></p><pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">//webpack.config.js</span><span class="token keyword">const</span> MiniCssExtractPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'mini-css-extract-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>  entry<span class="token punctuation">:</span> <span class="token string">'./app.js'</span><span class="token punctuation">,</span>  output<span class="token punctuation">:</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    filename<span class="token punctuation">:</span> <span class="token string">'[name].js'</span><span class="token punctuation">,</span>  <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">,</span>  mode<span class="token punctuation">:</span> <span class="token string">'development'</span><span class="token punctuation">,</span>  module<span class="token punctuation">:</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>      <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        test<span class="token punctuation">:</span> <span class="token regex">/\.css$/</span><span class="token punctuation">,</span>        use<span class="token punctuation">:</span> <span class="token punctuation">[</span>          <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>            loader<span class="token punctuation">:</span> MiniCssExtractPlugin<span class="token punctuation">.</span>loader<span class="token punctuation">,</span>            options<span class="token punctuation">:</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>              publicPath<span class="token punctuation">:</span> <span class="token string">'../'</span><span class="token punctuation">,</span>            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">,</span>          <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">,</span>          <span class="token string">'css-loader'</span>        <span class="token punctuation">]</span><span class="token punctuation">,</span>      <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">,</span>  plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>    <span class="token keyword">new</span> <span class="token class-name">MiniCssExtractPlugin</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>      filename<span class="token punctuation">:</span> <span class="token string">'[name].css'</span><span class="token punctuation">,</span>      chunkFilename<span class="token punctuation">:</span> <span class="token string">'[id].css'</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">)</span>  <span class="token punctuation">]</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">;</span></code></pre><p>在配置上mini-css-extract-plugin与extract-text-webpack-plugin 有以下几点不同: </p><ul><li>loader 规则设置的形式不同，并且mini-css- extract-plugin支持配置publicPath，用来指定异步CSS的加载路径。</li><li>不需要设置fallback。</li><li>在plugins设置中，除了指定同步加载的CSS资源名( filename),还要指定异步加载的CSS资源名(chunkFilename)。</li></ul><h4 id="CSS-Modules"><a href="#CSS-Modules" class="headerlink" title="CSS Modules"></a>CSS Modules</h4><p>CSS Modules是近年来比较流行的一种开发模式，其理念就是把Css模块化，让CSS也拥有模块的特点，具体如下：</p><ul><li>每个CSS文件中的样式都拥有单独的作用域，不会和外界发生命名冲突。</li><li>对CSS进行依赖管理，可以通过相对路径引人CSS文件。</li><li>可以通过composes轻松复用其他CSS模块。</li></ul><p>使用CSS Modules不需要额外安装模块，只要开启css-loader中的modules配置项即可：</p><pre class=" language-javascript"><code class="language-javascript">module<span class="token punctuation">:</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>        <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>            test<span class="token punctuation">:</span> <span class="token regex">/\.css$/</span><span class="token punctuation">,</span>            use<span class="token punctuation">:</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>                <span class="token string">'style-loader'</span><span class="token punctuation">,</span>                loader<span class="token punctuation">:</span> <span class="token string">'css-loader'</span><span class="token punctuation">,</span>                options<span class="token punctuation">:</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>                    modules<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>                    localIdentName<span class="token punctuation">:</span> <span class="token string">'[name]_.[local]_[hash:base64:5]'</span>                <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>    <span class="token punctuation">]</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span></code></pre><p>这里的localldentName配置项用于指明CSS代码中的类名会如何来编译。假设源码是下面的形式：</p><pre class=" language-css"><code class="language-css"><span class="token comment" spellcheck="true">/* style.css */</span><span class="token number">.</span>title&amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span>    <span class="token property">color</span><span class="token punctuation">:</span> <span class="token hexcode">#f938ab</span><span class="token punctuation">;</span>    &amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span></code></pre><p><code>.title</code>经过编译后可能将成为<code>.style_ title_1CFy6</code>, 让我们依次对照上面的配置:</p><ul><li>[name]指代的是模块名，这里被替换为style。</li><li>[local] 指代的是原本的选择器标识符，这里被替换为title。</li><li>[hash:basc64:5]指代的是一个5位的hash值，这个hash值是根据模块名和标识符计算的，因此不同模块中相同的标识符也不会造成样式冲突。</li></ul><p>在使用的过程中我们还要注意在JavaScript中引入CSS的方式。之前只是直接将CSS文件引入就可以了，但使用CSS Modules时CSS文件会导出一个对象，我们需要把这个对象中的属性添加到HTML标签上。请看下面的示例：</p><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">import</span> styles <span class="token keyword">from</span> <span class="token string">'./style.css'</span><span class="token punctuation">;</span>document<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">'&lt;hl class="$&amp;#123;styles.title)">My Webpack app.&lt;/h1>*'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>最终这个HTML中的class才能与我们编译后的CSS类名匹配上。</p><h3 id="代码分片"><a href="#代码分片" class="headerlink" title="代码分片"></a>代码分片</h3><p>​实现高性能应用其中重要的一点就是尽可能地让用户每次只加载必要的资源，优先级不太高的资源则采用延迟加载等技术渐进式地获取，这样可以保证页面的首屏速度。<br>​代码分片( code splitting)是Webpack作为打包工具所特有的一项技术, 通过这项技术我们可以把代码按照特定的形式进行拆分，使用户不必一次全部加载，而是按需加载。<br>​代码分片可以有效降低首屏加载资源的大小，但同时也会带来新的问题，比如我们应该对哪些模块进行分片、分片后的资源如何管理等，这些也是需要关注的。</p><h4 id="通过入口划分代码"><a href="#通过入口划分代码" class="headerlink" title="通过入口划分代码"></a>通过入口划分代码</h4><p>在Webpack中每个人口(entry) 都将生成一个对应的资源文件，通过入口的配置我们可以进行一些简单有效的代码拆分。<br>对于Web应用来说通常会有一些库和工具是不常变动的，可以把它们放在一个单独的入口中，由该人口产生的资源不会经常更新，因此可以有效地利用客户端缓存，让<br>用户不必在每次请求页面时都重新加载。如:</p><pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">//webpack.config.js</span>entry<span class="token punctuation">:</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    app<span class="token punctuation">:</span> <span class="token string">'./app.js'</span><span class="token punctuation">,</span>    lib<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'lib-a'</span><span class="token punctuation">,</span> <span class="token string">'lib-b'</span><span class="token punctuation">,</span> <span class="token string">'lib-c'</span><span class="token punctuation">]</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">//index.html</span><span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">"dist/lib.js"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span><span class="token operator">&lt;</span>script sre<span class="token operator">=</span><span class="token string">"dist/app.js"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span></code></pre><p>这种拆分方法主要适合于那些将接口绑定在全局对象上的库（如JQuery），因为业务代码中的模块无法直接引用库中的模块，二者属于不同的依赖树。<br>对于多页面应用来说，我们也可以利用入口划分的方式拆分代码。比如，为每一个页面创建一个入口，并放入只涉及该页面的代码，同时再创建一个入口来包含所有公共模块，并使每个页面都进行加载。但是这样仍会带来公共模块与业务模块处于不同依赖树的问题。另外，很多时候不是所有的页面都需要这些公共模块。比如A、B页面需要lib-a模块，C、D需要lib-b模块，通过手工的方式去配置和提取公共模块将会变得十分复杂，因此我们可以使用Webpack专门提供的插件来解决这个问题。</p><h4 id="CommonsChunkPlugin"><a href="#CommonsChunkPlugin" class="headerlink" title="CommonsChunkPlugin"></a>CommonsChunkPlugin</h4><p>CommonsChunkPlugin是 Webpack 4之前内部自带的插件( Webpack 4之后替换为了SplitChunks)。它可以将多个Chunk 中公共的部分提取出来。公共模块的提取可以为项目带来几个收益：</p><ul><li>开发过程中减少了重复模块打包，可以提升开发速度;</li><li>减小整体资源体积;</li><li>合理分片后的代码可以更有效地利用客户端缓存。</li></ul><p>假设我们当前的项目中有foo.js和bar.js两个入口文件，并且都引入了react，下面是未使用CommonsChunkPlugin 的配置：</p><pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">//webpack.config.js</span>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    entry<span class="token punctuation">:</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        foo<span class="token punctuation">:</span> <span class="token string">'./foo.js'</span><span class="token punctuation">,</span>        bar<span class="token punctuation">:</span> <span class="token string">'./bar.js'</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">,</span>    output<span class="token punctuation">:</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        filename<span class="token punctuation">:</span> <span class="token string">"[name].js"</span><span class="token punctuation">,</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// foo .js</span><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>document<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">'foo.js'</span><span class="token punctuation">,</span> React<span class="token punctuation">.</span>version<span class="token punctuation">)</span> <span class="token punctuation">;</span><span class="token comment" spellcheck="true">// bar.js</span><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>document<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">'bar.js'</span><span class="token punctuation">,</span> React<span class="token punctuation">.</span>version<span class="token punctuation">)</span> <span class="token punctuation">;</span></code></pre><p>打包后会有两个资源文件 foo.js 和 bar.js，大小都为73.1KB。</p><p>使用CommonsChunkPlugin的配置如下：</p><pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">//webpack.config.js</span><span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    entry<span class="token punctuation">:</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        foo<span class="token punctuation">:</span> <span class="token string">'./foo.js'</span><span class="token punctuation">,</span>        bar<span class="token punctuation">:</span> <span class="token string">'. /bar.js'</span><span class="token punctuation">,</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">,</span>    output<span class="token punctuation">:</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        filename<span class="token punctuation">:</span> <span class="token string">'[name].js'</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">,</span>    plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>        <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>optimize<span class="token punctuation">.</span>commonsChunkPlugin</span> <span class="token punctuation">(</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>            name<span class="token punctuation">:</span> <span class="token string">'commons'</span><span class="token punctuation">,</span>            filename<span class="token punctuation">:</span> <span class="token string">'commons.js'</span>        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">)</span>    <span class="token punctuation">]</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">;</span></code></pre><p>webpack打包后会有三个资源文件，分别是foo.js、bar.js和commons.js，foo.js和bar.js从73.1KB的大小将为不到1KB，而common.js的大小则为73KB。<br>最后，需要在页面中添加一个script标签来引入commons.js，并且注意，该JS一定要在其他JS之前引入。</p><h4 id="异步资源"><a href="#异步资源" class="headerlink" title="异步资源"></a>异步资源</h4><p>ES6规定 import 只能出现在代码开头，而webpack提供了 import函数来异步加载模块，如：</p><pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">//ES6 Modules</span><span class="token keyword">import</span> bar <span class="token keyword">from</span> <span class="token string">'./bar.js'</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>bar<span class="token punctuation">)</span><span class="token comment" spellcheck="true">//webpack</span>document<span class="token punctuation">.</span><span class="token function">getElementByTagName</span><span class="token punctuation">(</span><span class="token string">'body'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>onclick <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'./bar.js'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>b <span class="token operator">=</span><span class="token operator">></span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>bar<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span></code></pre><p>webpack打包时将会为 bar.js 及其依赖树生成一个资源文件一般是0.js（有更多的异步资源的话序号依次递增），在点击页面时webpack会生成一个script标签（src属性为0.js）并插入到head标签中。</p><p>如果要指定异步资源的名称，需要用到webpack的特殊注释，如：</p><pre class=" language-javascript"><code class="language-javascript">document<span class="token punctuation">.</span><span class="token function">getElementByTagName</span><span class="token punctuation">(</span><span class="token string">'body'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>onclick <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token comment" spellcheck="true">/* webpackchunkName : "bar" */</span> <span class="token string">'./bar.js'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>b <span class="token operator">=</span><span class="token operator">></span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>bar<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span></code></pre><h3 id="代码压缩"><a href="#代码压缩" class="headerlink" title="代码压缩"></a>代码压缩</h3><p>压缩JavaScript</p><pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">// webpack version &lt; 4</span><span class="token keyword">const</span> webpack <span class="token operator">=</span> require <span class="token punctuation">(</span><span class="token string">'webpack'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    entry<span class="token punctuation">:</span> <span class="token string">'./app.js'</span><span class="token punctuation">,</span>    output<span class="token punctuation">:</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        filename<span class="token punctuation">:</span> <span class="token string">'bundle.js'</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span> <span class="token punctuation">,</span>    plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>optimize<span class="token punctuation">.</span>uglifyJsPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// webpack >= 4</span>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    entry<span class="token punctuation">:</span> <span class="token string">'./app.js '</span><span class="token punctuation">,</span>    output<span class="token punctuation">:</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        filename<span class="token punctuation">:</span> <span class="token string">'bundle.js'</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">,</span>    optimization<span class="token punctuation">:</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        minimize<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">,</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">;</span></code></pre><p>压缩CSS</p><p>压缩CSS文件的前提是使用<code>extract-text-webpack-plugin</code>或<code>mini-css-extract-plugin</code>将样式提取出来，接着使用<code>optimize-css-assets-webpack-plugin</code>来进行压缩，这个插件本质上使用的是压缩器<code>cssnano</code>，当然我们也可以通过其配置进行切换。具体请看下面的例子:</p><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">const</span> ExtractTextPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span> <span class="token string">'extract-text-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">const</span> OptimizeCSSAssetsPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'optimize-css-assets-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">// ...</span>    module<span class="token punctuation">:</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>            <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>                test<span class="token punctuation">:</span> <span class="token regex">/\.css$/</span><span class="token punctuation">,</span>                use<span class="token punctuation">:</span> ExtractTextPlugin<span class="token punctuation">.</span><span class="token function">extract</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>                    fallback<span class="token punctuation">:</span> <span class="token string">'style-loader'</span><span class="token punctuation">,</span>use<span class="token punctuation">:</span> <span class="token string">'css-loader'</span><span class="token punctuation">,</span>                <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">)</span> <span class="token punctuation">,</span>            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>        <span class="token punctuation">]</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">,</span>    plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token keyword">new</span> <span class="token class-name">ExtractTextPlugin</span><span class="token punctuation">(</span><span class="token string">'style.css'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>    optimization<span class="token punctuation">:</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        minimizer <span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token keyword">new</span> <span class="token class-name">OptimizeCSSAssetsPlugin</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">//生效范围，只压缩匹配到的资源</span>            assetNameRegExp<span class="token punctuation">:</span> <span class="token regex">/\.optimize\.css$/g</span><span class="token punctuation">,</span>            <span class="token comment" spellcheck="true">//压缩处理器，默认为cssnano</span>            cssProcessor<span class="token punctuation">:</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'cssnano'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            <span class="token comment" spellcheck="true">//压缩处理器的配置</span>            cssProcessorOptions<span class="token punctuation">:</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>                discardcomments<span class="token punctuation">:</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span> removeAll<span class="token punctuation">:</span> <span class="token boolean">true</span> <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">,</span>            <span class="token comment" spellcheck="true">//是否展示log</span>            canPrint <span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span></code></pre><h3 id="打包优化"><a href="#打包优化" class="headerlink" title="打包优化"></a>打包优化</h3><p>HappyPack是一个通过<code>多线程</code>来提升Webpack打包速度的工具。HappyPack 可以显著地缩短打包时间。首先让我们了解一下它是如何工作的：</p><pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">const</span> HappyPack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'happypack'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//...</span>    module<span class="token punctuation">:</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>            <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>                test <span class="token punctuation">:</span> <span class="token regex">/\.js$/</span><span class="token punctuation">,</span>                exclude<span class="token punctuation">:</span> <span class="token regex">/node_modules/</span> <span class="token punctuation">,</span>                loader <span class="token punctuation">:</span> <span class="token string">'happypack/loader?id=js'</span>            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">,</span>            <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>                test <span class="token punctuation">:</span> <span class="token regex">/\.ts$/</span><span class="token punctuation">,</span>                exclude<span class="token punctuation">:</span> <span class="token regex">/node_modules/</span><span class="token punctuation">,</span>                loader<span class="token punctuation">:</span> <span class="token string">'happypack/loader?id=ts'</span><span class="token punctuation">,</span>            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>        <span class="token punctuation">]</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">,</span>    plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>        <span class="token keyword">new</span> <span class="token class-name">HappyPack</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>            id<span class="token punctuation">:</span> <span class="token string">'js'</span><span class="token punctuation">,</span>            loaders<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>                loader<span class="token punctuation">:</span> <span class="token string">'babel-loader'</span><span class="token punctuation">,</span>                options<span class="token punctuation">:</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//babel options</span>            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span> <span class="token punctuation">]</span><span class="token punctuation">,</span>        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>        <span class="token keyword">new</span> <span class="token class-name">HappyPack</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>            id<span class="token punctuation">:</span> <span class="token string">'ts'</span><span class="token punctuation">,</span>            loaders<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>                loader<span class="token punctuation">:</span> <span class="token string">'ts-loader'</span><span class="token punctuation">,</span>                options<span class="token punctuation">:</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//ts options</span>            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">]</span>        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">)</span>    <span class="token punctuation">]</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">;</span></code></pre><p>在使用多个HappyPack loader的同时也就意味着要插入多个HappyPack的插件，每个插件加上 id 来作为标识。同时我们也可以为每个插件设置具体不同的配置项，如使用的线程数、是否开启 debug模式等。</p><h1 id="Webpack面试题"><a href="#Webpack面试题" class="headerlink" title="Webpack面试题"></a>Webpack面试题</h1><h2 id="source-map是什么？生产环境怎么用？"><a href="#source-map是什么？生产环境怎么用？" class="headerlink" title="source map是什么？生产环境怎么用？"></a>source map是什么？生产环境怎么用？</h2><p><code>source map</code> 是将编译、打包、压缩后的代码映射回源代码的过程。打包压缩后的代码不具备良好的可读性，想要调试源码就需要 soucre map。</p><p>map文件只要不打开开发者工具，浏览器是不会加载的。</p><p>线上环境一般有三种处理方案：</p><ul><li><code>hidden-source-map</code>：借助第三方错误监控平台 Sentry 使用</li><li><code>nosources-source-map</code>：只会显示具体行数以及查看源代码的错误栈。安全性比 sourcemap 高</li><li><code>sourcemap</code>：通过 nginx 设置将 .map 文件只对白名单开放(公司内网)</li></ul><p>注意：避免在生产中使用 <code>inline-</code> 和 <code>eval-</code>，因为它们会增加 bundle 体积大小，并降低整体性能。</p><h2 id="Webpack-的热更新原理"><a href="#Webpack-的热更新原理" class="headerlink" title="Webpack 的热更新原理"></a>Webpack 的热更新原理</h2><p><code>Webpack</code> 的热更新又称热替换（<code>Hot Module Replacement</code>），缩写为 <code>HMR</code>。 这个机制可以做到不用刷新浏览器而将新变更的模块替换掉旧的模块。</p><p>HMR相比于live-server的优势是可以保存状态。</p><p>HMR的核心就是客户端从服务端拉去更新后的文件，准确的说是 chunk diff (chunk 需要更新的部分)，实际上 WDS （webpack-dev-server）与浏览器之间维护了一个 <code>Websocket</code>，当本地资源发生变化时，WDS 会向浏览器推送更新，并带上构建时的 hash，让客户端与上一次资源进行对比。客户端对比出差异后会向 WDS 发起 <code>Ajax</code> 请求来获取更改内容(文件列表、hash)，这样客户端就可以再借助这些信息继续向 WDS 发起 <code>jsonp</code> 请求获取该chunk的增量更新。</p><p>后续的部分(拿到增量更新之后如何处理？哪些状态该保留？哪些又需要更新？)由 <code>HotModulePlugin</code> 来完成，提供了相关 API 以供开发者针对自身场景进行处理，像<code>react-hot-loader</code> 和 <code>vue-loader</code> 都是借助这些 API 实现 HMR。</p><h2 id="Webpack构建流程简单说一下"><a href="#Webpack构建流程简单说一下" class="headerlink" title="Webpack构建流程简单说一下"></a>Webpack构建流程简单说一下</h2><p>Webpack 的运行流程是一个串行的过程，从启动到结束会依次执行以下流程：</p><ul><li><code>初始化参数</code>：从配置文件和 Shell 语句中读取与合并参数，得出最终的参数</li><li><code>开始编译</code>：用上一步得到的参数初始化 Compiler 对象，加载所有配置的插件，执行对象的 run 方法开始执行编译</li><li><code>确定入口</code>：根据配置中的 entry 找出所有的入口文件</li><li><code>编译模块</code>：从入口文件出发，调用所有配置的 Loader 对模块进行翻译，再找出该模块依赖的模块，再递归本步骤直到所有入口依赖的文件都经过了本步骤的处理</li><li><code>完成模块编译</code>：在经过第4步使用 Loader 翻译完所有模块后，得到了每个模块被翻译后的最终内容以及它们之间的依赖关系</li><li><code>输出资源</code>：根据入口和模块之间的依赖关系，组装成一个个包含多个模块的 Chunk，再把每个 Chunk 转换成一个单独的文件加入到输出列表，这步是可以修改输出内容的最后机会</li><li><code>输出完成</code>：在确定好输出内容后，根据配置确定输出的路径和文件名，把文件内容写入到文件系统</li></ul><p>在以上过程中，<code>Webpack</code> 会在特定的时间点广播出特定的事件，插件在监听到感兴趣的事件后会执行特定的逻辑，并且插件可以调用 Webpack 提供的 API 改变 Webpack 的运行结果。</p><h2 id="Loader和Plugin的区别？"><a href="#Loader和Plugin的区别？" class="headerlink" title="Loader和Plugin的区别？"></a>Loader和Plugin的区别？</h2><p><code>Loader</code> 本质就是一个函数，在该函数中对接收到的内容进行转换，返回转换后的结果。 因为 Webpack 只认识 JavaScript，所以 Loader 就成了翻译官，对其他类型的资源进行转译的预处理工作。</p><p><code>Plugin</code> 就是插件，基于事件流框架 <code>Tapable</code>，插件可以扩展 Webpack 的功能，在 Webpack 运行的生命周期中会广播出许多事件，Plugin 可以监听这些事件，在合适的时机通过 Webpack 提供的 API 改变输出结果。</p><p><code>Loader</code> 在 module.rules 中配置，作为模块的解析规则，类型为数组。每一项都是一个 Object，内部包含了 test(类型文件)、loader、options (参数)等属性。</p><p><code>Plugin</code> 在 plugins 中单独配置，类型为数组，每一项是一个 Plugin 的实例，参数都通过构造函数传入。</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>CSS3flex布局知识点</title>
      <link href="/2022/07/29/css3flex-bu-ju-zhi-shi-dian/"/>
      <url>/2022/07/29/css3flex-bu-ju-zhi-shi-dian/</url>
      
        <content type="html"><![CDATA[<h3 id="flex布局的特点"><a href="#flex布局的特点" class="headerlink" title="flex布局的特点"></a>flex布局的特点</h3><p>操作方便，布局极为简单，移动端应用很广泛</p><p>PC端浏览器支持情况较差</p><p>IE 11或更低版本，不支持或仅部分支持</p><h3 id="flex布局原理"><a href="#flex布局原理" class="headerlink" title="flex布局原理"></a>flex布局原理</h3><p>弹性布局，块级元素和行级元素都可以指定为flex布局</p><p>当父盒子设为flex布局后，子元素的float、clear和vertical-align属性将失效</p><p>原理：通过给父盒子添加flex属性，来控制子盒子的位置和排列方式</p><h3 id="父项常见属性"><a href="#父项常见属性" class="headerlink" title="父项常见属性"></a>父项常见属性</h3><p>flex-direction：设置主轴的方向</p><p>justify-content：设置主轴的子元素排列方式</p><p>flex-wrap：设置子元素是否换行</p><p>align-content:设置侧轴上的子元素的排列方式（多行）</p><p>align-item：设置侧轴上的子元素的排序方式（单行）</p><p>flex-flow：复合属性，相当于同时设置了flex-direction和flex-wrap</p><h4 id="flex-direction"><a href="#flex-direction" class="headerlink" title="flex-direction"></a>flex-direction</h4><p>属性值决定主轴的方向</p><p>主轴和侧轴是会变化的，就看flex-direction设置谁为主轴，剩下的就是侧轴；</p><table><thead><tr><th>属性值</th><th>说明</th></tr></thead><tbody><tr><td>row</td><td>默认从左到右</td></tr><tr><td>row-reverse</td><td>从右到左</td></tr><tr><td>column</td><td>从上到下</td></tr><tr><td>column-reverse</td><td>从下到上</td></tr></tbody></table><h4 id="justify-content"><a href="#justify-content" class="headerlink" title="justify-content"></a>justify-content</h4><p>设置主轴上的子元素排列方式</p><p>要先确认主轴是哪个</p><table><thead><tr><th>属性值</th><th>说明</th></tr></thead><tbody><tr><td>flex-start</td><td>默认值 从头开始 如果主轴是x轴，则从左到右</td></tr><tr><td>flex-end</td><td>从尾部开始排序</td></tr><tr><td>center</td><td>在主轴居中对齐</td></tr><tr><td>space-around</td><td>平分剩余空间</td></tr><tr><td>space-between</td><td>先两边贴边，再平分剩余空间</td></tr></tbody></table><h4 id="flex-wrap"><a href="#flex-wrap" class="headerlink" title="flex-wrap"></a>flex-wrap</h4><p>设置子元素是否换行</p><p>默认情况下，flex项目都排在一条线上，flex-wrap属性定义，flex布局默认是不换行的，如果撞不开，会缩小子元素的宽度</p><table><thead><tr><th>属性值</th><th>说明</th></tr></thead><tbody><tr><td>nowrap</td><td>默认值，不换行</td></tr><tr><td>wrap</td><td>换行</td></tr></tbody></table><h4 id="align-items"><a href="#align-items" class="headerlink" title="align-items"></a>align-items</h4><p>设置侧轴上的子元素的排列方式（单行）</p><table><thead><tr><th>属性值</th><th>说明</th></tr></thead><tbody><tr><td>flex-start</td><td>默认值 从上到下</td></tr><tr><td>flex-end</td><td>从下到上</td></tr><tr><td>center</td><td>挤在一起居中</td></tr><tr><td>stretch</td><td>拉伸</td></tr></tbody></table><h4 id="align-content"><a href="#align-content" class="headerlink" title="align-content"></a>align-content</h4><p>设置侧轴上的子元素的排列方式（多行）</p><p>设置子项再侧轴上的排列方式并且只能用于子项出现换行的情况，在单行下是没有效果的</p><table><thead><tr><th>属性值</th><th>说明</th></tr></thead><tbody><tr><td>flex-start</td><td>默认值在侧轴的头部开始排列</td></tr><tr><td>flex-end</td><td>在侧轴的尾部开始排列</td></tr><tr><td>center</td><td>在侧轴中间显示</td></tr><tr><td>space-around</td><td>子项在侧轴平分剩余空间</td></tr><tr><td>space-between</td><td>子项在侧轴先分布两头，在平分剩余空间</td></tr><tr><td>stretch</td><td>设置子元素高度平分父元素高度</td></tr></tbody></table><h5 id="align-content和align-items区别"><a href="#align-content和align-items区别" class="headerlink" title="align-content和align-items区别"></a>align-content和align-items区别</h5><p>align-items适用于单行情况下，只有上对齐、下对齐、居中和拉伸</p><p>align-content适用于多行情况下，可以设置上对齐、下对齐、居中、拉伸以及平均分配剩余空间等属性值</p><h4 id="flex-flow"><a href="#flex-flow" class="headerlink" title="flex-flow"></a>flex-flow</h4><p>复合属性，相当于同时设置了flex-direction和flex-wrap</p><pre><code>flex-flow：row wrap;</code></pre><h3 id="子项常见属性"><a href="#子项常见属性" class="headerlink" title="子项常见属性"></a>子项常见属性</h3><p>flex子项目占的份数</p><p>align——self控制子项自己在侧轴的排列方式</p><p>order属性定义子项的排列顺序</p><h4 id="flex属性"><a href="#flex属性" class="headerlink" title="flex属性"></a>flex属性</h4><p>定义子项目分配剩余空间，用flex来表示占多少份数</p><h4 id="align-self"><a href="#align-self" class="headerlink" title="align-self"></a>align-self</h4><p> 控制子项自己在侧轴上的排列方式</p><p>align-self属性允许单个项目有与其他项目不一样的对齐方式，可覆盖align-items属性。默认值是auto，表示继承父元素的align-items属性，如果没有父元素，则等同于stretch</p><h4 id="order"><a href="#order" class="headerlink" title="order"></a>order</h4><p>定义项目的排列顺序</p><p>数值越小，排列越靠前，默认为0</p><h4 id="flex：1"><a href="#flex：1" class="headerlink" title="flex：1"></a>flex：1</h4><p>flex属性 是 flex-grow、flex-shrink、flex-basis三个属性的缩写。</p><p>推荐使用此简写属性，而不是单独写这三个属性。</p><p>flex-grow 可拉伸 </p><p>flex-shrink 可收缩</p><p>flex-basis 当前元素的宽度</p><p>flex默认值：flex-grow：0flex-shrink：1flex-basis：auto</p><p>flex：1flex-grow：1flex-shrink：1flex-basis：0%</p><p>flex：auto flex-grow：1flex-shrink：1flex-basis：auto</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>组件高级通信</title>
      <link href="/2022/05/07/zu-jian-gao-ji-tong-xin/"/>
      <url>/2022/05/07/zu-jian-gao-ji-tong-xin/</url>
      
        <content type="html"><![CDATA[<h3 id="第一种：props"><a href="#第一种：props" class="headerlink" title="第一种：props"></a>第一种：props</h3><p>适用于的场景：父子组件通信</p><p>注意事项：如果父组件给子组件传递数据（函数），本质是子组件给父组件传递数据</p><p>如果父组件给子组件传递数据（非函数），本质是父组件给子组件传递数据</p><p>三种书写方式：</p><ol><li><p>第一种方式（只接收）：<code>props:[&#39;name&#39;] </code></p></li><li><p>第二种方式（限制类型）：<code>props:&#123;name:String&#125;</code></p></li><li><p>第三种方式（限制类型、限制必要性、指定默认值）：</p><pre class=" language-js"><code class="language-js">props<span class="token punctuation">:</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    name<span class="token punctuation">:</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    type<span class="token punctuation">:</span>String<span class="token punctuation">,</span> <span class="token comment" spellcheck="true">//类型</span>    required<span class="token punctuation">:</span><span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">//必要性</span>    <span class="token keyword">default</span><span class="token punctuation">:</span><span class="token string">'老王'</span> <span class="token comment" spellcheck="true">//默认值</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span></code></pre></li></ol><blockquote><p>备注：props是只读的，Vue底层会监测你对props的修改，如果进行了修改，就会发出警告，若业务需求确实需要修改，那么请复制props的内容到data中一份，然后去修改data中的数据。</p></blockquote><h3 id="第二种：自定义事件"><a href="#第二种：自定义事件" class="headerlink" title="第二种：自定义事件"></a>第二种：自定义事件</h3><p>适用于场景：子组件给父组件传递数据</p><p>$on与$emit</p><h3 id="第三种：全局事件总线"><a href="#第三种：全局事件总线" class="headerlink" title="第三种：全局事件总线"></a>第三种：全局事件总线</h3><p>适用于场景：万能</p><p>Vue.prototype.$bus &#x3D; this;</p><h3 id="第四种：pubsub-js，在React框架中使用比较多"><a href="#第四种：pubsub-js，在React框架中使用比较多" class="headerlink" title="第四种：pubsub-js，在React框架中使用比较多"></a>第四种：pubsub-js，在React框架中使用比较多</h3><p>适用于场景：万能</p><h3 id="第五种：Vuex"><a href="#第五种：Vuex" class="headerlink" title="第五种：Vuex"></a>第五种：Vuex</h3><p>使用场景：万能</p><h3 id="第六种：插槽"><a href="#第六种：插槽" class="headerlink" title="第六种：插槽"></a>第六种：插槽</h3><p>适用于场景：父子组件通信（标签的父子关系）</p><p>默认插槽，具名插槽，作用域插槽</p><h4 id="事件的注意事项："><a href="#事件的注意事项：" class="headerlink" title="事件的注意事项："></a>事件的注意事项：</h4><p>事件：系统事件 click、双击、鼠标系列等等</p><p>​自定义事件</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>函数防抖</title>
      <link href="/2022/05/07/han-shu-fang-dou-yu-jie-liu/"/>
      <url>/2022/05/07/han-shu-fang-dou-yu-jie-liu/</url>
      
        <content type="html"><![CDATA[<p>防抖：前面的所有的触发都被取消，最后一次执行，在规定的时间之后才会被触发，也就是说如果连续快速的触发，只会执行一次(_.debounce)</p><p>节流：在规定的间隔时间范围内不会重复触发回调，只有大于这个时间间隔才会触发回调，把频繁触发变为少量触发（_.throttle）</p><p>引入lodash插件：里面封装函数的防抖和节流业务【闭包+延迟器】</p><p>lodash函数对外暴露_函数</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>TypeScript</title>
      <link href="/2022/05/07/typescript/"/>
      <url>/2022/05/07/typescript/</url>
      
        <content type="html"><![CDATA[<h2 id="1-基本类型"><a href="#1-基本类型" class="headerlink" title="1.基本类型"></a>1.基本类型</h2><p>1.类型声明</p><p>类型声明是TS非常重要的一个特点</p><p>通过类型声明可以指定TS中变量（参数、形参）的类型</p><p>指定类型之后，当为变量赋值时，TS编译器会自动检查值是否复合类型声明，符合则赋值，否则报错</p><p>简而言之，类型声明给变量设置了类型，使得变量只能存储某种类型的值</p><p>语法</p><pre class=" language-typescript"><code class="language-typescript"><span class="token keyword">let</span> a<span class="token punctuation">:</span><span class="token keyword">number</span><span class="token punctuation">;</span><span class="token keyword">let</span> a<span class="token punctuation">:</span><span class="token keyword">number</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token keyword">function</span> <span class="token function">sum</span><span class="token punctuation">(</span>a<span class="token punctuation">:</span><span class="token keyword">number</span><span class="token punctuation">,</span>b<span class="token punctuation">:</span><span class="token keyword">number</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token keyword">number</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span></code></pre><p>2.自动类型判断</p><p>TS具有自动类型判断机制</p><p>当对变量的声明和赋值是同时进行的，TS编译器会自动判断变量的类型</p><p>所以当变量的声明和赋值同时进行的话，可以省略类型声明</p><p>3.类型</p><table><thead><tr><th>类型</th><th>例子</th><th>描述</th></tr></thead><tbody><tr><td>number</td><td>1,33</td><td>任意数字</td></tr><tr><td>string</td><td>‘hi’</td><td>任意字符串</td></tr><tr><td>boolean</td><td>true,false</td><td>布尔值</td></tr><tr><td>字面量</td><td>let b:boolean:string</td><td>限制的变量的值就是该字面量的值</td></tr><tr><td>any</td><td></td><td>任意类型</td></tr><tr><td>unknown</td><td></td><td>未知的</td></tr><tr><td>void</td><td>空值（undefined）</td><td>没有值或者undefined</td></tr><tr><td>never</td><td>没有值</td><td>不能是任何值（函数体抛出异常）</td></tr><tr><td>object</td><td>{name:’孙悟空’}</td><td>任意的JS对象</td></tr><tr><td>array</td><td>[1,2,3]</td><td>任意的JS数组</td></tr><tr><td>tuple</td><td>[4,5]</td><td>元素，TS新增类型，固定长度数组</td></tr><tr><td>enum</td><td>enum{A,B}</td><td>枚举，TS中新增类型</td></tr></tbody></table><p>类型断言</p><p>语法：</p><p>1.变量 as 类型</p><p>2.&lt;类型&gt;变量</p><p>数组的类型声明</p><p>1.类型[]</p><p>2.Array&lt;类型&gt;</p><h2 id="2-编译选项"><a href="#2-编译选项" class="headerlink" title="2.编译选项"></a>2.编译选项</h2><h3 id="自动编译文件"><a href="#自动编译文件" class="headerlink" title="自动编译文件"></a>自动编译文件</h3><p>编译文件时，使用 -w 指令后，TS编译器会自动监视文件的变化，并在文件发生变化时对文件进行重新编译。</p><p>示例：</p><pre><code>  tsc xxx.ts -w</code></pre><h3 id="自动编译整个项目"><a href="#自动编译整个项目" class="headerlink" title="自动编译整个项目"></a>自动编译整个项目</h3><p>如果直接使用tsc指令，则可以自动将当前项目下的所有ts文件编译为js文件。</p><p><strong>但是能直接使用tsc命令的前提时，要先在项目根目录下创建一个ts的配置文件 tsconfig.json</strong></p><p>tsconfig.json是一个JSON文件，添加配置文件后，只需只需 tsc 命令即可完成对整个项目的编译</p><p>配置选项：</p><h4 id="include"><a href="#include" class="headerlink" title="include"></a><strong>include</strong></h4><ul><li>定义希望被编译文件所在的目录</li><li>默认值：[“**&#x2F;*”]</li></ul><p>示例：</p><pre><code>  &quot;include&quot;:[&quot;src/**/*&quot;, &quot;tests/**/*&quot;]</code></pre><p>上述示例中，所有src目录和tests目录下的文件都会被编译</p><h4 id="exclude"><a href="#exclude" class="headerlink" title="exclude"></a><strong>exclude</strong></h4><ul><li>定义需要排除在外的目录</li><li>默认值：[“node_modules”, “bower_components”, “jspm_packages”]</li></ul><p>示例：</p><pre><code>  &quot;exclude&quot;: [&quot;./src/hello/**/*&quot;]</code></pre><p>上述示例中，src下hello目录下的文件都不会被编译</p><h4 id="extends"><a href="#extends" class="headerlink" title="extends"></a><strong>extends</strong></h4><ul><li>定义被继承的配置文件</li></ul><p>示例：</p><pre><code>&quot;extends&quot;: &quot;./configs/base&quot;</code></pre><p>上述示例中，当前配置文件中会自动包含config目录下base.json中的所有配置信息</p><h4 id="files"><a href="#files" class="headerlink" title="files"></a><strong>files</strong></h4><ul><li>指定被编译文件的列表，<strong>只有需要编译的文件少时才会用到</strong></li></ul><p>示例：</p><pre><code>&quot;files&quot;: [    &quot;core.ts&quot;,    &quot;sys.ts&quot;,    &quot;types.ts&quot;,    &quot;scanner.ts&quot;,    &quot;parser.ts&quot;,    &quot;utilities.ts&quot;,    &quot;binder.ts&quot;,    &quot;checker.ts&quot;,    &quot;tsc.ts&quot;  ]</code></pre><ul><li>列表中的文件都会被TS编译器所编译</li></ul><h4 id="compilerOptions"><a href="#compilerOptions" class="headerlink" title="compilerOptions"></a>compilerOptions</h4><ul><li>编译选项是配置文件中非常重要也比较复杂的配置选项</li><li>在compilerOptions中包含多个子选项，用来完成对编译的配置</li></ul><p>项目选项：</p><ul><li><p>target</p><ul><li><p>设置ts代码编译的目标版本</p></li><li><p>可选值：</p><ul><li>ES3（默认）、ES5、ES6&#x2F;ES2015、ES7&#x2F;ES2016、ES2017、ES2018、ES2019、ES2020、ESNext</li></ul></li><li><p>示例：</p><ul><li><pre><code>&quot;compilerOptions&quot;: &#123;    &quot;target&quot;: &quot;ES6&quot;&#125;</code></pre></li></ul></li><li><p>如上设置，我们所编写的ts代码将会被编译为ES6版本的js代码</p></li></ul></li><li><p>lib</p><ul><li><p>指定代码运行时所包含的库（宿主环境）</p></li><li><p>可选值：</p><ul><li>ES5、ES6&#x2F;ES2015、ES7&#x2F;ES2016、ES2017、ES2018、ES2019、ES2020、ESNext、DOM、WebWorker、ScriptHost ……</li></ul></li><li><p>示例：</p><ul><li><pre><code>&quot;compilerOptions&quot;: &#123;    &quot;target&quot;: &quot;ES6&quot;,    &quot;lib&quot;: [&quot;ES6&quot;, &quot;DOM&quot;],    &quot;outDir&quot;: &quot;dist&quot;,    &quot;outFile&quot;: &quot;dist/aa.js&quot;&#125;</code></pre></li></ul></li></ul></li><li><p>module</p><ul><li><p>设置编译后代码使用的模块化系统</p></li><li><p>可选值：</p><ul><li>CommonJS、UMD、AMD、System、ES2020、ESNext、None</li></ul></li><li><p>示例：</p><ul><li><pre><code>&quot;compilerOptions&quot;: &#123;    &quot;module&quot;: &quot;CommonJS&quot;&#125;</code></pre></li></ul></li></ul></li><li><p>outDir</p><ul><li><p>编译后文件的所在目录</p></li><li><p>默认情况下，编译后的js文件会和ts文件位于相同的目录，设置outDir后可以改变编译后文件的位置</p></li><li><p>示例：</p><ul><li><pre><code>&quot;compilerOptions&quot;: &#123;    &quot;outDir&quot;: &quot;dist&quot;&#125;</code></pre></li><li><p>设置后编译后的js文件将会生成到dist目录</p></li></ul></li></ul></li><li><p>outFile</p><ul><li><p>将所有的文件编译为一个js文件</p></li><li><p>默认会将所有的编写在全局作用域中的代码合并为一个js文件，如果module制定了None、System或AMD则会将模块一起合并到文件之中</p></li><li><p>示例：</p><ul><li><pre><code>&quot;compilerOptions&quot;: &#123;    &quot;outFile&quot;: &quot;dist/app.js&quot;&#125;</code></pre></li></ul></li></ul></li><li><p>rootDir</p><ul><li><p>指定代码的根目录，默认情况下编译后文件的目录结构会以最长的公共目录为根目录，通过rootDir可以手动指定根目录</p></li><li><p>示例：</p><ul><li><pre><code>&quot;compilerOptions&quot;: &#123;    &quot;rootDir&quot;: &quot;./src&quot;&#125;</code></pre></li></ul></li></ul></li><li><p>allowJs</p><ul><li>是否对js文件编译</li></ul></li><li><p>checkJs</p><ul><li><p>是否对js文件进行检查</p></li><li><p>示例：</p><ul><li><pre><code>&quot;compilerOptions&quot;: &#123;    &quot;allowJs&quot;: true,    &quot;checkJs&quot;: true&#125;</code></pre></li></ul></li></ul></li><li><p>removeComments</p><ul><li>是否删除注释</li><li>默认值：false</li></ul></li><li><p>noEmit</p><ul><li>不对代码进行编译</li><li>默认值：false</li></ul></li><li><p>sourceMap</p><ul><li>是否生成sourceMap</li><li>默认值：false</li></ul></li><li><p>严格检查</p><ul><li>strict<ul><li>启用所有的严格检查，默认值为true，设置后相当于开启了所有的严格检查</li></ul></li><li>alwaysStrict<ul><li>总是以严格模式对代码进行编译</li></ul></li><li>noImplicitAny<ul><li>禁止隐式的any类型</li></ul></li><li>noImplicitThis<ul><li>禁止类型不明确的this</li></ul></li><li>strictBindCallApply<ul><li>严格检查bind、call和apply的参数列表</li></ul></li><li>strictFunctionTypes<ul><li>严格检查函数的类型</li></ul></li><li>strictNullChecks<ul><li>严格的空值检查</li></ul></li><li>strictPropertyInitialization<ul><li>严格检查属性是否初始化</li></ul></li></ul></li><li><p>额外检查</p><ul><li>noFallthroughCasesInSwitch<ul><li>检查switch语句包含正确的break</li></ul></li><li>noImplicitReturns<ul><li>检查函数没有隐式的返回值</li></ul></li><li>noUnusedLocals<ul><li>检查未使用的局部变量</li></ul></li><li>noUnusedParameters<ul><li>检查未使用的参数</li></ul></li></ul></li><li><p>高级</p><ul><li>allowUnreachableCode<ul><li>检查不可达代码</li><li>可选值：<ul><li>true，忽略不可达代码</li><li>false，不可达代码将引起错误</li></ul></li></ul></li><li>noEmitOnError<ul><li>有错误的情况下不进行编译</li><li>默认值：false</li></ul></li></ul></li></ul><h2 id="面向对象"><a href="#面向对象" class="headerlink" title="面向对象"></a>面向对象</h2><p>要想面向对象，操作对象，首先便要拥有对象；</p><p>要创建对象，必须要先定义类，所谓的类可以理解为对象的模型；</p><p>程序中可以根据类创建指定类型的对象；</p><p>举例来说：</p><p>可以通过Person类来创建人的对象，通过Dog类创建狗的对象，不同的类可以用来创建不同的对象；</p><h3 id="定义类"><a href="#定义类" class="headerlink" title="定义类"></a>定义类</h3><pre><code>class 类名 &#123;    属性名: 类型;        constructor(参数: 类型)&#123;        this.属性名 = 参数;    &#125;        方法名()&#123;        ....    &#125;&#125;</code></pre><p>示例：</p><pre><code>    class Person&#123;        name: string;        age: number;            constructor(name: string, age: number)&#123;            this.name = name;            this.age = age;        &#125;            sayHello()&#123;            console.log(`大家好，我是$&#123;this.name&#125;`);        &#125;    &#125;</code></pre><p>使用类：</p><pre><code>const p = new Person(&#39;孙悟空&#39;, 18);p.sayHello();</code></pre><h3 id="构造函数"><a href="#构造函数" class="headerlink" title="构造函数"></a>构造函数</h3><p>可以使用<code>constructor</code>定义一个构造器方法；</p><blockquote><p><strong>注1：在TS中只能有一个构造器方法！</strong></p></blockquote><p>例如：</p><pre><code>class C&#123;    name: string;    age: number    constructor(name: string, age: number) &#123;        this.name = name;        this.age = age;    &#125;&#125;</code></pre><p>同时也可以直接将属性定义在构造函数中：</p><pre><code>class C &#123;    constructor(public name: string, public age: number) &#123;    &#125;&#125;</code></pre><p>上面两种定义方法是完全相同的！</p><p><strong>注2：子类继承父类时，必须调用父类的构造方法（如果子类中也定义了构造方法）！</strong></p><p>例如：</p><pre><code>class A &#123;    protected num: number;    constructor(num: number) &#123;        this.num = num;    &#125;&#125;class X extends A &#123;    protected name: string;    constructor(num: number, name: string) &#123;        super(num);        this.name = name;    &#125;&#125;</code></pre><p>如果在X类中不调用<code>super</code>将会报错！</p><h3 id="封装"><a href="#封装" class="headerlink" title="封装"></a>封装</h3><p>对象实质上就是属性和方法的容器，它的主要作用就是存储属性和方法，这就是所谓的封装</p><p>默认情况下，对象的属性是可以任意的修改的，为了确保数据的安全性，在TS中可以对属性的权限进行设置</p><ul><li>静态属性（static）：<ul><li>声明为static的属性或方法不再属于实例，而是属于类的属性；</li></ul></li><li>只读属性（readonly）：<ul><li>如果在声明属性时添加一个readonly，则属性便成了只读属性无法修改</li></ul></li><li>TS中属性具有三种修饰符：<ul><li>public（默认值），可以在类、子类和对象中修改</li><li>protected ，可以在类、子类中修改</li><li>private ，可以在类中修改</li></ul></li></ul><p>示例：</p><p>public：</p><pre><code>class Person&#123;    public name: string; // 写或什么都不写都是public    public age: number;    constructor(name: string, age: number)&#123;        this.name = name; // 可以在类中修改        this.age = age;    &#125;    sayHello()&#123;        console.log(`大家好，我是$&#123;this.name&#125;`);    &#125;&#125;class Employee extends Person&#123;    constructor(name: string, age: number)&#123;        super(name, age);        this.name = name; //子类中可以修改    &#125;&#125;const p = new Person(&#39;孙悟空&#39;, 18);p.name = &#39;猪八戒&#39;;// 可以通过对象修改</code></pre><p>protected：</p><pre><code>class Person&#123;    protected name: string;    protected age: number;    constructor(name: string, age: number)&#123;        this.name = name; // 可以修改        this.age = age;    &#125;    sayHello()&#123;        console.log(`大家好，我是$&#123;this.name&#125;`);    &#125;&#125;class Employee extends Person&#123;    constructor(name: string, age: number)&#123;        super(name, age);        this.name = name; //子类中可以修改    &#125;&#125;const p = new Person(&#39;孙悟空&#39;, 18);p.name = &#39;猪八戒&#39;;// 不能修改</code></pre><p>private：</p><pre><code>class Person&#123;    private name: string;    private age: number;    constructor(name: string, age: number)&#123;        this.name = name; // 可以修改        this.age = age;    &#125;    sayHello()&#123;        console.log(`大家好，我是$&#123;this.name&#125;`);    &#125;&#125;class Employee extends Person&#123;    constructor(name: string, age: number)&#123;        super(name, age);        this.name = name; //子类中不能修改    &#125;&#125;const p = new Person(&#39;孙悟空&#39;, 18);p.name = &#39;猪八戒&#39;;// 不能修改</code></pre><h3 id="属性存取器"><a href="#属性存取器" class="headerlink" title="属性存取器"></a>属性存取器</h3><p>对于一些不希望被任意修改的属性，可以将其设置为private</p><p>直接将其设置为private将导致无法再通过对象修改其中的属性</p><p>我们可以在类中定义一组读取、设置属性的方法，这种对属性读取或设置的属性被称为属性的存取器</p><p>读取属性的方法叫做setter方法，设置属性的方法叫做getter方法</p><p>示例：</p><pre><code>class Person&#123;    private _name: string;    constructor(name: string)&#123;        this._name = name;    &#125;    get name()&#123;        return this._name;    &#125;    set name(name: string)&#123;        this._name = name;    &#125;&#125;const p1 = new Person(&#39;孙悟空&#39;);// 实际通过调用getter方法读取name属性console.log(p1.name);// 实际通过调用setter方法修改name属性 p1.name = &#39;猪八戒&#39;; </code></pre><h3 id="静态属性"><a href="#静态属性" class="headerlink" title="静态属性"></a>静态属性</h3><p>静态属性（方法），也称为类属性。使用静态属性无需创建实例，通过类即可直接使用</p><p>静态属性（方法）使用static开头</p><p>示例：</p><pre><code>class Tools&#123;    static PI = 3.1415926;        static sum(num1: number, num2: number)&#123;        return num1 + num2    &#125;&#125;console.log(Tools.PI);console.log(Tools.sum(123, 456));</code></pre><h3 id="this"><a href="#this" class="headerlink" title="this"></a>this</h3><p>在类中，使用this表示当前对象</p><h3 id="继承"><a href="#继承" class="headerlink" title="继承"></a>继承</h3><p>继承时面向对象中的又一个特性</p><p>通过继承可以将其他类中的属性和方法引入到当前类中</p><p>示例：</p><pre><code>class Animal&#123;    name: string;    age: number;    constructor(name: string, age: number)&#123;        this.name = name;        this.age = age;    &#125;&#125;class Dog extends Animal&#123;    bark()&#123;        console.log(`$&#123;this.name&#125;在汪汪叫！`);    &#125;&#125;const dog = new Dog(&#39;旺财&#39;, 4);dog.bark();</code></pre><p>通过继承可以在不修改类的情况下完成对类的扩展</p><h3 id="重写"><a href="#重写" class="headerlink" title="重写"></a>重写</h3><p>发生继承时，如果子类中的方法会替换掉父类中的同名方法，这就称为方法的重写</p><p>示例：</p><pre><code>class Animal&#123;    name: string;    age: number;    constructor(name: string, age: number)&#123;        this.name = name;        this.age = age;    &#125;    run()&#123;        console.log(`父类中的run方法！`);    &#125;&#125;class Dog extends Animal&#123;    bark()&#123;        console.log(`$&#123;this.name&#125;在汪汪叫！`);    &#125;    run()&#123;        console.log(`子类中的run方法，会重写父类中的run方法！`);    &#125;&#125;const dog = new Dog(&#39;旺财&#39;, 4);dog.bark();</code></pre><p><strong>在子类中可以使用super来完成对父类的引用</strong></p><h3 id="抽象类（abstract-class）"><a href="#抽象类（abstract-class）" class="headerlink" title="抽象类（abstract class）"></a>抽象类（abstract class）</h3><p>抽象类是专门用来被其他类所继承的类，它只能被其他类所继承不能用来创建实例</p><pre><code>abstract class Animal&#123;  abstract run(): void;  bark()&#123;      console.log(&#39;动物在叫~&#39;);  &#125;&#125;class Dog extends Animals&#123;  run()&#123;      console.log(&#39;狗在跑~&#39;);  &#125;&#125;</code></pre><p>使用abstract开头的方法叫做抽象方法，抽象方法没有方法体只能定义在抽象类中，继承抽象类时抽象方法必须要实现;</p><h2 id="接口（Interface）"><a href="#接口（Interface）" class="headerlink" title="接口（Interface）"></a>接口（Interface）</h2><p>接口的作用类似于抽象类，不同点在于：接口中的所有方法和属性都是没有实值的，换句话说接口中的所有方法都是抽象方法；</p><p>接口主要负责定义一个类的结构，接口可以去限制一个对象的接口：对象只有包含接口中定义的所有属性和方法时才能匹配接口；</p><p>同时，可以让一个类去实现接口，实现接口时类中要保护接口中的所有属性；</p><p>示例（检查对象类型）：</p><pre><code>interface Person&#123;    name: string;    sayHello():void;&#125;function fn(per: Person)&#123;    per.sayHello();&#125;fn(&#123;name:&#39;孙悟空&#39;, sayHello() &#123;console.log(`Hello, 我是 $&#123;this.name&#125;`)&#125;&#125;);</code></pre><p>示例（实现）：</p><pre><code>interface Person&#123;   name: string;   sayHello():void;&#125;class Student implements Person&#123;   constructor(public name: string) &#123;   &#125;   sayHello() &#123;       console.log(&#39;大家好，我是&#39;+this.name);   &#125;&#125;</code></pre><h2 id="泛型（Generic）"><a href="#泛型（Generic）" class="headerlink" title="泛型（Generic）"></a>泛型（Generic）</h2><p>定义一个函数或类时，有些情况下无法确定其中要使用的具体类型（返回值、参数、属性的类型不能确定）；</p><p>此时泛型便能够发挥作用；</p><p>举个例子：</p><pre><code>function test(arg: any): any&#123;    return arg;&#125;</code></pre><p>上例中，test函数有一个参数类型不确定，但是能确定的时其返回值的类型和参数的类型是相同的；</p><p>由于类型不确定所以参数和返回值均使用了any，但是很明显这样做是不合适的：</p><p>首先使用any会关闭TS的类型检查，其次这样设置也不能体现出参数和返回值是相同的类型；</p><h3 id="泛型函数"><a href="#泛型函数" class="headerlink" title="泛型函数"></a>泛型函数</h3><h4 id="创建泛型函数"><a href="#创建泛型函数" class="headerlink" title="创建泛型函数"></a>创建泛型函数</h4><pre><code>function test&lt;T&gt;(arg: T): T&#123;    return arg;&#125;</code></pre><p>这里的<code>&lt;T&gt;</code>就是泛型；</p><p>T是我们给这个类型起的名字（不一定非叫T），设置泛型后即可在函数中使用T来表示该类型；</p><p>所以泛型其实很好理解，就表示某个类型；</p><p>那么如何使用上边的函数呢？</p><h4 id="使用泛型函数"><a href="#使用泛型函数" class="headerlink" title="使用泛型函数"></a>使用泛型函数</h4><h5 id="方式一（直接使用）："><a href="#方式一（直接使用）：" class="headerlink" title="方式一（直接使用）："></a>方式一（直接使用）：</h5><pre><code>test(10)</code></pre><p>使用时可以直接传递参数使用，类型会由TS自动推断出来，但有时编译器无法自动推断时还需要使用下面的方式</p><h5 id="方式二（指定类型）："><a href="#方式二（指定类型）：" class="headerlink" title="方式二（指定类型）："></a>方式二（指定类型）：</h5><pre><code>test&lt;number&gt;(10)</code></pre><p>也可以在函数后手动指定泛型；</p><h4 id="函数中声明多个泛型"><a href="#函数中声明多个泛型" class="headerlink" title="函数中声明多个泛型"></a>函数中声明多个泛型</h4><p>可以同时指定多个泛型，泛型间使用逗号隔开：</p><pre><code>function test&lt;T, K&gt;(a: T, b: K): K&#123;  return b;&#125;test&lt;number, string&gt;(10, &quot;hello&quot;);</code></pre><p>使用泛型时，完全可以将泛型当成是一个普通的类去使用；</p><h3 id="泛型类"><a href="#泛型类" class="headerlink" title="泛型类"></a>泛型类</h3><p>类中同样可以使用泛型：</p><pre><code>class MyClass&lt;T&gt;&#123;  prop: T;  constructor(prop: T)&#123;      this.prop = prop;  &#125;&#125;</code></pre><h3 id="泛型继承"><a href="#泛型继承" class="headerlink" title="泛型继承"></a>泛型继承</h3><p>除此之外，也可以对泛型的范围进行约束</p><pre><code>interface MyInter&#123;  length: number;&#125;function test&lt;T extends MyInter&gt;(arg: T): number&#123;  return arg.length;&#125;</code></pre><p>使用T extends MyInter表示泛型T必须是MyInter的子类，不一定非要使用接口类和抽象类同样适用；</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Promise</title>
      <link href="/2022/05/07/promise/"/>
      <url>/2022/05/07/promise/</url>
      
        <content type="html"><![CDATA[<h3 id="定义"><a href="#定义" class="headerlink" title="定义"></a>定义</h3><p>1.抽象表达</p><p>Promise是一门新的技术（ES6规范）</p><p>Promise是JS中进行异步编程的新解决方案</p><p>2.具体表达</p><p>从语法上说，Promise是一个构造函数</p><p>从功能上说，Promise对象用来封装一个异步操作并可以获取其成功&#x2F;失败的结果值</p><h3 id="异步编程"><a href="#异步编程" class="headerlink" title="异步编程"></a>异步编程</h3><p>fs 文件操作</p><pre><code>require(&#39;fs&#39;).readFile(&#39;./index.html&#39;,(err,data)=&gt;&#123;&#125;)</code></pre><p>数据库操作</p><p>AJAX</p><pre><code>$.get(&#39;/server&#39;,(data)=&gt;&#123;&#125;)</code></pre><p>定时器</p><pre><code>setTimeout(()=&gt;&#123;&#125;,2000)</code></pre><h3 id="优点"><a href="#优点" class="headerlink" title="优点"></a>优点</h3><p>1.指定回调函数的方式更加灵活</p><p>2.支持链式调用，可以解决回调地狱问题</p><h4 id="回调地狱"><a href="#回调地狱" class="headerlink" title="回调地狱"></a>回调地狱</h4><p>定义：回调函数嵌套调用，外部回调函数异步执行的结果是嵌套的回调执行的条件</p><p>缺点：1.不便于阅读2.不便于异常处理</p><p>解决方案：promise链式调用</p><h3 id="Promise的工作流程"><a href="#Promise的工作流程" class="headerlink" title="Promise的工作流程"></a>Promise的工作流程</h3><p><img src="C:\Users\Win10\Desktop\前端笔记\微信图片_20220306193701.png" alt="微信图片_20220306193701"></p><h3 id="API"><a href="#API" class="headerlink" title="API"></a>API</h3><p>1.Promise构造函数：Promise(excutor){}</p><p>​(1) executor函数：执行器 (resolve,reject)&#x3D;&gt;{}</p><p>​(2) resolve函数：内部定义成功时我们调用的函数 value&#x3D;&gt;{}</p><p>​(3) reject函数：内部定义失败时我们调用的函数reason&#x3D;&gt;{}</p><p>说明：executor会在Promise内部立即同步调用，异步操作在执行器中执行</p><p>2.Promise.prototype.then方法:(onResolved,onRejected) &#x3D;&gt;{}</p><p>​(1) onResolved函数：成功的回调函数 (value)&#x3D;&gt;{}</p><p>​(2) onRejected函数：失败的回调函数(reason)&#x3D;&gt;{}</p><p>说明：无论是成功的回调还是失败的回调，返回的结果是一个新的promise对象</p><p>3.Promise.prototype.catch方法：(onRejected) &#x3D;&gt;{}</p><p>​(1) onRejected函数：失败的回调函数(reason)&#x3D;&gt;{}</p><p>4.Promise.resolve方法：(value)&#x3D;&gt;{}</p><p>​(1) value:成功的数据或promise对象</p><p>说明：返回一个成功&#x2F;失败的promise对象</p><p>如果传入的参数为非Promise类型的对象，则返回的结果为成功的promise对象</p><p>如果传入的参数为Promise对象，则参数的结果决定了resolve的结果</p><p>5.Promise.reject方法:(reason)&#x3D;&gt;{}</p><pre><code> (1) reason:失败的原因</code></pre><p>说明：返回一个失败的promise对象，传入什么，失败的结果就是什么</p><p>6.Promise.all方法：(promises)&#x3D;&gt;{}</p><p>​(1) promises:包含n个promise的数组</p><p>说明：返回一个新的promise，只有所有的pr下·omise都成功才成功，只要有一个失败了就直接失败了</p><p>7.Promise.race方法：(promises)&#x3D;&gt;{}</p><p>​(1) promises：包含n个promise的数组</p><p>说明：返回一个新的promise，第一个完成的promise的结果状态就是最终的结果状态 </p><h3 id="Promise的几个关键问题"><a href="#Promise的几个关键问题" class="headerlink" title="Promise的几个关键问题"></a>Promise的几个关键问题</h3><p>1.如何改变promise的状态？</p><p>​(1) resolve(value): 如果当前是pending就会变为resolved</p><p>​(2) reject(reason): 如果当前是pending就会变为rejected</p><p>​(3) 抛出异常：如果当前是pending就会变为rejected</p><p>2.一个promise指定多个成功&#x2F;失败的回调，都会gai’bia调用吗？</p><p>​当promise改变为对应状态时都会调用</p><p>3.改变promise状态和指定回调函数谁先谁后？</p><p>​(1) 都有可能，正常情况下是先指定回调在改变状态，但也可以先改变状态再指定回调</p><p>​(2) 如何先改变状态在指定回调？</p><p>​①在执行器中直接调用resolve()&#x2F;reject()</p><p>​②延迟更长的时间才调用then()</p><p>​(3) 什么时候才能得到数据？<br>​①如果先指定回调，那当状态发生改变时，回调函数就会调用，得到数据</p><p>​指定回调-状态改变-执行回调</p><p>​②如果先改变状态，那当指定回调时，回调函数就会调用，得到数据</p><p>​状态改变-制定并执行回调</p><p>4.promise.then() 返回的新的promise的结果状态由什么决定</p><p>​(1) 简单表达：由then()指定的回调函数执行的结果决定</p><p>​(1) 详细表达：</p><p>​①如果抛出异常，新的promise变为rejected，reason为抛出的异常</p><p>​②如果返回的是非promise的任意值，新promise变为resolved，vaule为返回的值</p><p>​③如果返回的是另一个新promise，此promise的结果就会成为新promise的结果</p><p>5.promise异常穿透</p><p>​(1) 当使用promise的then链式调用时，可以在最后指定失败的回调</p><p>​(2) 前面任何操作出了异常，都会传到最后失败的回调中处理</p><p>6.中断promise链</p><p>​(1) 当使用promise的then链式调用时，在中间间断，不再调用后面的回调函数</p><p>​(2) 方法：在回调函数中返回一个pendding状态的promise对象</p><h3 id="async函数"><a href="#async函数" class="headerlink" title="async函数"></a>async函数</h3><p>1.函数的返回值为promise对象</p><p>2.promise对象的结果由async函数执行的返回值决定</p><h3 id="await表达式"><a href="#await表达式" class="headerlink" title="await表达式"></a>await表达式</h3><p>1.await右侧的表达式一般为promise对象，但也可以是其它的值</p><p>2.如果表达式是promise对象，await返回的是promise成功的值</p><p>3.如果表达式是其他值，直接将此值作为await的返回值</p><p>注意：</p><p>1.await必须写在async函数中，但async函数中可以没有await</p><p>2.如果await的promise失败了，就会抛出异常，需要通过try…catch捕获处理</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>MongoDB</title>
      <link href="/2022/05/07/mongodb/"/>
      <url>/2022/05/07/mongodb/</url>
      
        <content type="html"><![CDATA[<h2 id="基本指令"><a href="#基本指令" class="headerlink" title="基本指令"></a>基本指令</h2><p>show dbs &#x2F; show databases显示当前的数据库</p><p>use 数据库名 进入到指定的数据库</p><p>db 表示当前所处的数据库</p><p>show collectons 显示数据库中所有的集合</p><h2 id="数据库的CRUD操作"><a href="#数据库的CRUD操作" class="headerlink" title="数据库的CRUD操作"></a>数据库的CRUD操作</h2><p>db.<collection>.insert(doc)向集合中插入一个文档</p><p>例子：向test数据库中的，stuts集合中插入一个新的学生对象</p><p><code>db.stuts.insert(&#123;name:&quot;孙悟空&quot;,age:18,gender:&quot;男&quot;&#125;)</code></p><p>当我们向集合中插入文档时，如果没有给文档指定id属性，数据库会自动添加id属性用来作为文档的唯一标识</p><p>db.<collection>.insertOne() 插入一个文档数据</p><p>db.<collection>.insertMany() 插入多个文档数据，传的是数组</p><p>db.<collection>.find() 查询当前集合中的所有文档，返回的是一个数组，可以加索引</p><p>db.<collection>.find()中可以接受一个对象作为参数条件</p><p>{}表示查询集合中所有的文档</p><p>{属性:值}查询属性是指定值的文档 </p><p>db.<collection>.findOne() 查询集合中符合条件的第一个文档，返回的是一个对象</p><p>db.<collection>.find({}).count();</p><p>db.<collection>.update(查询条件，新对象，[配置项])默认情况下会使用新对象来替代旧对象，且只会修改一个</p><p>如果需要修改指定的属性，而不是替换需要使用”修改操作符”来完成修改</p><p>$set 可以用来修改文档中的指定属性</p><p><code>db.stuts.updata(&#123;&quot;name&quot;:&quot;孙悟空&quot;&#125;,&#123;$set:&#123;gender:&quot;男&quot;,address:&quot;流沙河&quot;&#125;&#125;)</code></p><p>$unset 可以用来删除文档的指定属性</p><p>$push 用于向数组中添加一个新的元素</p><p>$addToSet 向数组中添加一个新元素，当数组中有这个元素时，不会添加</p><p>db.<collection>.updateMany()同时修改多个符合条件的文档</p><p>db.<collection>.updateOne() 修改第一个符合条件的文档</p><p>db.<collection>.replaceOne() 替换一个文档</p><p>db.<collection>.remove() 删除符合条件的所有文档，传递条件的方式和find()一样</p><p><code>db.stuts.remove(&#123;age:18&#125;)</code></p><p>如果remove()第二个参数传递一个true，则只会删除一个</p><p><code>db.stuts.remove(&#123;age:28&#125;,true)</code></p><p>db.<collection>.deleteOne() </p><p>db.<collection>.deleteMany() </p><p>db.<collection>.drop() 删除集合</p><p>db.dropDatabase() 删除数据库</p><p>在MongoDB中，当一个文档的属性值是一个文档时，我们称这个文档叫做内嵌文档</p><p>MongoDB支持直接通过内嵌文档的属性进行查询，如果要查询内嵌文档可以通过 . 的形式来匹配，且属性名必须使用引号</p><p>向numbers中插入20000条数据</p><pre><code>var arr=[]for(var i = 1;i &lt; 20000;i++)&#123;​arr.push(&#123;num:i&#125;);&#125;db.numbers.insert(arr)</code></pre><p>查询numbers中num大于5000的文档</p><p><code>db.numbers.find(&#123;num:&#123;$gt:500&#125;&#125;)</code></p><p>查询numbers集合中的前10条数据</p><p><code>db.numbers.find().limit(10)</code></p><p>limit()设置显示数据的上限</p><p>skip()用于跳过指定数量的数据</p><p>查询numbers集合中的第21到30条数据</p><p><code>db.numbers.find().skip(10).limit(10)</code></p><h2 id="文档之间的关系"><a href="#文档之间的关系" class="headerlink" title="文档之间的关系"></a>文档之间的关系</h2><p>一对一</p><p>在MongoDB，可以通过内嵌文档的形式来体现出一对一的关系</p><p>夫妻（一个丈夫对应一个妻子）</p><p>一对多 &#x2F; 多对一 父母-孩子用户-订单 </p><p>在MongoDB，也可以通过内嵌文档的形式来体现出一对多或者多对一的关系</p><p>多对多老师-学生 </p><h2 id="sort和投影"><a href="#sort和投影" class="headerlink" title="sort和投影"></a>sort和投影</h2><p>查询文档时，默认情况下是按照_id的值进行排序（升序）</p><p>sort()可以指定文档的排序规则,sort()需要传递一个对象来指定排序规则  1表示升序 -1表示降序</p><p><code>dp.emp.find(&#123;&#125;).sort(&#123;sal:1&#125;)</code></p><p>在查询时，可以在第二个参数的位置来设置查询结果的 投影</p><p><code>dp.emp.find(&#123;&#125;,&#123;ename:1&#125;)</code> 只显示ename属性，默认还有_id属性</p><h2 id="Mongoose"><a href="#Mongoose" class="headerlink" title="Mongoose"></a>Mongoose</h2><p>Mongoose是一个对象文档模型（ODM）库，它对Node原生的MongoDB模块进行了进一步的优化封装，并提供了更多的功能</p><p>好处：</p><p>可以为文档创建一个模式结构(Schema)</p><p>可以对模型中的对象&#x2F;文档进行验证</p><p>数据可以通过类型转换转换为对象模型</p><p>可以使用中间件来应用业务逻辑挂钩</p><p>比Node原生的MongoDB驱动更容易</p><p>为我们提供了几个新的对象</p><p>Schema（模式对象）定义约束了数据库中的文档结构</p><p>Model 该对象作为集合中的所有文档的表示，相当于MongoDB数据库中的集合collection</p><p>通过Model查询的结果都是document</p><p>Document 表示集合中的具体文档，相当于集合中的一个具体的文档</p><p><code>Model.create(doc(s),[callback])</code> 用来创建一个或多个文档添加到数据库中</p><p><code>Model.find(conditions,[projection],[options],[callback])</code>查询所有符合条件的文档</p><p><code>Model.findById(id,[projection],[options],[callback])</code> 根据文档的id属性查询文档</p><p><code>Model.findOne(conditions,[projection],[options],[callback]) </code>查询符合条件的第一个文档</p><p>conditions 查询的条件</p><p>projection 投影</p><p>options 查询选项</p><p>callback 回调函数，必须传</p><p><code>Model.update(conditions,doc,[options],[callback])</code></p><p><code>Model.updateMany(conditions,doc,[options],[callback])</code></p><p><code>Model.updateOne(conditions,doc,[options],[callback])</code></p><p>doc 修改后的对象</p><p><code>Model.replaceOne(conditions,doc,[options],[callback])</code></p><p><code>Model.remove(conditions,[callback])</code></p><p><code>Model.deleteOne(conditions,[callback])</code></p><p><code>Model.deleteMany(conditions,[callback])</code></p><p><code>Model.count(conditions,[callback])</code>  统计文档的数量</p><p>document的方法</p><p><code>doc.save([options],[fn])</code> 需要注意，doc是model的实例，save的方法是给model的实例调用的</p><p><code>update(update,[options],[callback])</code></p><p><code>remove([callback])</code></p><p><code>doc.toJSON()</code>  </p><p><code>doc.toObject</code>  将Document对象转换为一个普通的JS对象，转换之后，doc的方法都用不了了</p>]]></content>
      
      
      
    </entry>
    
    
  
  
</search>
