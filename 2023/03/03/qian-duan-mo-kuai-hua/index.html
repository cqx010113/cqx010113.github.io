<!DOCTYPE HTML>
<html lang="zh-CN">


<head>
    <meta charset="utf-8">
    <meta name="keywords" content="å‰ç«¯æ¨¡å—åŒ–, å‰ç«¯å°æ©™">
    <meta name="description" content="CommonJSå’ŒES6æ¨¡å—è§„èŒƒè®²è§£æ­£æ–‡é€šè¿‡é˜…è¯»æœ¬ç¯‡æ–‡ç« ä½ å¯ä»¥å­¦ä¹ åˆ°ï¼š

åŸå§‹æ¨¡æ‹Ÿæ¨¡å—çš„ä¸€äº›å†™æ³•
CommonJSè§„èŒƒ
AMDè§„èŒƒ
CMDè§„èŒƒ
AMDå’ŒCMDçš„åŒºåˆ«
ES6 Modulesè§„èŒƒ
CommonJSä¸ES6 Modulesè§„èŒƒçš„">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="renderer" content="webkit|ie-stand|ie-comp">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="referrer" content="no-referrer-when-downgrade">
    <!-- Global site tag (gtag.js) - Google Analytics -->


    
    <style>
        body{
            background-image: url(https://cdn.jsdelivr.net/gh/Tokisaki-Galaxy/res/site/medias/background.jpg);
            background-repeat:no-repeat;
            background-size: 100% 100%;
            background-attachment:fixed;
        }
    </style>


    <title>å‰ç«¯æ¨¡å—åŒ– | å‰ç«¯å°æ©™</title>
    <link rel="icon" type="image/png" href="/favicon.png">

    <link rel="stylesheet" type="text/css" href="/libs/awesome/css/all.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/materialize/materialize.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/aos/aos.css">
    <link rel="stylesheet" type="text/css" href="/libs/animate/animate.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/lightGallery/css/lightgallery.min.css">
    <link rel="stylesheet" type="text/css" href="/css/matery.css">
    <link rel="stylesheet" type="text/css" href="/css/my.css">

    <script src="/libs/jquery/jquery-3.6.0.min.js"></script>

<meta name="generator" content="Hexo 6.2.0"><link rel="stylesheet" href="/css/prism-tomorrow.css" type="text/css"></head>


<body>
    <header class="navbar-fixed">
    <nav id="headNav" class="bg-color nav-transparent">
        <div id="navContainer" class="nav-wrapper container">
            <div class="brand-logo">
                <a href="/" class="waves-effect waves-light">
                    
                    <img src="/medias/logo.png" class="logo-img" alt="LOGO">
                    
                    <span class="logo-span">å‰ç«¯å°æ©™</span>
                </a>
            </div>
            

<a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fas fa-bars"></i></a>
<ul class="right nav-menu">
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/" class="waves-effect waves-light">
      
      <i class="fas fa-home" style="zoom: 0.6;"></i>
      
      <span>é¦–é¡µ</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/tags" class="waves-effect waves-light">
      
      <i class="fas fa-tags" style="zoom: 0.6;"></i>
      
      <span>æ ‡ç­¾</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/categories" class="waves-effect waves-light">
      
      <i class="fas fa-bookmark" style="zoom: 0.6;"></i>
      
      <span>åˆ†ç±»</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/archives" class="waves-effect waves-light">
      
      <i class="fas fa-archive" style="zoom: 0.6;"></i>
      
      <span>å½’æ¡£</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/about" class="waves-effect waves-light">
      
      <i class="fas fa-user-circle" style="zoom: 0.6;"></i>
      
      <span>å…³äº</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/contact" class="waves-effect waves-light">
      
      <i class="fas fa-comments" style="zoom: 0.6;"></i>
      
      <span>ç•™è¨€æ¿</span>
    </a>
    
  </li>
  
  <li>
    <a href="#searchModal" class="modal-trigger waves-effect waves-light">
      <i id="searchIcon" class="fas fa-search" title="æœç´¢" style="zoom: 0.85;"></i>
    </a>
  </li>
</ul>


<div id="mobile-nav" class="side-nav sidenav">

    <div class="mobile-head bg-color">
        
        <img src="/medias/logo.png" class="logo-img circle responsive-img">
        
        <div class="logo-name">å‰ç«¯å°æ©™</div>
        <div class="logo-desc">
            
            Never really desperate, only the lost of the soul.
            
        </div>
    </div>

    <ul class="menu-list mobile-menu-list">
        
        <li class="m-nav-item">
	  
		<a href="/" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-home"></i>
			
			é¦–é¡µ
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/tags" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-tags"></i>
			
			æ ‡ç­¾
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/categories" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-bookmark"></i>
			
			åˆ†ç±»
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/archives" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-archive"></i>
			
			å½’æ¡£
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/about" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-user-circle"></i>
			
			å…³äº
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/contact" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-comments"></i>
			
			ç•™è¨€æ¿
		</a>
          
        </li>
        
        
        <li><div class="divider"></div></li>
        <li>
            <a href="https://github.com/blinkfox/hexo-theme-matery" class="waves-effect waves-light" target="_blank">
                <i class="fab fa-github-square fa-fw"></i>Fork Me
            </a>
        </li>
        
    </ul>
</div>


        </div>

        
            <style>
    .nav-transparent .github-corner {
        display: none !important;
    }

    .github-corner {
        position: absolute;
        z-index: 10;
        top: 0;
        right: 0;
        border: 0;
        transform: scale(1.1);
    }

    .github-corner svg {
        color: #0f9d58;
        fill: #fff;
        height: 64px;
        width: 64px;
    }

    .github-corner:hover .octo-arm {
        animation: a 0.56s ease-in-out;
    }

    .github-corner .octo-arm {
        animation: none;
    }

    @keyframes a {
        0%,
        to {
            transform: rotate(0);
        }
        20%,
        60% {
            transform: rotate(-25deg);
        }
        40%,
        80% {
            transform: rotate(10deg);
        }
    }
</style>

<a href="https://github.com/blinkfox/hexo-theme-matery" class="github-corner tooltipped hide-on-med-and-down" target="_blank"
   data-tooltip="Fork Me" data-position="left" data-delay="50">
    <svg viewBox="0 0 250 250" aria-hidden="true">
        <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
        <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2"
              fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
        <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z"
              fill="currentColor" class="octo-body"></path>
    </svg>
</a>
        
    </nav>

</header>

    



<div class="bg-cover pd-header post-cover" style="background-image: url('/medias/featureimages/18.jpg')">
    <div class="container" style="right: 0px;left: 0px;">
        <div class="row">
            <div class="col s12 m12 l12">
                <div class="brand">
                    <h1 class="description center-align post-title">å‰ç«¯æ¨¡å—åŒ–</h1>
                </div>
            </div>
        </div>
    </div>
</div>




<main class="post-container content">

    
    <link rel="stylesheet" href="/libs/tocbot/tocbot.css">
<style>
    #articleContent h1::before,
    #articleContent h2::before,
    #articleContent h3::before,
    #articleContent h4::before,
    #articleContent h5::before,
    #articleContent h6::before {
        display: block;
        content: " ";
        height: 100px;
        margin-top: -100px;
        visibility: hidden;
    }

    #articleContent :focus {
        outline: none;
    }

    .toc-fixed {
        position: fixed;
        top: 64px;
    }

    .toc-widget {
        width: 345px;
        padding-left: 20px;
    }

    .toc-widget .toc-title {
        padding: 35px 0 15px 17px;
        font-size: 1.5rem;
        font-weight: bold;
        line-height: 1.5rem;
    }

    .toc-widget ol {
        padding: 0;
        list-style: none;
    }

    #toc-content {
        padding-bottom: 30px;
        overflow: auto;
    }

    #toc-content ol {
        padding-left: 10px;
    }

    #toc-content ol li {
        padding-left: 10px;
    }

    #toc-content .toc-link:hover {
        color: #42b983;
        font-weight: 700;
        text-decoration: underline;
    }

    #toc-content .toc-link::before {
        background-color: transparent;
        max-height: 25px;

        position: absolute;
        right: 23.5vw;
        display: block;
    }

    #toc-content .is-active-link {
        color: #42b983;
    }

    #floating-toc-btn {
        position: fixed;
        right: 15px;
        bottom: 76px;
        padding-top: 15px;
        margin-bottom: 0;
        z-index: 998;
    }

    #floating-toc-btn .btn-floating {
        width: 48px;
        height: 48px;
    }

    #floating-toc-btn .btn-floating i {
        line-height: 48px;
        font-size: 1.4rem;
    }
</style>
<div class="row">
    <div id="main-content" class="col s12 m12 l9">
        <!-- æ–‡ç« å†…å®¹è¯¦æƒ… -->
<div id="artDetail">
    <div class="card">
        <div class="card-content article-info">
            <div class="row tag-cate">
                <div class="col s7">
                    
                          <div class="article-tag">
                            <span class="chip bg-color">æ— æ ‡ç­¾</span>
                          </div>
                    
                </div>
                <div class="col s5 right-align">
                    
                </div>
            </div>

            <div class="post-info">
                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-minus fa-fw"></i>å‘å¸ƒæ—¥æœŸ:&nbsp;&nbsp;
                    2023-03-03
                </div>
                

                

                

                

                
            </div>
        </div>
        <hr class="clearfix">

        

        

        <div class="card-content article-card-content">
            <div id="articleContent">
                <h1 id="CommonJSå’ŒES6æ¨¡å—è§„èŒƒè®²è§£"><a href="#CommonJSå’ŒES6æ¨¡å—è§„èŒƒè®²è§£" class="headerlink" title="CommonJSå’ŒES6æ¨¡å—è§„èŒƒè®²è§£"></a>CommonJSå’ŒES6æ¨¡å—è§„èŒƒè®²è§£</h1><h2 id="æ­£æ–‡"><a href="#æ­£æ–‡" class="headerlink" title="æ­£æ–‡"></a>æ­£æ–‡</h2><p>é€šè¿‡é˜…è¯»æœ¬ç¯‡æ–‡ç« ä½ å¯ä»¥å­¦ä¹ åˆ°ï¼š</p>
<ul>
<li>åŸå§‹æ¨¡æ‹Ÿæ¨¡å—çš„ä¸€äº›å†™æ³•</li>
<li>CommonJSè§„èŒƒ</li>
<li>AMDè§„èŒƒ</li>
<li>CMDè§„èŒƒ</li>
<li>AMDå’ŒCMDçš„åŒºåˆ«</li>
<li>ES6 Modulesè§„èŒƒ</li>
<li>CommonJSä¸ES6 Modulesè§„èŒƒçš„åŒºåˆ«</li>
</ul>
<h3 id="åŸå§‹å†™æ³•"><a href="#åŸå§‹å†™æ³•" class="headerlink" title="åŸå§‹å†™æ³•"></a>åŸå§‹å†™æ³•</h3><p>åœ¨æ²¡æœ‰<code>CommonJS</code>å’Œ<code>ES6</code>çš„æ—¶å€™ï¼Œæˆ‘ä»¬æƒ³è¦è¾¾åˆ°æ¨¡å—åŒ–çš„æ•ˆæœå¯èƒ½æœ‰è¿™ä¹ˆä¸‰ç§ï¼š</p>
<h4 id="1-ä¸€ä¸ªå‡½æ•°å°±æ˜¯ä¸€ä¸ªæ¨¡å—"><a href="#1-ä¸€ä¸ªå‡½æ•°å°±æ˜¯ä¸€ä¸ªæ¨¡å—" class="headerlink" title="1. ä¸€ä¸ªå‡½æ•°å°±æ˜¯ä¸€ä¸ªæ¨¡å—"></a>1. ä¸€ä¸ªå‡½æ•°å°±æ˜¯ä¸€ä¸ªæ¨¡å—</h4><pre class=" language-javascript"><code class="language-javascript"><span class="token operator">&lt;</span>script<span class="token operator">></span>
  <span class="token keyword">function</span> m1 <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token comment" spellcheck="true">// ...</span>
  <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
  <span class="token keyword">function</span> m2 <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token comment" spellcheck="true">// ...</span>
  <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span>
</code></pre>
<blockquote>
<p>ç¼ºç‚¹ï¼šæ±¡æŸ“äº†å…¨å±€å˜é‡ï¼Œæ— æ³•ä¿è¯ä¸ä¼šä¸å…¶å®ƒæ¨¡å—å‘ç”Ÿå†²çªï¼Œè€Œä¸”æ¨¡å—æˆå‘˜ä¹‹é—´çœ‹ä¸å‡ºç›´æ¥å…³ç³»ã€‚</p>
</blockquote>
<h4 id="2-ä¸€ä¸ªå¯¹è±¡å°±æ˜¯ä¸€ä¸ªæ¨¡å—"><a href="#2-ä¸€ä¸ªå¯¹è±¡å°±æ˜¯ä¸€ä¸ªæ¨¡å—" class="headerlink" title="2. ä¸€ä¸ªå¯¹è±¡å°±æ˜¯ä¸€ä¸ªæ¨¡å—"></a>2. ä¸€ä¸ªå¯¹è±¡å°±æ˜¯ä¸€ä¸ªæ¨¡å—</h4><p>å¯¹è±¡å†™æ³• ä¸ºäº†è§£å†³ä¸Šé¢çš„ç¼ºç‚¹ï¼Œå¯ä»¥æŠŠæ¨¡å—å†™æˆä¸€ä¸ªå¯¹è±¡ï¼Œæ‰€æœ‰çš„æ¨¡å—æˆå‘˜éƒ½æ”¾åˆ°è¿™ä¸ªå¯¹è±¡é‡Œé¢ã€‚</p>
<p><strong>index.html</strong></p>
<pre class=" language-xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script language-javascript">
  <span class="token keyword">var</span> module1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    _sum<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    foo1<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">,</span>
    foo2<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
  <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">)</span>
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>
</code></pre>
<blockquote>
<p>ç¼ºç‚¹ï¼šä¼šæš´éœ²æ‰€æœ‰æ¨¡å—æˆå‘˜ï¼Œå†…éƒ¨çš„çŠ¶æ€å¯èƒ½è¢«æ”¹å†™ã€‚</p>
</blockquote>
<p>ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¦‚æœåªæ˜¯æƒ³æš´éœ²å‡ºä¸¤ä¸ªæ–¹æ³•è€Œä¸æš´éœ²å‡º<code>_sum</code>ï¼Œå°±åšä¸åˆ°ã€‚</p>
<p>è€Œæ­¤æ—¶ï¼Œ<code>_sum</code>å¯èƒ½è¢«å¤–éƒ¨æ”¹å†™ï¼š</p>
<pre class=" language-javascript"><code class="language-javascript">module1<span class="token punctuation">.</span>_sum <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
</code></pre>
<h4 id="3-ç«‹å³æ‰§è¡Œå‡½æ•°ä¸ºä¸€ä¸ªæ¨¡å—"><a href="#3-ç«‹å³æ‰§è¡Œå‡½æ•°ä¸ºä¸€ä¸ªæ¨¡å—" class="headerlink" title="3. ç«‹å³æ‰§è¡Œå‡½æ•°ä¸ºä¸€ä¸ªæ¨¡å—"></a>3. ç«‹å³æ‰§è¡Œå‡½æ•°ä¸ºä¸€ä¸ªæ¨¡å—</h4><pre class=" language-javascript"><code class="language-javascript"><span class="token operator">&lt;</span>script<span class="token operator">></span>
  <span class="token keyword">var</span> module1 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> _sum <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> foo1 <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> foo2 <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
      foo1<span class="token punctuation">:</span> foo1<span class="token punctuation">,</span>
      foo2<span class="token punctuation">:</span> foo2
    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
  <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span>å¤åˆ¶ä»£ç 
</code></pre>
<p>åˆ©ç”¨ç«‹å³æ‰§è¡Œå‡½æ•°å†…çš„ä½œç”¨åŸŸå·²ç»é—­åŒ…æ¥å®ç°æ¨¡å—åŠŸèƒ½ï¼Œå¯¼å‡ºæˆ‘ä»¬æƒ³è¦å¯¼å‡ºçš„æˆå‘˜ã€‚</p>
<p>æ­¤æ—¶å¤–éƒ¨ä»£ç å°±ä¸èƒ½è¯»å–åˆ°<code>_sum</code>äº†ï¼š</p>
<pre class=" language-arcade"><code class="language-arcade">console.log(module1._sum) // undefined
</code></pre>
<h3 id="CommonJSè§„èŒƒ"><a href="#CommonJSè§„èŒƒ" class="headerlink" title="CommonJSè§„èŒƒ"></a>CommonJSè§„èŒƒ</h3><p>è¿™é‡Œä¸åšå…·ä½“çš„ä»‹ç»äº†ï¼Œæˆ‘åªæŠŠä¸€äº›é‡è¦çš„çŸ¥è¯†ç‚¹ä»¥åŠæ··æ·†ç‚¹ä¾‹ä¸¾å‡ºæ¥ã€‚</p>
<p>ä¸»è¦æ˜¯ä»è¿™å››ä¸ªæ–¹é¢è¯´ï¼š</p>
<ul>
<li>æš´éœ²æ¨¡å—</li>
<li>å¼•ç”¨æ¨¡å—</li>
<li>æ¨¡å—æ ‡è¯†ç¬¦</li>
<li>CommonJSè§„èŒƒçš„ç‰¹ç‚¹</li>
</ul>
<h4 id="1-æš´éœ²-å®šä¹‰-æ¨¡å—"><a href="#1-æš´éœ²-å®šä¹‰-æ¨¡å—" class="headerlink" title="1. æš´éœ²(å®šä¹‰)æ¨¡å—"></a>1. æš´éœ²(å®šä¹‰)æ¨¡å—</h4><p><strong>æ­£ç¡®çš„æš´éœ²æ–¹å¼ï¼š</strong></p>
<p>æš´éœ²æ¨¡å—æœ‰ä¸¤ç§æ–¹å¼ï¼š</p>
<ul>
<li><code>module.exports = &#123;&#125;</code></li>
<li><code>exports.xxx = &#39;xxx&#39;</code></li>
</ul>
<p>ä¾‹å¦‚æœ‰ä¸€ä¸ª<code>m1.js</code>æ–‡ä»¶ï¼š</p>
<p>ç¬¬ä¸€ç§æš´éœ²æ–¹å¼ï¼š</p>
<pre class=" language-javascript"><code class="language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    name<span class="token punctuation">:</span> <span class="token string">'lindaidai'</span><span class="token punctuation">,</span>
    sex<span class="token punctuation">:</span> <span class="token string">'boy'</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
</code></pre>
<p>ç¬¬äºŒç§æš´éœ²æ–¹å¼ï¼š</p>
<pre class=" language-javascript"><code class="language-javascript">exports<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'lindaidai'</span><span class="token punctuation">;</span>
exports<span class="token punctuation">.</span>sex <span class="token operator">=</span> <span class="token string">'boy'</span>å¤åˆ¶ä»£ç 
</code></pre>
<p>ä¸ºä»€ä¹ˆå¯ä»¥æœ‰è¿™ä¸¤ç§å†™æ³•å‘¢ï¼Ÿ</p>
<p>æˆ‘æ˜¯è¿™æ ·ç†è§£çš„ï¼š<code>module</code>è¿™ä¸ªå˜é‡å®ƒä»£è¡¨çš„å°±æ˜¯æ•´ä¸ªæ¨¡å—ï¼Œä¹Ÿå°±æ˜¯<code>m1.js</code>ã€‚è€Œå…¶å®è¿™ä¸ª<code>module</code>å˜é‡æ˜¯æœ‰ä¸€ä¸ªå±æ€§<code>exports</code>çš„ï¼Œå®ƒæ˜¯ä¸€ä¸ªå«åš<code>exports</code>å˜é‡çš„å¼•ç”¨ï¼Œæˆ‘ä»¬å¯ä»¥å†™ä¸€ä¸‹ä¼ªä»£ç ï¼š</p>
<pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">var</span> exports <span class="token operator">=</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> module <span class="token operator">=</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    exports<span class="token punctuation">:</span> exports
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
<span class="token keyword">return</span> module<span class="token punctuation">.</span>exportså¤åˆ¶ä»£ç 
</code></pre>
<p>(å½“ç„¶è¿™åªæ˜¯ä¼ªä»£ç å•Šï¼Œå®é™…ä½ è¿™ä¹ˆå»ç”¨ä¼šå‘ç°æ²¡æœ‰æ•ˆæœ)</p>
<p>æœ€åå¯¼å‡ºçš„æ˜¯<code>module.exports</code>ï¼Œè€Œä¸æ˜¯<code>exports</code>ã€‚</p>
<p><strong>å®¹æ˜“æ··æ·†çš„æš´éœ²æ–¹å¼ï¼š</strong></p>
<p>å¦‚æœä½ åœ¨ä»£ç ä¸­è¯•å›¾<code>exports = &#123; name: &#39;lindaidai&#39; &#125;</code>ï¼Œä½ ä¼šå‘ç°åœ¨å¼•å…¥çš„åœ°æ–¹æ ¹æœ¬è·å–ä¸åˆ°<code>name</code>å±æ€§ã€‚</p>
<pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">// m1.js</span>
exports <span class="token operator">=</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    name<span class="token punctuation">:</span> <span class="token string">'lindaidai'</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">// test.js</span>
<span class="token keyword">const</span> math <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./m1.js'</span><span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>m1<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// &amp;#123;&amp;#125;</span>
</code></pre>
<p>åœ¨æ§åˆ¶å°æ‰§è¡Œ<code>node test.js</code>ï¼Œå‘ç°æ‰“å°å‡ºæ¥çš„<code>m1</code>æ˜¯ä¸€ä¸ªç©ºçš„å¯¹è±¡ã€‚</p>
<p>æˆ‘æ˜¯è¿™æ ·ç†è§£çš„ï¼šæ•´ä¸ªæ¨¡å—çš„å¯¼å‡ºæ˜¯é <code>module.exports</code>çš„ï¼Œå¦‚æœä½ é‡æ–°å¯¹æ•´ä¸ª<code>exports</code>å¯¹è±¡èµ‹å€¼çš„è¯ï¼Œå®ƒå’Œ<code>module.exports</code>å°±ä¸æ˜¯åŒä¸€ä¸ªå¯¹è±¡äº†ï¼Œå› ä¸ºå®ƒä»¬æŒ‡å‘çš„å¼•ç”¨åœ°å€éƒ½ä¸åŒï¼š</p>
<pre class=" language-javascript"><code class="language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">-</span><span class="token operator">></span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// æŒ‡å‘ä¸€ä¸ªç©ºçš„å¯¹è±¡</span>
exports <span class="token operator">-</span><span class="token operator">></span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span> name<span class="token punctuation">:</span> <span class="token string">'lindaidai'</span> <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// æŒ‡å‘çš„æ˜¯å¦ä¸€ä¸ªå¯¹è±¡å¤åˆ¶ä»£ç </span>
</code></pre>
<p>æ‰€ä»¥ä½ å¯¹<code>exports = &#123;&#125;</code>åšä»»ä½•æ“ä½œéƒ½å½±å“ä¸åˆ°<code>module.exports</code>ã€‚</p>
<p>è®©æˆ‘ä»¬æ¥çœ‹å‡ ä¸ªæ­£ç¡®å’Œé”™è¯¯çš„ç¤ºä¾‹å§ï¼š</p>
<pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">// m1.js</span>
<span class="token comment" spellcheck="true">// 1. æ­£ç¡®</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    name<span class="token punctuation">:</span> <span class="token string">'lindaidai'</span><span class="token punctuation">,</span>
    sex<span class="token punctuation">:</span> <span class="token string">'boy'</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">// 2. æ­£ç¡®</span>
exports<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'lindaidai'</span><span class="token punctuation">;</span>
exports<span class="token punctuation">.</span>sex <span class="token operator">=</span> <span class="token string">'boy'</span>

<span class="token comment" spellcheck="true">// 3. æ­£ç¡®</span>
module<span class="token punctuation">.</span>exports<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'lindaidai'</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span>exports<span class="token punctuation">.</span>sex <span class="token operator">=</span> <span class="token string">'boy'</span>

<span class="token comment" spellcheck="true">// 4. æ— æ•ˆ</span>
exports <span class="token operator">=</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    name<span class="token punctuation">:</span> <span class="token string">'lindaidai'</span><span class="token punctuation">,</span>
    sex<span class="token punctuation">:</span> <span class="token string">'boy'</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>å¤åˆ¶ä»£ç 
</code></pre>
<p>å¯ä»¥çœ‹åˆ°</p>
<ul>
<li><code>exports.name = xxx</code>æ˜¯<code>module.exports.name = xxx</code>çš„ç¼©å†™ã€‚</li>
<li><code>exports = &#123;&#125;</code>ç¡®ä¸æ˜¯<code>module.exports = &#123;&#125;</code>çš„ç¼©å†™ã€‚</li>
</ul>
<h4 id="2-å¼•ç”¨-å¼•å…¥-æ¨¡å—"><a href="#2-å¼•ç”¨-å¼•å…¥-æ¨¡å—" class="headerlink" title="2. å¼•ç”¨(å¼•å…¥)æ¨¡å—"></a>2. å¼•ç”¨(å¼•å…¥)æ¨¡å—</h4><p>å¯¹äºæ¨¡å—çš„å¼•ç”¨ä½¿ç”¨å…¨å±€æ–¹æ³•<code>require()</code>å°±å¯ä»¥äº†ã€‚</p>
<p>æ³¨æ„âš ï¸è¿™ä¸ªå…¨å±€æ–¹æ³•æ˜¯<code>node</code>ä¸­çš„æ–¹æ³•å“ˆï¼Œå®ƒä¸æ˜¯<code>window</code>ä¸‹é¢çš„ï¼Œæ‰€ä»¥å¦‚æœä½ æ²¡åšä»»ä½•å¤„ç†æƒ³ç›´æ¥åœ¨<code>html</code>é‡Œç”¨è‚¯å®šå°±æ˜¯ä¸è¡Œçš„äº†ï¼š</p>
<p><strong>index.html</strong>:</p>
<pre class=" language-javascript"><code class="language-javascript"><span class="token operator">&lt;</span>body<span class="token operator">></span>
    <span class="token operator">&lt;</span>script<span class="token operator">></span>
        <span class="token keyword">var</span> m1 <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./m1.js'</span><span class="token punctuation">)</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>m1<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">></span>
</code></pre>
<p>ä¾‹å¦‚ä¸Šé¢ğŸ‘†è¿™æ ·ä½ æ‰“å¼€é¡µé¢æ§åˆ¶å°è‚¯å®šå°±æŠ¥é”™äº†ï¼š</p>
<pre class=" language-javascript"><code class="language-javascript">Uncaught ReferenceError<span class="token punctuation">:</span> require is not defined
    at index<span class="token punctuation">.</span>html<span class="token punctuation">:</span><span class="token number">11</span>
</code></pre>
<p>è€Œå¦‚æœä½ æ˜¯åœ¨å¦ä¸€ä¸ª<code>js</code>æ–‡ä»¶ä¸­å¼•ç”¨(ä¾‹å¦‚<code>test.js</code>)ï¼Œå¹¶åœ¨ç»ˆç«¯æ‰§è¡Œ<code>node test.js</code>æ˜¯å¯ä»¥ç”¨çš„ï¼š</p>
<p><strong>test.js</strong>:</p>
<pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">var</span> m1 <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./m1.js'</span><span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>m1<span class="token punctuation">)</span><span class="token punctuation">;</span>å¤åˆ¶ä»£ç 
</code></pre>
<p>é‚£æ˜¯å› ä¸ºä½ çš„ç”µè„‘ä¸Šå…¨å±€å®‰è£…äº†<code>Node.js</code>ï¼Œæ‰€ä»¥å¯ä»¥è¿™æ ·ç©ã€‚</p>
<p><strong>æ‰€ä»¥æˆ‘ä»¬å¯ä»¥å‘ç°<code>require()</code>å®ƒæ˜¯<code>Node.js</code>ä¸­çš„ä¸€ä¸ªå…¨å±€æ–¹æ³•ï¼Œå¹¶ä¸æ˜¯CommonJSç‹¬æœ‰çš„ï¼ŒCommonJSåªæ˜¯ä¼—å¤šè§„èŒƒä¸­çš„å…¶ä¸­ä¸€ç§ã€‚</strong></p>
<p>è¿™ç§è§„èŒƒå…è®¸æˆ‘ä»¬ï¼š</p>
<ul>
<li>ä½¿ç”¨<code>module.exports = &#123;&#125;</code>æˆ–è€…<code>exports.name = xxx</code>å¯¼å‡ºæ¨¡å—</li>
<li>ä½¿ç”¨<code>const m1 = require(&#39;./m1&#39;)</code>å¼•å…¥æ¨¡å—</li>
</ul>
<p>æ³¨æ„âš ï¸ï¼š</p>
<p>å¦å¤–è¿˜æœ‰ä¸€ç‚¹æ¯”è¾ƒé‡è¦ï¼Œé‚£å°±æ˜¯<code>require()</code>çš„å‚æ•°ç”šè‡³èƒ½å…è®¸ä½ æ˜¯ä¸€ä¸ªè¡¨è¾¾å¼ã€‚</p>
<p>ä¹Ÿå°±æ˜¯è¯´ä½ å¯ä»¥æŠŠå®ƒè®¾ç½®ä¸ºä¸€ä¸ªå˜é‡ï¼š</p>
<p><strong>test.js</strong>:</p>
<pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">var</span> m1Url <span class="token operator">=</span> <span class="token string">'./m1.js'</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> m1 <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span>m1Url<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">// ç”šè‡³åšä¸€äº›å­—ç¬¦ä¸²æ‹¼æ¥ï¼š</span>
<span class="token keyword">var</span> m1 <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./m'</span> <span class="token operator">+</span> <span class="token string">'1.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>å¤åˆ¶ä»£ç 
</code></pre>
<p>ä½†æ˜¯éœ€è¦æ³¨æ„å’¯ï¼Œè¿™ä¸ªä¼ å‚å¯ä»¥ä¸ºè¡¨è¾¾å¼å¹¶ä¸æ˜¯<code>require</code>ç‰¹æœ‰çš„ã€‚å› ä¸º<code>JS</code>è¯­è¨€æ˜¯ä¼ å€¼è°ƒç”¨ï¼Œå‡½æ•°æˆ–è€…æ–¹æ³•åœ¨è°ƒç”¨çš„æ—¶å€™å‚æ•°ä¼šè¢«å…ˆè®¡ç®—å‡ºæ¥ï¼Œå› æ­¤åœ¨æˆ‘ä»¬ä½¿ç”¨<code>require</code>æ–¹æ³•å¹¶ä¼ å…¥è¡¨è¾¾å¼çš„æ—¶å€™ï¼Œä¼šå…ˆè®¡ç®—å‡ºè¡¨è¾¾å¼çš„å€¼å†ä¼ é€’ç»™<code>require</code>ã€‚(æ„Ÿè°¢æ˜å‹<a target="_blank" rel="noopener" href="https://juejin.cn/user/3720403078364791">éª‘è‡ªè¡Œè½¦</a>çš„æŒ‡å‡º)</p>
<h4 id="3-æ¨¡å—æ ‡è¯†ç¬¦-æ ‡è¯†"><a href="#3-æ¨¡å—æ ‡è¯†ç¬¦-æ ‡è¯†" class="headerlink" title="3. æ¨¡å—æ ‡è¯†ç¬¦(æ ‡è¯†)"></a>3. æ¨¡å—æ ‡è¯†ç¬¦(æ ‡è¯†)</h4><p>æ¨¡å—æ ‡è¯†ç¬¦å…¶å®å°±æ˜¯ä½ åœ¨å¼•å…¥æ¨¡å—æ—¶è°ƒç”¨<code>require()</code>å‡½æ•°çš„å‚æ•°ã€‚</p>
<p>ä½ ä¼šçœ‹åˆ°æˆ‘ä»¬ç»å¸¸ä¼šæœ‰è¿™æ ·çš„ç”¨æ³•ï¼š</p>
<pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">// ç›´æ¥å¯¼å…¥</span>
<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">// ç›¸å¯¹è·¯å¾„</span>
<span class="token keyword">const</span> m1 <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./m1.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">// ç›´æ¥å¯¼å…¥</span>
<span class="token keyword">const</span> lodash <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'lodash'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>å¤åˆ¶ä»£ç 
</code></pre>
<p>è¿™å…¶å®æ˜¯å› ä¸ºæˆ‘ä»¬å¼•å…¥çš„æ¨¡å—ä¼šæœ‰ä¸åŒçš„åˆ†ç±»ï¼Œåƒ<code>path</code>è¿™ç§å®ƒæ˜¯<code>Node.js</code>å°±è‡ªå¸¦çš„æ¨¡å—ï¼Œ<code>m1</code>æ˜¯è·¯å¾„æ¨¡å—ï¼Œ<code>lodash</code>æ˜¯æˆ‘ä»¬ä½¿ç”¨<code>npm i lodash</code>ä¸‹è½½åˆ°<code>node_modules</code>é‡Œçš„æ¨¡å—ã€‚</p>
<p>åˆ†ä¸ºä»¥ä¸‹ä¸‰ç§ï¼š</p>
<ul>
<li>æ ¸å¿ƒæ¨¡å—(<code>Node.js</code>è‡ªå¸¦çš„æ¨¡å—)</li>
<li>è·¯å¾„æ¨¡å—(ç›¸å¯¹æˆ–ç»å¯¹å®šä½å¼€å§‹çš„æ¨¡å—)</li>
<li>è‡ªå®šä¹‰æ¨¡å—(<code>node_modules</code>é‡Œçš„æ¨¡å—)</li>
</ul>
<p>ä¸‰ç§æ¨¡å—çš„æŸ¥æ‰¾æ–¹å¼ï¼š</p>
<ul>
<li>æ ¸å¿ƒæ¨¡å—ï¼Œç›´æ¥è·³è¿‡è·¯å¾„åˆ†æå’Œæ–‡ä»¶å®šä½</li>
<li>è·¯å¾„æ¨¡å—ï¼Œç›´æ¥å¾—å‡ºç›¸å¯¹è·¯å¾„å°±å¥½äº†</li>
<li>è‡ªå®šä¹‰æ¨¡å—ï¼Œå…ˆåœ¨å½“å‰ç›®å½•çš„<code>node_modules</code>é‡Œæ‰¾è¿™ä¸ªæ¨¡å—ï¼Œå¦‚æœæ²¡æœ‰ï¼Œå®ƒä¼šå¾€ä¸Šä¸€çº§ç›®å½•æŸ¥æ‰¾ï¼ŒæŸ¥æ‰¾ä¸Šä¸€çº§çš„<code>node_modules</code>ï¼Œä¾æ¬¡å¾€ä¸Šï¼Œç›´åˆ°æ ¹ç›®å½•ä¸‹éƒ½æ²¡æœ‰, å°±æŠ›å‡ºé”™è¯¯ã€‚</li>
</ul>
<p><strong>è‡ªå®šä¹‰æ¨¡å—çš„æŸ¥æ‰¾è¿‡ç¨‹ï¼š</strong></p>
<p>è¿™ä¸ªè¿‡ç¨‹å…¶å®ä¹Ÿå«åš<strong>è·¯å¾„åˆ†æ</strong>ã€‚</p>
<p>ç°åœ¨æˆ‘æŠŠåˆšåˆšçš„<code>test.js</code>æ¥æ”¹ä¸€ä¸‹ï¼š</p>
<pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">// var m1 = require('./m1.js');</span>

<span class="token comment" spellcheck="true">// console.log(m1);</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>module<span class="token punctuation">.</span>paths<span class="token punctuation">)</span>å¤åˆ¶ä»£ç 
</code></pre>
<p>ç„¶ååœ¨ç»ˆç«¯æ‰§è¡Œï¼š</p>
<pre class=" language-javascript"><code class="language-javascript">node test<span class="token punctuation">.</span>jså¤åˆ¶ä»£ç 
</code></pre>
<p>ä¼šå‘ç°è¾“å‡ºäº†ä¸‹é¢çš„ä¸€ä¸ªæ•°ç»„ï¼š</p>
<pre class=" language-javascript"><code class="language-javascript">LinDaiDaideMBP<span class="token punctuation">:</span>commonJS lindaidai$ node test<span class="token punctuation">.</span>js
<span class="token punctuation">[</span>
  <span class="token string">'/Users/lindaidai/codes/test/CommonJSå’ŒES6/commonJS/node_modules'</span><span class="token punctuation">,</span>
  <span class="token string">'/Users/lindaidai/codes/test/CommonJSå’ŒES6/node_modules'</span><span class="token punctuation">,</span>
  <span class="token string">'/Users/lindaidai/codes/test/node_modules'</span><span class="token punctuation">,</span>
  <span class="token string">'/Users/lindaidai/codes/node_modules'</span><span class="token punctuation">,</span>
  <span class="token string">'/Users/lindaidai/node_modules'</span><span class="token punctuation">,</span>
  <span class="token string">'/Users/node_modules'</span><span class="token punctuation">,</span>
  <span class="token string">'/node_modules'</span>
<span class="token punctuation">]</span>å¤åˆ¶ä»£ç 
</code></pre>
<p>è¿™é‡Œæ‰€è¯´çš„æŸ¥æ‰¾ï¼Œæ˜¯æŒ‡æŸ¥æ‰¾ä½ ç°åœ¨ç”¨çš„è¿™ä¸ªæ¨¡å—ï¼Œæˆ‘ç°åœ¨ç”¨çš„æ˜¯<code>test.js</code>ï¼Œä½ å¯èƒ½çœ‹ä¸å‡ºä»€ä¹ˆæ•ˆæœã€‚ç°åœ¨è®©æˆ‘ä»¬æ¥æ¨¡æ‹Ÿä¸€ä¸ªæˆ‘ä»¬ä½¿ç”¨<code>npm i</code>å®‰è£…çš„ä¸€ä¸ªè‡ªå®šä¹‰æ¨¡å—åŠŸèƒ½ã€‚</p>
<p>é¦–å…ˆï¼Œæˆ‘åœ¨æ ¹ç›®å½•ä¸‹æ–°å»ºäº†ä¸€ä¸ªåå«<code>node_modules</code>çš„æ–‡ä»¶å¤¹ï¼Œå¹¶åœ¨å…¶ä¸­æ–°å»ºäº†ä¸€ä¸ªåå«<code>lindaidai.js</code>çš„æ–‡ä»¶ï¼Œç”¨æ¥æ¨¡æ‹Ÿä¸€ä¸ª<code>npm</code>å®‰è£…çš„ä¾èµ–ã€‚</p>
<p>ç›®å½•ç»“æ„ï¼š</p>
<p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/4/30/171cb33ec4f5e5ab~tplv-t2oaga2asx-zoom-in-crop-mark:3024:0:0:0.awebp" alt="img"></p>
<p>ç¨å¾®ç¼–å†™ä¸€ä¸‹<code>lindaidai.js</code>:</p>
<pre class=" language-javascript"><code class="language-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
  print<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'lindaidai'</span><span class="token punctuation">)</span>
  <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'lindaidaiæ¨¡å—ï¼š'</span><span class="token punctuation">,</span> module<span class="token punctuation">.</span>paths<span class="token punctuation">)</span>
</code></pre>
<p>ç„¶ååœ¨<code>test.js</code>ä¸­å¼•å…¥è¿™ä¸ª<code>lindaidai</code>æ¨¡å—:</p>
<pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">// var m1 = require('./m1.js');</span>
<span class="token comment" spellcheck="true">// console.log(m1);</span>
<span class="token comment" spellcheck="true">// console.log(module.paths)</span>

<span class="token keyword">var</span> lindaidai <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'lindaidai'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
lindaidai<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>ç°åœ¨æ‰§è¡Œ<code>node test.js</code>ï¼Œä¼šå‘ç°è¾“å‡ºäº†ï¼š</p>
<pre class=" language-javascript"><code class="language-javascript">LinDaiDaideMBP<span class="token punctuation">:</span>commonJS lindaidai$ node test<span class="token punctuation">.</span>js
lindaidaiæ¨¡å—ï¼š <span class="token punctuation">[</span>
  <span class="token string">'/Users/lindaidai/codes/test/CommonJSå’ŒES6/commonJS/node_modules'</span><span class="token punctuation">,</span>
  <span class="token string">'/Users/lindaidai/codes/test/CommonJSå’ŒES6/node_modules'</span><span class="token punctuation">,</span>
  <span class="token string">'/Users/lindaidai/codes/test/node_modules'</span><span class="token punctuation">,</span>
  <span class="token string">'/Users/lindaidai/codes/node_modules'</span><span class="token punctuation">,</span>
  <span class="token string">'/Users/lindaidai/node_modules'</span><span class="token punctuation">,</span>
  <span class="token string">'/Users/node_modules'</span><span class="token punctuation">,</span>
  <span class="token string">'/node_modules'</span>
<span class="token punctuation">]</span>
lindaidaiå¤åˆ¶ä»£ç 
</code></pre>
<p>æ‰€ä»¥ç°åœ¨ä½ å¯ä»¥çŸ¥é“ï¼Œå¹³å¸¸æˆ‘ä»¬ä½¿ç”¨è¿™ç§ä¾èµ–çš„æ—¶å€™ï¼Œå®ƒæ˜¯æ€æ ·çš„ä¸€ä¸ªæŸ¥æ‰¾é¡ºåºäº†å§ï¼Œå®ƒå…¶å®å°±æ˜¯æŒ‰ç…§è‡ªå®šä¹‰æ¨¡å—çš„é¡ºåºæ¥è¿›è¡ŒæŸ¥æ‰¾ã€‚</p>
<p><strong>æ–‡ä»¶å®šä½ï¼š</strong></p>
<p>ä¸Šé¢ğŸ‘†å·²ç»ä»‹ç»å®Œäº†è·¯å¾„åˆ†æï¼Œä½†æ˜¯è¿˜æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯æˆ‘ä»¬å¯¼å…¥çš„æ¨¡å—å®ƒçš„åç¼€(æ‰©å±•å)æ˜¯å¯ä»¥çœç•¥çš„å•Šï¼Œé‚£<code>Node</code>æ€ä¹ˆçŸ¥é“æˆ‘ä»¬æ˜¯å¯¼å…¥äº†ä¸€ä¸ª<code>js</code>è¿˜æ˜¯ä¸€ä¸ª<code>json</code>å‘¢ï¼Ÿè¿™å…¶å®å°±æ¶‰åŠåˆ°äº†æ–‡ä»¶å®šä½ã€‚</p>
<p>åœ¨NodeJSä¸­, çœç•¥äº†æ‰©å±•åçš„æ–‡ä»¶, ä¼šä¾æ¬¡è¡¥å……ä¸Š.js, .node, .jsonæ¥å°è¯•, å¦‚æœä¼ å…¥çš„æ˜¯ä¸€ä¸ªç›®å½•, é‚£ä¹ˆNodeJSä¼šæŠŠå®ƒå½“æˆä¸€ä¸ªåŒ…æ¥çœ‹å¾…, ä¼šé‡‡ç”¨ä»¥ä¸‹æ–¹å¼ç¡®å®šæ–‡ä»¶å</p>
<p>ç¬¬ä¸€æ­¥, æ‰¾å‡ºç›®å½•ä¸‹çš„package.json, ç”¨JSON.parse()è§£æå‡ºmainå­—æ®µ</p>
<p>ç¬¬äºŒæ­¥, å¦‚æœmainå­—æ®µæŒ‡å®šçš„æ–‡ä»¶è¿˜æ˜¯çœç•¥äº†æ‰©å±•, é‚£ä¹ˆä¼šä¾æ¬¡è¡¥å…….js, .node, .jsonå°è¯•.</p>
<p>ç¬¬ä¸‰éƒ¨, å¦‚æœmainå­—æ®µåˆ¶å®šçš„æ–‡ä»¶ä¸å­˜åœ¨, æˆ–è€…æ ¹æœ¬å°±ä¸å­˜åœ¨package.json, é‚£ä¹ˆä¼šé»˜è®¤åŠ è½½è¿™ä¸ªç›®å½•ä¸‹çš„index.js, index.node, index.jsonæ–‡ä»¶.</p>
<p>ä»¥ä¸Šå°±æ˜¯æ–‡ä»¶å®šä½çš„è¿‡ç¨‹, å†æ­é…ä¸Šè·¯å¾„åˆ†æçš„è¿‡ç¨‹, è¿›è¡Œæ’åˆ—ç»„åˆ, è¿™å¾—æœ‰å¤šå°‘ç§å¯èƒ½å‘€. æ‰€ä»¥è¯´, è‡ªå®šä¹‰æ¨¡å—çš„å¼•å…¥, æ˜¯æœ€è´¹æ€§èƒ½çš„.</p>
<p>(æ€»ç»“æ¥æºï¼š<a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/27644026">https://zhuanlan.zhihu.com/p/27644026</a>)</p>
<h4 id="4-CommonJSè§„èŒƒçš„ç‰¹ç‚¹"><a href="#4-CommonJSè§„èŒƒçš„ç‰¹ç‚¹" class="headerlink" title="4. CommonJSè§„èŒƒçš„ç‰¹ç‚¹"></a>4. CommonJSè§„èŒƒçš„ç‰¹ç‚¹</h4><p>å””â€¦å‘†å‘†æˆ‘å…ˆæŠŠ<code>CommonJS</code>è§„èŒƒçš„ä¸€äº›ç‰¹ç‚¹åˆ—ä¸¾å‡ºæ¥å§ï¼Œç„¶åæˆ‘ä»¬å†ä¸€ç‚¹ä¸€ç‚¹çš„å»çœ‹ä¾‹å­ã€‚</p>
<ul>
<li>æ‰€æœ‰ä»£ç éƒ½è¿è¡Œåœ¨æ¨¡å—ä½œç”¨åŸŸï¼Œä¸ä¼šæ±¡æŸ“å…¨å±€ä½œç”¨åŸŸï¼›</li>
<li>æ¨¡å—æ˜¯åŒæ­¥åŠ è½½çš„ï¼Œå³åªæœ‰åŠ è½½å®Œæˆï¼Œæ‰èƒ½æ‰§è¡Œåé¢çš„æ“ä½œï¼›</li>
<li>æ¨¡å—åœ¨é¦–æ¬¡æ‰§è¡Œåå°±ä¼šç¼“å­˜ï¼Œå†æ¬¡åŠ è½½åªè¿”å›ç¼“å­˜ç»“æœï¼Œå¦‚æœæƒ³è¦å†æ¬¡æ‰§è¡Œï¼Œå¯æ¸…é™¤ç¼“å­˜ï¼›</li>
<li>CommonJSè¾“å‡ºæ˜¯å€¼çš„æ‹·è´(å³ï¼Œ<code>require</code>è¿”å›çš„å€¼æ˜¯è¢«è¾“å‡ºçš„å€¼çš„æ‹·è´ï¼Œæ¨¡å—å†…éƒ¨çš„å˜åŒ–ä¹Ÿä¸ä¼šå½±å“è¿™ä¸ªå€¼)ã€‚</li>
</ul>
<p>(æ€»ç»“æ¥æºï¼š<a target="_blank" rel="noopener" href="https://juejin.cn/post/6844903983987834888">https://juejin.cn/post/6844903983987834888</a>)</p>
<p>ç¬¬ä¸€ç‚¹è¿˜æ˜¯å¥½ç†è§£çš„ï¼Œå’±æ¨¡å—çš„ä¸€ä¸ªé‡è¦çš„åŠŸèƒ½ä¸å°±æ˜¯è¿™ä¸ªå—ã€‚</p>
<p>ç¬¬äºŒç‚¹<strong>åŒæ­¥åŠ è½½</strong>ï¼Œè¿™ä¸ªå†™ä¸ªæ¡ˆä¾‹æˆ‘ä»¬æ¥éªŒè¯ä¸€ä¸‹ã€‚</p>
<p><strong>åŒæ­¥åŠ è½½æ¡ˆä¾‹</strong>ï¼š</p>
<p><em>m1.js</em>:</p>
<pre class=" language-javascript"><code class="language-javascript">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'æˆ‘æ˜¯m1æ¨¡å—'</span><span class="token punctuation">)</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    name<span class="token punctuation">:</span> <span class="token string">'lindaidai'</span><span class="token punctuation">,</span>
    sex<span class="token punctuation">:</span> <span class="token string">'boy'</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>å¤åˆ¶ä»£ç 
</code></pre>
<p><em>test.js</em></p>
<pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">var</span> m1 <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./m1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'æˆ‘æ˜¯testæ¨¡å—'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>å¤åˆ¶ä»£ç 
</code></pre>
<p>å¯ä»¥çœ‹åˆ°ï¼Œ<code>test</code>æ¨¡å—ä¾èµ–äº<code>m1</code>ï¼Œä¸”æ˜¯å…ˆä¸‹è½½çš„<code>m1</code>æ¨¡å—ï¼Œæ‰€ä»¥å¦‚æœæˆ‘æ‰§è¡Œ<code>node test.js</code>ï¼Œä¼šæœ‰ä»¥ä¸‹çš„æ‰§è¡Œç»“æœï¼š</p>
<pre class=" language-javascript"><code class="language-javascript">LinDaiDaideMBP<span class="token punctuation">:</span>commonJS lindaidai$ node test<span class="token punctuation">.</span>js
æˆ‘æ˜¯m1æ¨¡å—
æˆ‘æ˜¯testæ¨¡å—å¤åˆ¶ä»£ç 
</code></pre>
<p>è¿™ä¹Ÿå°±éªŒè¯äº†<code>CommonJS</code>ä¸­ï¼Œæ¨¡å—æ˜¯åŒæ­¥åŠ è½½çš„ï¼Œå³åªæœ‰åŠ è½½å®Œæˆï¼Œæ‰èƒ½æ‰§è¡Œåé¢çš„æ“ä½œã€‚</p>
<p>ç¬¬ä¸‰ç‚¹<strong>æ¨¡å—é¦–æ¬¡æ‰§è¡Œåä¼šç¼“å­˜</strong>ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥å†™ä¸ªæ¡ˆä¾‹æ¥éªŒè¯ä¸€ä¸‹ã€‚</p>
<p><strong>æ¨¡å—é¦–æ¬¡æ‰§è¡Œåä¼šç¼“å­˜æ¡ˆä¾‹ï¼š</strong></p>
<p><em>m1.js</em>:</p>
<pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">var</span> name <span class="token operator">=</span> <span class="token string">'lindaidai'</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> sex <span class="token operator">=</span> <span class="token string">'boy'</span><span class="token punctuation">;</span>

exports<span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
exports<span class="token punctuation">.</span>sex <span class="token operator">=</span> sex<span class="token punctuation">;</span>
</code></pre>
<p><em>test.js</em>:</p>
<pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">var</span> m1 <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./m1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
m1<span class="token punctuation">.</span>sex <span class="token operator">=</span> <span class="token string">'girl'</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>m1<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> m2 <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./m1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>m2<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p><code>test</code>åŒæ ·ä¾èµ–äº<code>m1</code>ï¼Œä½†æ˜¯æˆ‘ä¼šåœ¨å…¶ä¸­å¯¼å…¥ä¸¤æ¬¡<code>m1</code>ï¼Œç¬¬ä¸€æ¬¡å¯¼å…¥çš„æ—¶å€™ä¿®æ”¹äº†<code>m1.sex</code>çš„å€¼ï¼Œç¬¬äºŒæ¬¡çš„æ—¶å€™å‘½åä¸º<code>m2</code>ï¼Œä½†æ˜¯ç»“æœ<code>m1</code>å’Œ<code>m2</code>ç«Ÿç„¶æ˜¯ç›¸ç­‰çš„ï¼š</p>
<pre class=" language-css"><code class="language-css"><span class="token property">LinDaiDaideMBP</span><span class="token punctuation">:</span>commonJS lindaidai$ node test<span class="token number">.</span>js
&amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span> <span class="token property">name</span><span class="token punctuation">:</span> <span class="token string">'lindaidai'</span>, <span class="token property">sex</span><span class="token punctuation">:</span> <span class="token string">'girl'</span> &amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span>
&amp;<span class="token hexcode">#123</span><span class="token punctuation">;</span> <span class="token property">name</span><span class="token punctuation">:</span> <span class="token string">'lindaidai'</span>, <span class="token property">sex</span><span class="token punctuation">:</span> <span class="token string">'girl'</span> &amp;<span class="token hexcode">#125</span><span class="token punctuation">;</span>å¤åˆ¶ä»£ç 
</code></pre>
<p>ä¹Ÿå°±æ˜¯è¯´æ¨¡å—åœ¨é¦–æ¬¡æ‰§è¡Œåå°±ä¼šç¼“å­˜ï¼Œå†æ¬¡åŠ è½½åªè¿”å›ç¼“å­˜ç»“æœï¼Œè¿™é‡Œæˆ‘æ˜¯ç”¨äº†æ”¹å˜<code>m1.sex</code>çš„å€¼æ¥è¯æ˜å®ƒç¡®å®æ˜¯å–äº†ç¼“å­˜ç»“æœã€‚</p>
<p>é‚£ä¹ˆå°±æœ‰å°ä¼™ä¼´ä¼šç–‘æƒ‘äº†ï¼Œå…¶å®ä½ è¿™æ ·å†™ä¹Ÿå¹¶ä¸èƒ½è¯æ˜å•Šï¼Œå› ä¸ºä½ æ”¹å˜äº†<code>m1.sex</code>ä¹Ÿå¯èƒ½æ˜¯å½±å“åŸæœ¬<code>m1</code>æ¨¡å—é‡Œçš„<code>sex</code>å±æ€§å‘€ï¼Œè¿™æ ·çš„è¯ç¬¬äºŒæ¬¡<code>m2</code>æ‹¿åˆ°çš„è‚¯å®šå°±æ˜¯è¢«æ”¹å˜çš„å€¼äº†ã€‚</p>
<p>å””â€¦æˆ‘æ­£æƒ³è¯æ˜æ¥ç€å‘¢ã€‚å› ä¸º<code>CommonJS</code>çš„ç¬¬å››ä¸ªç‰¹ç‚¹å°±å¯ä»¥å¾ˆå¥½çš„è§£å†³ä½ è¿™ä¸ªç–‘é—®ã€‚</p>
<p>ç¬¬å››ç‚¹<strong>CommonJSè¾“å‡ºæ˜¯å€¼çš„æ‹·è´</strong>ï¼Œä¹Ÿå°±æ˜¯è¯´ä½ ç”¨<code>require()</code>å¼•å…¥äº†æ¨¡å—ï¼Œä½†æ˜¯ä½ åœ¨æœ€æ–°çš„æ¨¡å—ä¸­æ€æ ·å»æ”¹å˜ï¼Œä¹Ÿä¸ä¼šå½±å“ä½ å·²ç»<code>require()</code>çš„æ¨¡å—ã€‚æ¥çœ‹ä¸ªæ¡ˆä¾‹ã€‚</p>
<p><strong>CommonJSè¾“å‡ºæ˜¯å€¼çš„æ‹·è´æ¡ˆä¾‹</strong>ï¼š</p>
<p><em>m1.js</em>:</p>
<pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">var</span> name <span class="token operator">=</span> <span class="token string">'lindaidai'</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> sex <span class="token operator">=</span> <span class="token string">'boy'</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> advantage <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'handsome'</span><span class="token punctuation">]</span>

<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
  sex <span class="token operator">=</span> <span class="token string">'girl'</span><span class="token punctuation">;</span>
  advantage<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'cute'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span>

exports<span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
exports<span class="token punctuation">.</span>sex <span class="token operator">=</span> sex<span class="token punctuation">;</span>
exports<span class="token punctuation">.</span>advantage <span class="token operator">=</span> advantage<span class="token punctuation">;</span>å¤åˆ¶ä»£ç 
</code></pre>
<p><em>test.js</em>:</p>
<pre class=" language-applescript"><code class="language-applescript">var m1 <span class="token operator">=</span> require<span class="token punctuation">(</span>'.<span class="token operator">/</span>m1'<span class="token punctuation">)</span>;
setTimeout<span class="token punctuation">(</span>function <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span><span class="token comment" spellcheck="true">#123;</span>
  console.log<span class="token punctuation">(</span>'read count <span class="token keyword">after</span> 1000ms <span class="token keyword">in</span> commonjs <span class="token keyword">is</span>'<span class="token punctuation">,</span> m1.sex<span class="token punctuation">)</span>
  console.log<span class="token punctuation">(</span>'read count <span class="token keyword">after</span> 1000ms <span class="token keyword">in</span> commonjs <span class="token keyword">is</span>'<span class="token punctuation">,</span> m1.advantage<span class="token punctuation">)</span>
<span class="token operator">&amp;</span><span class="token comment" spellcheck="true">#125;, 1000)å¤åˆ¶ä»£ç </span>
</code></pre>
<p>æ‰§è¡Œ<code>node test.js</code>ä¹‹åçš„æ‰§è¡Œç»“æœæ˜¯ï¼š</p>
<pre class=" language-applescript"><code class="language-applescript">LinDaiDaideMBP<span class="token punctuation">:</span>commonJS lindaidai$ node test.js
read count <span class="token keyword">after</span> 1000ms <span class="token keyword">in</span> commonjs <span class="token keyword">is</span> boy
read count <span class="token keyword">after</span> 1000ms <span class="token keyword">in</span> commonjs <span class="token keyword">is</span> [ 'handsome'<span class="token punctuation">,</span> 'cute' ]å¤åˆ¶ä»£ç 
</code></pre>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨å¼€å§‹<code>var m1 = require(&#39;./m1&#39;)</code>çš„æ—¶å€™ï¼Œ<code>m1</code>å·²ç»è¢«å¼•å…¥è¿›æ¥äº†ï¼Œä½†æ˜¯è¿‡äº†<code>500ms</code>åæˆ‘æ”¹å˜äº†åŸæœ¬<code>m1</code>é‡Œçš„ä¸€äº›å±æ€§ï¼Œ<code>sex</code>è¿™ç§åŸºæœ¬æ•°æ®ç±»å‹æ˜¯ä¸ä¼šè¢«æ”¹å˜çš„ï¼Œä½†æ˜¯<code>advantage</code>è¿™ç§å¼•ç”¨ç±»å‹å…±ç”¨çš„è¿˜æ˜¯åŒä¸€ä¸ªå†…å­˜åœ°å€ã€‚ï¼ˆè¿™ç§å¤åˆ¶çš„å…³ç³»è®©æˆ‘æƒ³åˆ°äº†ä¹‹å‰å­¦åŸå‹é“¾ç»§æ‰¿çš„æ—¶å€™ï¼Œå®ƒé‚£é‡Œä¹Ÿæ˜¯ï¼Œä¼šå½±å“<code>Father.prototype</code>ä¸Šçš„å¼•ç”¨ç±»å‹ï¼‰</p>
<p>å¦‚æœè¿™é‡Œä½ æ˜¯è¿™æ ·å†™çš„è¯ï¼š</p>
<p><em>m1.js</em>:</p>
<pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">var</span> name <span class="token operator">=</span> <span class="token string">'lindaidai'</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> sex <span class="token operator">=</span> <span class="token string">'boy'</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> advantage <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'handsome'</span><span class="token punctuation">]</span>

<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
  sex <span class="token operator">=</span> <span class="token string">'girl'</span><span class="token punctuation">;</span>
  <span class="token comment" spellcheck="true">// advantage.push('cute');</span>
  advantage <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'cute'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span>

exports<span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
exports<span class="token punctuation">.</span>sex <span class="token operator">=</span> sex<span class="token punctuation">;</span>
exports<span class="token punctuation">.</span>advantage <span class="token operator">=</span> advantage<span class="token punctuation">;</span>å¤åˆ¶ä»£ç 
</code></pre>
<p>ç°åœ¨çš„æ‰§è¡Œç»“æœè‚¯å®šå°±æ˜¯ï¼š</p>
<pre class=" language-javascript"><code class="language-javascript">LinDaiDaideMBP<span class="token punctuation">:</span>commonJS lindaidai$ node test<span class="token punctuation">.</span>js
read count after 1000ms <span class="token keyword">in</span> commonjs is boy
read count after 1000ms <span class="token keyword">in</span> commonjs is <span class="token punctuation">[</span> <span class="token string">'handsome'</span> <span class="token punctuation">]</span>å¤åˆ¶ä»£ç 
</code></pre>
<p>å› ä¸ºç›¸å½“äºå¯¹<code>m1</code>çš„<code>advantage</code>é‡æ–°èµ‹å€¼äº†ã€‚</p>
<p>å½“ç„¶ï¼Œæˆ–è€…å¦‚æœä½ çš„<code>m1.js</code>ä¸­è¿”å›çš„å€¼æ˜¯ä¼šæœ‰ä¸€ä¸ªå‡½æ•°çš„è¯ï¼Œåœ¨<code>test.js</code>ä¹Ÿèƒ½æ‹¿åˆ°å˜åŒ–ä¹‹åçš„å€¼äº†ï¼Œæ¯”å¦‚è¿™é‡Œçš„ä¸€ä¸ªä¾‹å­ï¼š</p>
<pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">var</span> counter <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">incCounter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
  counter<span class="token operator">++</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
  <span class="token keyword">get</span> <span class="token function">counter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> counter
  <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">,</span>
  incCounter<span class="token punctuation">:</span> incCounter<span class="token punctuation">,</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">;</span>å¤åˆ¶ä»£ç 
</code></pre>
<p>å› ä¸ºåœ¨è¿™é‡Œå®é™…å°±å½¢æˆäº†ä¸€ä¸ªé—­åŒ…ï¼Œè€Œ<code>counter</code>å±æ€§å°±æ˜¯ä¸€ä¸ªå–å€¼å™¨å‡½æ•°ã€‚</p>
<p>å¥½æ»´ï¼Œè¿™åŸºæœ¬å°±æ˜¯<code>CommonJS</code>çš„ç‰¹ç‚¹äº†ï¼Œæ€»ç»“å°±ä¸å†™äº†ï¼Œåœ¨å¼€å¤´å·²ç»è¯´è¿‡äº†ï¼Œä¸è¿‡å¯¹äºæœ€åä¸€ç‚¹ï¼š<strong>CommonJSè¾“å‡ºæ˜¯å€¼çš„æ‹·è´</strong>ï¼Œè¿™ä¸ªå¯¹äºå¼•ç”¨ç±»å‹çš„å˜é‡æ¥è¯´è¿˜æ˜¯ä¼šæœ‰ä¸€ç‚¹æ­§ä¹‰çš„ï¼Œæ¯”å¦‚ä¸Šé¢çš„<code>advantage</code>é‚£ä¸ªä¾‹å­ï¼Œå¤§å®¶çŸ¥é“å°±è¡Œäº†ã€‚</p>
<h3 id="AMDè§„èŒƒ"><a href="#AMDè§„èŒƒ" class="headerlink" title="AMDè§„èŒƒ"></a>AMDè§„èŒƒ</h3><h4 id="1-äº§ç”ŸåŸå› "><a href="#1-äº§ç”ŸåŸå› " class="headerlink" title="1. äº§ç”ŸåŸå› "></a>1. äº§ç”ŸåŸå› </h4><p>ä¸Šé¢ä»‹ç»çš„<code>CommonJS</code>è§„èŒƒçœ‹èµ·æ¥æŒºå¥½ç”¨çš„å•Šï¼Œä¸ºä»€ä¹ˆåˆè¿˜è¦æœ‰å…¶å®ƒçš„è§„èŒƒå‘¢ï¼Ÿæ¯”å¦‚<code>AMDã€CMD</code>ï¼Œé‚£å®ƒä»¬å’Œ<code>CommonJS</code>åˆæœ‰ä»€ä¹ˆæ¸Šæºå‘¢ï¼Ÿ</p>
<p>æˆ‘ä»¬çŸ¥é“ï¼Œæ¨¡å—åŒ–è¿™ç§æ¦‚å¿µä¸ä»…ä»…é€‚ç”¨äºæœåŠ¡å™¨ç«¯ï¼Œå®¢æˆ·ç«¯åŒæ ·ä¹Ÿé€‚ç”¨ã€‚</p>
<p>è€Œ<code>CommonJS</code>è§„èŒƒå°±ä¸å¤ªé€‚åˆç”¨åœ¨å®¢æˆ·ç«¯(æµè§ˆå™¨)ç¯å¢ƒäº†ï¼Œæ¯”å¦‚ä¸Šé¢çš„é‚£ä¸ªä¾‹å­ï¼Œä¹Ÿå°±æ˜¯:</p>
<p><strong>test.js</strong>:</p>
<pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">const</span> m1 <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./m1.js'</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>m1<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">// ä¸m1æ¨¡å—æ— å…³çš„ä¸€äº›ä»£ç </span>
<span class="token keyword">function</span> other <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
<span class="token function">other</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>å¤åˆ¶ä»£ç 
</code></pre>
<p>è¿™æ®µä»£ç æ”¾åœ¨æµè§ˆå™¨ç¯å¢ƒä¸­ï¼Œå®ƒä¼šå¦‚ä½•è¿è¡Œå‘¢ï¼Ÿ</p>
<ul>
<li>é¦–å…ˆåŠ è½½<code>m1.js</code></li>
<li>ç­‰<code>m1.js</code>åŠ è½½å®Œæ¯•ä¹‹åæ‰æ‰§è¡Œåé¢çš„å†…å®¹</li>
</ul>
<p>è¿™ç‚¹å…¶å®åœ¨<strong>CommonJSè§„èŒƒçš„ç‰¹ç‚¹</strong>ä¸­å·²ç»æåˆ°è¿‡äº†ã€‚</p>
<p>åé¢çš„å†…å®¹è¦ç­‰å¾…<code>m1</code>åŠ è½½å®Œæ‰ä¼šæ‰§è¡Œï¼Œå¦‚æœ<code>m1</code>åŠ è½½çš„å¾ˆæ…¢å‘¢ï¼Ÿé‚£ä¸å°±ç…§æˆäº†å¡é¡¿ï¼Œè¿™å¯¹äºå®¢æˆ·ç«¯æ¥è¯´è‚¯å®šæ˜¯ä¸å‹å¥½çš„ã€‚åƒè¿™ç§è¦ç­‰å¾…ä¸Šä¸€ä¸ªåŠ è½½å®Œæ‰æ‰§è¡Œåé¢å†…å®¹çš„æƒ…å†µæˆ‘ä»¬å¯ä»¥å«åš<code>&quot;åŒæ­¥åŠ è½½&quot;</code>ï¼Œå¾ˆæ˜¾ç„¶ï¼Œè¿™é‡Œæˆ‘ä»¬æ›´å¸Œæœ›çš„æ˜¯<code>other()</code>çš„æ‰§è¡Œä¸éœ€è¦ç­‰<code>m1</code>åŠ è½½å®Œæ‰æ‰§è¡Œï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬å¸Œæœ›<code>m1</code>å®ƒæ˜¯<code>&quot;å¼‚æ­¥åŠ è½½&quot;</code>çš„ï¼Œè¿™ä¹Ÿå°±æ˜¯<code>AMD</code>ã€‚</p>
<p>åœ¨ä»‹ç»<code>AMD</code>ä¹‹å‰è®©æˆ‘ä»¬çœ‹çœ‹<code>CommonJS</code>è§„èŒƒå¯¹æœåŠ¡å™¨ç«¯å’Œæµè§ˆå™¨çš„ä¸åŒï¼Œå®ƒæœ‰åŠ©äºè®©ä½ ç†è§£ä¸ºä»€ä¹ˆè¯´<code>CommonJS</code>ä¸å¤ªé€‚åˆäºå®¢æˆ·ç«¯ï¼š</p>
<ul>
<li>æœåŠ¡å™¨ç«¯æ‰€æœ‰çš„æ¨¡å—éƒ½å­˜æ”¾åœ¨æœ¬åœ°ç¡¬ç›˜ä¸­ï¼Œå¯ä»¥åŒæ­¥åŠ è½½å®Œæˆï¼Œç­‰å¾…æ—¶é—´å°±æ˜¯ç¡¬ç›˜çš„è¯»å–æ—¶é—´ã€‚</li>
<li>æµè§ˆå™¨ï¼Œæ‰€æœ‰çš„æ¨¡å—éƒ½æ”¾åœ¨æœåŠ¡å™¨ç«¯ï¼Œç­‰å¾…æ—¶é—´å–å†³äºç½‘é€Ÿçš„å¿«æ…¢ï¼Œå¯èƒ½è¦ç­‰å¾ˆé•¿æ—¶é—´ï¼Œæµè§ˆå™¨å¤„äºâ€å‡æ­»â€çŠ¶æ€ã€‚</li>
</ul>
<h4 id="2-å®šä¹‰å¹¶æš´éœ²æ¨¡å—"><a href="#2-å®šä¹‰å¹¶æš´éœ²æ¨¡å—" class="headerlink" title="2. å®šä¹‰å¹¶æš´éœ²æ¨¡å—"></a>2. å®šä¹‰å¹¶æš´éœ²æ¨¡å—</h4><p>æœ‰äº†ä¸Šé¢è¿™å±‚èƒŒæ™¯ï¼Œæˆ‘ä»¬å°±çŸ¥é“äº†ï¼Œ<code>AMD</code>å®ƒçš„äº§ç”Ÿå¾ˆå¤§ä¸€éƒ¨åˆ†åŸå› å°±æ˜¯ä¸ºäº†èƒ½è®©æˆ‘ä»¬é‡‡ç”¨<strong>å¼‚æ­¥çš„æ–¹å¼åŠ è½½æ¨¡å—</strong>ã€‚</p>
<p>æ‰€ä»¥ç°åœ¨æ¥è®©æˆ‘ä»¬çœ‹çœ‹å®ƒçš„ä»‹ç»å§ã€‚</p>
<p><code>AMD</code>æ˜¯<code>Asynchronous Module Definition</code>çš„ç¼©å†™ï¼Œä¹Ÿå°±æ˜¯<code>&quot;å¼‚æ­¥æ¨¡å—å®šä¹‰&quot;</code>ã€‚ï¼ˆå‰é¢çš„<code>A</code>å°±å¾ˆå¥½è®°äº†ï¼Œå®ƒè®©æˆ‘ä¸è‡ªè§‰çš„å°±æƒ³åˆ°<code>async</code>è¿™ä¸ªå®šä¹‰å¼‚æ­¥å‡½æ•°çš„ä¿®é¥°ç¬¦ï¼‰</p>
<blockquote>
<p>å®ƒé‡‡ç”¨å¼‚æ­¥æ–¹å¼åŠ è½½æ¨¡å—ï¼Œæ¨¡å—çš„åŠ è½½ä¸å½±å“å®ƒåé¢è¯­å¥çš„è¿è¡Œã€‚æ‰€æœ‰ä¾èµ–è¿™ä¸ªæ¨¡å—çš„è¯­å¥ï¼Œéƒ½å®šä¹‰åœ¨ä¸€ä¸ªå›è°ƒå‡½æ•°ä¸­ï¼Œç­‰åˆ°åŠ è½½å®Œæˆä¹‹åï¼Œè¿™ä¸ªå›è°ƒå‡½æ•°æ‰ä¼šè¿è¡Œã€‚</p>
</blockquote>
<p>æ­¤æ—¶å°±éœ€è¦å¦ä¸€ä¸ªé‡è¦çš„æ–¹æ³•æ¥å®šä¹‰æˆ‘ä»¬çš„æ¨¡å—ï¼š<code>define()</code>ã€‚</p>
<p>å®ƒå…¶å®æ˜¯ä¼šæœ‰ä¸‰ä¸ªå‚æ•°ï¼š</p>
<pre class=" language-javascript"><code class="language-javascript"><span class="token function">define</span><span class="token punctuation">(</span>id<span class="token operator">?</span><span class="token punctuation">,</span> dependencies<span class="token operator">?</span><span class="token punctuation">,</span> factory<span class="token punctuation">)</span>å¤åˆ¶ä»£ç 
</code></pre>
<ul>
<li>id: ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè¡¨ç¤ºæ¨¡å—çš„åç§°ï¼Œä½†æ˜¯æ˜¯å¯é€‰çš„</li>
<li>dependencies: ä¸€ä¸ªæ•°ç»„ï¼Œæ˜¯æˆ‘ä»¬å½“å‰å®šä¹‰çš„æ¨¡å—è¦ä¾èµ–äºå“ªäº›æ¨¡å—ï¼Œæ•°ç»„ä¸­çš„æ¯ä¸€é¡¹è¡¨ç¤ºçš„æ˜¯è¦ä¾èµ–æ¨¡å—çš„ç›¸å¯¹è·¯å¾„ï¼Œä¸”è¿™ä¸ªå‚æ•°ä¹Ÿæ˜¯å¯é€‰çš„</li>
<li>factory: å·¥å‚æ–¹æ³•ï¼Œä¸€ä¸ªå‡½æ•°ï¼Œè¿™é‡Œé¢å°±æ˜¯å…·ä½“çš„æ¨¡å—å†…å®¹äº†</li>
</ul>
<p><strong>å‘ä¸€</strong>ï¼š</p>
<p>é‚£å…¶å®å°±æœ‰ä¸€ä¸ªé—®é¢˜äº†ï¼Œçœ‹äº†è¿™ä¹ˆå¤šçš„æ•™æï¼Œä½†æˆ‘æƒ³è¦å»å†™æ¡ˆä¾‹çš„æ—¶å€™ï¼Œæˆ‘ä»¥ä¸ºè¿™ä¸ª<code>define</code>èƒ½ç›´æ¥åƒ<code>require</code>ä¸€æ ·å»ç”¨ï¼Œç»“æœå‘ç°æ§åˆ¶å°ä¸€ç›´å†æŠ¥é”™ï¼š</p>
<pre class=" language-maxima"><code class="language-maxima">ReferenceError: define is not defined
</code></pre>
<p>çœ‹æ¥å®ƒè¿˜å¹¶ä¸æ˜¯<code>Node.js</code>è‡ªå¸¦çš„ä¸€ä¸ªæ–¹æ³•å•Šï¼Œæœå¯»äº†ä¸€ä¸‹ï¼ŒåŸæ¥å®ƒåªæ˜¯åä¹‰ä¸Šè§„å®šçš„è¿™æ ·ä¸€ä¸ªæ–¹æ³•ï¼Œä½†æ˜¯ä½ çœŸçš„æƒ³è¦å»ç”¨è¿˜æ˜¯å¾—ä½¿ç”¨å¯¹åº”çš„<code>JavaScript</code>åº“ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬å¸¸å¸¸å¬åˆ°çš„ï¼š</p>
<blockquote>
<p>ç›®å‰ï¼Œä¸»è¦æœ‰ä¸¤ä¸ªJavascriptåº“å®ç°äº†AMDè§„èŒƒï¼šrequire.jså’Œcurl.jsã€‚</p>
</blockquote>
<p>æˆ‘é…¸äº†â€¦</p>
<p>è®©æˆ‘ä»¬å»<a href="https://link.juejin.cn/?target=https://requirejs.org/docs/download.html">requirejs</a>çš„å®˜ç½‘çœ‹çœ‹å¦‚ä½•ä½¿ç”¨å®ƒï¼Œç”±äºæˆ‘çš„æ¡ˆä¾‹éƒ½æ˜¯åœ¨<code>Node</code>æ‰§è¡Œç¯å¢ƒä¸­ï¼Œäºæ˜¯æˆ‘é‡‡ç”¨<code>npm install</code>çš„æ–¹å¼æ¥ä¸‹è½½äº†ï¼š</p>
<p>æˆ‘æ–°å»ºäº†ä¸€ä¸ªå«<code>AMD</code>çš„æ–‡ä»¶å¤¹ï¼Œä½œä¸º<code>AMD</code>çš„æ¡ˆä¾‹ã€‚</p>
<p>åœ¨é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹æ‰§è¡Œï¼š</p>
<pre class=" language-coffeescript"><code class="language-coffeescript">npm i requirejså¤åˆ¶ä»£ç 
</code></pre>
<p>ï¼ˆæ‰¾äº†ä¸€åœˆ<a href="https://link.juejin.cn/?target=https://www.npmjs.com/">NPM</a>ä¹Ÿæ²¡çœ‹åˆ°èƒ½ä½¿ç”¨<code>CDN</code>è¿œç¨‹å¼•å…¥çš„ï¼‰</p>
<p>æ‰§è¡Œå®Œæ¯•ä¹‹åï¼Œé¡¹ç›®çš„æ ¹ç›®å½•ä¸‹å‡ºç°äº†ä¾èµ–åŒ…ï¼Œæ‰“å¼€çœ‹äº†çœ‹ï¼Œç¡®å®æ˜¯ä¸‹è½½ä¸‹æ¥äº†ï¼š</p>
<p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/4/30/171cb3507d7a13be~tplv-t2oaga2asx-zoom-in-crop-mark:3024:0:0:0.awebp" alt="img"></p>
<p>ç°åœ¨å¯ä»¥å¼€å¿ƒçš„åœ¨é¡¹ç›®é‡Œç”¨<code>define()</code>äº† ğŸ˜Šã€‚</p>
<p>æ¥çœ‹ä¸ªå°ä¾‹å­ï¼Œæˆ‘é‡æ–°å®šä¹‰äº†ä¸€ä¸ª<code>math.js</code>ï¼š</p>
<p><strong>math.js</strong></p>
<pre class=" language-javascript"><code class="language-javascript"><span class="token function">define</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> add <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> a <span class="token operator">+</span> b<span class="token punctuation">;</span>
  <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    add<span class="token punctuation">:</span> add
  <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">)</span>å¤åˆ¶ä»£ç 
</code></pre>
<p>è¿™é‡Œæ¨¡å—å¾ˆç®€å•ï¼Œå¯¼å‡ºäº†ä¸€ä¸ªåŠ æ³•å‡½æ•°ã€‚</p>
<p>(è‡³äºè¿™é‡Œä¸ºä»€ä¹ˆ<code>add: add</code>è¦è¿™æ ·å†™ï¼Œè€Œä¸æ˜¯åªç®€å†™ä¸º<code>add</code>å‘¢ï¼Ÿåˆ«å¿˜äº†è¿™ç§å¯¹è±¡åŒåå±æ€§ç®€å†™æ˜¯<code>ES6</code>æ‰å‡ºæ¥çš„å“¦)</p>
<h4 id="3-å¼•ç”¨æ¨¡å—"><a href="#3-å¼•ç”¨æ¨¡å—" class="headerlink" title="3. å¼•ç”¨æ¨¡å—"></a>3. å¼•ç”¨æ¨¡å—</h4><p><strong>å‘äºŒ</strong>ï¼š</p>
<p>OKğŸ‘Œï¼Œæ—¢ç„¶æ¨¡å—å·²ç»èƒ½å¯¼å‡ºäº†ï¼Œé‚£å°±è®©æˆ‘ä»¬æ¥çœ‹çœ‹å¦‚ä½•å¼•ç”¨å§ï¼Œä¾ç…§ç€æ•™æï¼Œæˆ‘åœ¨<code>test.js</code>ä¸­å¼•å…¥äº†<code>math</code>æ¨¡å—å¹¶æƒ³è¦è°ƒç”¨<code>add()</code>æ–¹æ³•ï¼š</p>
<p><strong>test.js</strong>:</p>
<pre class=" language-javascript"><code class="language-javascript"><span class="token function">require</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'math'</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span>math<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>math<span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>math<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">)</span>å¤åˆ¶ä»£ç 
</code></pre>
<p>ä¹‹åç†Ÿç»ƒçš„æ‰§è¡Œ<code>node test.js</code>ã€‚</p>
<p>æˆ‘é…¸äº†â€¦</p>
<p>åˆæŠ¥é”™äº†ï¼Œæ“¦â€¦</p>
<pre class=" language-smali"><code class="language-smali"> throw new ERR_INVALID_ARG_TYPE(name, 'string', value);
 TypeError [ERR_INVALID_ARG_TYPE]: The "id" argument must be of type string. Received an instance of Arrayå¤åˆ¶ä»£ç 
</code></pre>
<p>ç¡®è®¤äº†ä¸€ä¸‹ï¼Œå’Œæ•™æä»¬ä¸­çš„å†™æ³•ä¸€æ ·å•Šï¼Œç¬¬ä¸€ä¸ªå‚æ•°ä¸ºè¦åŠ è½½çš„æ¨¡å—æ•°ç»„ï¼Œç¬¬äºŒä¸ªå‚æ•°ä¸ºåŠ è½½å®Œä¹‹åçš„å›è°ƒã€‚</p>
<p>éš¾å—ğŸ˜£â€¦åŸæ¥ä¸Šé¢ğŸ‘†<code>require([modules], callback)</code>è¿™æ ·çš„å†™æ³•å®ƒå’Œ<code>define</code>ä¸€æ ·éƒ½åªæ˜¯ä¸ªå™±å¤´ï¼Œå¦‚æœä½ çœŸå¾—ç”¨çš„è¯ï¼Œè¿˜æ˜¯å¾—ç”¨<code>JavaScript</code>åº“ä¸­çš„æ–¹æ³•ã€‚</p>
<p>ç”±äºä¸Šé¢å·²ç»å®‰è£…è¿‡<code>requirejs</code>äº†ï¼Œè¿™é‡Œæˆ‘ç›´æ¥ä½¿ç”¨å°±å¯ä»¥äº†ï¼Œç°åœ¨æˆ‘ä¿®æ”¹äº†ä¸€ä¸‹<code>test.js</code>æ–‡ä»¶ï¼š</p>
<pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">var</span> requirejs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"requirejs"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//å¼•å…¥requirejsæ¨¡å—</span>

<span class="token function">requirejs</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'math'</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span>math<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>math<span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>math<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">)</span>å¤åˆ¶ä»£ç 
</code></pre>
<p>å¥½äº†ï¼Œç°åœ¨æ‰§è¡Œ<code>node test.js</code>å°±å¯ä»¥æ­£å¸¸ä½¿ç”¨äº†â€¦</p>
<p>ï¼ˆå¾ˆéš¾å—â€¦æ„Ÿè§‰æ˜æ˜å·²ç»æ˜¯å¾ˆå¸¸è§è€³ç†Ÿèƒ½è¯¦çš„ä¸€äº›çŸ¥è¯†äº†ï¼ŒçœŸçš„è¦å»ç”¨çš„æ—¶å€™å‘ç°å’Œå¾ˆå¤šæ•™æä¸­è¯´çš„ä¸æ˜¯é‚£ä¹ˆä¸€å›äº‹â€¦ä¹Ÿå¸Œæœ›å¤§å®¶åœ¨çœ‹å®Œäº†ä¸€äº›æ•™æä¹‹åæœ€å¥½èƒ½äº²è‡ªå»å®è·µä¸€ä¸‹ï¼Œå› ä¸ºå‘†å‘†è‡ªå·±ä¹Ÿæ˜¯å†™åšå®¢çš„ï¼Œæ‰€ä»¥ä¹ŸçŸ¥é“æœ‰äº›æ—¶å€™ä¸€äº›çŸ¥è¯†ç‚¹å¯èƒ½ä¹Ÿæ˜¯ä»åˆ«äººçš„æ–‡ç« é‚£é‡Œçœ‹æ¥ä½†æ˜¯æ²¡æœ‰ç»è¿‡å®è·µçš„ï¼Œæ‰€ä»¥æœ€å¥½ä¹Ÿè¿˜æ˜¯è‡ªå·±åŠ¨åŠ¨æ‰‹ï¼‰</p>
<h4 id="4-ä¾èµ–å…¶å®ƒæ¨¡å—çš„define"><a href="#4-ä¾èµ–å…¶å®ƒæ¨¡å—çš„define" class="headerlink" title="4. ä¾èµ–å…¶å®ƒæ¨¡å—çš„define"></a>4. ä¾èµ–å…¶å®ƒæ¨¡å—çš„define</h4><p>å¯ä»¥çœ‹åˆ°<code>define</code>å®ƒè¿˜æœ‰å¦å¤–ä¸¤ä¸ªå‚æ•°çš„ï¼Œç¬¬ä¸€ä¸ªæ˜¯æ¨¡å—çš„åç§°ï¼Œæ²¡å•¥å¥½è¯´çš„ï¼Œè®©æˆ‘ä»¬æ¥çœ‹çœ‹ç¬¬äºŒä¸ªå®ƒæ‰€ä¾èµ–çš„æ¨¡å—ã€‚</p>
<p>è¿˜è®°å¾—åœ¨<code>CommonJS</code>è§„èŒƒé‚£é‡Œæˆ‘ä»¬å†™äº†ä¸€ä¸ª<code>m1.js</code>å—ï¼Ÿç°åœ¨å°±è®©æˆ‘ä»¬æŠŠè¿™ä¸ªæ¨¡å—æ‹¿æ¥ç”¨ä¸‹ï¼ŒæŠŠå®ƒä½œä¸º<code>math.js</code>ä¸­çš„ä¸€ä¸ªä¾èµ–ã€‚</p>
<p><strong>m1.js</strong>:</p>
<pre class=" language-javascript"><code class="language-javascript">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'æˆ‘æ˜¯m1, æˆ‘è¢«åŠ è½½äº†...'</span><span class="token punctuation">)</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    name<span class="token punctuation">:</span> <span class="token string">'lindaidai'</span><span class="token punctuation">,</span>
    sex<span class="token punctuation">:</span> <span class="token string">'boy'</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>å¤åˆ¶ä»£ç 
</code></pre>
<p>ç„¶åä¿®æ”¹ä¸€ä¸‹<code>math.js</code>ï¼š</p>
<p><strong>math.js</strong>:</p>
<pre class=" language-javascript"><code class="language-javascript"><span class="token function">define</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'m1'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>m1<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'æˆ‘æ˜¯math, æˆ‘è¢«åŠ è½½äº†...'</span><span class="token punctuation">)</span>
  <span class="token keyword">var</span> add <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> a <span class="token operator">+</span> b<span class="token punctuation">;</span>
  <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> print <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>m1<span class="token punctuation">.</span>name<span class="token punctuation">)</span>
  <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    add<span class="token punctuation">:</span> add<span class="token punctuation">,</span>
    print<span class="token punctuation">:</span> print
  <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">)</span>å¤åˆ¶ä»£ç 
</code></pre>
<p>å¦å¤–ï¼Œä¸ºäº†æ–¹ä¾¿å¤§å®¶çœ‹ï¼Œæˆ‘ä»¬å†æ¥ä¿®æ”¹ä¸€ä¸‹åˆšåˆšçš„<code>test.js</code>ï¼š</p>
<pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">var</span> requirejs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"requirejs"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//å¼•å…¥requirejsæ¨¡å—</span>

<span class="token function">requirejs</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'math'</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span>math<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'æˆ‘æ˜¯test, æˆ‘è¢«åŠ è½½äº†...'</span><span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>math<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  math<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">)</span>
<span class="token keyword">function</span> other <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'æˆ‘æ˜¯testæ¨¡å—å†…çš„, ä½†æ˜¯æˆ‘ä¸ä¾èµ–math'</span><span class="token punctuation">)</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">;</span>
<span class="token function">other</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>å¤åˆ¶ä»£ç 
</code></pre>
<p>æ‰€ä»¥æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œä¾èµ–å…³ç³»ä¾æ¬¡ä¸ºï¼š</p>
<pre class=" language-subunit"><code class="language-subunit">test -> math -> m1å¤åˆ¶ä»£ç 
</code></pre>
<p>å¦‚æœæŒ‰ç…§<code>AMD</code>çš„è§„èŒƒï¼Œæ¨¡å—çš„åŠ è½½éœ€è¦ä¾é å‰ä¸€ä¸ªæ¨¡å—åŠ è½½å®Œæ‰ä¼šæ‰§è¡Œå›è°ƒå‡½æ•°å†…çš„å†…å®¹ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥æƒ³è±¡å½“æˆ‘åœ¨ç»ˆç«¯è¾“å…¥<code>node test.js</code>çš„æ—¶å€™ï¼Œè¦å‡ºç°çš„ç»“æœåº”è¯¥æ˜¯ï¼š</p>
<pre class=" language-javascript"><code class="language-javascript">LinDaiDaideMBP<span class="token punctuation">:</span>commonJS lindaidai$ node test<span class="token punctuation">.</span>js
æˆ‘æ˜¯testæ¨¡å—å†…çš„<span class="token punctuation">,</span> ä½†æ˜¯æˆ‘ä¸ä¾èµ–math
æˆ‘æ˜¯m1<span class="token punctuation">,</span> æˆ‘è¢«åŠ è½½äº†<span class="token operator">...</span>
æˆ‘æ˜¯math<span class="token punctuation">,</span> æˆ‘è¢«åŠ è½½äº†<span class="token operator">...</span>
æˆ‘æ˜¯test<span class="token punctuation">,</span> æˆ‘è¢«åŠ è½½äº†<span class="token operator">...</span>
<span class="token number">3</span>
lindaidaiå¤åˆ¶ä»£ç 
</code></pre>
<p>(è¿™ä¸ªï¼Œç›¸ä¿¡å¤§å®¶åº”è¯¥éƒ½çœ‹æ¸…äº†å½¼æ­¤çš„ä¾èµ–å…³ç³»å§ğŸ˜¢)</p>
<p>ä½†æ˜¯ç°å®æ€»æ˜¯é‚£ä¹ˆçš„æ®‹é…·ï¼Œå½“æˆ‘æŒ‰ä¸‹å›è½¦çš„æ—¶å€™ï¼ŒåˆæŠ¥é”™äº†â€¦</p>
<p>å†é…¸â€¦</p>
<pre class=" language-javascript"><code class="language-javascript"> ReferenceError<span class="token punctuation">:</span> module is not definedå¤åˆ¶ä»£ç 
</code></pre>
<p>çœ‹äº†ä¸€ä¸‹è¿™ä¸ªæŠ¥é”™çš„å†…å®¹ï¼Œæ˜¯åœ¨<code>m1.js</code>ä¸­â€¦å‘†äº†å‡ ç§’é’Ÿååº”äº†è¿‡æ¥â€¦</p>
<p>æ—¢ç„¶æ˜¯ä½¿ç”¨<code>AMD</code>çš„è§„èŒƒï¼Œé‚£æˆ‘ä»¬è‚¯å®šæ˜¯è¦ä¸€ç»Ÿåˆ°åº•äº†ï¼Œ<code>m1.js</code>ä¸­ç”¨çš„è¿˜æ˜¯<code>CommonJS</code>çš„è§„èŒƒï¼Œå½“ç„¶ä¸è¡Œäº†ã€‚</p>
<p>OKï¼Œæ¥ä¿®æ”¹ä¸€ä¸‹<code>m1.js</code>ï¼š</p>
<p><strong>m1.js</strong>:</p>
<pre class=" language-javascript"><code class="language-javascript"><span class="token function">define</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'æˆ‘æ˜¯m1, æˆ‘è¢«åŠ è½½äº†...'</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    name<span class="token punctuation">:</span> <span class="token string">'lindaidai'</span><span class="token punctuation">,</span>
    sex<span class="token punctuation">:</span> <span class="token string">'boy'</span>
  <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">)</span>å¤åˆ¶ä»£ç 
</code></pre>
<p>OKğŸ‘Œï¼Œè¿™æ¬¡æ²¡å•¥é—®é¢˜äº†ï¼ŒæŒ‰ç…§æˆ‘ä»¬é¢„æœŸçš„å»æ‰§è¡Œäº†â€¦ğŸ˜Šã€‚</p>
<p>ï¼ˆå½“ç„¶æ®æˆ‘çš„äº†è§£ï¼Œ<code>requirejs</code>è¿˜å¯ç”¨äºåœ¨<code>script</code>ä¸­å¼•ç”¨ç„¶åå®šä¹‰ç½‘é¡µç¨‹åºçš„ä¸»æ¨¡å—ç­‰ä½¿ç”¨ï¼Œå¯ä»¥çœ‹ä¸€ä¸‹ï¼š</p>
<p><a target="_blank" rel="noopener" href="http://www.ruanyifeng.com/blog/2012/11/require_js.html%EF%BC%89">http://www.ruanyifeng.com/blog/2012/11/require_js.htmlï¼‰</a></p>
<p><code>AMD</code>çš„çŸ¥è¯†ç‚¹å¤§æ¦‚å°±ä»‹ç»åˆ°äº†è¿™é‡Œï¼Œç›¸ä¿¡å¤§å®¶ä¹ŸçŸ¥é“å®ƒçš„åŸºæœ¬ä½¿ç”¨äº†å§ï¼Œè‡³äºå…¶ä¸­çš„ä¸€äº›åŒºåˆ«ä»€ä¹ˆçš„æˆ‘åœ¨æœ€åä¹Ÿä¼šåˆ—ä¸€ä»½æ¸…å•ï¼Œä¸è¿‡ç°åœ¨è®©æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹<code>CMD</code>å§ã€‚</p>
<h3 id="CMDè§„èŒƒ"><a href="#CMDè§„èŒƒ" class="headerlink" title="CMDè§„èŒƒ"></a>CMDè§„èŒƒ</h3><blockquote>
<p>CMD (Common Module Definition), æ˜¯seajsæ¨å´‡çš„è§„èŒƒï¼ŒCMDåˆ™æ˜¯ä¾èµ–å°±è¿‘ï¼Œç”¨çš„æ—¶å€™å†requireã€‚</p>
</blockquote>
<p>æ¥çœ‹æ®µä»£ç ï¼Œå¤§æ¦‚æ„Ÿå—ä¸€ä¸‹å®ƒæ˜¯æ€æ ·ç”¨çš„ï¼š</p>
<pre class=" language-javascript"><code class="language-javascript"><span class="token function">define</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span>require<span class="token punctuation">,</span> exports<span class="token punctuation">,</span> module<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> math <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./math'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  math<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">)</span>
</code></pre>
<p>çœ‹ç€å’Œ<code>AMD</code>æœ‰ç‚¹åƒçš„ï¼Œæ²¡é”™ï¼Œå…¶å®<code>define()</code>çš„å‚æ•°ç”šè‡³éƒ½æ˜¯ä¸€æ ·çš„ï¼š</p>
<pre class=" language-javascript"><code class="language-javascript"><span class="token function">define</span><span class="token punctuation">(</span>id<span class="token operator">?</span><span class="token punctuation">,</span> dependencies<span class="token operator">?</span><span class="token punctuation">,</span> factory<span class="token punctuation">)</span>å¤åˆ¶ä»£ç 
</code></pre>
<p>ä½†æ˜¯åŒºåˆ«åœ¨äºå“ªé‡Œå‘¢ï¼Ÿè®©æˆ‘ä»¬æ¥çœ‹çœ‹æœ€åä¸€ä¸ª<code>factory</code>å®ƒå‚æ•°ã€‚</p>
<p><code>factory</code>å‡½æ•°ä¸­æ˜¯ä¼šæ¥æ”¶ä¸‰ä¸ªå‚æ•°ï¼š</p>
<ul>
<li><p><code>require</code></p>
</li>
<li><p><code>exports</code></p>
</li>
<li><p><code>module</code></p>
<p>è¿™ä¸‰ä¸ªå¾ˆå¥½ç†è§£ï¼Œå¯¹åº”ç€ä¹‹å‰çš„<code>CommonJS</code>é‚£ä¸å°±æ˜¯ï¼š</p>
</li>
<li><p><code>require</code>ï¼šå¼•å…¥æŸä¸ªæ¨¡å—</p>
</li>
<li><p><code>exports</code>ï¼šå½“å‰æ¨¡å—çš„<code>exports</code>ï¼Œä¹Ÿå°±æ˜¯<code>module.exports</code>çš„ç®€å†™</p>
</li>
<li><p><code>module</code>ï¼šå½“å‰è¿™ä¸ªæ¨¡å—</p>
</li>
</ul>
<p>ç°åœ¨å†æ¥è¯´è¯´<code>AMD</code>å’Œ<code>CMD</code>çš„åŒºåˆ«ã€‚</p>
<p>è™½ç„¶å®ƒä»¬çš„<code>define()</code>æ–¹æ³•çš„å‚æ•°éƒ½ç›¸åŒï¼Œä½†æ˜¯:</p>
<ul>
<li><code>AMD</code>ä¸­ä¼šæŠŠå½“å‰æ¨¡å—çš„ä¾èµ–æ¨¡å—æ”¾åˆ°<code>dependencies</code>ä¸­åŠ è½½ï¼Œå¹¶åœ¨<code>factory</code>å›è°ƒä¸­æ‹¿åˆ°åŠ è½½æˆåŠŸçš„ä¾èµ–</li>
<li><code>CMD</code>ä¸€èˆ¬ä¸åœ¨<code>dependencies</code>ä¸­åŠ è½½ï¼Œè€Œæ˜¯å†™åœ¨<code>factory</code>ä¸­ï¼Œä½¿ç”¨<code>require</code>åŠ è½½æŸä¸ªä¾èµ–æ¨¡å—</li>
</ul>
<p>å› æ­¤æ‰æœ‰äº†æˆ‘ä»¬å¸¸å¸¸çœ‹åˆ°çš„ä¸€å¥è¯ï¼š</p>
<blockquote>
<p>AMDå’ŒCMDæœ€å¤§çš„åŒºåˆ«æ˜¯å¯¹ä¾èµ–æ¨¡å—çš„æ‰§è¡Œæ—¶æœºå¤„ç†ä¸åŒï¼Œæ³¨æ„ä¸æ˜¯åŠ è½½çš„æ—¶æœºæˆ–è€…æ–¹å¼ä¸åŒï¼ŒäºŒè€…çš†ä¸ºå¼‚æ­¥åŠ è½½æ¨¡å—ã€‚</p>
</blockquote>
<p>ï¼ˆå¥½å§ï¼Œä»”ç»†è¯»äº†2éæ„Ÿè§‰è¿˜æ˜¯æ²¡å¤ªæ˜ç™½ï¼Œæ²¡äº‹ï¼Œåé¢å‘†å‘†è¿˜ä¼šè¯¦ç»†è¯´åˆ°ï¼‰</p>
<p>æ¯”è¾ƒæœ‰åä¸€ç‚¹çš„ï¼Œ<code>seajs</code>ï¼Œæ¥çœ‹çœ‹å®ƒæ¨èçš„CMD æ¨¡å—ä¹¦å†™æ ¼å¼å§ï¼š</p>
<pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">// æ‰€æœ‰æ¨¡å—éƒ½é€šè¿‡ define æ¥å®šä¹‰</span>
<span class="token function">define</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span>require<span class="token punctuation">,</span> exports<span class="token punctuation">,</span> module<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>

  <span class="token comment" spellcheck="true">// é€šè¿‡ require å¼•å…¥ä¾èµ–</span>
  <span class="token keyword">var</span> $ <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'jquery'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> Spinning <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./spinning'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment" spellcheck="true">// é€šè¿‡ exports å¯¹å¤–æä¾›æ¥å£</span>
  exports<span class="token punctuation">.</span>doSomething <span class="token operator">=</span> <span class="token operator">...</span>

  <span class="token comment" spellcheck="true">// æˆ–è€…é€šè¿‡ module.exports æä¾›æ•´ä¸ªæ¥å£</span>
  module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token operator">...</span>

<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>å¤åˆ¶ä»£ç 
</code></pre>
<h3 id="AMDå’ŒCMDçš„åŒºåˆ«"><a href="#AMDå’ŒCMDçš„åŒºåˆ«" class="headerlink" title="AMDå’ŒCMDçš„åŒºåˆ«"></a>AMDå’ŒCMDçš„åŒºåˆ«</h3><blockquote>
<p>AMDå’ŒCMDæœ€å¤§çš„åŒºåˆ«æ˜¯å¯¹ä¾èµ–æ¨¡å—çš„æ‰§è¡Œæ—¶æœºå¤„ç†ä¸åŒï¼Œæ³¨æ„ä¸æ˜¯åŠ è½½çš„æ—¶æœºæˆ–è€…æ–¹å¼ä¸åŒï¼ŒäºŒè€…çš†ä¸ºå¼‚æ­¥åŠ è½½æ¨¡å—ã€‚</p>
</blockquote>
<p>è¿˜æ˜¯ä¸Šé¢é‚£å¥è¯ï¼Œè®©æˆ‘ä»¬æ¥çœ‹ä¸ªå°ä¾‹å­ç†è§£ä¸€ä¸‹ã€‚</p>
<p>åŒæ ·æ˜¯<code>math</code>æ¨¡å—ä¸­éœ€è¦åŠ è½½<code>m1</code>æ¨¡å—ã€‚</p>
<p>åœ¨<code>AMD</code>ä¸­æˆ‘ä»¬ä¼šè¿™æ ·å†™ï¼š</p>
<p><strong>math.js</strong></p>
<pre class=" language-javascript"><code class="language-javascript"><span class="token function">define</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'m1'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>m1<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'æˆ‘æ˜¯math, æˆ‘è¢«åŠ è½½äº†...'</span><span class="token punctuation">)</span>
  <span class="token keyword">var</span> add <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> a <span class="token operator">+</span> b<span class="token punctuation">;</span>
  <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> print <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>m1<span class="token punctuation">.</span>name<span class="token punctuation">)</span>
  <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    add<span class="token punctuation">:</span> add<span class="token punctuation">,</span>
    print<span class="token punctuation">:</span> print
  <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">)</span>å¤åˆ¶ä»£ç 
</code></pre>
<p>ä½†æ˜¯å¯¹äº<code>CMD</code>ï¼Œæˆ‘ä»¬ä¼šè¿™æ ·å†™ï¼š</p>
<p><strong>math.js</strong></p>
<pre class=" language-javascript"><code class="language-javascript"><span class="token function">define</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span>require<span class="token punctuation">,</span> exports<span class="token punctuation">,</span> module<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'æˆ‘æ˜¯math, æˆ‘è¢«åŠ è½½äº†...'</span><span class="token punctuation">)</span>
  <span class="token keyword">var</span> m1 <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'m1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> add <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> a <span class="token operator">+</span> b<span class="token punctuation">;</span>
  <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> print <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>m1<span class="token punctuation">.</span>name<span class="token punctuation">)</span>
  <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
  module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
    add<span class="token punctuation">:</span> add<span class="token punctuation">,</span>
    print<span class="token punctuation">:</span> print
  <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">)</span>å¤åˆ¶ä»£ç 
</code></pre>
<p>å‡å¦‚æ­¤æ—¶<code>m1.js</code>ä¸­æœ‰ä¸€ä¸ªè¯­å¥æ˜¯åœ¨<code>m1</code>æ¨¡å—è¢«åŠ è½½çš„æ—¶å€™æ‰“å°å‡º<code>&quot;æˆ‘æ˜¯m1, æˆ‘è¢«åŠ è½½äº†...&quot;</code>ã€‚</p>
<p>æ‰§è¡Œç»“æœåŒºåˆ«ï¼š</p>
<ul>
<li><code>AMD</code>ï¼Œä¼šå…ˆåŠ è½½<code>m1</code>ï¼Œ<code>&quot;æˆ‘æ˜¯m1&quot;</code>ä¼šå…ˆæ‰§è¡Œ</li>
<li><code>CMD</code>ï¼Œæˆ‘æ˜¯<code>&quot;æˆ‘æ˜¯math&quot;</code>ä¼šå…ˆæ‰§è¡Œï¼Œå› ä¸ºæœ¬é¢˜ä¸­<code>console.log(&#39;æˆ‘æ˜¯math, æˆ‘è¢«åŠ è½½äº†...&#39;)</code>æ˜¯æ”¾åœ¨<code>require(&#39;m1&#39;)</code>å‰é¢çš„ã€‚</li>
</ul>
<p>ç°åœ¨å¯ä»¥å¾ˆæ˜æ˜¾çš„çœ‹åˆ°åŒºåˆ«äº†ã€‚</p>
<p><code>AMD</code>ä¾èµ–å‰ç½®ï¼Œ<code>js</code>å¾ˆæ–¹ä¾¿çš„å°±çŸ¥é“è¦åŠ è½½çš„æ˜¯å“ªä¸ªæ¨¡å—äº†ï¼Œå› ä¸ºå·²ç»åœ¨<code>define</code>çš„<code>dependencies</code>å‚æ•°ä¸­å°±å®šä¹‰å¥½äº†ï¼Œä¼šç«‹å³åŠ è½½å®ƒã€‚</p>
<p><code>CMD</code>æ˜¯å°±è¿‘ä¾èµ–ï¼Œéœ€è¦ä½¿ç”¨æŠŠæ¨¡å—å˜ä¸ºå­—ç¬¦ä¸²è§£æä¸€éæ‰çŸ¥é“ä¾èµ–äº†é‚£äº›æ¨¡å—ã€‚</p>
<p>OKğŸ‘Œï¼Œæ¥çœ‹ä¸ªæ€»ç»“ï¼š</p>
<p>ä¸¤è€…ä¹‹é—´ï¼Œæœ€æ˜æ˜¾çš„åŒºåˆ«å°±æ˜¯åœ¨æ¨¡å—å®šä¹‰æ—¶å¯¹ä¾èµ–çš„å¤„ç†ä¸åŒ</p>
<p><strong>1ã€AMDæ¨å´‡ä¾èµ–å‰ç½®ï¼Œåœ¨å®šä¹‰æ¨¡å—çš„æ—¶å€™å°±è¦å£°æ˜å…¶ä¾èµ–çš„æ¨¡å—</strong> <strong>2ã€CMDæ¨å´‡å°±è¿‘ä¾èµ–ï¼Œåªæœ‰åœ¨ç”¨åˆ°æŸä¸ªæ¨¡å—çš„æ—¶å€™å†å»require</strong></p>
<h3 id="ES6-Modulesè§„èŒƒ"><a href="#ES6-Modulesè§„èŒƒ" class="headerlink" title="ES6 Modulesè§„èŒƒ"></a>ES6 Modulesè§„èŒƒ</h3><p><code>ES6</code>æ ‡å‡†å‡ºæ¥åï¼Œ<code>ES6 Modules</code>è§„èŒƒç®—æ˜¯æˆä¸ºäº†å‰ç«¯çš„ä¸»æµå§ï¼Œä»¥<code>import</code>å¼•å…¥æ¨¡å—ï¼Œ<code>export</code>å¯¼å‡ºæ¥å£è¢«è¶Šæ¥è¶Šå¤šçš„äººä½¿ç”¨ã€‚</p>
<p>ä¸‹é¢ï¼Œæˆ‘ä¹Ÿä¼šä»è¿™ä¹ˆå‡ ä¸ªæ–¹é¢æ¥ä»‹ç»<code>ES6 Modules</code>è§„èŒƒï¼š</p>
<p><code>export</code>å‘½ä»¤å’Œ<code>import</code>å‘½ä»¤å¯ä»¥å‡ºç°åœ¨æ¨¡å—çš„ä»»ä½•ä½ç½®ï¼Œåªè¦å¤„äºæ¨¡å—é¡¶å±‚å°±å¯ä»¥ã€‚ å¦‚æœå¤„äºå—çº§ä½œç”¨åŸŸå†…ï¼Œå°±ä¼šæŠ¥é”™ï¼Œè¿™æ˜¯å› ä¸ºå¤„äºæ¡ä»¶ä»£ç å—ä¹‹ä¸­ï¼Œå°±æ²¡æ³•åšé™æ€ä¼˜åŒ–äº†ï¼Œè¿èƒŒäº†ES6æ¨¡å—çš„è®¾è®¡åˆè¡·ã€‚</p>
<h4 id="1-exportå¯¼å‡ºæ¨¡å—"><a href="#1-exportå¯¼å‡ºæ¨¡å—" class="headerlink" title="1. exportå¯¼å‡ºæ¨¡å—"></a>1. exportå¯¼å‡ºæ¨¡å—</h4><p>exportæœ‰ä¸¤ç§æ¨¡å—å¯¼å‡ºæ–¹å¼ï¼š</p>
<ul>
<li>å‘½åå¼å¯¼å‡º(åç§°å¯¼å‡º)</li>
<li>é»˜è®¤å¯¼å‡º(è‡ªå®šä¹‰å¯¼å‡º)</li>
</ul>
<p><strong>å‘½åå¼å¯¼å‡º</strong></p>
<p>æ¥çœ‹å‡ ç§æ­£ç¡®å’Œé”™è¯¯çš„å†™æ³•å§ï¼š</p>
<pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">// ä»¥ä¸‹ä¸¤ç§ä¸ºé”™è¯¯</span>
<span class="token comment" spellcheck="true">// 1.</span>
<span class="token keyword">export</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">// 2.</span>
<span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> a<span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">// ä»¥ä¸‹ä¸ºæ­£ç¡®</span>
<span class="token comment" spellcheck="true">// 3.</span>
<span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span> a <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">// 4. æ¥å£åä¸æ¨¡å—å†…éƒ¨å˜é‡ä¹‹é—´ï¼Œå»ºç«‹äº†ä¸€ä¸€å¯¹åº”çš„å…³ç³»</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> b <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">// 5. æ¥å£åä¸æ¨¡å—å†…éƒ¨å˜é‡ä¹‹é—´ï¼Œå»ºç«‹äº†ä¸€ä¸€å¯¹åº”çš„å…³ç³»</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> b <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">// æˆ–è€…ç”¨ as æ¥å‘½å</span>
<span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span> a <span class="token keyword">as</span> outA <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> b <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span> a <span class="token keyword">as</span> outA<span class="token punctuation">,</span> b <span class="token keyword">as</span> outB <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">;</span>å¤åˆ¶ä»£ç 
</code></pre>
<p>å®¹æ˜“æ··æ·†çš„å¯èƒ½æ˜¯<code>2</code>å’Œ<code>4</code>ä¸¤ç§å†™æ³•äº†ï¼Œçœ‹ç€å¾ˆåƒï¼Œä½†æ˜¯<code>2</code>å´ä¸è¡Œã€‚<code>2</code>ç›´æ¥å¯¼å‡ºä¸€ä¸ªå€¼ä¸º<code>1</code>çš„å˜é‡æ˜¯å’Œæƒ…å†µä¸€ä¸€æ ·ï¼Œæ²¡æœ‰ä»€ä¹ˆæ„ä¹‰ï¼Œå› ä¸ºä½ åœ¨åé¢è¦ç”¨çš„æ—¶å€™å¹¶ä¸èƒ½å®Œæˆè§£æ„ã€‚</p>
<p>ä½†æ˜¯<code>4</code>ä¸­ï¼Œæ¥å£åä¸æ¨¡å—å†…éƒ¨å˜é‡ä¹‹é—´ï¼Œå»ºç«‹äº†ä¸€ä¸€å¯¹åº”çš„å…³ç³»ï¼Œæ‰€ä»¥å¯ä»¥ã€‚</p>
<p><strong>é»˜è®¤å¯¼å‡º</strong></p>
<p>é»˜è®¤å¯¼å‡ºä¼šåœ¨<code>export</code>åé¢åŠ ä¸Šä¸€ä¸ª<code>default</code>ï¼š</p>
<pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">// 1.</span>
<span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> a<span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">// 2.</span>
<span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span> a <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">// 3.</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// å¯ä»¥å¯¼å‡ºä¸€ä¸ªå‡½æ•°</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// ä¹Ÿå¯ä»¥å‡ºä¸€ä¸ªç±»å¤åˆ¶ä»£ç </span>
</code></pre>
<p>å…¶å®ï¼Œé»˜è®¤å¯¼å‡ºå¯ä»¥ç†è§£ä¸ºå¦ä¸€ç§å½¢å¼ä¸Šçš„å‘½åå¯¼å‡ºï¼Œä¹Ÿå°±æ˜¯è¯´<code>a</code>è¿™ä¸ªå±æ€§åç›¸å½“äºæ˜¯è¢«æˆ‘é‡å†™äº†æˆäº†<code>default</code>ï¼š</p>
<pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> defalut a<span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">// ç­‰ä»·äº</span>
<span class="token keyword">export</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span> a <span class="token keyword">as</span> <span class="token keyword">default</span> <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>å¤åˆ¶ä»£ç 
</code></pre>
<p>æ‰€ä»¥ï¼Œæˆ‘ä»¬æ‰å¯ä»¥ç”¨<code>const a = 1; export default a;</code>è¿™ç§æ–¹å¼å¯¼å‡ºä¸€ä¸ªå€¼ã€‚</p>
<h4 id="2-importå¯¼å…¥æ¨¡å—"><a href="#2-importå¯¼å…¥æ¨¡å—" class="headerlink" title="2. importå¯¼å…¥æ¨¡å—"></a>2. importå¯¼å…¥æ¨¡å—</h4><p>importæ¨¡å—å¯¼å…¥ä¸exportæ¨¡å—å¯¼å‡ºåŠŸèƒ½ç›¸å¯¹åº”ï¼Œä¹Ÿå­˜åœ¨ä¸¤ç§æ¨¡å—å¯¼å…¥æ–¹å¼ï¼šå‘½åå¼å¯¼å…¥ï¼ˆåç§°å¯¼å…¥ï¼‰å’Œé»˜è®¤å¯¼å…¥ï¼ˆå®šä¹‰å¼å¯¼å…¥ï¼‰ã€‚</p>
<p>æ¥çœ‹çœ‹å†™æ³•ï¼š</p>
<pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">// æŸä¸ªæ¨¡å—çš„å¯¼å‡º moudule.js</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">// æ¨¡å—å¯¼å…¥</span>
<span class="token comment" spellcheck="true">// 1. è¿™é‡Œçš„aå¾—å’Œè¢«åŠ è½½çš„æ¨¡å—è¾“å‡ºçš„æ¥å£åå¯¹åº”</span>
<span class="token keyword">import</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span> a <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span> <span class="token keyword">from</span> <span class="token string">'./module'</span>

<span class="token comment" spellcheck="true">// 2. ä½¿ç”¨ as æ¢å</span>
<span class="token keyword">import</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span> a <span class="token keyword">as</span> myA <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span> <span class="token keyword">from</span> <span class="token string">'./module'</span>

<span class="token comment" spellcheck="true">// 3. è‹¥æ˜¯åªæƒ³è¦è¿è¡Œè¢«åŠ è½½çš„æ¨¡å—å¯ä»¥è¿™æ ·å†™ï¼Œä½†æ˜¯å³ä½¿åŠ è½½2æ¬¡ä¹Ÿåªæ˜¯è¿è¡Œä¸€æ¬¡</span>
<span class="token keyword">import</span> <span class="token string">'./module'</span>

<span class="token comment" spellcheck="true">// 4. æ•´ä½“åŠ è½½</span>
<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> module <span class="token keyword">from</span> <span class="token string">'./module'</span>

<span class="token comment" spellcheck="true">// 5. defaultæ¥å£å’Œå…·åæ¥å£</span>
<span class="token keyword">import</span> module<span class="token punctuation">,</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span> a <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span> <span class="token keyword">from</span> <span class="token string">'./module'</span>å¤åˆ¶ä»£ç 
</code></pre>
<p>ç¬¬å››ç§å†™æ³•ä¼šè·å–åˆ°<code>module</code>ä¸­æ‰€æœ‰å¯¼å‡ºçš„ä¸œè¥¿ï¼Œå¹¶ä¸”èµ‹å€¼åˆ°<code>module</code>è¿™ä¸ªå˜é‡ä¸‹ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥ç”¨<code>module.a</code>è¿™ç§æ–¹å¼æ¥å¼•ç”¨<code>a</code>äº†ã€‚</p>
<h4 id="3-export-â€¦-fromâ€¦"><a href="#3-export-â€¦-fromâ€¦" class="headerlink" title="3. export â€¦ fromâ€¦"></a>3. export â€¦ fromâ€¦</h4><p>å…¶å®è¿˜æœ‰ä¸€ç§å†™æ³•ï¼Œå¯ä»¥å°†<code>export</code>å’Œ<code>from</code>ç»“åˆèµ·æ¥ç”¨ã€‚</p>
<p>ä¾‹å¦‚ï¼Œæˆ‘æœ‰ä¸‰ä¸ªæ¨¡å—<code>aã€bã€c</code>ã€‚</p>
<p><code>c</code>æ¨¡å—ç°åœ¨æƒ³è¦å¼•å…¥<code>a</code>æ¨¡å—ï¼Œä½†æ˜¯å®ƒä¸ä¸ç›´æ¥å¼•ç”¨<code>a</code>ï¼Œè€Œæ˜¯é€šè¿‡<code>b</code>æ¨¡å—æ¥å¼•ç”¨ï¼Œé‚£ä¹ˆä½ å¯èƒ½ä¼šæƒ³åˆ°<code>b</code>åº”è¯¥è¿™æ ·å†™ï¼š</p>
<pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">import</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span> someVariable <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span> <span class="token keyword">from</span> <span class="token string">'./a'</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span> someVariable <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">;</span>å¤åˆ¶ä»£ç 
</code></pre>
<p>å¼•å…¥<code>someVariable</code>ç„¶åå†å¯¼å‡ºã€‚</p>
<p>è¿™è¿˜åªæ˜¯ä¸€ä¸ªå˜é‡ï¼Œæˆ‘ä»¬å¾—å¯¼å…¥å†å¯¼å‡ºï¼Œè‹¥æ˜¯æœ‰å¾ˆå¤šä¸ªå˜é‡éœ€è¦è¿™æ ·ï¼Œé‚£æ— ç–‘ä¼šå¢åŠ å¾ˆå¤šä»£ç é‡ã€‚</p>
<p>æ‰€ä»¥è¿™æ—¶å€™å¯ä»¥ç”¨ä¸‹é¢è¿™ç§æ–¹å¼æ¥å®ç°ï¼š</p>
<pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">export</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span> someVariable <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span> <span class="token keyword">from</span> <span class="token string">'./a'</span><span class="token punctuation">;</span>å¤åˆ¶ä»£ç 
</code></pre>
<p>ä¸è¿‡è¿™ç§æ–¹å¼æœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„ï¼š</p>
<ul>
<li>è¿™æ ·çš„æ–¹å¼ä¸ä¼šå°†æ•°æ®æ·»åŠ åˆ°è¯¥èšåˆæ¨¡å—çš„ä½œç”¨åŸŸ, ä¹Ÿå°±æ˜¯è¯´, ä½ æ— æ³•åœ¨è¯¥æ¨¡å—(ä¹Ÿå°±æ˜¯<code>b</code>)ä¸­ä½¿ç”¨<code>someVariable</code>ã€‚</li>
</ul>
<h4 id="4-ES6-Modulesè§„èŒƒçš„ç‰¹ç‚¹"><a href="#4-ES6-Modulesè§„èŒƒçš„ç‰¹ç‚¹" class="headerlink" title="4. ES6 Modulesè§„èŒƒçš„ç‰¹ç‚¹"></a>4. ES6 Modulesè§„èŒƒçš„ç‰¹ç‚¹</h4><p>æ€»ç»“ä¸€ä¸‹å®ƒçš„ç‰¹ç‚¹å“ˆï¼š</p>
<ul>
<li>è¾“å‡ºä½¿ç”¨<code>export</code></li>
<li>è¾“å…¥ä½¿ç”¨<code>import</code></li>
<li>å¯ä»¥ä½¿ç”¨<code>export...from...</code>è¿™ç§å†™æ³•æ¥è¾¾åˆ°ä¸€ä¸ª<code>&quot;ä¸­è½¬&quot;</code>çš„æ•ˆæœ</li>
<li>è¾“å…¥çš„æ¨¡å—å˜é‡æ˜¯ä¸å¯é‡æ–°èµ‹å€¼çš„ï¼Œå®ƒåªæ˜¯ä¸ªå¯è¯»å¼•ç”¨ï¼Œä¸è¿‡å´å¯ä»¥æ”¹å†™å±æ€§</li>
<li><code>export</code>å‘½ä»¤å’Œ<code>import</code>å‘½ä»¤å¯ä»¥å‡ºç°åœ¨æ¨¡å—çš„ä»»ä½•ä½ç½®ï¼Œåªè¦å¤„äºæ¨¡å—é¡¶å±‚å°±å¯ä»¥ã€‚ å¦‚æœå¤„äºå—çº§ä½œç”¨åŸŸå†…ï¼Œå°±ä¼šæŠ¥é”™ï¼Œè¿™æ˜¯å› ä¸ºå¤„äºæ¡ä»¶ä»£ç å—ä¹‹ä¸­ï¼Œå°±æ²¡æ³•åšé™æ€ä¼˜åŒ–äº†ï¼Œè¿èƒŒäº†ES6æ¨¡å—çš„è®¾è®¡åˆè¡·ã€‚</li>
<li><code>import</code>å‘½ä»¤å…·æœ‰æå‡æ•ˆæœï¼Œä¼šæå‡åˆ°æ•´ä¸ªæ¨¡å—çš„å¤´éƒ¨ï¼Œé¦–å…ˆæ‰§è¡Œã€‚</li>
</ul>
<h4 id="5-Bableä¸‹çš„ES6æ¨¡å—è½¬æ¢"><a href="#5-Bableä¸‹çš„ES6æ¨¡å—è½¬æ¢" class="headerlink" title="5. Bableä¸‹çš„ES6æ¨¡å—è½¬æ¢"></a>5. Bableä¸‹çš„ES6æ¨¡å—è½¬æ¢</h4><p>è¿˜æœ‰ä¸€ç‚¹å°±æ˜¯ï¼Œå¦‚æœä½ æœ‰ä½¿ç”¨è¿‡ä¸€äº›ES6çš„Babelçš„è¯ï¼Œä½ ä¼šå‘ç°å½“ä½¿ç”¨<code>export/import</code>çš„æ—¶å€™ï¼ŒBabelä¹Ÿä¼šæŠŠå®ƒè½¬æ¢ä¸º<code>exports/require</code>çš„å½¢å¼ã€‚</p>
<p>ä¾‹å¦‚æˆ‘çš„è¾“å‡ºï¼š</p>
<p><em>m1.js</em>:</p>
<pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">export</span> <span class="token keyword">const</span> count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>å¤åˆ¶ä»£ç 
</code></pre>
<p>æˆ‘çš„è¾“å…¥ï¼š</p>
<p><em>index.js</em>:</p>
<pre class=" language-javascript"><code class="language-javascript"><span class="token keyword">import</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>count<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span> <span class="token keyword">from</span> <span class="token string">'./m1.js'</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>count<span class="token punctuation">)</span>å¤åˆ¶ä»£ç 
</code></pre>
<p>å½“ä½¿ç”¨Babelç¼–è¯‘ä¹‹åï¼Œå„è‡ªä¼šè¢«è½¬æ¢ä¸ºï¼š</p>
<p><em>m1.js</em>:</p>
<pre class=" language-javascript"><code class="language-javascript"><span class="token string">"use strict"</span><span class="token punctuation">;</span>

Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>exports<span class="token punctuation">,</span> <span class="token string">"__esModule"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>
  value<span class="token punctuation">:</span> <span class="token boolean">true</span>
<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
exports<span class="token punctuation">.</span>count <span class="token operator">=</span> <span class="token keyword">void</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
exports<span class="token punctuation">.</span>count <span class="token operator">=</span> count<span class="token punctuation">;</span>å¤åˆ¶ä»£ç 
</code></pre>
<p><em>index.js</em>:</p>
<pre class=" language-javascript"><code class="language-javascript"><span class="token string">"use strict"</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> _m <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"./m1.js"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>_m<span class="token punctuation">.</span>count<span class="token punctuation">)</span><span class="token punctuation">;</span>å¤åˆ¶ä»£ç 
</code></pre>
<p>æ­£æ˜¯å› ä¸ºè¿™ç§è½¬æ¢å…³ç³»ï¼Œæ‰èƒ½è®©æˆ‘ä»¬æŠŠ<code>exports</code>å’Œ<code>import</code>ç»“åˆèµ·æ¥ç”¨ï¼š</p>
<p>ä¹Ÿå°±æ˜¯è¯´ä½ å¯ä»¥è¿™æ ·ç”¨ï¼š</p>
<pre class=" language-javascript"><code class="language-javascript"><span class="token comment" spellcheck="true">// è¾“å‡ºæ¨¡å— m1.js</span>
exports<span class="token punctuation">.</span>count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">// index.jsä¸­å¼•å…¥</span>
<span class="token keyword">import</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>count<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span> <span class="token keyword">from</span> <span class="token string">'./m1.js'</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>count<span class="token punctuation">)</span>å¤åˆ¶ä»£ç 
</code></pre>
<h3 id="CommonJSä¸ES6-Modulesè§„èŒƒçš„åŒºåˆ«"><a href="#CommonJSä¸ES6-Modulesè§„èŒƒçš„åŒºåˆ«" class="headerlink" title="CommonJSä¸ES6 Modulesè§„èŒƒçš„åŒºåˆ«"></a>CommonJSä¸ES6 Modulesè§„èŒƒçš„åŒºåˆ«</h3><p>ğŸ˜‚ï¼Œæˆ‘ç›¸ä¿¡å¾ˆå¤šäººå°±æ¯”è¾ƒå…³å¿ƒå®ƒä¸¤åŒºåˆ«çš„é—®é¢˜ï¼Œå› ä¸ºåŸºæœ¬ä¸Šé¢è¯•é—®çš„å°±æ˜¯è¿™ä¸ªã€‚å¥½å§ï¼Œè¿™é‡Œæ¥åšä¸€ä¸ªç®—æ˜¯æ¯”è¾ƒè¯¦ç»†çš„æ€»ç»“å§ã€‚</p>
<ul>
<li>CommonJSæ¨¡å—æ˜¯è¿è¡Œæ—¶åŠ è½½ï¼ŒES6 Modulesæ˜¯ç¼–è¯‘æ—¶è¾“å‡ºæ¥å£</li>
<li>CommonJSè¾“å‡ºæ˜¯å€¼çš„æ‹·è´ï¼›ES6 Modulesè¾“å‡ºçš„æ˜¯å€¼çš„å¼•ç”¨ï¼Œè¢«è¾“å‡ºæ¨¡å—çš„å†…éƒ¨çš„æ”¹å˜ä¼šå½±å“å¼•ç”¨çš„æ”¹å˜</li>
<li>CommonJså¯¼å…¥çš„æ¨¡å—è·¯å¾„å¯ä»¥æ˜¯ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œå› ä¸ºå®ƒä½¿ç”¨çš„æ˜¯<code>require()</code>æ–¹æ³•ï¼›è€ŒES6 Modulesåªèƒ½æ˜¯å­—ç¬¦ä¸²</li>
<li>CommonJS <code>this</code>æŒ‡å‘å½“å‰æ¨¡å—ï¼ŒES6 Modules <code>this</code>æŒ‡å‘<code>undefined</code></li>
</ul>
<p>å…³äºç¬¬ä¸€ä¸ªå·®å¼‚ï¼Œæ˜¯å› ä¸ºCommonJS åŠ è½½çš„æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼ˆå³<code>module.exports</code>å±æ€§ï¼‰ï¼Œè¯¥å¯¹è±¡åªæœ‰åœ¨è„šæœ¬è¿è¡Œå®Œæ‰ä¼šç”Ÿæˆã€‚è€Œ ES6 æ¨¡å—ä¸æ˜¯å¯¹è±¡ï¼Œå®ƒçš„å¯¹å¤–æ¥å£åªæ˜¯ä¸€ç§é™æ€å®šä¹‰ï¼Œåœ¨ä»£ç é™æ€è§£æé˜¶æ®µå°±ä¼šç”Ÿæˆã€‚</p>

                
            </div>
            <hr/>

            

    <div class="reprint" id="reprint-statement">
        
            <div class="reprint__author">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-user">
                        æ–‡ç« ä½œè€…:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="/about" rel="external nofollow noreferrer">Chen qinxiong</a>
                </span>
            </div>
            <div class="reprint__type">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-link">
                        æ–‡ç« é“¾æ¥:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="https://cqx010113.github.io/2023/03/03/qian-duan-mo-kuai-hua/">https://cqx010113.github.io/2023/03/03/qian-duan-mo-kuai-hua/</a>
                </span>
            </div>
            <div class="reprint__notice">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-copyright">
                        ç‰ˆæƒå£°æ˜:
                    </i>
                </span>
                <span class="reprint-info">
                    æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ¥å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨
                    <a href="https://creativecommons.org/licenses/by/4.0/deed.zh" rel="external nofollow noreferrer" target="_blank">CC BY 4.0</a>
                    è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜æ¥æº
                    <a href="/about" target="_blank">Chen qinxiong</a>
                    !
                </span>
            </div>
        
    </div>

    <script async defer>
      document.addEventListener("copy", function (e) {
        let toastHTML = '<span>å¤åˆ¶æˆåŠŸï¼Œè¯·éµå¾ªæœ¬æ–‡çš„è½¬è½½è§„åˆ™</span><button class="btn-flat toast-action" onclick="navToReprintStatement()" style="font-size: smaller">æŸ¥çœ‹</a>';
        M.toast({html: toastHTML})
      });

      function navToReprintStatement() {
        $("html, body").animate({scrollTop: $("#reprint-statement").offset().top - 80}, 800);
      }
    </script>



            <div class="tag_share" style="display: block;">
                <div class="post-meta__tag-list" style="display: inline-block;">
                    
                        <div class="article-tag">
                            <span class="chip bg-color">æ— æ ‡ç­¾</span>
                        </div>
                    
                </div>
                <div class="post_share" style="zoom: 80%; width: fit-content; display: inline-block; float: right; margin: -0.15rem 0;">
                    <link rel="stylesheet" type="text/css" href="/libs/share/css/share.min.css">
<div id="article-share">

    
    <div class="social-share" data-sites="twitter,facebook,google,qq,qzone,wechat,weibo,douban,linkedin" data-wechat-qrcode-helper="<p>å¾®ä¿¡æ‰«ä¸€æ‰«å³å¯åˆ†äº«ï¼</p>"></div>
    <script src="/libs/share/js/social-share.min.js"></script>
    

    

</div>

                </div>
            </div>
            
                <style>
    #reward {
        margin: 40px 0;
        text-align: center;
    }

    #reward .reward-link {
        font-size: 1.4rem;
        line-height: 38px;
    }

    #reward .btn-floating:hover {
        box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2), 0 5px 15px rgba(0, 0, 0, 0.2);
    }

    #rewardModal {
        width: 320px;
        height: 350px;
    }

    #rewardModal .reward-title {
        margin: 15px auto;
        padding-bottom: 5px;
    }

    #rewardModal .modal-content {
        padding: 10px;
    }

    #rewardModal .close {
        position: absolute;
        right: 15px;
        top: 15px;
        color: rgba(0, 0, 0, 0.5);
        font-size: 1.3rem;
        line-height: 20px;
        cursor: pointer;
    }

    #rewardModal .close:hover {
        color: #ef5350;
        transform: scale(1.3);
        -moz-transform:scale(1.3);
        -webkit-transform:scale(1.3);
        -o-transform:scale(1.3);
    }

    #rewardModal .reward-tabs {
        margin: 0 auto;
        width: 210px;
    }

    .reward-tabs .tabs {
        height: 38px;
        margin: 10px auto;
        padding-left: 0;
    }

    .reward-content ul {
        padding-left: 0 !important;
    }

    .reward-tabs .tabs .tab {
        height: 38px;
        line-height: 38px;
    }

    .reward-tabs .tab a {
        color: #fff;
        background-color: #ccc;
    }

    .reward-tabs .tab a:hover {
        background-color: #ccc;
        color: #fff;
    }

    .reward-tabs .wechat-tab .active {
        color: #fff !important;
        background-color: #22AB38 !important;
    }

    .reward-tabs .alipay-tab .active {
        color: #fff !important;
        background-color: #019FE8 !important;
    }

    .reward-tabs .reward-img {
        width: 210px;
        height: 210px;
    }
</style>

<div id="reward">
    <a href="#rewardModal" class="reward-link modal-trigger btn-floating btn-medium waves-effect waves-light red">èµ</a>

    <!-- Modal Structure -->
    <div id="rewardModal" class="modal">
        <div class="modal-content">
            <a class="close modal-close"><i class="fas fa-times"></i></a>
            <h4 class="reward-title">ä½ çš„èµè¯†æ˜¯æˆ‘å‰è¿›çš„åŠ¨åŠ›</h4>
            <div class="reward-content">
                <div class="reward-tabs">
                    <ul class="tabs row">
                        <li class="tab col s6 alipay-tab waves-effect waves-light"><a href="#alipay">æ”¯ä»˜å®</a></li>
                        <li class="tab col s6 wechat-tab waves-effect waves-light"><a href="#wechat">å¾® ä¿¡</a></li>
                    </ul>
                    <div id="alipay">
                        <img src="/medias/reward/alipay.jpg" class="reward-img" alt="æ”¯ä»˜å®æ‰“èµäºŒç»´ç ">
                    </div>
                    <div id="wechat">
                        <img src="/medias/reward/wechat.png" class="reward-img" alt="å¾®ä¿¡æ‰“èµäºŒç»´ç ">
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    $(function () {
        $('.tabs').tabs();
    });
</script>

            
        </div>
    </div>

    

    

    

    

    

    

    

    

    

    

<article id="prenext-posts" class="prev-next articles">
    <div class="row article-row">
        
        <div class="article col s12 m6" data-aos="fade-up" data-aos="fade-up">
            <div class="article-badge left-badge text-color">
                <i class="far fa-dot-circle"></i>&nbsp;æœ¬ç¯‡
            </div>
            <div class="card">
                <a href="/2023/03/03/qian-duan-mo-kuai-hua/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/18.jpg" class="responsive-img" alt="å‰ç«¯æ¨¡å—åŒ–">
                        
                        <span class="card-title">å‰ç«¯æ¨¡å—åŒ–</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            
                        
                    </div>
                    <div class="publish-info">
                            <span class="publish-date">
                                <i class="far fa-clock fa-fw icon-date"></i>2023-03-03
                            </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-user fa-fw"></i>
                            Chen qinxiong
                            
                        </span>
                    </div>
                </div>

                
            </div>
        </div>
        
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge right-badge text-color">
                ä¸‹ä¸€ç¯‡&nbsp;<i class="fas fa-chevron-right"></i>
            </div>
            <div class="card">
                <a href="/2023/03/02/liu-lan-qi-xuan-ran-ye-mian-xiang-xi-guo-cheng/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/15.jpg" class="responsive-img" alt="æµè§ˆå™¨æ¸²æŸ“é¡µé¢è¯¦ç»†è¿‡ç¨‹">
                        
                        <span class="card-title">æµè§ˆå™¨æ¸²æŸ“é¡µé¢è¯¦ç»†è¿‡ç¨‹</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            
                        
                    </div>
                    <div class="publish-info">
                            <span class="publish-date">
                                <i class="far fa-clock fa-fw icon-date"></i>2023-03-02
                            </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-user fa-fw"></i>
                            Chen qinxiong
                            
                        </span>
                    </div>
                </div>
                
            </div>
        </div>
        
    </div>
</article>

</div>



<!-- ä»£ç å—åŠŸèƒ½ä¾èµ– -->
<script type="text/javascript" src="/libs/codeBlock/codeBlockFuction.js"></script>



<!-- ä»£ç è¯­è¨€ -->

<script type="text/javascript" src="/libs/codeBlock/codeLang.js"></script>


<!-- ä»£ç å—å¤åˆ¶ -->

<script type="text/javascript" src="/libs/codeBlock/codeCopy.js"></script>


<!-- ä»£ç å—æ”¶ç¼© -->

<script type="text/javascript" src="/libs/codeBlock/codeShrink.js"></script>



    </div>
    <div id="toc-aside" class="expanded col l3 hide-on-med-and-down">
        <div class="toc-widget card" style="background-color: white;">
            <div class="toc-title"><i class="far fa-list-alt"></i>&nbsp;&nbsp;ç›®å½•</div>
            <div id="toc-content"></div>
        </div>
    </div>
</div>

<!-- TOC æ‚¬æµ®æŒ‰é’®. -->

<div id="floating-toc-btn" class="hide-on-med-and-down">
    <a class="btn-floating btn-large bg-color">
        <i class="fas fa-list-ul"></i>
    </a>
</div>


<script src="/libs/tocbot/tocbot.min.js"></script>
<script>
    $(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '#articleContent',
            headingsOffset: -($(window).height() * 0.4 - 45),
            collapseDepth: Number('0'),
            headingSelector: 'h2, h3, h4'
        });

        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });

        
        /* ä¿®å¤æ–‡ç« å¡ç‰‡ div çš„å®½åº¦. */
        let fixPostCardWidth = function (srcId, targetId) {
            let srcDiv = $('#' + srcId);
            if (srcDiv.length === 0) {
                return;
            }

            let w = srcDiv.width();
            if (w >= 450) {
                w = w + 21;
            } else if (w >= 350 && w < 450) {
                w = w + 18;
            } else if (w >= 300 && w < 350) {
                w = w + 16;
            } else {
                w = w + 14;
            }
            $('#' + targetId).width(w);
        };

        // åˆ‡æ¢TOCç›®å½•å±•å¼€æ”¶ç¼©çš„ç›¸å…³æ“ä½œ.
        const expandedClass = 'expanded';
        let $tocAside = $('#toc-aside');
        let $mainContent = $('#main-content');
        $('#floating-toc-btn .btn-floating').click(function () {
            if ($tocAside.hasClass(expandedClass)) {
                $tocAside.removeClass(expandedClass).hide();
                $mainContent.removeClass('l9');
            } else {
                $tocAside.addClass(expandedClass).show();
                $mainContent.addClass('l9');
            }
            fixPostCardWidth('artDetail', 'prenext-posts');
        });
        
    });
</script>

    

</main>




    <footer class="page-footer bg-color">
    
        <link rel="stylesheet" href="/libs/aplayer/APlayer.min.css">
<style>
    .aplayer .aplayer-lrc p {
        
        font-size: 12px;
        font-weight: 700;
        line-height: 16px !important;
    }

    .aplayer .aplayer-lrc p.aplayer-lrc-current {
        
        font-size: 15px;
        color: #42b983;
    }

    
</style>
<div class="">
    
    <div class="row">
        <meting-js class="col l8 offset-l2 m10 offset-m1 s12"
                   server="netease"
                   type="song"
                   id="1357399743"
                   fixed='true'
                   autoplay='true'
                   theme='#42b983'
                   loop='all'
                   order='random'
                   preload='auto'
                   volume='0.7'
                   list-folded='true'
        >
        </meting-js>
    </div>
</div>

<script src="/libs/aplayer/APlayer.min.js"></script>
<script src="/libs/aplayer/Meting.min.js"></script>

    

    <div class="container row center-align"
         style="margin-bottom: 15px !important;">
        <div class="col s12 m8 l8 copy-right">
            Copyright&nbsp;&copy;
            
                <span id="year">2021-2023</span>
            
            <a href="/about" target="_blank">Chen qinxiong</a>
            |&nbsp;Powered by&nbsp;<a href="https://hexo.io/" target="_blank">Hexo</a>
            |&nbsp;Theme&nbsp;<a href="https://github.com/blinkfox/hexo-theme-matery" target="_blank">Matery</a>
            <br>
            
            
            
                
            
            
                <span id="busuanzi_container_site_pv">
                &nbsp;|&nbsp;<i class="far fa-eye"></i>&nbsp;æ€»è®¿é—®é‡:&nbsp;
                    <span id="busuanzi_value_site_pv" class="white-color"></span>
            </span>
            
            
                <span id="busuanzi_container_site_uv">
                &nbsp;|&nbsp;<i class="fas fa-users"></i>&nbsp;æ€»è®¿é—®äººæ•°:&nbsp;
                    <span id="busuanzi_value_site_uv" class="white-color"></span>
            </span>
            
            <br>

            <!-- è¿è¡Œå¤©æ•°æé†’. -->
            
                <span id="sitetime"> Loading ...</span>
                <script>
                    var calcSiteTime = function () {
                        var seconds = 1000;
                        var minutes = seconds * 60;
                        var hours = minutes * 60;
                        var days = hours * 24;
                        var years = days * 365;
                        var today = new Date();
                        var startYear = "2021";
                        var startMonth = "6";
                        var startDate = "28";
                        var startHour = "0";
                        var startMinute = "0";
                        var startSecond = "0";
                        var todayYear = today.getFullYear();
                        var todayMonth = today.getMonth() + 1;
                        var todayDate = today.getDate();
                        var todayHour = today.getHours();
                        var todayMinute = today.getMinutes();
                        var todaySecond = today.getSeconds();
                        var t1 = Date.UTC(startYear, startMonth, startDate, startHour, startMinute, startSecond);
                        var t2 = Date.UTC(todayYear, todayMonth, todayDate, todayHour, todayMinute, todaySecond);
                        var diff = t2 - t1;
                        var diffYears = Math.floor(diff / years);
                        var diffDays = Math.floor((diff / days) - diffYears * 365);

                        // åŒºåˆ†æ˜¯å¦æœ‰å¹´ä»½.
                        var language = 'zh-CN';
                        if (startYear === String(todayYear)) {
                            document.getElementById("year").innerHTML = todayYear;
                            var daysTip = 'This site has been running for ' + diffDays + ' days';
                            if (language === 'zh-CN') {
                                daysTip = 'æœ¬ç«™å·²è¿è¡Œ ' + diffDays + ' å¤©';
                            } else if (language === 'zh-HK') {
                                daysTip = 'æœ¬ç«™å·²é‹è¡Œ ' + diffDays + ' å¤©';
                            }
                            document.getElementById("sitetime").innerHTML = daysTip;
                        } else {
                            document.getElementById("year").innerHTML = startYear + " - " + todayYear;
                            var yearsAndDaysTip = 'This site has been running for ' + diffYears + ' years and '
                                + diffDays + ' days';
                            if (language === 'zh-CN') {
                                yearsAndDaysTip = 'æœ¬ç«™å·²è¿è¡Œ ' + diffYears + ' å¹´ ' + diffDays + ' å¤©';
                            } else if (language === 'zh-HK') {
                                yearsAndDaysTip = 'æœ¬ç«™å·²é‹è¡Œ ' + diffYears + ' å¹´ ' + diffDays + ' å¤©';
                            }
                            document.getElementById("sitetime").innerHTML = yearsAndDaysTip;
                        }
                    }

                    calcSiteTime();
                </script>
            
            <br>
            
        </div>
        <div class="col s12 m4 l4 social-link social-statis">
    <a href="https://github.com/cqx010113" class="tooltipped" target="_blank" data-tooltip="è®¿é—®æˆ‘çš„GitHub" data-position="top" data-delay="50">
        <i class="fab fa-github"></i>
    </a>



    <a href="mailto:cqx010113@163.com" class="tooltipped" target="_blank" data-tooltip="é‚®ä»¶è”ç³»æˆ‘" data-position="top" data-delay="50">
        <i class="fas fa-envelope-open"></i>
    </a>







    <a href="tencent://AddContact/?fromId=50&fromSubId=1&subcmd=all&uin=1957164010" class="tooltipped" target="_blank" data-tooltip="QQè”ç³»æˆ‘: 1957164010" data-position="top" data-delay="50">
        <i class="fab fa-qq"></i>
    </a>







</div>
    </div>
</footer>

<div class="progress-bar"></div>


    <!-- æœç´¢é®ç½©æ¡† -->
<div id="searchModal" class="modal">
    <div class="modal-content">
        <div class="search-header">
            <span class="title"><i class="fas fa-search"></i>&nbsp;&nbsp;æœç´¢</span>
            <input type="search" id="searchInput" name="s" placeholder="è¯·è¾“å…¥æœç´¢çš„å…³é”®å­—"
                   class="search-input">
        </div>
        <div id="searchResult"></div>
    </div>
</div>

<script type="text/javascript">
$(function () {
    var searchFunc = function (path, search_id, content_id) {
        'use strict';
        $.ajax({
            url: path,
            dataType: "xml",
            success: function (xmlResponse) {
                // get the contents from search data
                var datas = $("entry", xmlResponse).map(function () {
                    return {
                        title: $("title", this).text(),
                        content: $("content", this).text(),
                        url: $("url", this).text()
                    };
                }).get();
                var $input = document.getElementById(search_id);
                var $resultContent = document.getElementById(content_id);
                $input.addEventListener('input', function () {
                    var str = '<ul class=\"search-result-list\">';
                    var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
                    $resultContent.innerHTML = "";
                    if (this.value.trim().length <= 0) {
                        return;
                    }
                    // perform local searching
                    datas.forEach(function (data) {
                        var isMatch = true;
                        var data_title = data.title.trim().toLowerCase();
                        var data_content = data.content.trim().replace(/<[^>]+>/g, "").toLowerCase();
                        var data_url = data.url;
                        data_url = data_url.indexOf('/') === 0 ? data.url : '/' + data_url;
                        var index_title = -1;
                        var index_content = -1;
                        var first_occur = -1;
                        // only match artiles with not empty titles and contents
                        if (data_title !== '' && data_content !== '') {
                            keywords.forEach(function (keyword, i) {
                                index_title = data_title.indexOf(keyword);
                                index_content = data_content.indexOf(keyword);
                                if (index_title < 0 && index_content < 0) {
                                    isMatch = false;
                                } else {
                                    if (index_content < 0) {
                                        index_content = 0;
                                    }
                                    if (i === 0) {
                                        first_occur = index_content;
                                    }
                                }
                            });
                        }
                        // show search results
                        if (isMatch) {
                            str += "<li><a href='" + data_url + "' class='search-result-title'>" + data_title + "</a>";
                            var content = data.content.trim().replace(/<[^>]+>/g, "");
                            if (first_occur >= 0) {
                                // cut out 100 characters
                                var start = first_occur - 20;
                                var end = first_occur + 80;
                                if (start < 0) {
                                    start = 0;
                                }
                                if (start === 0) {
                                    end = 100;
                                }
                                if (end > content.length) {
                                    end = content.length;
                                }
                                var match_content = content.substr(start, end);
                                // highlight all keywords
                                keywords.forEach(function (keyword) {
                                    var regS = new RegExp(keyword, "gi");
                                    match_content = match_content.replace(regS, "<em class=\"search-keyword\">" + keyword + "</em>");
                                });

                                str += "<p class=\"search-result\">" + match_content + "...</p>"
                            }
                            str += "</li>";
                        }
                    });
                    str += "</ul>";
                    $resultContent.innerHTML = str;
                });
            }
        });
    };

    searchFunc('/search.xml', 'searchInput', 'searchResult');
});
</script>

    <!-- å›åˆ°é¡¶éƒ¨æŒ‰é’® -->
<div id="backTop" class="top-scroll">
    <a class="btn-floating btn-large waves-effect waves-light" href="#!">
        <i class="fas fa-arrow-up"></i>
    </a>
</div>


    <script src="/libs/materialize/materialize.min.js"></script>
    <script src="/libs/masonry/masonry.pkgd.min.js"></script>
    <script src="/libs/aos/aos.js"></script>
    <script src="/libs/scrollprogress/scrollProgress.min.js"></script>
    <script src="/libs/lightGallery/js/lightgallery-all.min.js"></script>
    <script src="/js/matery.js"></script>

    

    
        
        <script type="text/javascript">
            // åªåœ¨æ¡Œé¢ç‰ˆç½‘é¡µå¯ç”¨ç‰¹æ•ˆ
            var windowWidth = $(window).width();
            if (windowWidth > 768) {
                document.write('<script type="text/javascript" src="/libs/others/sakura.js"><\/script>');
            }
        </script>
    

    <!-- é›ªèŠ±ç‰¹æ•ˆ -->
    

    <!-- é¼ æ ‡æ˜Ÿæ˜Ÿç‰¹æ•ˆ -->
     
        <script type="text/javascript">
            // åªåœ¨æ¡Œé¢ç‰ˆç½‘é¡µå¯ç”¨ç‰¹æ•ˆ
            var windowWidth = $(window).width();
            if (windowWidth > 768) {
                document.write('<script type="text/javascript" src="/libs/others/star.js"><\/script>');
            }
        </script>
    

     
        <script src="https://ssl.captcha.qq.com/TCaptcha.js"></script>
        <script src="/libs/others/TencentCaptcha.js"></script>
        <button id="TencentCaptcha" data-appid="xxxxxxxxxx" data-cbfn="callback" type="button" hidden></button>
    

    <!-- Baidu Analytics -->

    <!-- Baidu Push -->

<script>
    (function () {
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
            bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        } else {
            bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
    })();
</script>

    
    <script src="/libs/others/clicklove.js" async="async"></script>
    
    
    <script async src="/libs/others/busuanzi.pure.mini.js"></script>
    

    

    

    <!--è…¾è®¯å…”å°å·¢-->
    
    

    

    
    <script type="text/javascript" src="/libs/background/ribbon-dynamic.js" async="async"></script>
    

    
    <script src="/libs/instantpage/instantpage.js" type="module"></script>
    

<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"/live2dw/assets/haruto.model.json"},"display":{"position":"right","width":150,"height":190,"hOffset":50,"vOffset":-5},"mobile":{"show":false,"scale":0.5},"react":{"opacityDefault":0.7,"opacityOnHover":0.8},"log":false});</script></body>

</html>
